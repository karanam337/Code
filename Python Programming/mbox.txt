From java-user-return-53777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct  1 04:34:38 2012
Return-Path: <java-user-return-53777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CED88DB1A
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  1 Oct 2012 04:34:38 +0000 (UTC)
Received: (qmail 32618 invoked by uid 500); 1 Oct 2012 04:34:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32419 invoked by uid 500); 1 Oct 2012 04:34:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32385 invoked by uid 99); 1 Oct 2012 04:34:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Oct 2012 04:34:35 +0000
X-ASF-Spam-Status: No, hits=1.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of zhoucheng2008@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qc0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Oct 2012 04:34:28 +0000
Received: by qcon41 with SMTP id n41so4561695qco.35
        for <java-user@lucene.apache.org>; Sun, 30 Sep 2012 21:34:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=a7IPfvG2Zq4VIUoTw703kn6UdVdKl+x3VQux9nQBebs=;
        b=NlRTumaWDtCTxBOpgvcwNXgECUXep2cyMbLZIZXeRGM1tXoh0kuEdKLBfQH8F7P+/E
         ELHqo+3mcj5gQvE7MXzrUoUW6VRXlKvi+/TQgIC+J3lKgYmKBp7IMc2soylRa10tAG5w
         R7rwqOYJIl/naXB9fHpdo0ktIpRtEtS2PWXF8ym5S4c6gaRvbkD8pxmdDDj2dMgzNNU+
         RNkw8w66X3BQML8545a8qBuEAEVtkjMj0YqMK2BKldMA45IlS5mMHdJs6TTL4tXGZQau
         77JMSF8WUfYBnS7cgsCW3Yhs9IRPXyVD/io8gc38/CfcATDxaIvOi5WjePnvRpFKFZHU
         aM0g==
MIME-Version: 1.0
Received: by 10.229.137.68 with SMTP id v4mr9467774qct.51.1349066047723; Sun,
 30 Sep 2012 21:34:07 -0700 (PDT)
Received: by 10.49.119.102 with HTTP; Sun, 30 Sep 2012 21:34:07 -0700 (PDT)
In-Reply-To: <CAEY5pxWbwQrkwGfXDqD+=ujZDSs=khP=aUUG_f1XFMFajtPPiA@mail.gmail.com>
References: <CA+huq0DL9ofE_b_ki8hfTEJB2fWc_oJ=2z8kVH5xKC9CbcbTRw@mail.gmail.com>
	<CAEY5pxWbwQrkwGfXDqD+=ujZDSs=khP=aUUG_f1XFMFajtPPiA@mail.gmail.com>
Date: Mon, 1 Oct 2012 12:34:07 +0800
Message-ID: <CA+huq0C+w+kGfbXRHoCMw0KpdbRZBSgVx9TA03tH2t49VyG75g@mail.gmail.com>
Subject: Re: Index size doubles every time when I synchronize the RAM-based
 index with the FD-based index
From: Cheng <zhoucheng2008@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=002354790e588d98aa04caf7ea08
X-Virus-Checked: Checked by ClamAV on apache.org

--002354790e588d98aa04caf7ea08
Content-Type: text/plain; charset=ISO-8859-1

Yes. I build ram indexes from disk and update the ram indexes when new docs
come in (Step 1). When the number of new docs gets to 10,000, I will
persistent the ram indexes to disk (Step 2).

The bigger concern is however the update. I don't know how much ram is
eaten up, but I suppose whenever do the Step 1.

I have about 10 million docs. I use Lucene 3.5.

Thanks.


On Mon, Oct 1, 2012 at 4:02 AM, Ian Lea <ian.lea@gmail.com> wrote:

> Are you loading it from disk, adding loads of docs then writing it
> back to disk?  That would do it.
>
> How many docs in the memory index?  How many on disk?  What version of
> lucene?
>
> --
> Ian.
>
>
> On Fri, Sep 28, 2012 at 1:56 AM, Cheng <zhoucheng2008@gmail.com> wrote:
> > Hi,
> >
> > I have a ram based index which occasionally needs to be persistent with a
> > disk based index. Every time the size doubles which eats up my disk space
> > quickly. Below is the code. Could someone help me?
> >
> > Thanks,
> > Cheng
> >
> > try {
> > IndexWriterConfig iwc = new IndexWriterConfig(ERConstants.version,
> > ERConstants.analyzer);
> >
> > iwc.setOpenMode(OpenMode.CREATE);
> >
> > IndexWriter writer = new IndexWriter(new NIOFSDirectory(new File(
> > indexpath)), iwc);
> > writer.commit();
> >
> > writer.addIndexes(source);
> > writer.close();
> >
> > } catch (IOException e) {
> > e.printStackTrace();
> > }
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--002354790e588d98aa04caf7ea08--

From java-user-return-53778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct  1 05:05:07 2012
Return-Path: <java-user-return-53778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BBA65DB9A
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  1 Oct 2012 05:05:07 +0000 (UTC)
Received: (qmail 91591 invoked by uid 500); 1 Oct 2012 05:05:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91378 invoked by uid 500); 1 Oct 2012 05:05:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91339 invoked by uid 99); 1 Oct 2012 05:05:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Oct 2012 05:05:03 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of vvekselva.gm@gmail.com designates 209.85.210.48 as permitted sender)
Received: from [209.85.210.48] (HELO mail-da0-f48.google.com) (209.85.210.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Oct 2012 05:04:54 +0000
Received: by dadz8 with SMTP id z8so1825472dad.35
        for <java-user@lucene.apache.org>; Sun, 30 Sep 2012 22:04:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding;
        bh=EaFZyZrW7FGJWBqQuXPqpABpsKGbTC7fyUFlzU9SvEE=;
        b=twJvHhkOKp754oXLfLUGTxKcaajlcmMo3qSvYMiUMPGcN5a1B6iDcw7PrSxMZI4jYi
         iPMtYvSX/r6DJyI7GmLtPlONWv4Essd6ubvXaLPJZPZ3hNSv0Hiy1Urrx3VOaG8yVY0e
         BCCOuUXsX1GE2aieVQmKs9oybMHNbH7I0vCixZWQDJN2FhwYMJzhC8JXeuFjYpKGj//c
         c++tO6FJdp5e2Q5sIKVbDDmrbueFgPnxuT1wTeweknt+yfsHq4rkojSYumYUqoSbIEyz
         4jbq34lQaxwoVQ/WDK4mt6Uf6GJdQphB5CMad6780Td100dbtLyuzpBTRizpGuaLC8KW
         cKXw==
Received: by 10.68.213.199 with SMTP id nu7mr38780087pbc.75.1349067873381;
        Sun, 30 Sep 2012 22:04:33 -0700 (PDT)
Received: from [127.0.0.1] ([117.239.96.242])
        by mx.google.com with ESMTPS id te6sm9689927pbc.29.2012.09.30.22.04.31
        (version=SSLv3 cipher=OTHER);
        Sun, 30 Sep 2012 22:04:32 -0700 (PDT)
Message-ID: <5069240F.5000801@gmail.com>
Date: Mon, 01 Oct 2012 10:33:11 +0530
From: Selvakumar <vvekselva.gm@gmail.com>
User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:15.0) Gecko/20120907 Thunderbird/15.0.1
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Lucene Index File Format
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi,

I'm new to Lucene and I reading the docs on Lucene.


I read through the Lucene Index File Format, so to exercise well I tried 
to open the lucene index through a text editor.

The editor opened with the encrypted text. If I open the index directory 
with luke the entire index is opened but the seperate files are not opened.

May I know the encoding format of the index. Is there are any specific 
editors to open the index files such as (.si etc).

I'm using the Lucene 4.0 BETA.

Thanks In Advance.









---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct  1 05:14:42 2012
Return-Path: <java-user-return-53779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2E3ECDBB0
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  1 Oct 2012 05:14:42 +0000 (UTC)
Received: (qmail 11294 invoked by uid 500); 1 Oct 2012 05:14:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11094 invoked by uid 500); 1 Oct 2012 05:14:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11069 invoked by uid 99); 1 Oct 2012 05:14:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Oct 2012 05:14:38 +0000
X-ASF-Spam-Status: No, hits=1.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of parnab.2007@gmail.com designates 209.85.223.176 as permitted sender)
Received: from [209.85.223.176] (HELO mail-ie0-f176.google.com) (209.85.223.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Oct 2012 05:14:31 +0000
Received: by ieak11 with SMTP id k11so13596368iea.35
        for <java-user@lucene.apache.org>; Sun, 30 Sep 2012 22:14:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=2xUm3k98NH3Qx8jKFnk4kZxzxwvAE8rtWmYR2fwVfQs=;
        b=FZGhmNvkvMQrer0QFjZzFmTPIyFp7Ybb2BJk24mTREbDarIk/rOV5pxjpyEvuPFm8L
         ryjkmN6SLEeBnQkTNo1Jyb2Hx2jdQRvF8o0ygXCCoHSQToHh58BVGSbt2FxW+4f4/S/7
         ysq87+UOcAKyNRjbmtTTqBSV5ZKRiLWB0mQSdLInU9P/t+qfJtEAAfiDe0wj5Q1a4haN
         Jf5JRsHxbQtgRUQS22o6DLo6PwOn3BCb3ti2kN9nBZakBF3KNu09qE3TvzgffUbnc0Aj
         c+eZT4DiiMnX5qnnAxMc0IGADndpxzS/+1JPb3AOILaZlVLxB5gUj84ecMGqEu1GGL6Y
         mIlw==
MIME-Version: 1.0
Received: by 10.50.222.162 with SMTP id qn2mr4683332igc.46.1349068450905; Sun,
 30 Sep 2012 22:14:10 -0700 (PDT)
Received: by 10.50.106.228 with HTTP; Sun, 30 Sep 2012 22:14:10 -0700 (PDT)
In-Reply-To: <5069240F.5000801@gmail.com>
References: <5069240F.5000801@gmail.com>
Date: Mon, 1 Oct 2012 10:44:10 +0530
Message-ID: <CAMOErykff2TWcJC2aPRSAbdjDqxjPdj0jVDKU5+DWxAh=FRtPw@mail.gmail.com>
Subject: Re: Lucene Index File Format
From: parnab kumar <parnab.2007@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=14dae9340fbfcb401904caf87996

--14dae9340fbfcb401904caf87996
Content-Type: text/plain; charset=ISO-8859-1

Hi,

             Use IndexReader instead . You can loop through the index and
read one document at a time .

Thanks,
Parnab

On Mon, Oct 1, 2012 at 10:33 AM, Selvakumar <vvekselva.gm@gmail.com> wrote:

> Hi,
>
> I'm new to Lucene and I reading the docs on Lucene.
>
>
> I read through the Lucene Index File Format, so to exercise well I tried
> to open the lucene index through a text editor.
>
> The editor opened with the encrypted text. If I open the index directory
> with luke the entire index is opened but the seperate files are not opened.
>
> May I know the encoding format of the index. Is there are any specific
> editors to open the index files such as (.si etc).
>
> I'm using the Lucene 4.0 BETA.
>
> Thanks In Advance.
>
>
>
>
>
>
>
>
>
> ------------------------------**------------------------------**---------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.**apache.org<java-user-unsubscribe@lucene.apache.org>
> For additional commands, e-mail: java-user-help@lucene.apache.**org<java-user-help@lucene.apache.org>
>
>

--14dae9340fbfcb401904caf87996--

From java-user-return-53780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct  1 05:18:00 2012
Return-Path: <java-user-return-53780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D17ACDBB8
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  1 Oct 2012 05:18:00 +0000 (UTC)
Received: (qmail 18018 invoked by uid 500); 1 Oct 2012 05:17:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17843 invoked by uid 500); 1 Oct 2012 05:17:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17826 invoked by uid 99); 1 Oct 2012 05:17:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Oct 2012 05:17:57 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of vvekselva.gm@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pb0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Oct 2012 05:17:49 +0000
Received: by pbcwy7 with SMTP id wy7so7697737pbc.35
        for <java-user@lucene.apache.org>; Sun, 30 Sep 2012 22:17:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        bh=dK8OYtIh1ThSUHGblvrZ7VV1K1fp4giSw0hp/f89Iyk=;
        b=T1YPD24snva/qwfmJfDCq3Mjb6VBNxc/rAQCWqkic6GRursaKWmVgYHCK3PwtZILjY
         3zNa5CY6/sLr7DkMCN4rmNwC+i6jYJnG1excDdk5sfaB6F7Ph9PI9DhCJpYYR/a3blhm
         cdr4ZY3oYmTNgLE23K1zGgPyhQgWe1SiOQxaEkin7udErevWYTipQrE4Gasf0gINIHuP
         6upjPx/B65c3dkOJkalWjTKjxfrCAVFImvrflZXV9MMuapKbs90xUvktTRVc1NCJzgOk
         AMsgTufZp4n3uspar+lpkMGnT3I6QGvRP0HXRvUtkgjOFEOsEIJjZWscL/ZP8jbwi+1g
         1QJg==
Received: by 10.66.90.38 with SMTP id bt6mr33967231pab.53.1349068648211;
        Sun, 30 Sep 2012 22:17:28 -0700 (PDT)
Received: from [127.0.0.1] ([117.239.96.242])
        by mx.google.com with ESMTPS id pi1sm9712862pbb.7.2012.09.30.22.17.25
        (version=SSLv3 cipher=OTHER);
        Sun, 30 Sep 2012 22:17:27 -0700 (PDT)
Message-ID: <50692717.1060005@gmail.com>
Date: Mon, 01 Oct 2012 10:46:07 +0530
From: Selvakumar <vvekselva.gm@gmail.com>
User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:15.0) Gecko/20120907 Thunderbird/15.0.1
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene Index File Format
References: <5069240F.5000801@gmail.com> <CAMOErykff2TWcJC2aPRSAbdjDqxjPdj0jVDKU5+DWxAh=FRtPw@mail.gmail.com>
In-Reply-To: <CAMOErykff2TWcJC2aPRSAbdjDqxjPdj0jVDKU5+DWxAh=FRtPw@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi Pranab Kumar,

I'm not looking for reading the documents through IndexReader.
I just want to know how does lucene persists its data in the index.

I just want to learn about the metadata and the meta-objects of lucene 
index.




On 10/1/2012 10:44 AM, parnab kumar wrote:
> Hi,
>
>               Use IndexReader instead . You can loop through the index and
> read one document at a time .
>
> Thanks,
> Parnab
>
> On Mon, Oct 1, 2012 at 10:33 AM, Selvakumar <vvekselva.gm@gmail.com> wrote:
>
>> Hi,
>>
>> I'm new to Lucene and I reading the docs on Lucene.
>>
>>
>> I read through the Lucene Index File Format, so to exercise well I tried
>> to open the lucene index through a text editor.
>>
>> The editor opened with the encrypted text. If I open the index directory
>> with luke the entire index is opened but the seperate files are not opened.
>>
>> May I know the encoding format of the index. Is there are any specific
>> editors to open the index files such as (.si etc).
>>
>> I'm using the Lucene 4.0 BETA.
>>
>> Thanks In Advance.
>>
>>
>>
>>
>>
>>
>>
>>
>>
>> ------------------------------**------------------------------**---------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.**apache.org<java-user-unsubscribe@lucene.apache.org>
>> For additional commands, e-mail: java-user-help@lucene.apache.**org<java-user-help@lucene.apache.org>
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct  1 10:33:37 2012
Return-Path: <java-user-return-53781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 26D00DD91
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  1 Oct 2012 10:33:37 +0000 (UTC)
Received: (qmail 8565 invoked by uid 500); 1 Oct 2012 10:33:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8155 invoked by uid 500); 1 Oct 2012 10:33:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8112 invoked by uid 99); 1 Oct 2012 10:33:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Oct 2012 10:33:29 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.160.48] (HELO mail-pb0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Oct 2012 10:33:23 +0000
Received: by pbcwy7 with SMTP id wy7so7971561pbc.35
        for <java-user@lucene.apache.org>; Mon, 01 Oct 2012 03:33:01 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:x-gm-message-state;
        bh=XY3J4WVFgKjKR5VSDBxv7tgx9N36u06y+82QBOrOmmQ=;
        b=YU69sMER7NY/tenkcz8Gq2qvSBlVRNlCN1oOOjcN5ehyuJcafT94yLnrJj9WPtJXyV
         WE/PKop1pmmSDe12O/xqf41uYAdjlgoao/KrtzQ/FwU6/k1Vk0KOSK8Wf+8PMk9C/RKc
         r8ABjt5WWXHIR9SFGMCGUXUjEG4413S2SwAOh1rsDKczcQyD+iBcH9gm5i3b20v951cU
         rBByfrVbbFSGrqUyl//Nch6LS2d0Pmvw9h+zAMs34g7hQDS0coNgra/CfLudxAjntTOA
         ocZUVEt98rPR11P2+dA3WRKGXZFUhqNmhwMd0trjQ7PVZ7gjvebo/6C+sB+9bqSDoXvv
         n7uQ==
Received: by 10.66.79.69 with SMTP id h5mr25297807pax.12.1349087581254; Mon,
 01 Oct 2012 03:33:01 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.68.0.33 with HTTP; Mon, 1 Oct 2012 03:32:41 -0700 (PDT)
In-Reply-To: <50692717.1060005@gmail.com>
References: <5069240F.5000801@gmail.com> <CAMOErykff2TWcJC2aPRSAbdjDqxjPdj0jVDKU5+DWxAh=FRtPw@mail.gmail.com>
 <50692717.1060005@gmail.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Mon, 1 Oct 2012 06:32:41 -0400
Message-ID: <CAL8PwkbphcwA95+8ijTmBwosT36L510cPri1EzU7z6ZLwjXfWw@mail.gmail.com>
Subject: Re: Lucene Index File Format
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQmay01CzxrXvAYDcF4XXdjXf2al/efi0mr+I52QNAdywLu3oZxbAzQBYDJlTA811cu9zvjT

See the javadocs for each part of the Lucene40Codec: each class
details its format.

Mike McCandless

http://blog.mikemccandless.com

On Mon, Oct 1, 2012 at 1:16 AM, Selvakumar <vvekselva.gm@gmail.com> wrote:
> Hi Pranab Kumar,
>
> I'm not looking for reading the documents through IndexReader.
> I just want to know how does lucene persists its data in the index.
>
> I just want to learn about the metadata and the meta-objects of lucene
> index.
>
>
>
>
>
> On 10/1/2012 10:44 AM, parnab kumar wrote:
>>
>> Hi,
>>
>>               Use IndexReader instead . You can loop through the index and
>> read one document at a time .
>>
>> Thanks,
>> Parnab
>>
>> On Mon, Oct 1, 2012 at 10:33 AM, Selvakumar <vvekselva.gm@gmail.com>
>> wrote:
>>
>>> Hi,
>>>
>>> I'm new to Lucene and I reading the docs on Lucene.
>>>
>>>
>>> I read through the Lucene Index File Format, so to exercise well I tried
>>> to open the lucene index through a text editor.
>>>
>>> The editor opened with the encrypted text. If I open the index directory
>>> with luke the entire index is opened but the seperate files are not
>>> opened.
>>>
>>> May I know the encoding format of the index. Is there are any specific
>>> editors to open the index files such as (.si etc).
>>>
>>> I'm using the Lucene 4.0 BETA.
>>>
>>> Thanks In Advance.
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>> ------------------------------**------------------------------**---------
>>> To unsubscribe, e-mail:
>>> java-user-unsubscribe@lucene.**apache.org<java-user-unsubscribe@lucene.apache.org>
>>> For additional commands, e-mail:
>>> java-user-help@lucene.apache.**org<java-user-help@lucene.apache.org>
>>>
>>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct  1 11:45:11 2012
Return-Path: <java-user-return-53782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1427EDEC2
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  1 Oct 2012 11:45:11 +0000 (UTC)
Received: (qmail 86126 invoked by uid 500); 1 Oct 2012 11:45:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86022 invoked by uid 500); 1 Oct 2012 11:45:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85990 invoked by uid 99); 1 Oct 2012 11:45:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Oct 2012 11:45:07 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-ob0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Oct 2012 11:45:00 +0000
Received: by obhx4 with SMTP id x4so6382644obh.35
        for <java-user@lucene.apache.org>; Mon, 01 Oct 2012 04:44:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=aTyZhRQXt3CofNaE3Aps27RRukL1IkWmEhxmq6Z9Lv8=;
        b=GCdz/Y3LNVS+NA0qAmkiquxT7S6fQPdDrqbPwi6/5sjdxHfo4k8I7yvY0e6zWqxsJF
         zuYx78hIoKW5CYp0ii9bCGgdBYHWoJdSPVc52mqzs9rUxoo3NHAWNGMuulWK1NsqvV5d
         fuAfrK9cvExGEL3VJhe/zCFooe0zNWJbSnEqNkASu7PJMSIskijQ3UgRJspG26YiTAfG
         4lbH4MH9IfwlBmi71B65dNNAdQ8aldDVmyraSOY2T6WeX8dMJw214EackLid2uubmag8
         tJe+RLs6SwzdKqIIB7vIo72jL/mwELMcIgMpj/JG6oAB65gaCyU/bwitDC3W08v542ee
         O8Ow==
MIME-Version: 1.0
Received: by 10.60.29.134 with SMTP id k6mr11278717oeh.5.1349091879594; Mon,
 01 Oct 2012 04:44:39 -0700 (PDT)
Received: by 10.60.84.39 with HTTP; Mon, 1 Oct 2012 04:44:39 -0700 (PDT)
In-Reply-To: <CAMOEryn4=BHs-cgrmbkCmWcEBaE=QrMrYogahdeB_YP-GwqkRg@mail.gmail.com>
References: <CAMOEryms5m5JB52-bXeX5v6XD=7Bopmvbp50ZBkKAx-GcC1=0Q@mail.gmail.com>
	<CAN4YXvenb8prRzhOzVLkjCDpkY+4MY5-bRHVV=46Fp2K_OHN_w@mail.gmail.com>
	<CAMOEryn4=BHs-cgrmbkCmWcEBaE=QrMrYogahdeB_YP-GwqkRg@mail.gmail.com>
Date: Mon, 1 Oct 2012 07:44:39 -0400
Message-ID: <CAN4YXvcGXxd2HMgZLzywnqk5EDqj9S5OdRi98EDqsvyFG1EP5g@mail.gmail.com>
Subject: Re: Variable term weighting while indexing
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Here's a good explanation....

http://searchhub.org/dev/2009/08/05/getting-started-with-payloads/

Best
Erick

On Sun, Sep 30, 2012 at 8:02 AM, parnab kumar <parnab.2007@gmail.com> wrote:
> Hi Erick,
>           Can you please share your thoughts on the following :
>                  Since lucene by default does vector space scoring , the
> weight component for a term from the document is nothing but its term
> frequency . Now if i have an associated payload weight for that term , when
> the final scoring takes place , will now the weight component of the term
> be the payload weight .
>                            Is the above intuition correct ?
>
> Thanks,
> Parnab
>
> On Sun, Sep 30, 2012 at 2:13 AM, Erick Erickson <erickerickson@gmail.com>wrote:
>
>> Yeah, payloads are probably what you want, otherwise the words are
>> indistinguishable.
>>
>> Best
>> Erick
>>
>> On Sat, Sep 29, 2012 at 12:23 PM, parnab kumar <parnab.2007@gmail.com>
>> wrote:
>> > Hi All,
>> >
>> >            I have an algorithm by which i measure the importance of a
>> term
>> > in a document . While indexing i want to store weight with respect to
>> that
>> > term for the document. Any idea how to do it . Will the payload feature
>> > help to address the problem
>> >
>> > Thanks,
>> > Parnab
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct  1 12:59:48 2012
Return-Path: <java-user-return-53783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4BEB8D0B0
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  1 Oct 2012 12:59:48 +0000 (UTC)
Received: (qmail 5078 invoked by uid 500); 1 Oct 2012 12:59:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4649 invoked by uid 500); 1 Oct 2012 12:59:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4608 invoked by uid 99); 1 Oct 2012 12:59:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Oct 2012 12:59:43 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jochenhebbrecht@gmail.com designates 209.85.220.176 as permitted sender)
Received: from [209.85.220.176] (HELO mail-vc0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Oct 2012 12:59:36 +0000
Received: by vcbgb22 with SMTP id gb22so6995875vcb.35
        for <java-user@lucene.apache.org>; Mon, 01 Oct 2012 05:59:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=fwNlJXQsQX/NjU7pW5RWAWt9NJ9rBKySjXS0ngidc4M=;
        b=Rr+EDL6Kf6GyeQ1wXKxEQdcJ1OJJE8Ap7ZwcsyW01zcP/FKdofM0DyZh/zmNAw5UF0
         R5U5A2UXrwi9IwP6G73OOpJ/PYs1Tqkx+pLrwD6H62N+4qarQFJadx0DWPsv4tr0dhHS
         UpRP3EdKZk3D4jblvGThNAeUAO2POBdluzhU0IwDE/uOoCO6ubX0WHrZyzDH8JZz6LcU
         EC0nppM/EyFzbB4QgDNnSwRTdOG1cVl49CiKGZtk0OlqGwZ4Ugpps0qoquWtCgIYWszu
         zeYVEkiXCt8Ru2pKSry7V14Xud5QPVn0VcaXKY/yphloYZQd3pysmiK++EVxsKREkyt1
         6eUA==
MIME-Version: 1.0
Received: by 10.58.4.131 with SMTP id k3mr8335946vek.54.1349096356003; Mon, 01
 Oct 2012 05:59:16 -0700 (PDT)
Received: by 10.220.129.11 with HTTP; Mon, 1 Oct 2012 05:59:15 -0700 (PDT)
Date: Mon, 1 Oct 2012 14:59:15 +0200
Message-ID: <CAJcVXkvS8wg8uqRoU5PjmbAAAZB5j6hEH79Jwtu855MzW945-Q@mail.gmail.com>
Subject: Searching for a search string containing a literal slash doesn't work
 with QueryParser
From: Jochen Hebbrecht <jochenhebbrecht@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=047d7b62461e113fec04cafef900
X-Virus-Checked: Checked by ClamAV on apache.org

--047d7b62461e113fec04cafef900
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I'm currently trying to search on the following search string in my Lucene
index: "2012/0.124.323".
The java code to search for ('value' is my search string)

----
QueryParser queryParser = new QueryParser(Version.LUCENE_36, field, new
StandardAnalyzer(Version.LUCENE_36));
queryParser.setAllowLeadingWildcard(true);
return queryParser.parse(value);
----

This returns a query result: "2012" "0.124.323". QueryParser is replacing
the forward slash by a space.
I tried escaping the "/" with a backslash "\", but this doesn't work either.

Maybe required to fully understand my scenario. I have the following import
XML:

---
...
<TEXT l="963" t="826" r="1391" b="870">Vervaldag </TEXT>
<TEXT l="963" t="826" r="1391" b="870">17/07/12</TEXT>
<TEXT l="2100" t="833" r="2275" b="871">09/07/12</TEXT>
<TEXT l="42" t="871" r="338" b="907">2012/0.124.323</TEXT>
<TEXT l="1478" t="938" r="1673" b="978">Kapitaals</TEXT>
...
---

I get all TEXT values with an XPath expression and I index them as:

---
XPathExpression expr = xpath.compile("//TEXT");
Object result = expr.evaluate(document, XPathConstants.NODESET);
NodeList nodes = (NodeList) result;
for (int i = 0; i < nodes.getLength(); i++) {
    doc.add(new org.apache.lucene.document.Field("IMAGE",
nodes.item(i).getFirstChild().getNodeValue(), Store.NO, Index.ANALYZED));
}
---

I'm using the StandardAnalyzer.

What is the best way to solve my issue? Do I need to switch from Analyzer?
Do I have to use something else then QueryParser? ...
I also want to support searching on 2012/0.*, so I cannot only use
TermQuery ...

Kind regards,
Jochen

--047d7b62461e113fec04cafef900--

From java-user-return-53784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct  1 13:59:19 2012
Return-Path: <java-user-return-53784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 35793D217
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  1 Oct 2012 13:59:19 +0000 (UTC)
Received: (qmail 2058 invoked by uid 500); 1 Oct 2012 13:59:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1997 invoked by uid 500); 1 Oct 2012 13:59:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1986 invoked by uid 99); 1 Oct 2012 13:59:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Oct 2012 13:59:16 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of SRS0=lWm+a2=H6=basetechnology.com=jack@yourhostingaccount.com designates 65.254.253.37 as permitted sender)
Received: from [65.254.253.37] (HELO mailout04.yourhostingaccount.com) (65.254.253.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Oct 2012 13:59:06 +0000
Received: from mailscan05.yourhostingaccount.com ([10.1.15.5] helo=mailscan05.yourhostingaccount.com)
	by mailout04.yourhostingaccount.com with esmtp (Exim)
	id 1TIgWE-0004Mg-2a
	for java-user@lucene.apache.org; Mon, 01 Oct 2012 09:58:46 -0400
Received: from impout01.yourhostingaccount.com ([10.1.55.1] helo=impout01.yourhostingaccount.com)
	by mailscan05.yourhostingaccount.com with esmtp (Exim)
	id 1TIgWE-00055U-0D
	for java-user@lucene.apache.org; Mon, 01 Oct 2012 09:58:46 -0400
Received: from authsmtp14.yourhostingaccount.com ([10.1.18.14])
	by impout01.yourhostingaccount.com with NO UCE
	id 5pyl1k0080JCsUy01pylRg; Mon, 01 Oct 2012 09:58:45 -0400
X-Authority-Analysis: v=2.0 cv=IICA+3TG c=1 sm=1
 a=PHQHB1QSaEYgcU2qnZkzMw==:17 a=aQzbgH187woA:10 a=Xf0fIZOslg4A:10
 a=3jZET7lWBKwA:10 a=8nJEP1OIZ-IA:10 a=jvYhGVW7AAAA:8 a=KFT7qEhYyYIA:10
 a=mV9VRH-2AAAA:8 a=RdC2DGFbuCMbhJzMBtwA:9 a=wPNLvfGTeEIA:10
 a=rcbtdQGuPFtN9R+ZKREELQ==:117
X-EN-OrigOutIP: 10.1.18.14
X-EN-IMPSID: 5pyl1k0080JCsUy01pylRg
Received: from 207-237-102-116.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com ([207.237.102.116] helo=JackKrupansky)
	by authsmtp14.yourhostingaccount.com with esmtpa (Exim)
	id 1TIgWD-0001a9-Jt
	for java-user@lucene.apache.org; Mon, 01 Oct 2012 09:58:45 -0400
Message-ID: <23719B3684194B6A8C67DFBD43A03C56@JackKrupansky>
From: "Jack Krupansky" <jack@basetechnology.com>
To: <java-user@lucene.apache.org>
References: <CAJcVXkvS8wg8uqRoU5PjmbAAAZB5j6hEH79Jwtu855MzW945-Q@mail.gmail.com>
In-Reply-To: <CAJcVXkvS8wg8uqRoU5PjmbAAAZB5j6hEH79Jwtu855MzW945-Q@mail.gmail.com>
Subject: Re: Searching for a search string containing a literal slash doesn't work with QueryParser
Date: Mon, 1 Oct 2012 09:58:44 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3555.308
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3555.308
X-EN-UserInfo: e0a4b55451ed9f27313ebf02e3d4348d:fc4a93e1349e680c52bdd723c0ab3ef6
X-EN-AuthUser: jack@basetechnology.com
Sender:  "Jack Krupansky" <jack@basetechnology.com>
X-EN-OrigIP: 207.237.102.116
X-EN-OrigHost: 207-237-102-116.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com

The scape merely assures that the slash will not be parsed as query syntax 
and will be passed directly to the analyzer, but the standard analyzer will 
in fact always remove it. Maybe you want the white space analyzer or keyword 
analyzer (no characters removed.)

-- Jack Krupansky

-----Original Message----- 
From: Jochen Hebbrecht
Sent: Monday, October 01, 2012 8:59 AM
To: java-user@lucene.apache.org
Subject: Searching for a search string containing a literal slash doesn't 
work with QueryParser

Hi,

I'm currently trying to search on the following search string in my Lucene
index: "2012/0.124.323".
The java code to search for ('value' is my search string)

----
QueryParser queryParser = new QueryParser(Version.LUCENE_36, field, new
StandardAnalyzer(Version.LUCENE_36));
queryParser.setAllowLeadingWildcard(true);
return queryParser.parse(value);
----

This returns a query result: "2012" "0.124.323". QueryParser is replacing
the forward slash by a space.
I tried escaping the "/" with a backslash "\", but this doesn't work either.

Maybe required to fully understand my scenario. I have the following import
XML:

---
...
<TEXT l="963" t="826" r="1391" b="870">Vervaldag </TEXT>
<TEXT l="963" t="826" r="1391" b="870">17/07/12</TEXT>
<TEXT l="2100" t="833" r="2275" b="871">09/07/12</TEXT>
<TEXT l="42" t="871" r="338" b="907">2012/0.124.323</TEXT>
<TEXT l="1478" t="938" r="1673" b="978">Kapitaals</TEXT>
...
---

I get all TEXT values with an XPath expression and I index them as:

---
XPathExpression expr = xpath.compile("//TEXT");
Object result = expr.evaluate(document, XPathConstants.NODESET);
NodeList nodes = (NodeList) result;
for (int i = 0; i < nodes.getLength(); i++) {
    doc.add(new org.apache.lucene.document.Field("IMAGE",
nodes.item(i).getFirstChild().getNodeValue(), Store.NO, Index.ANALYZED));
}
---

I'm using the StandardAnalyzer.

What is the best way to solve my issue? Do I need to switch from Analyzer?
Do I have to use something else then QueryParser? ...
I also want to support searching on 2012/0.*, so I cannot only use
TermQuery ...

Kind regards,
Jochen 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct  1 14:02:16 2012
Return-Path: <java-user-return-53785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3325ED25D
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  1 Oct 2012 14:02:16 +0000 (UTC)
Received: (qmail 15735 invoked by uid 500); 1 Oct 2012 14:02:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15689 invoked by uid 500); 1 Oct 2012 14:02:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15680 invoked by uid 99); 1 Oct 2012 14:02:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Oct 2012 14:02:14 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of SRS0=lWm+a2=H6=basetechnology.com=jack@yourhostingaccount.com designates 65.254.253.148 as permitted sender)
Received: from [65.254.253.148] (HELO mailout18.yourhostingaccount.com) (65.254.253.148)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Oct 2012 14:02:05 +0000
Received: from mailscan11.yourhostingaccount.com ([10.1.15.11] helo=mailscan11.yourhostingaccount.com)
	by mailout18.yourhostingaccount.com with esmtp (Exim)
	id 1TIgZ7-0008Rw-Af
	for java-user@lucene.apache.org; Mon, 01 Oct 2012 10:01:45 -0400
Received: from impout01.yourhostingaccount.com ([10.1.55.1] helo=impout01.yourhostingaccount.com)
	by mailscan11.yourhostingaccount.com with esmtp (Exim)
	id 1TIgZ7-0005WJ-3B
	for java-user@lucene.apache.org; Mon, 01 Oct 2012 10:01:45 -0400
Received: from authsmtp16.yourhostingaccount.com ([10.1.18.16])
	by impout01.yourhostingaccount.com with NO UCE
	id 5q1l1k0040LoD9W01q1lhZ; Mon, 01 Oct 2012 10:01:45 -0400
X-Authority-Analysis: v=2.0 cv=IICA+3TG c=1 sm=1
 a=PHQHB1QSaEYgcU2qnZkzMw==:17 a=aQzbgH187woA:10 a=Xf0fIZOslg4A:10
 a=3jZET7lWBKwA:10 a=8nJEP1OIZ-IA:10 a=jvYhGVW7AAAA:8 a=KFT7qEhYyYIA:10
 a=mV9VRH-2AAAA:8 a=RXiOqCtkTrpcCxpGN0sA:9 a=wPNLvfGTeEIA:10
 a=ltXMujfcukYoTVgNOHxvog==:117
X-EN-OrigOutIP: 10.1.18.16
X-EN-IMPSID: 5q1l1k0040LoD9W01q1lhZ
Received: from 207-237-102-116.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com ([207.237.102.116] helo=JackKrupansky)
	by authsmtp16.yourhostingaccount.com with esmtpa (Exim)
	id 1TIgZ5-0007fZ-Hz
	for java-user@lucene.apache.org; Mon, 01 Oct 2012 10:01:43 -0400
Message-ID: <4FB7C08158A448B09E305C1F76DF3261@JackKrupansky>
From: "Jack Krupansky" <jack@basetechnology.com>
To: <java-user@lucene.apache.org>
References: <CAJcVXkvS8wg8uqRoU5PjmbAAAZB5j6hEH79Jwtu855MzW945-Q@mail.gmail.com> <23719B3684194B6A8C67DFBD43A03C56@JackKrupansky>
In-Reply-To: <23719B3684194B6A8C67DFBD43A03C56@JackKrupansky>
Subject: Re: Searching for a search string containing a literal slash doesn't work with QueryParser
Date: Mon, 1 Oct 2012 10:01:42 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3555.308
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3555.308
X-EN-UserInfo: e0a4b55451ed9f27313ebf02e3d4348d:fc4a93e1349e680c52bdd723c0ab3ef6
X-EN-AuthUser: jack@basetechnology.com
Sender:  "Jack Krupansky" <jack@basetechnology.com>
X-EN-OrigIP: 207.237.102.116
X-EN-OrigHost: 207-237-102-116.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com
X-Virus-Checked: Checked by ClamAV on apache.org

That's "The escape merely..."

-- Jack Krupansky

-----Original Message----- 
From: Jack Krupansky
Sent: Monday, October 01, 2012 9:58 AM
To: java-user@lucene.apache.org
Subject: Re: Searching for a search string containing a literal slash 
doesn't work with QueryParser

The scape merely assures that the slash will not be parsed as query syntax
and will be passed directly to the analyzer, but the standard analyzer will
in fact always remove it. Maybe you want the white space analyzer or keyword
analyzer (no characters removed.)

-- Jack Krupansky

-----Original Message----- 
From: Jochen Hebbrecht
Sent: Monday, October 01, 2012 8:59 AM
To: java-user@lucene.apache.org
Subject: Searching for a search string containing a literal slash doesn't
work with QueryParser

Hi,

I'm currently trying to search on the following search string in my Lucene
index: "2012/0.124.323".
The java code to search for ('value' is my search string)

----
QueryParser queryParser = new QueryParser(Version.LUCENE_36, field, new
StandardAnalyzer(Version.LUCENE_36));
queryParser.setAllowLeadingWildcard(true);
return queryParser.parse(value);
----

This returns a query result: "2012" "0.124.323". QueryParser is replacing
the forward slash by a space.
I tried escaping the "/" with a backslash "\", but this doesn't work either.

Maybe required to fully understand my scenario. I have the following import
XML:

---
...
<TEXT l="963" t="826" r="1391" b="870">Vervaldag </TEXT>
<TEXT l="963" t="826" r="1391" b="870">17/07/12</TEXT>
<TEXT l="2100" t="833" r="2275" b="871">09/07/12</TEXT>
<TEXT l="42" t="871" r="338" b="907">2012/0.124.323</TEXT>
<TEXT l="1478" t="938" r="1673" b="978">Kapitaals</TEXT>
...
---

I get all TEXT values with an XPath expression and I index them as:

---
XPathExpression expr = xpath.compile("//TEXT");
Object result = expr.evaluate(document, XPathConstants.NODESET);
NodeList nodes = (NodeList) result;
for (int i = 0; i < nodes.getLength(); i++) {
    doc.add(new org.apache.lucene.document.Field("IMAGE",
nodes.item(i).getFirstChild().getNodeValue(), Store.NO, Index.ANALYZED));
}
---

I'm using the StandardAnalyzer.

What is the best way to solve my issue? Do I need to switch from Analyzer?
Do I have to use something else then QueryParser? ...
I also want to support searching on 2012/0.*, so I cannot only use
TermQuery ...

Kind regards,
Jochen


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct  1 14:34:37 2012
Return-Path: <java-user-return-53786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AE2B6D2A5
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  1 Oct 2012 14:34:37 +0000 (UTC)
Received: (qmail 23317 invoked by uid 500); 1 Oct 2012 14:34:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23262 invoked by uid 500); 1 Oct 2012 14:34:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23254 invoked by uid 99); 1 Oct 2012 14:34:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Oct 2012 14:34:35 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jochenhebbrecht@gmail.com designates 209.85.220.176 as permitted sender)
Received: from [209.85.220.176] (HELO mail-vc0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Oct 2012 14:34:28 +0000
Received: by vcbgb22 with SMTP id gb22so7168783vcb.35
        for <java-user@lucene.apache.org>; Mon, 01 Oct 2012 07:34:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=G6ocz4Rv5PQE+yPe/waeDCT3KarCh/pMq4Wc68Twog0=;
        b=wYhGLK/HVsuobUym3RAiL/A2ax1ndkHWHNnUqxhoomMBTvIOZ2RFvaNu8Aff088kBG
         5R4s2E04iy4uvlYpZK07E+bHjcvbB5ZCzKOxDqvd3HqIVEkkB0LJIa5thHRZPF28N9mx
         k60KP+46f7U67opgc1WeYQ8Ox0CjqOersmr/4ucp+4mS7WBnvbAuOpd4NgMDa5h2cJCJ
         VM1IlS5Duo3kWB2X3PHuqmECFIXP5322mdOez3LXHftyhd+tpCvCsdxGbDhl5F4v7XVO
         NIKFISqJTZAKu93IvEKdbSvhEj/ZXIuhPeJ3fM/ZGmwcF7RYtWGqtcN0tzOQaY6aH1sz
         iKZQ==
MIME-Version: 1.0
Received: by 10.58.125.39 with SMTP id mn7mr8711274veb.37.1349102047922; Mon,
 01 Oct 2012 07:34:07 -0700 (PDT)
Received: by 10.220.129.11 with HTTP; Mon, 1 Oct 2012 07:34:07 -0700 (PDT)
In-Reply-To: <4FB7C08158A448B09E305C1F76DF3261@JackKrupansky>
References: <CAJcVXkvS8wg8uqRoU5PjmbAAAZB5j6hEH79Jwtu855MzW945-Q@mail.gmail.com>
	<23719B3684194B6A8C67DFBD43A03C56@JackKrupansky>
	<4FB7C08158A448B09E305C1F76DF3261@JackKrupansky>
Date: Mon, 1 Oct 2012 16:34:07 +0200
Message-ID: <CAJcVXkus6m=ax=qTYcK+zekQd2o5uYF4racR8RGBX9zAJ++Zog@mail.gmail.com>
Subject: Re: Searching for a search string containing a literal slash doesn't
 work with QueryParser
From: Jochen Hebbrecht <jochenhebbrecht@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=047d7b5db12c550aa504cb004ced

--047d7b5db12c550aa504cb004ced
Content-Type: text/plain; charset=ISO-8859-1

Hi Jack,

I tried analyzing through WhitespaceAnalyzer. Now I can search on my query
string AND I can find my document! Great!
But all my searches are now case sensitive. So when I index a field as
 "JavaOne", I also have to enter in my search word: "JavaOne" and not
"javaone" or "javaOne".

How do you solve this in a proper way? Bringing all characters
toLowerCase() when indexing them?

Jochen


2012/10/1 Jack Krupansky <jack@basetechnology.com>

> That's "The escape merely..."
>
> -- Jack Krupansky
>
> -----Original Message----- From: Jack Krupansky
> Sent: Monday, October 01, 2012 9:58 AM
> To: java-user@lucene.apache.org
> Subject: Re: Searching for a search string containing a literal slash
> doesn't work with QueryParser
>
>
> The scape merely assures that the slash will not be parsed as query syntax
> and will be passed directly to the analyzer, but the standard analyzer will
> in fact always remove it. Maybe you want the white space analyzer or
> keyword
> analyzer (no characters removed.)
>
> -- Jack Krupansky
>
> -----Original Message----- From: Jochen Hebbrecht
> Sent: Monday, October 01, 2012 8:59 AM
> To: java-user@lucene.apache.org
> Subject: Searching for a search string containing a literal slash doesn't
> work with QueryParser
>
> Hi,
>
> I'm currently trying to search on the following search string in my Lucene
> index: "2012/0.124.323".
> The java code to search for ('value' is my search string)
>
> ----
> QueryParser queryParser = new QueryParser(Version.LUCENE_36, field, new
> StandardAnalyzer(Version.**LUCENE_36));
> queryParser.**setAllowLeadingWildcard(true);
> return queryParser.parse(value);
> ----
>
> This returns a query result: "2012" "0.124.323". QueryParser is replacing
> the forward slash by a space.
> I tried escaping the "/" with a backslash "\", but this doesn't work
> either.
>
> Maybe required to fully understand my scenario. I have the following import
> XML:
>
> ---
> ...
> <TEXT l="963" t="826" r="1391" b="870">Vervaldag </TEXT>
> <TEXT l="963" t="826" r="1391" b="870">17/07/12</TEXT>
> <TEXT l="2100" t="833" r="2275" b="871">09/07/12</TEXT>
> <TEXT l="42" t="871" r="338" b="907">2012/0.124.323</TEXT>
> <TEXT l="1478" t="938" r="1673" b="978">Kapitaals</TEXT>
> ...
> ---
>
> I get all TEXT values with an XPath expression and I index them as:
>
> ---
> XPathExpression expr = xpath.compile("//TEXT");
> Object result = expr.evaluate(document, XPathConstants.NODESET);
> NodeList nodes = (NodeList) result;
> for (int i = 0; i < nodes.getLength(); i++) {
>    doc.add(new org.apache.lucene.document.**Field("IMAGE",
> nodes.item(i).getFirstChild().**getNodeValue(), Store.NO,
> Index.ANALYZED));
> }
> ---
>
> I'm using the StandardAnalyzer.
>
> What is the best way to solve my issue? Do I need to switch from Analyzer?
> Do I have to use something else then QueryParser? ...
> I also want to support searching on 2012/0.*, so I cannot only use
> TermQuery ...
>
> Kind regards,
> Jochen
>
>
> ------------------------------**------------------------------**---------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.**apache.org<java-user-unsubscribe@lucene.apache.org>
> For additional commands, e-mail: java-user-help@lucene.apache.**org<java-user-help@lucene.apache.org>
>
> ------------------------------**------------------------------**---------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.**apache.org<java-user-unsubscribe@lucene.apache.org>
> For additional commands, e-mail: java-user-help@lucene.apache.**org<java-user-help@lucene.apache.org>
>
>

--047d7b5db12c550aa504cb004ced--

From java-user-return-53787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct  1 14:39:24 2012
Return-Path: <java-user-return-53787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BDE5BD2D8
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  1 Oct 2012 14:39:24 +0000 (UTC)
Received: (qmail 44657 invoked by uid 500); 1 Oct 2012 14:39:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44592 invoked by uid 500); 1 Oct 2012 14:39:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44582 invoked by uid 99); 1 Oct 2012 14:39:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Oct 2012 14:39:22 +0000
X-ASF-Spam-Status: No, hits=2.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of parnab.2007@gmail.com designates 209.85.223.176 as permitted sender)
Received: from [209.85.223.176] (HELO mail-ie0-f176.google.com) (209.85.223.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Oct 2012 14:39:17 +0000
Received: by ieak11 with SMTP id k11so14681019iea.35
        for <java-user@lucene.apache.org>; Mon, 01 Oct 2012 07:38:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=a0oybORPrs5DFOHbruRD2yYFIuUK8Gss0ntGuTX3nLM=;
        b=Z/Vc8bEDccV4lTMIV8Z8fwTFwKveAwRe27sNvN+TKx1hZVuVWhBJXBp56lf7VfXB4r
         Q049DLEPQgFG+lWwhL73UekA7OCV9vO/REhv+HhitfjNrgKUa+efzGpvSnSuuCVGeesK
         oKa6sdzzNmaF4C0JE+/Xf+bTPa0vvT0lsMZ6mCQ2yCTh/JvBKqIQFmuWa1rpF9ZxhBPD
         B0TKU+EnRdOnSi6wwt50JLJOxnyAH1TGoCi9kaWnMeqasUtiIhUgOerq+KivFX8pUFf/
         Nk7/Je0ZnWwupjcKOYpMLlklKdmxSD9cKELl1RhhCzIbHp1rVH28V4m5l28tRYTFTHYm
         +yqQ==
MIME-Version: 1.0
Received: by 10.50.100.234 with SMTP id fb10mr5032264igb.65.1349102336701;
 Mon, 01 Oct 2012 07:38:56 -0700 (PDT)
Received: by 10.50.106.228 with HTTP; Mon, 1 Oct 2012 07:38:56 -0700 (PDT)
In-Reply-To: <CAN4YXvcGXxd2HMgZLzywnqk5EDqj9S5OdRi98EDqsvyFG1EP5g@mail.gmail.com>
References: <CAMOEryms5m5JB52-bXeX5v6XD=7Bopmvbp50ZBkKAx-GcC1=0Q@mail.gmail.com>
	<CAN4YXvenb8prRzhOzVLkjCDpkY+4MY5-bRHVV=46Fp2K_OHN_w@mail.gmail.com>
	<CAMOEryn4=BHs-cgrmbkCmWcEBaE=QrMrYogahdeB_YP-GwqkRg@mail.gmail.com>
	<CAN4YXvcGXxd2HMgZLzywnqk5EDqj9S5OdRi98EDqsvyFG1EP5g@mail.gmail.com>
Date: Mon, 1 Oct 2012 20:08:56 +0530
Message-ID: <CAMOErykq-bcDCuw2GsiZyUjEN+h68aZ2Lfjq9DprhrdF+mGOUA@mail.gmail.com>
Subject: Re: Variable term weighting while indexing
From: parnab kumar <parnab.2007@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=e89a8f23482d8b75c804cb005d6e
X-Virus-Checked: Checked by ClamAV on apache.org

--e89a8f23482d8b75c804cb005d6e
Content-Type: text/plain; charset=ISO-8859-1

Thanks Erick ,
      I have figured out the underlying principle of working with payloads.

Regards,
Parnab



On Mon, Oct 1, 2012 at 5:14 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> Here's a good explanation....
>
> http://searchhub.org/dev/2009/08/05/getting-started-with-payloads/
>
> Best
> Erick
>
> On Sun, Sep 30, 2012 at 8:02 AM, parnab kumar <parnab.2007@gmail.com>
> wrote:
> > Hi Erick,
> >           Can you please share your thoughts on the following :
> >                  Since lucene by default does vector space scoring , the
> > weight component for a term from the document is nothing but its term
> > frequency . Now if i have an associated payload weight for that term ,
> when
> > the final scoring takes place , will now the weight component of the term
> > be the payload weight .
> >                            Is the above intuition correct ?
> >
> > Thanks,
> > Parnab
> >
> > On Sun, Sep 30, 2012 at 2:13 AM, Erick Erickson <erickerickson@gmail.com
> >wrote:
> >
> >> Yeah, payloads are probably what you want, otherwise the words are
> >> indistinguishable.
> >>
> >> Best
> >> Erick
> >>
> >> On Sat, Sep 29, 2012 at 12:23 PM, parnab kumar <parnab.2007@gmail.com>
> >> wrote:
> >> > Hi All,
> >> >
> >> >            I have an algorithm by which i measure the importance of a
> >> term
> >> > in a document . While indexing i want to store weight with respect to
> >> that
> >> > term for the document. Any idea how to do it . Will the payload
> feature
> >> > help to address the problem
> >> >
> >> > Thanks,
> >> > Parnab
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--e89a8f23482d8b75c804cb005d6e--

From java-user-return-53788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct  1 14:44:53 2012
Return-Path: <java-user-return-53788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 556F8D302
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  1 Oct 2012 14:44:53 +0000 (UTC)
Received: (qmail 63475 invoked by uid 500); 1 Oct 2012 14:44:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63377 invoked by uid 500); 1 Oct 2012 14:44:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63369 invoked by uid 99); 1 Oct 2012 14:44:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Oct 2012 14:44:51 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of SRS0=lWm+a2=H6=basetechnology.com=jack@yourhostingaccount.com designates 65.254.253.148 as permitted sender)
Received: from [65.254.253.148] (HELO mailout18.yourhostingaccount.com) (65.254.253.148)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Oct 2012 14:44:43 +0000
Received: from mailscan05.yourhostingaccount.com ([10.1.15.5] helo=mailscan05.yourhostingaccount.com)
	by mailout18.yourhostingaccount.com with esmtp (Exim)
	id 1TIhEN-00062O-0M
	for java-user@lucene.apache.org; Mon, 01 Oct 2012 10:44:23 -0400
Received: from impout02.yourhostingaccount.com ([10.1.55.2] helo=impout02.yourhostingaccount.com)
	by mailscan05.yourhostingaccount.com with esmtp (Exim)
	id 1TIhEM-0005Ev-2p
	for java-user@lucene.apache.org; Mon, 01 Oct 2012 10:44:22 -0400
Received: from authsmtp12.yourhostingaccount.com ([10.1.18.12])
	by impout02.yourhostingaccount.com with NO UCE
	id 5qkN1k0010FdXoS01qkN8H; Mon, 01 Oct 2012 10:44:22 -0400
X-Authority-Analysis: v=2.0 cv=HIVB5/Rv c=1 sm=1
 a=PHQHB1QSaEYgcU2qnZkzMw==:17 a=aQzbgH187woA:10 a=Xf0fIZOslg4A:10
 a=3jZET7lWBKwA:10 a=8nJEP1OIZ-IA:10 a=jvYhGVW7AAAA:8 a=KFT7qEhYyYIA:10
 a=mV9VRH-2AAAA:8 a=g-wJlV9pr0nyV03HcfkA:9 a=wPNLvfGTeEIA:10 a=EMlJoiak7gQA:10
 a=88iI8knYSJUA:10 a=t1ijpx9AV50gTBtUFlM2vg==:117
X-EN-OrigOutIP: 10.1.18.12
X-EN-IMPSID: 5qkN1k0010FdXoS01qkN8H
Received: from 207-237-102-116.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com ([207.237.102.116] helo=JackKrupansky)
	by authsmtp12.yourhostingaccount.com with esmtpa (Exim)
	id 1TIhEL-00018N-Ss
	for java-user@lucene.apache.org; Mon, 01 Oct 2012 10:44:21 -0400
Message-ID: <C3C53B0AC2FE4CFE86B15731D0C8F398@JackKrupansky>
From: "Jack Krupansky" <jack@basetechnology.com>
To: <java-user@lucene.apache.org>
References: <CAJcVXkvS8wg8uqRoU5PjmbAAAZB5j6hEH79Jwtu855MzW945-Q@mail.gmail.com><23719B3684194B6A8C67DFBD43A03C56@JackKrupansky><4FB7C08158A448B09E305C1F76DF3261@JackKrupansky> <CAJcVXkus6m=ax=qTYcK+zekQd2o5uYF4racR8RGBX9zAJ++Zog@mail.gmail.com>
In-Reply-To: <CAJcVXkus6m=ax=qTYcK+zekQd2o5uYF4racR8RGBX9zAJ++Zog@mail.gmail.com>
Subject: Re: Searching for a search string containing a literal slash doesn't work with QueryParser
Date: Mon, 1 Oct 2012 10:44:20 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3555.308
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3555.308
X-EN-UserInfo: e0a4b55451ed9f27313ebf02e3d4348d:fc4a93e1349e680c52bdd723c0ab3ef6
X-EN-AuthUser: jack@basetechnology.com
Sender:  "Jack Krupansky" <jack@basetechnology.com>
X-EN-OrigIP: 207.237.102.116
X-EN-OrigHost: 207-237-102-116.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com

You can apply the lower case filter to the whitespace or other analyzer and 
use that as the analyzer.

-- Jack Krupansky

-----Original Message----- 
From: Jochen Hebbrecht
Sent: Monday, October 01, 2012 10:34 AM
To: java-user@lucene.apache.org
Subject: Re: Searching for a search string containing a literal slash 
doesn't work with QueryParser

Hi Jack,

I tried analyzing through WhitespaceAnalyzer. Now I can search on my query
string AND I can find my document! Great!
But all my searches are now case sensitive. So when I index a field as
"JavaOne", I also have to enter in my search word: "JavaOne" and not
"javaone" or "javaOne".

How do you solve this in a proper way? Bringing all characters
toLowerCase() when indexing them?

Jochen


2012/10/1 Jack Krupansky <jack@basetechnology.com>

> That's "The escape merely..."
>
> -- Jack Krupansky
>
> -----Original Message----- From: Jack Krupansky
> Sent: Monday, October 01, 2012 9:58 AM
> To: java-user@lucene.apache.org
> Subject: Re: Searching for a search string containing a literal slash
> doesn't work with QueryParser
>
>
> The scape merely assures that the slash will not be parsed as query syntax
> and will be passed directly to the analyzer, but the standard analyzer 
> will
> in fact always remove it. Maybe you want the white space analyzer or
> keyword
> analyzer (no characters removed.)
>
> -- Jack Krupansky
>
> -----Original Message----- From: Jochen Hebbrecht
> Sent: Monday, October 01, 2012 8:59 AM
> To: java-user@lucene.apache.org
> Subject: Searching for a search string containing a literal slash doesn't
> work with QueryParser
>
> Hi,
>
> I'm currently trying to search on the following search string in my Lucene
> index: "2012/0.124.323".
> The java code to search for ('value' is my search string)
>
> ----
> QueryParser queryParser = new QueryParser(Version.LUCENE_36, field, new
> StandardAnalyzer(Version.**LUCENE_36));
> queryParser.**setAllowLeadingWildcard(true);
> return queryParser.parse(value);
> ----
>
> This returns a query result: "2012" "0.124.323". QueryParser is replacing
> the forward slash by a space.
> I tried escaping the "/" with a backslash "\", but this doesn't work
> either.
>
> Maybe required to fully understand my scenario. I have the following 
> import
> XML:
>
> ---
> ...
> <TEXT l="963" t="826" r="1391" b="870">Vervaldag </TEXT>
> <TEXT l="963" t="826" r="1391" b="870">17/07/12</TEXT>
> <TEXT l="2100" t="833" r="2275" b="871">09/07/12</TEXT>
> <TEXT l="42" t="871" r="338" b="907">2012/0.124.323</TEXT>
> <TEXT l="1478" t="938" r="1673" b="978">Kapitaals</TEXT>
> ...
> ---
>
> I get all TEXT values with an XPath expression and I index them as:
>
> ---
> XPathExpression expr = xpath.compile("//TEXT");
> Object result = expr.evaluate(document, XPathConstants.NODESET);
> NodeList nodes = (NodeList) result;
> for (int i = 0; i < nodes.getLength(); i++) {
>    doc.add(new org.apache.lucene.document.**Field("IMAGE",
> nodes.item(i).getFirstChild().**getNodeValue(), Store.NO,
> Index.ANALYZED));
> }
> ---
>
> I'm using the StandardAnalyzer.
>
> What is the best way to solve my issue? Do I need to switch from Analyzer?
> Do I have to use something else then QueryParser? ...
> I also want to support searching on 2012/0.*, so I cannot only use
> TermQuery ...
>
> Kind regards,
> Jochen
>
>
> ------------------------------**------------------------------**---------
> To unsubscribe, e-mail: 
> java-user-unsubscribe@lucene.**apache.org<java-user-unsubscribe@lucene.apache.org>
> For additional commands, e-mail: 
> java-user-help@lucene.apache.**org<java-user-help@lucene.apache.org>
>
> ------------------------------**------------------------------**---------
> To unsubscribe, e-mail: 
> java-user-unsubscribe@lucene.**apache.org<java-user-unsubscribe@lucene.apache.org>
> For additional commands, e-mail: 
> java-user-help@lucene.apache.**org<java-user-help@lucene.apache.org>
>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct  1 14:52:37 2012
Return-Path: <java-user-return-53789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1B352D347
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  1 Oct 2012 14:52:37 +0000 (UTC)
Received: (qmail 90440 invoked by uid 500); 1 Oct 2012 14:52:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90391 invoked by uid 500); 1 Oct 2012 14:52:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90381 invoked by uid 99); 1 Oct 2012 14:52:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Oct 2012 14:52:34 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of SRS0=lWm+a2=H6=basetechnology.com=jack@yourhostingaccount.com designates 65.254.253.84 as permitted sender)
Received: from [65.254.253.84] (HELO mailout10.yourhostingaccount.com) (65.254.253.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Oct 2012 14:52:27 +0000
Received: from mailscan06.yourhostingaccount.com ([10.1.15.6] helo=mailscan06.yourhostingaccount.com)
	by mailout10.yourhostingaccount.com with esmtp (Exim)
	id 1TIhLq-0007pr-MM
	for java-user@lucene.apache.org; Mon, 01 Oct 2012 10:52:06 -0400
Received: from impout02.yourhostingaccount.com ([10.1.55.2] helo=impout02.yourhostingaccount.com)
	by mailscan06.yourhostingaccount.com with esmtp (Exim)
	id 1TIhLq-0003Y0-GO
	for java-user@lucene.apache.org; Mon, 01 Oct 2012 10:52:06 -0400
Received: from authsmtp17.yourhostingaccount.com ([10.1.18.17])
	by impout02.yourhostingaccount.com with NO UCE
	id 5qs61k00A0N5tVm01qs6v5; Mon, 01 Oct 2012 10:52:06 -0400
X-Authority-Analysis: v=2.0 cv=HIVB5/Rv c=1 sm=1
 a=PHQHB1QSaEYgcU2qnZkzMw==:17 a=aQzbgH187woA:10 a=Xf0fIZOslg4A:10
 a=3jZET7lWBKwA:10 a=8nJEP1OIZ-IA:10 a=jvYhGVW7AAAA:8 a=KFT7qEhYyYIA:10
 a=mV9VRH-2AAAA:8 a=G8DjC6xtmUY-QuqS-9kA:9 a=wPNLvfGTeEIA:10 a=EMlJoiak7gQA:10
 a=88iI8knYSJUA:10 a=ayZJSlMgWVhgG3n+ZwULew==:117
X-EN-OrigOutIP: 10.1.18.17
X-EN-IMPSID: 5qs61k00A0N5tVm01qs6v5
Received: from 207-237-102-116.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com ([207.237.102.116] helo=JackKrupansky)
	by authsmtp17.yourhostingaccount.com with esmtpa (Exim)
	id 1TIhLq-0003PZ-5u
	for java-user@lucene.apache.org; Mon, 01 Oct 2012 10:52:06 -0400
Message-ID: <C7E940AAB19A4E60B589CD80869F96C0@JackKrupansky>
From: "Jack Krupansky" <jack@basetechnology.com>
To: <java-user@lucene.apache.org>
References: <CAJcVXkvS8wg8uqRoU5PjmbAAAZB5j6hEH79Jwtu855MzW945-Q@mail.gmail.com><23719B3684194B6A8C67DFBD43A03C56@JackKrupansky><4FB7C08158A448B09E305C1F76DF3261@JackKrupansky> <CAJcVXkus6m=ax=qTYcK+zekQd2o5uYF4racR8RGBX9zAJ++Zog@mail.gmail.com> <C3C53B0AC2FE4CFE86B15731D0C8F398@JackKrupansky>
In-Reply-To: <C3C53B0AC2FE4CFE86B15731D0C8F398@JackKrupansky>
Subject: Re: Searching for a search string containing a literal slash doesn't work with QueryParser
Date: Mon, 1 Oct 2012 10:52:04 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3555.308
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3555.308
X-EN-UserInfo: e0a4b55451ed9f27313ebf02e3d4348d:fc4a93e1349e680c52bdd723c0ab3ef6
X-EN-AuthUser: jack@basetechnology.com
Sender:  "Jack Krupansky" <jack@basetechnology.com>
X-EN-OrigIP: 207.237.102.116
X-EN-OrigHost: 207-237-102-116.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com

Sorry, I meant apply the filter to the TOKENIZER that the analyzer uses.

-- Jack Krupansky

-----Original Message----- 
From: Jack Krupansky
Sent: Monday, October 01, 2012 10:44 AM
To: java-user@lucene.apache.org
Subject: Re: Searching for a search string containing a literal slash 
doesn't work with QueryParser

You can apply the lower case filter to the whitespace or other analyzer and
use that as the analyzer.

-- Jack Krupansky

-----Original Message----- 
From: Jochen Hebbrecht
Sent: Monday, October 01, 2012 10:34 AM
To: java-user@lucene.apache.org
Subject: Re: Searching for a search string containing a literal slash
doesn't work with QueryParser

Hi Jack,

I tried analyzing through WhitespaceAnalyzer. Now I can search on my query
string AND I can find my document! Great!
But all my searches are now case sensitive. So when I index a field as
"JavaOne", I also have to enter in my search word: "JavaOne" and not
"javaone" or "javaOne".

How do you solve this in a proper way? Bringing all characters
toLowerCase() when indexing them?

Jochen


2012/10/1 Jack Krupansky <jack@basetechnology.com>

> That's "The escape merely..."
>
> -- Jack Krupansky
>
> -----Original Message----- From: Jack Krupansky
> Sent: Monday, October 01, 2012 9:58 AM
> To: java-user@lucene.apache.org
> Subject: Re: Searching for a search string containing a literal slash
> doesn't work with QueryParser
>
>
> The scape merely assures that the slash will not be parsed as query syntax
> and will be passed directly to the analyzer, but the standard analyzer 
> will
> in fact always remove it. Maybe you want the white space analyzer or
> keyword
> analyzer (no characters removed.)
>
> -- Jack Krupansky
>
> -----Original Message----- From: Jochen Hebbrecht
> Sent: Monday, October 01, 2012 8:59 AM
> To: java-user@lucene.apache.org
> Subject: Searching for a search string containing a literal slash doesn't
> work with QueryParser
>
> Hi,
>
> I'm currently trying to search on the following search string in my Lucene
> index: "2012/0.124.323".
> The java code to search for ('value' is my search string)
>
> ----
> QueryParser queryParser = new QueryParser(Version.LUCENE_36, field, new
> StandardAnalyzer(Version.**LUCENE_36));
> queryParser.**setAllowLeadingWildcard(true);
> return queryParser.parse(value);
> ----
>
> This returns a query result: "2012" "0.124.323". QueryParser is replacing
> the forward slash by a space.
> I tried escaping the "/" with a backslash "\", but this doesn't work
> either.
>
> Maybe required to fully understand my scenario. I have the following 
> import
> XML:
>
> ---
> ...
> <TEXT l="963" t="826" r="1391" b="870">Vervaldag </TEXT>
> <TEXT l="963" t="826" r="1391" b="870">17/07/12</TEXT>
> <TEXT l="2100" t="833" r="2275" b="871">09/07/12</TEXT>
> <TEXT l="42" t="871" r="338" b="907">2012/0.124.323</TEXT>
> <TEXT l="1478" t="938" r="1673" b="978">Kapitaals</TEXT>
> ...
> ---
>
> I get all TEXT values with an XPath expression and I index them as:
>
> ---
> XPathExpression expr = xpath.compile("//TEXT");
> Object result = expr.evaluate(document, XPathConstants.NODESET);
> NodeList nodes = (NodeList) result;
> for (int i = 0; i < nodes.getLength(); i++) {
>    doc.add(new org.apache.lucene.document.**Field("IMAGE",
> nodes.item(i).getFirstChild().**getNodeValue(), Store.NO,
> Index.ANALYZED));
> }
> ---
>
> I'm using the StandardAnalyzer.
>
> What is the best way to solve my issue? Do I need to switch from Analyzer?
> Do I have to use something else then QueryParser? ...
> I also want to support searching on 2012/0.*, so I cannot only use
> TermQuery ...
>
> Kind regards,
> Jochen
>
>
> ------------------------------**------------------------------**---------
> To unsubscribe, e-mail: 
> java-user-unsubscribe@lucene.**apache.org<java-user-unsubscribe@lucene.apache.org>
> For additional commands, e-mail: 
> java-user-help@lucene.apache.**org<java-user-help@lucene.apache.org>
>
> ------------------------------**------------------------------**---------
> To unsubscribe, e-mail: 
> java-user-unsubscribe@lucene.**apache.org<java-user-unsubscribe@lucene.apache.org>
> For additional commands, e-mail: 
> java-user-help@lucene.apache.**org<java-user-help@lucene.apache.org>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct  1 15:33:55 2012
Return-Path: <java-user-return-53790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D028BD39D
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  1 Oct 2012 15:33:55 +0000 (UTC)
Received: (qmail 99645 invoked by uid 500); 1 Oct 2012 15:33:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99551 invoked by uid 500); 1 Oct 2012 15:33:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99542 invoked by uid 99); 1 Oct 2012 15:33:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Oct 2012 15:33:53 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jochenhebbrecht@gmail.com designates 209.85.216.41 as permitted sender)
Received: from [209.85.216.41] (HELO mail-qa0-f41.google.com) (209.85.216.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Oct 2012 15:33:46 +0000
Received: by mail-qa0-f41.google.com with SMTP id p27so2035662qat.14
        for <java-user@lucene.apache.org>; Mon, 01 Oct 2012 08:33:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=wDTMkck6Pp9zB0RcyIcTLM1fvcJGgyBfOgTpl2pNyvM=;
        b=jrbn9a032AY57EpY3Hbuo6GcSdFip91T9OsjvC67jE0tCmYYvm1RD8dK1MkHLJREIr
         ytWNqacmD0Naea+MYoPigcWK5n4/Qe6xdYBPDPDryxx7UfBui977tQklveCEKqBqM3fu
         nzuhKgYeSVhl71psbroCzGzLogu1INBpPaV7u0CAkweN1coH31Ki65rfN2aQR+Wij38T
         8/rSysmEU36je6jxXEQAhptgmcWgAH5GkT49sRcbKjhegokaGf2T1FtngTaz/rNRnsFG
         a6PJ9V+QdJ5TD2OS8V/p1kvOS6MKF1JQrR3mWJi8qoqmarbtb5JzWahDz18qs2Ba8L0X
         cpgQ==
MIME-Version: 1.0
Received: by 10.229.134.195 with SMTP id k3mr10511763qct.6.1349105605764; Mon,
 01 Oct 2012 08:33:25 -0700 (PDT)
Received: by 10.229.152.195 with HTTP; Mon, 1 Oct 2012 08:33:25 -0700 (PDT)
In-Reply-To: <C7E940AAB19A4E60B589CD80869F96C0@JackKrupansky>
References: <CAJcVXkvS8wg8uqRoU5PjmbAAAZB5j6hEH79Jwtu855MzW945-Q@mail.gmail.com>
	<23719B3684194B6A8C67DFBD43A03C56@JackKrupansky>
	<4FB7C08158A448B09E305C1F76DF3261@JackKrupansky>
	<CAJcVXkus6m=ax=qTYcK+zekQd2o5uYF4racR8RGBX9zAJ++Zog@mail.gmail.com>
	<C3C53B0AC2FE4CFE86B15731D0C8F398@JackKrupansky>
	<C7E940AAB19A4E60B589CD80869F96C0@JackKrupansky>
Date: Mon, 1 Oct 2012 17:33:25 +0200
Message-ID: <CAJcVXku+89OJB9EA_yPOEWiQ-aaSYqyihX8uqVaWtC4T8L59Qw@mail.gmail.com>
Subject: Re: Searching for a search string containing a literal slash doesn't
 work with QueryParser
From: Jochen Hebbrecht <jochenhebbrecht@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00248c711bb965677f04cb012042

--00248c711bb965677f04cb012042
Content-Type: text/plain; charset=ISO-8859-1

Jack,

I wrote this custom analyzer:

----
@Override
protected TokenStreamComponents createComponents(String fieldName, Reader
reader) {
    final Tokenizer source = new WhitespaceTokenizer(matchVersion, reader);
    TokenStream sink = new LowerCaseFilter(matchVersion, source);
    return new TokenStreamComponents(source, sink);
}
----

I think this will do the trick too, right?

Jochen

2012/10/1 Jack Krupansky <jack@basetechnology.com>

> Sorry, I meant apply the filter to the TOKENIZER that the analyzer uses.
>
>
> -- Jack Krupansky
>
> -----Original Message----- From: Jack Krupansky
> Sent: Monday, October 01, 2012 10:44 AM
>
> To: java-user@lucene.apache.org
> Subject: Re: Searching for a search string containing a literal slash
> doesn't work with QueryParser
>
> You can apply the lower case filter to the whitespace or other analyzer and
> use that as the analyzer.
>
> -- Jack Krupansky
>
> -----Original Message----- From: Jochen Hebbrecht
> Sent: Monday, October 01, 2012 10:34 AM
> To: java-user@lucene.apache.org
> Subject: Re: Searching for a search string containing a literal slash
> doesn't work with QueryParser
>
> Hi Jack,
>
> I tried analyzing through WhitespaceAnalyzer. Now I can search on my query
> string AND I can find my document! Great!
> But all my searches are now case sensitive. So when I index a field as
> "JavaOne", I also have to enter in my search word: "JavaOne" and not
> "javaone" or "javaOne".
>
> How do you solve this in a proper way? Bringing all characters
> toLowerCase() when indexing them?
>
> Jochen
>
>
> 2012/10/1 Jack Krupansky <jack@basetechnology.com>
>
>  That's "The escape merely..."
>>
>> -- Jack Krupansky
>>
>> -----Original Message----- From: Jack Krupansky
>> Sent: Monday, October 01, 2012 9:58 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: Searching for a search string containing a literal slash
>> doesn't work with QueryParser
>>
>>
>> The scape merely assures that the slash will not be parsed as query syntax
>> and will be passed directly to the analyzer, but the standard analyzer
>> will
>> in fact always remove it. Maybe you want the white space analyzer or
>> keyword
>> analyzer (no characters removed.)
>>
>> -- Jack Krupansky
>>
>> -----Original Message----- From: Jochen Hebbrecht
>> Sent: Monday, October 01, 2012 8:59 AM
>> To: java-user@lucene.apache.org
>> Subject: Searching for a search string containing a literal slash doesn't
>> work with QueryParser
>>
>> Hi,
>>
>> I'm currently trying to search on the following search string in my Lucene
>> index: "2012/0.124.323".
>> The java code to search for ('value' is my search string)
>>
>> ----
>> QueryParser queryParser = new QueryParser(Version.LUCENE_36, field, new
>> StandardAnalyzer(Version.****LUCENE_36));
>> queryParser.****setAllowLeadingWildcard(true);
>> return queryParser.parse(value);
>> ----
>>
>> This returns a query result: "2012" "0.124.323". QueryParser is replacing
>> the forward slash by a space.
>> I tried escaping the "/" with a backslash "\", but this doesn't work
>> either.
>>
>> Maybe required to fully understand my scenario. I have the following
>> import
>> XML:
>>
>> ---
>> ...
>> <TEXT l="963" t="826" r="1391" b="870">Vervaldag </TEXT>
>> <TEXT l="963" t="826" r="1391" b="870">17/07/12</TEXT>
>> <TEXT l="2100" t="833" r="2275" b="871">09/07/12</TEXT>
>> <TEXT l="42" t="871" r="338" b="907">2012/0.124.323</TEXT>
>> <TEXT l="1478" t="938" r="1673" b="978">Kapitaals</TEXT>
>> ...
>> ---
>>
>> I get all TEXT values with an XPath expression and I index them as:
>>
>> ---
>> XPathExpression expr = xpath.compile("//TEXT");
>> Object result = expr.evaluate(document, XPathConstants.NODESET);
>> NodeList nodes = (NodeList) result;
>> for (int i = 0; i < nodes.getLength(); i++) {
>>    doc.add(new org.apache.lucene.document.****Field("IMAGE",
>> nodes.item(i).getFirstChild().****getNodeValue(), Store.NO,
>> Index.ANALYZED));
>> }
>> ---
>>
>> I'm using the StandardAnalyzer.
>>
>> What is the best way to solve my issue? Do I need to switch from Analyzer?
>> Do I have to use something else then QueryParser? ...
>> I also want to support searching on 2012/0.*, so I cannot only use
>> TermQuery ...
>>
>> Kind regards,
>> Jochen
>>
>>
>> ------------------------------****----------------------------**
>> --**---------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.****apache.org<
>> java-user-**unsubscribe@lucene.apache.org<java-user-unsubscribe@lucene.apache.org>
>> >
>> For additional commands, e-mail: java-user-help@lucene.apache.****org<
>> java-user-help@lucene.**apache.org <java-user-help@lucene.apache.org>>
>>
>> ------------------------------****----------------------------**
>> --**---------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.****apache.org<
>> java-user-**unsubscribe@lucene.apache.org<java-user-unsubscribe@lucene.apache.org>
>> >
>> For additional commands, e-mail: java-user-help@lucene.apache.****org<
>> java-user-help@lucene.**apache.org <java-user-help@lucene.apache.org>>
>>
>>
>>
>
> ------------------------------**------------------------------**---------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.**apache.org<java-user-unsubscribe@lucene.apache.org>
> For additional commands, e-mail: java-user-help@lucene.apache.**org<java-user-help@lucene.apache.org>
>
> ------------------------------**------------------------------**---------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.**apache.org<java-user-unsubscribe@lucene.apache.org>
> For additional commands, e-mail: java-user-help@lucene.apache.**org<java-user-help@lucene.apache.org>
>
>

--00248c711bb965677f04cb012042--

From java-user-return-53791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct  1 22:06:49 2012
Return-Path: <java-user-return-53791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BF4F0DE90
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  1 Oct 2012 22:06:49 +0000 (UTC)
Received: (qmail 20661 invoked by uid 500); 1 Oct 2012 22:06:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20589 invoked by uid 500); 1 Oct 2012 22:06:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20581 invoked by uid 99); 1 Oct 2012 22:06:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Oct 2012 22:06:46 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jong.lucene@gmail.com designates 209.85.223.176 as permitted sender)
Received: from [209.85.223.176] (HELO mail-ie0-f176.google.com) (209.85.223.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Oct 2012 22:06:40 +0000
Received: by ieak11 with SMTP id k11so16084132iea.35
        for <java-user@lucene.apache.org>; Mon, 01 Oct 2012 15:06:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=UBclbF+W4l/ViLzUTxJ9WVzg5bJviegkk1+aSN/1Q/M=;
        b=bdLPoNlLA3BWeIEzaxV/ma2aqQV7LlPZV8bLMI+DwcptFZ/1lgeY55teCZiL5LyQY4
         XlUt57hh4OPxuUwkYL9uKbXcnwoFsildlhXOX3FCFYNWKLIMxE70BmXv58cimhyKFYRD
         UtWp+YRS4SGl0cUuPsBy17vboMwnMCGtEs1ZoWq0mv1fPth/qvaCipfmOvfgIaLqOYW6
         cBRkywykeviqL5lHP2VjugIM1m2x55xHKBV+i8jiy+YCto6kWG7UJBrOUEZkn4259tyJ
         Qb2oHxyJS4KVboC3XrWZU6hUCA9qqyXAR2FW/Qr66HCJtbainvAuNZDbaXvNkrEX6iIk
         5ysA==
MIME-Version: 1.0
Received: by 10.50.47.227 with SMTP id g3mr7213265ign.5.1349129179829; Mon, 01
 Oct 2012 15:06:19 -0700 (PDT)
Received: by 10.64.167.205 with HTTP; Mon, 1 Oct 2012 15:06:19 -0700 (PDT)
Date: Mon, 1 Oct 2012 18:06:19 -0400
Message-ID: <CA+iFDpxF_B3qq_b-bx8iC+HevXC1Je9iKkiyFVvG0bL0Qgvbeg@mail.gmail.com>
Subject: Lucene index on NFS
From: Jong Kim <jong.lucene@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=14dae9340cf385140604cb069d67
X-Virus-Checked: Checked by ClamAV on apache.org

--14dae9340cf385140604cb069d67
Content-Type: text/plain; charset=ISO-8859-1

Hi,

According to the Lucene In Action (Second Edition), the section 2.11.2
"Accessing an index over a remote file system" explains that there are
issues related to accessing a Lucene index across remote file system
including NFS.

I'm particuarly interested in NFS compatibility, and wondering if there has
been any work done to solve or mitigate this problem. Has this issue been
addressed? If not, are there some reliable work-arounds that make this
possible at the expense of some sacrifice in other areas?

Any information would be greatly appreciated, since my project heavily
depends on the feasibility of this.

Thanks
/Jong

--14dae9340cf385140604cb069d67--

From java-user-return-53792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct  2 02:21:43 2012
Return-Path: <java-user-return-53792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 11823D1C4
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  2 Oct 2012 02:21:43 +0000 (UTC)
Received: (qmail 41512 invoked by uid 500); 2 Oct 2012 02:21:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41458 invoked by uid 500); 2 Oct 2012 02:21:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41450 invoked by uid 99); 2 Oct 2012 02:21:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Oct 2012 02:21:40 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vfunstein@gmail.com designates 209.85.217.176 as permitted sender)
Received: from [209.85.217.176] (HELO mail-lb0-f176.google.com) (209.85.217.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Oct 2012 02:21:33 +0000
Received: by lbcs4 with SMTP id s4so3584953lbc.35
        for <java-user@lucene.apache.org>; Mon, 01 Oct 2012 19:21:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=/OaTfBRKcbjrFhU+Wz43hjo/zQXKju3P6DY9bwVIVfo=;
        b=TqaUTBbaJnyPW8ipMj1WT+1fJLZrKL+srZFGzakKJcl+Jji7IdRbuzG3rrx7bD0zyS
         tbMiy+EnEFnHsoaCSr99562KTgEBMDgWRoUFNOH9rrPF9J+y9YgHeJjJPLTKqSCQ0iQq
         17QS5MaMDfzSr9FiFX+jDGrVjJlkB5tBpsID6vzgiOMSeOUCPABc8ZEhD+WH8fMMiOA/
         4pFtCQd1rk9IzpBR+Pf79Jiz+kjfhnnngNfQA3hkynBl/kK8A1pxe9s8oIZMxyJJo7Q/
         L7D66mdBhZbStAgOpqyYfjnl0qN3l61xj7Upki+5PgkKLZQEtx6yZUYCDU0KDZeDyqVE
         ++RQ==
MIME-Version: 1.0
Received: by 10.152.112.233 with SMTP id it9mr13021210lab.40.1349144472459;
 Mon, 01 Oct 2012 19:21:12 -0700 (PDT)
Received: by 10.114.25.40 with HTTP; Mon, 1 Oct 2012 19:21:12 -0700 (PDT)
In-Reply-To: <CA+iFDpxF_B3qq_b-bx8iC+HevXC1Je9iKkiyFVvG0bL0Qgvbeg@mail.gmail.com>
References: <CA+iFDpxF_B3qq_b-bx8iC+HevXC1Je9iKkiyFVvG0bL0Qgvbeg@mail.gmail.com>
Date: Mon, 1 Oct 2012 19:21:12 -0700
Message-ID: <CALr4HzqoUBa08jiABi7FfwfbtB22=x9dqWKn+7D_DEmfMSX1Rg@mail.gmail.com>
Subject: Re: Lucene index on NFS
From: Vitaly Funstein <vfunstein@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=f46d040838d3081c0004cb0a2d62
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d040838d3081c0004cb0a2d62
Content-Type: text/plain; charset=ISO-8859-1

How tolerant is your project of decreased search and indexing performance?
You could probably write a simple test that compares search and write
speeds of local and NFS-mounted indexes and make the decision based on the
results.

On Mon, Oct 1, 2012 at 3:06 PM, Jong Kim <jong.lucene@gmail.com> wrote:

> Hi,
>
> According to the Lucene In Action (Second Edition), the section 2.11.2
> "Accessing an index over a remote file system" explains that there are
> issues related to accessing a Lucene index across remote file system
> including NFS.
>
> I'm particuarly interested in NFS compatibility, and wondering if there has
> been any work done to solve or mitigate this problem. Has this issue been
> addressed? If not, are there some reliable work-arounds that make this
> possible at the expense of some sacrifice in other areas?
>
> Any information would be greatly appreciated, since my project heavily
> depends on the feasibility of this.
>
> Thanks
> /Jong
>

--f46d040838d3081c0004cb0a2d62--

From java-user-return-53793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct  2 09:11:41 2012
Return-Path: <java-user-return-53793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BD969D951
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  2 Oct 2012 09:11:41 +0000 (UTC)
Received: (qmail 94433 invoked by uid 500); 2 Oct 2012 09:11:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93932 invoked by uid 500); 2 Oct 2012 09:11:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93888 invoked by uid 99); 2 Oct 2012 09:11:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Oct 2012 09:11:30 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.223.176 as permitted sender)
Received: from [209.85.223.176] (HELO mail-ie0-f176.google.com) (209.85.223.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Oct 2012 09:11:23 +0000
Received: by ieak11 with SMTP id k11so17064126iea.35
        for <java-user@lucene.apache.org>; Tue, 02 Oct 2012 02:10:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=MaFo0wtFzjuLgU9HTyDFM0JqIkjCwpT/pr0AIBWy5/E=;
        b=QZznlAYz7dISP37Fzjs24xYoNM9aLVRjYDsYcg38PGnusk44k9FxL2i+0tfSRPudJ1
         oUu4/KnozB+XLfIyj7hNwPzMdK8oqtq7dKCSQw+lRsHlcRS/GnoW86SxO2YGranGXUr7
         66pQHt2Yo6O+TdsNT0miMRz4l5fvXs7xso7qalhTxHV4uCIca/3HWTM5pIy432MPBvjm
         RwS0Epvhj0BwnuEn2ifMWDz355eERCx9e9RRF3dlAjBDZgdBS1NrmDcKTTsZZsDsewD/
         CoKKMcwYg/lGuPO16Fg6DGza8TYbqSWQ7F0L6o+QK65D9ruBlzfgglBxD9lpyA/OclAZ
         GwbQ==
Received: by 10.42.33.133 with SMTP id i5mr13281935icd.55.1349169052368; Tue,
 02 Oct 2012 02:10:52 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.64.61.2 with HTTP; Tue, 2 Oct 2012 02:10:32 -0700 (PDT)
In-Reply-To: <CALr4HzqoUBa08jiABi7FfwfbtB22=x9dqWKn+7D_DEmfMSX1Rg@mail.gmail.com>
References: <CA+iFDpxF_B3qq_b-bx8iC+HevXC1Je9iKkiyFVvG0bL0Qgvbeg@mail.gmail.com>
 <CALr4HzqoUBa08jiABi7FfwfbtB22=x9dqWKn+7D_DEmfMSX1Rg@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 2 Oct 2012 10:10:32 +0100
Message-ID: <CAEY5pxVHOCg7EGf6=nTZ3Xp38ScUbyYVfQ-fCHQrXsfuTdpdZw@mail.gmail.com>
Subject: Re: Lucene index on NFS
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

You'll certainly need to factor in the performance of NFS versus local disks.

My experience is that smallish low activity indexes work just fine on
NFS, but large high activity indexes are not so good, particularly if
you have a lot of modifications to the index.

You may want to install a custom IndexDeletionPolicy.  See the
javadocs for details with specific reference to NFS.


--
Ian.

On Tue, Oct 2, 2012 at 3:21 AM, Vitaly Funstein <vfunstein@gmail.com> wrote:
> How tolerant is your project of decreased search and indexing performance?
> You could probably write a simple test that compares search and write
> speeds of local and NFS-mounted indexes and make the decision based on the
> results.
>
> On Mon, Oct 1, 2012 at 3:06 PM, Jong Kim <jong.lucene@gmail.com> wrote:
>
>> Hi,
>>
>> According to the Lucene In Action (Second Edition), the section 2.11.2
>> "Accessing an index over a remote file system" explains that there are
>> issues related to accessing a Lucene index across remote file system
>> including NFS.
>>
>> I'm particuarly interested in NFS compatibility, and wondering if there has
>> been any work done to solve or mitigate this problem. Has this issue been
>> addressed? If not, are there some reliable work-arounds that make this
>> possible at the expense of some sacrifice in other areas?
>>
>> Any information would be greatly appreciated, since my project heavily
>> depends on the feasibility of this.
>>
>> Thanks
>> /Jong
>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct  2 09:18:34 2012
Return-Path: <java-user-return-53794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E24CBD97D
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  2 Oct 2012 09:18:34 +0000 (UTC)
Received: (qmail 16702 invoked by uid 500); 2 Oct 2012 09:18:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16645 invoked by uid 500); 2 Oct 2012 09:18:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16618 invoked by uid 99); 2 Oct 2012 09:18:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Oct 2012 09:18:32 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_HELO_PASS,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [212.227.17.9] (HELO moutng.kundenserver.de) (212.227.17.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Oct 2012 09:18:22 +0000
Received: from [192.168.178.43] (p5DDEC2E3.dip0.t-ipconnect.de [93.222.194.227])
	by mrelayeu.kundenserver.de (node=mreu2) with ESMTP (Nemesis)
	id 0Lapqe-1Th0oZ3mSu-00kZJ1; Tue, 02 Oct 2012 11:17:52 +0200
Content-Type: text/plain; charset=iso-8859-1
Mime-Version: 1.0 (Apple Message framework v1085)
Subject: Re: Lucene index on NFS
From: Paul Libbrecht <paul@hoplahup.net>
In-Reply-To: <CAEY5pxVHOCg7EGf6=nTZ3Xp38ScUbyYVfQ-fCHQrXsfuTdpdZw@mail.gmail.com>
Date: Tue, 2 Oct 2012 11:17:51 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <F2F1B386-9B97-4DE9-8207-7D85093679FB@hoplahup.net>
References: <CA+iFDpxF_B3qq_b-bx8iC+HevXC1Je9iKkiyFVvG0bL0Qgvbeg@mail.gmail.com> <CALr4HzqoUBa08jiABi7FfwfbtB22=x9dqWKn+7D_DEmfMSX1Rg@mail.gmail.com> <CAEY5pxVHOCg7EGf6=nTZ3Xp38ScUbyYVfQ-fCHQrXsfuTdpdZw@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1085)
X-Provags-ID: V02:K0:ZO82Gt393v6XT+UlJNlzaZnZjVGoGdK3FAzlCIbD0GY
 T3pN2qznGKHlWdCF/h39NW/oIRu9reZbSli9X0h4x5XEqsw64K
 Fg/JwQWdRirCbeRw8P2u6b5llNbXQcI+EQiSf3Dy+AsXgjtYG4
 uAYMggfpzC2n6VKcw3J506UP/3fKuh5N9xHol1RoSF5sauEswJ
 VWf4M2knZnlmQjGZRQKsL3ZfKu63oDV923haMH81IoAu7ePSK5
 IRoMhiSuT2s6UptoVuFMEozlGXuW0bnFI3+j5tRAEbdYScpj/D
 /xJY+eqIFM+mWbEZ4gywhR3OsmoKNTVL5V9EMU6d6Z0eHG8OPA
 aLSPDvg5i2DGmtrUPbK7uPGcb+tci3fVp5lZhYvKw3GgX1FvcE
 PaUGHRszje7KQ==

My experience in the Lucene 1.x times were a factor of at least four in =
writing to NFS and about two when reading from there. I'd discourage =
this as much as possible!

(rsync is way more your friend for transporting and replication =E0 la =
solr should also be considered)

paul


Le 2 oct. 2012 =E0 11:10, Ian Lea a =E9crit :

> You'll certainly need to factor in the performance of NFS versus local =
disks.
>=20
> My experience is that smallish low activity indexes work just fine on
> NFS, but large high activity indexes are not so good, particularly if
> you have a lot of modifications to the index.
>=20
> You may want to install a custom IndexDeletionPolicy.  See the
> javadocs for details with specific reference to NFS.
>=20
>=20
> --
> Ian.
>=20
> On Tue, Oct 2, 2012 at 3:21 AM, Vitaly Funstein <vfunstein@gmail.com> =
wrote:
>> How tolerant is your project of decreased search and indexing =
performance?
>> You could probably write a simple test that compares search and write
>> speeds of local and NFS-mounted indexes and make the decision based =
on the
>> results.
>>=20
>> On Mon, Oct 1, 2012 at 3:06 PM, Jong Kim <jong.lucene@gmail.com> =
wrote:
>>=20
>>> Hi,
>>>=20
>>> According to the Lucene In Action (Second Edition), the section =
2.11.2
>>> "Accessing an index over a remote file system" explains that there =
are
>>> issues related to accessing a Lucene index across remote file system
>>> including NFS.
>>>=20
>>> I'm particuarly interested in NFS compatibility, and wondering if =
there has
>>> been any work done to solve or mitigate this problem. Has this issue =
been
>>> addressed? If not, are there some reliable work-arounds that make =
this
>>> possible at the expense of some sacrifice in other areas?
>>>=20
>>> Any information would be greatly appreciated, since my project =
heavily
>>> depends on the feasibility of this.
>>>=20
>>> Thanks
>>> /Jong
>>>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct  2 12:01:50 2012
Return-Path: <java-user-return-53795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3D0C3DB30
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  2 Oct 2012 12:01:50 +0000 (UTC)
Received: (qmail 46518 invoked by uid 500); 2 Oct 2012 12:01:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46349 invoked by uid 500); 2 Oct 2012 12:01:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46316 invoked by uid 99); 2 Oct 2012 12:01:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Oct 2012 12:01:47 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jong.lucene@gmail.com designates 209.85.223.176 as permitted sender)
Received: from [209.85.223.176] (HELO mail-ie0-f176.google.com) (209.85.223.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Oct 2012 12:01:40 +0000
Received: by ieak11 with SMTP id k11so17339470iea.35
        for <java-user@lucene.apache.org>; Tue, 02 Oct 2012 05:01:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=ntHRgWCtwQgccwZSgzwokNc6hHHoe+X5LzrhZ7kEcWI=;
        b=MfT5suAkhkPfBSgrQBtBXTQJQ0G2c3V1mhJEaIrH0CEwGgO2pOhQfhHfLJAqkxg10K
         R+8uaxBuG8iFBcgoPZY76hDMl877+glUtkZ9c7M5tCwe+9oKEHGJnpya5HDhB3+rV+ho
         YLH0JjkLgQRVGvsueM2/KWAoo0GQ3HjP9R30N+igh4gzxu9HhMgw0EoFCSS8P40SILd3
         WCYf4Yc3P4F+dARdPBAeEe5KTxVC/pwzqwJ8EdcpgTBTmmT0SXX5lKdmD+VDqdhOeDDz
         balzR9aN33Pi9kwvQuL5ejezuAYyu4d3QUQVAV5JkB24RBUaFqXI8q9Gdg7unlWM4phN
         wBQQ==
MIME-Version: 1.0
Received: by 10.50.104.137 with SMTP id ge9mr8450600igb.17.1349179278874; Tue,
 02 Oct 2012 05:01:18 -0700 (PDT)
Received: by 10.64.167.205 with HTTP; Tue, 2 Oct 2012 05:01:18 -0700 (PDT)
In-Reply-To: <F2F1B386-9B97-4DE9-8207-7D85093679FB@hoplahup.net>
References: <CA+iFDpxF_B3qq_b-bx8iC+HevXC1Je9iKkiyFVvG0bL0Qgvbeg@mail.gmail.com>
	<CALr4HzqoUBa08jiABi7FfwfbtB22=x9dqWKn+7D_DEmfMSX1Rg@mail.gmail.com>
	<CAEY5pxVHOCg7EGf6=nTZ3Xp38ScUbyYVfQ-fCHQrXsfuTdpdZw@mail.gmail.com>
	<F2F1B386-9B97-4DE9-8207-7D85093679FB@hoplahup.net>
Date: Tue, 2 Oct 2012 08:01:18 -0400
Message-ID: <CA+iFDpw2kxKQa5YsgoU3_AzKv1jtMPQ7BkqPBJD-OjWx-B_xGg@mail.gmail.com>
Subject: Re: Lucene index on NFS
From: Jong Kim <jong.lucene@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=e89a8f23585fa7d7e204cb124758

--e89a8f23585fa7d7e204cb124758
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Thank you all for reply.

So it soudns like it is a known fact that the performance would suffer
rather significantly when the index files are accessed over NFS. But how
about reliability and robustness (which seems even more important)? Isn't
there any increased possibility for intermittent errors such as index file
corruption (due to cache inconsistency, difference in delete semantics,
etc.) when using NFS? Has anyone run into such trouble? Or is it strictly
just a performance issue?

/Jong
On Tue, Oct 2, 2012 at 5:17 AM, Paul Libbrecht <paul@hoplahup.net> wrote:

> My experience in the Lucene 1.x times were a factor of at least four in
> writing to NFS and about two when reading from there. I'd discourage this
> as much as possible!
>
> (rsync is way more your friend for transporting and replication =E0 la so=
lr
> should also be considered)
>
> paul
>
>
> Le 2 oct. 2012 =E0 11:10, Ian Lea a =E9crit :
>
> > You'll certainly need to factor in the performance of NFS versus local
> disks.
> >
> > My experience is that smallish low activity indexes work just fine on
> > NFS, but large high activity indexes are not so good, particularly if
> > you have a lot of modifications to the index.
> >
> > You may want to install a custom IndexDeletionPolicy.  See the
> > javadocs for details with specific reference to NFS.
> >
> >
> > --
> > Ian.
> >
> > On Tue, Oct 2, 2012 at 3:21 AM, Vitaly Funstein <vfunstein@gmail.com>
> wrote:
> >> How tolerant is your project of decreased search and indexing
> performance?
> >> You could probably write a simple test that compares search and write
> >> speeds of local and NFS-mounted indexes and make the decision based on
> the
> >> results.
> >>
> >> On Mon, Oct 1, 2012 at 3:06 PM, Jong Kim <jong.lucene@gmail.com> wrote=
:
> >>
> >>> Hi,
> >>>
> >>> According to the Lucene In Action (Second Edition), the section 2.11.=
2
> >>> "Accessing an index over a remote file system" explains that there ar=
e
> >>> issues related to accessing a Lucene index across remote file system
> >>> including NFS.
> >>>
> >>> I'm particuarly interested in NFS compatibility, and wondering if
> there has
> >>> been any work done to solve or mitigate this problem. Has this issue
> been
> >>> addressed? If not, are there some reliable work-arounds that make thi=
s
> >>> possible at the expense of some sacrifice in other areas?
> >>>
> >>> Any information would be greatly appreciated, since my project heavil=
y
> >>> depends on the feasibility of this.
> >>>
> >>> Thanks
> >>> /Jong
> >>>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--e89a8f23585fa7d7e204cb124758--

From java-user-return-53796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct  2 12:46:02 2012
Return-Path: <java-user-return-53796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 30143DB77
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  2 Oct 2012 12:46:02 +0000 (UTC)
Received: (qmail 94207 invoked by uid 500); 2 Oct 2012 12:46:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94042 invoked by uid 500); 2 Oct 2012 12:45:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94007 invoked by uid 99); 2 Oct 2012 12:45:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Oct 2012 12:45:53 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_HELO_PASS,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.227.17.8] (HELO moutng.kundenserver.de) (212.227.17.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Oct 2012 12:45:46 +0000
Received: from [192.168.178.43] (p5DDEC2E3.dip0.t-ipconnect.de [93.222.194.227])
	by mrelayeu.kundenserver.de (node=mrbap1) with ESMTP (Nemesis)
	id 0MLhzf-1TIkru0vL9-000rrs; Tue, 02 Oct 2012 14:45:25 +0200
Content-Type: text/plain; charset=iso-8859-1
Mime-Version: 1.0 (Apple Message framework v1085)
Subject: Re: Lucene index on NFS
From: Paul Libbrecht <paul@hoplahup.net>
In-Reply-To: <CA+iFDpw2kxKQa5YsgoU3_AzKv1jtMPQ7BkqPBJD-OjWx-B_xGg@mail.gmail.com>
Date: Tue, 2 Oct 2012 14:45:24 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <3BC169A5-F0E2-480B-93D7-535D91B7C8A4@hoplahup.net>
References: <CA+iFDpxF_B3qq_b-bx8iC+HevXC1Je9iKkiyFVvG0bL0Qgvbeg@mail.gmail.com> <CALr4HzqoUBa08jiABi7FfwfbtB22=x9dqWKn+7D_DEmfMSX1Rg@mail.gmail.com> <CAEY5pxVHOCg7EGf6=nTZ3Xp38ScUbyYVfQ-fCHQrXsfuTdpdZw@mail.gmail.com> <F2F1B386-9B97-4DE9-8207-7D85093679FB@hoplahup.net> <CA+iFDpw2kxKQa5YsgoU3_AzKv1jtMPQ7BkqPBJD-OjWx-B_xGg@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1085)
X-Provags-ID: V02:K0:c0YKif5CEboQf5+3TA5YAp5DB9opcCvUjS65TwlINy6
 XkTicBbODhVGJnzNSNoOjrNm0a3ZwzrTeIDMYRmfIA0/QYnJ/u
 KCa/sOlG006r3YSI01LuXiATO5Ue5e2Y3QuxjLn9rRhQvGRAgl
 Fm6xTZKOPjokxHeN5p0nKn4LhFe4gfANhDM9DsrIEix2UUulR3
 fsOASkjU4p00TWze2sDH1z+IBx8J8YBNY8LJR8CMHgp5SefdcL
 DLS7laFbNp9iWfJiMo0HbZt8hbN6OlJwjVQAOIgsExKy/t+20/
 Snb0Bl07CTyB5zgxWR8MAk5AFi+zilCfFrwndxovonolBz87ma
 CHwYplq+P4QVLMoGyypLkycbQjNOZC+QKIqNqGK+pPIVfsq4SG
 BjSDesZv2Ozqg==
X-Virus-Checked: Checked by ClamAV on apache.org

I doubt NFS is an unreliable file-system.
Lucene uses normal random access to files and this has no reason to be =
unreliable unless bad things such as network drops happen (in which case =
you'd get direct failures or  timeouts rather than corruption). I've =
seen fairly large infrastructures being based on NFS and corruption is =
something I've never heard about.

Note: no concurrent access to a lucene index, right?

Paul


Le 2 oct. 2012 =E0 14:01, Jong Kim a =E9crit :

> Thank you all for reply.
>=20
> So it soudns like it is a known fact that the performance would suffer
> rather significantly when the index files are accessed over NFS. But =
how
> about reliability and robustness (which seems even more important)? =
Isn't
> there any increased possibility for intermittent errors such as index =
file
> corruption (due to cache inconsistency, difference in delete =
semantics,
> etc.) when using NFS? Has anyone run into such trouble? Or is it =
strictly
> just a performance issue?
>=20
> /Jong
> On Tue, Oct 2, 2012 at 5:17 AM, Paul Libbrecht <paul@hoplahup.net> =
wrote:
>=20
>> My experience in the Lucene 1.x times were a factor of at least four =
in
>> writing to NFS and about two when reading from there. I'd discourage =
this
>> as much as possible!
>>=20
>> (rsync is way more your friend for transporting and replication =E0 =
la solr
>> should also be considered)
>>=20
>> paul
>>=20
>>=20
>> Le 2 oct. 2012 =E0 11:10, Ian Lea a =E9crit :
>>=20
>>> You'll certainly need to factor in the performance of NFS versus =
local
>> disks.
>>>=20
>>> My experience is that smallish low activity indexes work just fine =
on
>>> NFS, but large high activity indexes are not so good, particularly =
if
>>> you have a lot of modifications to the index.
>>>=20
>>> You may want to install a custom IndexDeletionPolicy.  See the
>>> javadocs for details with specific reference to NFS.
>>>=20
>>>=20
>>> --
>>> Ian.
>>>=20
>>> On Tue, Oct 2, 2012 at 3:21 AM, Vitaly Funstein =
<vfunstein@gmail.com>
>> wrote:
>>>> How tolerant is your project of decreased search and indexing
>> performance?
>>>> You could probably write a simple test that compares search and =
write
>>>> speeds of local and NFS-mounted indexes and make the decision based =
on
>> the
>>>> results.
>>>>=20
>>>> On Mon, Oct 1, 2012 at 3:06 PM, Jong Kim <jong.lucene@gmail.com> =
wrote:
>>>>=20
>>>>> Hi,
>>>>>=20
>>>>> According to the Lucene In Action (Second Edition), the section =
2.11.2
>>>>> "Accessing an index over a remote file system" explains that there =
are
>>>>> issues related to accessing a Lucene index across remote file =
system
>>>>> including NFS.
>>>>>=20
>>>>> I'm particuarly interested in NFS compatibility, and wondering if
>> there has
>>>>> been any work done to solve or mitigate this problem. Has this =
issue
>> been
>>>>> addressed? If not, are there some reliable work-arounds that make =
this
>>>>> possible at the expense of some sacrifice in other areas?
>>>>>=20
>>>>> Any information would be greatly appreciated, since my project =
heavily
>>>>> depends on the feasibility of this.
>>>>>=20
>>>>> Thanks
>>>>> /Jong
>>>>>=20
>>>=20
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>=20
>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct  2 12:57:40 2012
Return-Path: <java-user-return-53797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 11BD3DBCB
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  2 Oct 2012 12:57:40 +0000 (UTC)
Received: (qmail 38124 invoked by uid 500); 2 Oct 2012 12:57:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37820 invoked by uid 500); 2 Oct 2012 12:57:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37807 invoked by uid 99); 2 Oct 2012 12:57:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Oct 2012 12:57:37 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.223.176 as permitted sender)
Received: from [209.85.223.176] (HELO mail-ie0-f176.google.com) (209.85.223.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Oct 2012 12:57:30 +0000
Received: by ieak11 with SMTP id k11so17475699iea.35
        for <java-user@lucene.apache.org>; Tue, 02 Oct 2012 05:57:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        bh=lTXuSLbbibMloaTIzzxmyj/L81YpsC7r1x/5f+rSNFs=;
        b=DTxZHqZy5agJvlZ7bnBDevJeDFXqeRin3ysTQr1L6Xb7/4jC24V+EAG2pa2XZoIKLu
         FY/0FyA0L4tw+ZtDwZSG/2fNy8pxiY3Vc7mY0CJs/2D+lHWIa/PxhnGZ3aqSi/fDL5NB
         yWv76FTpGFlfM0lL+ZtzTUXv9RlZZr7gVGnvntnAVHp10ZIRB4LTnPMIB7ynoREtSYRw
         ls5X5b7hKXyexxW0HMMbF8MoBIj//FkJmexYy8dxGKjpYTAC/IKyGFsLZFkoJ6V2w+hp
         XUDZ6BRb6S6n1CpL6uyjzp7Y+mAkjvIUa4MZyZ2CQctxXEHR15iY6aEi4Bku9xw5yFHB
         7lvA==
Received: by 10.50.17.230 with SMTP id r6mr8630673igd.16.1349182629801; Tue,
 02 Oct 2012 05:57:09 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.64.61.2 with HTTP; Tue, 2 Oct 2012 05:56:49 -0700 (PDT)
In-Reply-To: <3BC169A5-F0E2-480B-93D7-535D91B7C8A4@hoplahup.net>
References: <CA+iFDpxF_B3qq_b-bx8iC+HevXC1Je9iKkiyFVvG0bL0Qgvbeg@mail.gmail.com>
 <CALr4HzqoUBa08jiABi7FfwfbtB22=x9dqWKn+7D_DEmfMSX1Rg@mail.gmail.com>
 <CAEY5pxVHOCg7EGf6=nTZ3Xp38ScUbyYVfQ-fCHQrXsfuTdpdZw@mail.gmail.com>
 <F2F1B386-9B97-4DE9-8207-7D85093679FB@hoplahup.net> <CA+iFDpw2kxKQa5YsgoU3_AzKv1jtMPQ7BkqPBJD-OjWx-B_xGg@mail.gmail.com>
 <3BC169A5-F0E2-480B-93D7-535D91B7C8A4@hoplahup.net>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 2 Oct 2012 13:56:49 +0100
Message-ID: <CAEY5pxXL6gsf=uOsN8LzknmHH95LUKbLdTC-VYBMPzk1kuv_Hg@mail.gmail.com>
Subject: Re: Lucene index on NFS
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

I agree that reliability/corruption is not an issue.

I would also put it that performance is likely to suffer, but that's
not certain.  A fast disk mounted over NFS can be quicker than a slow
local disk.  And how much do you care about performance?  Maybe it
would be fast enough over NFS to make the ease of deployment balance
out lesser speed.

What's the setup here?  Will you be writing to an index on local disk
of server A and reading it, over NFS, from server B (and C and ...) or
what?

--
Ian.


On Tue, Oct 2, 2012 at 1:45 PM, Paul Libbrecht <paul@hoplahup.net> wrote:
> I doubt NFS is an unreliable file-system.
> Lucene uses normal random access to files and this has no reason to be un=
reliable unless bad things such as network drops happen (in which case you'=
d get direct failures or  timeouts rather than corruption). I've seen fairl=
y large infrastructures being based on NFS and corruption is something I've=
 never heard about.
>
> Note: no concurrent access to a lucene index, right?
>
> Paul
>
>
> Le 2 oct. 2012 =E0 14:01, Jong Kim a =E9crit :
>
>> Thank you all for reply.
>>
>> So it soudns like it is a known fact that the performance would suffer
>> rather significantly when the index files are accessed over NFS. But how
>> about reliability and robustness (which seems even more important)? Isn'=
t
>> there any increased possibility for intermittent errors such as index fi=
le
>> corruption (due to cache inconsistency, difference in delete semantics,
>> etc.) when using NFS? Has anyone run into such trouble? Or is it strictl=
y
>> just a performance issue?
>>
>> /Jong
>> On Tue, Oct 2, 2012 at 5:17 AM, Paul Libbrecht <paul@hoplahup.net> wrote=
:
>>
>>> My experience in the Lucene 1.x times were a factor of at least four in
>>> writing to NFS and about two when reading from there. I'd discourage th=
is
>>> as much as possible!
>>>
>>> (rsync is way more your friend for transporting and replication =E0 la =
solr
>>> should also be considered)
>>>
>>> paul
>>>
>>>
>>> Le 2 oct. 2012 =E0 11:10, Ian Lea a =E9crit :
>>>
>>>> You'll certainly need to factor in the performance of NFS versus local
>>> disks.
>>>>
>>>> My experience is that smallish low activity indexes work just fine on
>>>> NFS, but large high activity indexes are not so good, particularly if
>>>> you have a lot of modifications to the index.
>>>>
>>>> You may want to install a custom IndexDeletionPolicy.  See the
>>>> javadocs for details with specific reference to NFS.
>>>>
>>>>
>>>> --
>>>> Ian.
>>>>
>>>> On Tue, Oct 2, 2012 at 3:21 AM, Vitaly Funstein <vfunstein@gmail.com>
>>> wrote:
>>>>> How tolerant is your project of decreased search and indexing
>>> performance?
>>>>> You could probably write a simple test that compares search and write
>>>>> speeds of local and NFS-mounted indexes and make the decision based o=
n
>>> the
>>>>> results.
>>>>>
>>>>> On Mon, Oct 1, 2012 at 3:06 PM, Jong Kim <jong.lucene@gmail.com> wrot=
e:
>>>>>
>>>>>> Hi,
>>>>>>
>>>>>> According to the Lucene In Action (Second Edition), the section 2.11=
.2
>>>>>> "Accessing an index over a remote file system" explains that there a=
re
>>>>>> issues related to accessing a Lucene index across remote file system
>>>>>> including NFS.
>>>>>>
>>>>>> I'm particuarly interested in NFS compatibility, and wondering if
>>> there has
>>>>>> been any work done to solve or mitigate this problem. Has this issue
>>> been
>>>>>> addressed? If not, are there some reliable work-arounds that make th=
is
>>>>>> possible at the expense of some sacrifice in other areas?
>>>>>>
>>>>>> Any information would be greatly appreciated, since my project heavi=
ly
>>>>>> depends on the feasibility of this.
>>>>>>
>>>>>> Thanks
>>>>>> /Jong
>>>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct  2 13:01:26 2012
Return-Path: <java-user-return-53798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1CABADBFC
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  2 Oct 2012 13:01:26 +0000 (UTC)
Received: (qmail 51946 invoked by uid 500); 2 Oct 2012 13:01:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51848 invoked by uid 500); 2 Oct 2012 13:01:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51833 invoked by uid 99); 2 Oct 2012 13:01:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Oct 2012 13:01:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of uwe@thetaphi.de designates 188.138.97.18 as permitted sender)
Received: from [188.138.97.18] (HELO mail.sd-datasolutions.de) (188.138.97.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Oct 2012 13:01:16 +0000
Received: from VEGA (gate1.marum.de [134.102.237.1])
	by mail.sd-datasolutions.de (Postfix) with ESMTPSA id D752C14AA042
	for <java-user@lucene.apache.org>; Tue,  2 Oct 2012 13:00:55 +0000 (UTC)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <CA+iFDpxF_B3qq_b-bx8iC+HevXC1Je9iKkiyFVvG0bL0Qgvbeg@mail.gmail.com> <CALr4HzqoUBa08jiABi7FfwfbtB22=x9dqWKn+7D_DEmfMSX1Rg@mail.gmail.com> <CAEY5pxVHOCg7EGf6=nTZ3Xp38ScUbyYVfQ-fCHQrXsfuTdpdZw@mail.gmail.com> <F2F1B386-9B97-4DE9-8207-7D85093679FB@hoplahup.net> <CA+iFDpw2kxKQa5YsgoU3_AzKv1jtMPQ7BkqPBJD-OjWx-B_xGg@mail.gmail.com> <3BC169A5-F0E2-480B-93D7-535D91B7C8A4@hoplahup.net>
In-Reply-To: <3BC169A5-F0E2-480B-93D7-535D91B7C8A4@hoplahup.net>
Subject: RE: Lucene index on NFS
Date: Tue, 2 Oct 2012 15:01:52 +0200
Message-ID: <01a401cda09e$17b00160$47100420$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQHqGG4zH+1Jymwpx/29FqGGg6GMewJKfWzwAjUcYuYBBqvMYQHiDcm/AhZcZX2XIRKKAA==
Content-Language: de

There are no real issues with NFS regarding safety of the data. The =
problem with NFS is the following (maybe it is fixed in NFS4, I have no =
idea):
Lucene deletes index files while they are in use, which is perfectly =
fine for local file systems (because the inode is still alive, although =
it is no longer appearing in directory listing). Unfortunately the =
deletes of those index files are not visible to the directory listing =
asap when using NFS; also newly added files are not always showing up in =
the directory listing once created. This causes problems with Lucene =
like file not found exceptions. Also the index directory locking does =
not work (it times out, because NativeFSLockFactory does not work with =
NFS - which is a somehow a bug in NFS).

To use it with NFS make sure:
- Use a custom deletion policy on IndexWriter, so unused files are not =
deleted asap =
(https://lucene.apache.org/core/3_6_1/api/all/org/apache/lucene/index/Ind=
exDeletionPolicy.html)
- Use SimpleFSLockFactory

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Paul Libbrecht [mailto:paul@hoplahup.net]
> Sent: Tuesday, October 02, 2012 2:45 PM
> To: java-user@lucene.apache.org
> Subject: Re: Lucene index on NFS
>=20
> I doubt NFS is an unreliable file-system.
> Lucene uses normal random access to files and this has no reason to be
> unreliable unless bad things such as network drops happen (in which =
case you'd
> get direct failures or  timeouts rather than corruption). I've seen =
fairly large
> infrastructures being based on NFS and corruption is something I've =
never
> heard about.
>=20
> Note: no concurrent access to a lucene index, right?
>=20
> Paul
>=20
>=20
> Le 2 oct. 2012 =C3=A0 14:01, Jong Kim a =C3=A9crit :
>=20
> > Thank you all for reply.
> >
> > So it soudns like it is a known fact that the performance would =
suffer
> > rather significantly when the index files are accessed over NFS. But
> > how about reliability and robustness (which seems even more
> > important)? Isn't there any increased possibility for intermittent
> > errors such as index file corruption (due to cache inconsistency,
> > difference in delete semantics,
> > etc.) when using NFS? Has anyone run into such trouble? Or is it
> > strictly just a performance issue?
> >
> > /Jong
> > On Tue, Oct 2, 2012 at 5:17 AM, Paul Libbrecht <paul@hoplahup.net> =
wrote:
> >
> >> My experience in the Lucene 1.x times were a factor of at least =
four
> >> in writing to NFS and about two when reading from there. I'd
> >> discourage this as much as possible!
> >>
> >> (rsync is way more your friend for transporting and replication =
=C3=A0 la
> >> solr should also be considered)
> >>
> >> paul
> >>
> >>
> >> Le 2 oct. 2012 =C3=A0 11:10, Ian Lea a =C3=A9crit :
> >>
> >>> You'll certainly need to factor in the performance of NFS versus
> >>> local
> >> disks.
> >>>
> >>> My experience is that smallish low activity indexes work just fine
> >>> on NFS, but large high activity indexes are not so good,
> >>> particularly if you have a lot of modifications to the index.
> >>>
> >>> You may want to install a custom IndexDeletionPolicy.  See the
> >>> javadocs for details with specific reference to NFS.
> >>>
> >>>
> >>> --
> >>> Ian.
> >>>
> >>> On Tue, Oct 2, 2012 at 3:21 AM, Vitaly Funstein
> >>> <vfunstein@gmail.com>
> >> wrote:
> >>>> How tolerant is your project of decreased search and indexing
> >> performance?
> >>>> You could probably write a simple test that compares search and
> >>>> write speeds of local and NFS-mounted indexes and make the =
decision
> >>>> based on
> >> the
> >>>> results.
> >>>>
> >>>> On Mon, Oct 1, 2012 at 3:06 PM, Jong Kim <jong.lucene@gmail.com>
> wrote:
> >>>>
> >>>>> Hi,
> >>>>>
> >>>>> According to the Lucene In Action (Second Edition), the section
> >>>>> 2.11.2 "Accessing an index over a remote file system" explains
> >>>>> that there are issues related to accessing a Lucene index across
> >>>>> remote file system including NFS.
> >>>>>
> >>>>> I'm particuarly interested in NFS compatibility, and wondering =
if
> >> there has
> >>>>> been any work done to solve or mitigate this problem. Has this
> >>>>> issue
> >> been
> >>>>> addressed? If not, are there some reliable work-arounds that =
make
> >>>>> this possible at the expense of some sacrifice in other areas?
> >>>>>
> >>>>> Any information would be greatly appreciated, since my project
> >>>>> heavily depends on the feasibility of this.
> >>>>>
> >>>>> Thanks
> >>>>> /Jong
> >>>>>
> >>>
> >>> =
--------------------------------------------------------------------
> >>> - To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>
> >>
> >> =
---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct  2 13:27:20 2012
Return-Path: <java-user-return-53799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 862E0D131
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  2 Oct 2012 13:27:20 +0000 (UTC)
Received: (qmail 32233 invoked by uid 500); 2 Oct 2012 13:27:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32179 invoked by uid 500); 2 Oct 2012 13:27:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32169 invoked by uid 99); 2 Oct 2012 13:27:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Oct 2012 13:27:18 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jong.lucene@gmail.com designates 209.85.223.176 as permitted sender)
Received: from [209.85.223.176] (HELO mail-ie0-f176.google.com) (209.85.223.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Oct 2012 13:27:11 +0000
Received: by ieak11 with SMTP id k11so17563533iea.35
        for <java-user@lucene.apache.org>; Tue, 02 Oct 2012 06:26:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=2C29/UXVngWiYYPGVytcK15qZdVS5vqZVDFyg3JlggM=;
        b=i/HiGQmZruhN4CISG/rw/rkcGayDsH+PdISydAG6HoAYsMu1t2wv832WlNzUEiWWK1
         cB0nB6Gz9BBJowOKTXLD8p+VHt8e08sPWF3Uheax4tWDJcx5YKJWOzI9i4pKf5KqkYgg
         9XeqPXcGQmzg/KgEScIUSkLM1xVe8ySNqQ2p7CVsgFqJzDcVxKfHIxCgEM5IQLhAM/aa
         8JbFZvxbWTj8+Mxmy62TfndOnVI2BNRRhwTz47QOycB7EE1jDj4CytkAkG0tstG9TCsy
         UNRFZJk5Kxbt4ctttVhYcyuryJYIbvtUWjXbsx1UHVmtOm+sJcOB7gAe7O+5701BPKam
         cCGg==
MIME-Version: 1.0
Received: by 10.50.173.41 with SMTP id bh9mr8682557igc.52.1349184409562; Tue,
 02 Oct 2012 06:26:49 -0700 (PDT)
Received: by 10.64.167.205 with HTTP; Tue, 2 Oct 2012 06:26:49 -0700 (PDT)
In-Reply-To: <3BC169A5-F0E2-480B-93D7-535D91B7C8A4@hoplahup.net>
References: <CA+iFDpxF_B3qq_b-bx8iC+HevXC1Je9iKkiyFVvG0bL0Qgvbeg@mail.gmail.com>
	<CALr4HzqoUBa08jiABi7FfwfbtB22=x9dqWKn+7D_DEmfMSX1Rg@mail.gmail.com>
	<CAEY5pxVHOCg7EGf6=nTZ3Xp38ScUbyYVfQ-fCHQrXsfuTdpdZw@mail.gmail.com>
	<F2F1B386-9B97-4DE9-8207-7D85093679FB@hoplahup.net>
	<CA+iFDpw2kxKQa5YsgoU3_AzKv1jtMPQ7BkqPBJD-OjWx-B_xGg@mail.gmail.com>
	<3BC169A5-F0E2-480B-93D7-535D91B7C8A4@hoplahup.net>
Date: Tue, 2 Oct 2012 09:26:49 -0400
Message-ID: <CA+iFDpx_63581n7t7aBmfD+xPWR5WKLZzTy=wmq5H0woMt7Zcg@mail.gmail.com>
Subject: Re: Lucene index on NFS
From: Jong Kim <jong.lucene@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=e89a8f50352e77ef9104cb137919

--e89a8f50352e77ef9104cb137919
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

My Lucene index is accessed by multiple threads in a single process.

/Jong

On Tue, Oct 2, 2012 at 8:45 AM, Paul Libbrecht <paul@hoplahup.net> wrote:

> I doubt NFS is an unreliable file-system.
> Lucene uses normal random access to files and this has no reason to be
> unreliable unless bad things such as network drops happen (in which case
> you'd get direct failures or  timeouts rather than corruption). I've seen
> fairly large infrastructures being based on NFS and corruption is somethi=
ng
> I've never heard about.
>
> Note: no concurrent access to a lucene index, right?
>
> Paul
>
>
> Le 2 oct. 2012 =E0 14:01, Jong Kim a =E9crit :
>
> > Thank you all for reply.
> >
> > So it soudns like it is a known fact that the performance would suffer
> > rather significantly when the index files are accessed over NFS. But ho=
w
> > about reliability and robustness (which seems even more important)? Isn=
't
> > there any increased possibility for intermittent errors such as index
> file
> > corruption (due to cache inconsistency, difference in delete semantics,
> > etc.) when using NFS? Has anyone run into such trouble? Or is it strict=
ly
> > just a performance issue?
> >
> > /Jong
> > On Tue, Oct 2, 2012 at 5:17 AM, Paul Libbrecht <paul@hoplahup.net>
> wrote:
> >
> >> My experience in the Lucene 1.x times were a factor of at least four i=
n
> >> writing to NFS and about two when reading from there. I'd discourage
> this
> >> as much as possible!
> >>
> >> (rsync is way more your friend for transporting and replication =E0 la
> solr
> >> should also be considered)
> >>
> >> paul
> >>
> >>
> >> Le 2 oct. 2012 =E0 11:10, Ian Lea a =E9crit :
> >>
> >>> You'll certainly need to factor in the performance of NFS versus loca=
l
> >> disks.
> >>>
> >>> My experience is that smallish low activity indexes work just fine on
> >>> NFS, but large high activity indexes are not so good, particularly if
> >>> you have a lot of modifications to the index.
> >>>
> >>> You may want to install a custom IndexDeletionPolicy.  See the
> >>> javadocs for details with specific reference to NFS.
> >>>
> >>>
> >>> --
> >>> Ian.
> >>>
> >>> On Tue, Oct 2, 2012 at 3:21 AM, Vitaly Funstein <vfunstein@gmail.com>
> >> wrote:
> >>>> How tolerant is your project of decreased search and indexing
> >> performance?
> >>>> You could probably write a simple test that compares search and writ=
e
> >>>> speeds of local and NFS-mounted indexes and make the decision based =
on
> >> the
> >>>> results.
> >>>>
> >>>> On Mon, Oct 1, 2012 at 3:06 PM, Jong Kim <jong.lucene@gmail.com>
> wrote:
> >>>>
> >>>>> Hi,
> >>>>>
> >>>>> According to the Lucene In Action (Second Edition), the section
> 2.11.2
> >>>>> "Accessing an index over a remote file system" explains that there
> are
> >>>>> issues related to accessing a Lucene index across remote file syste=
m
> >>>>> including NFS.
> >>>>>
> >>>>> I'm particuarly interested in NFS compatibility, and wondering if
> >> there has
> >>>>> been any work done to solve or mitigate this problem. Has this issu=
e
> >> been
> >>>>> addressed? If not, are there some reliable work-arounds that make
> this
> >>>>> possible at the expense of some sacrifice in other areas?
> >>>>>
> >>>>> Any information would be greatly appreciated, since my project
> heavily
> >>>>> depends on the feasibility of this.
> >>>>>
> >>>>> Thanks
> >>>>> /Jong
> >>>>>
> >>>
> >>> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--e89a8f50352e77ef9104cb137919--

From java-user-return-53800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct  2 13:29:48 2012
Return-Path: <java-user-return-53800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8CEA9DBF9
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  2 Oct 2012 13:29:48 +0000 (UTC)
Received: (qmail 41407 invoked by uid 500); 2 Oct 2012 13:29:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41359 invoked by uid 500); 2 Oct 2012 13:29:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41350 invoked by uid 99); 2 Oct 2012 13:29:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Oct 2012 13:29:46 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jong.lucene@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-ia0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Oct 2012 13:29:39 +0000
Received: by iaeh11 with SMTP id h11so848931iae.35
        for <java-user@lucene.apache.org>; Tue, 02 Oct 2012 06:29:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=CbyX+tupiS3i7LCqwXG5tuxJtiBWIRbCNzHNzvCUP6w=;
        b=olMFkcpYrbfrIRE01Eof+ZP0BKfkxQ8OKFLvvfjQ6M6aIWVoN0qAWfOQ2ZZ6ZZvUq1
         EsoWh1aha9PwAERD6OFFm+UJj7ikKFJ6fQEpp1swvsE7DZRJbNC1lEemkt3VXeGIagH8
         tgegzszbFbks0/4swWE83uhW15gc4vHJ1VWsSqhjWjNQ1AFCYenkDimK5V3WPcfzgI16
         k3ljqkvyiDkdUWuwXspbxKW+xG1MlEYB6wLuwokFhlN2xfor30uvv48JEY8vzZS6rR5A
         bY9N+HEs0xos9HRsy0RzgZ196g+q8ES/nTYFKXcm/r0m+KLsP25fyLDvJp0Kii8bv84u
         DO4w==
MIME-Version: 1.0
Received: by 10.43.16.67 with SMTP id px3mr13865929icb.17.1349184557919; Tue,
 02 Oct 2012 06:29:17 -0700 (PDT)
Received: by 10.64.167.205 with HTTP; Tue, 2 Oct 2012 06:29:17 -0700 (PDT)
In-Reply-To: <CAEY5pxXL6gsf=uOsN8LzknmHH95LUKbLdTC-VYBMPzk1kuv_Hg@mail.gmail.com>
References: <CA+iFDpxF_B3qq_b-bx8iC+HevXC1Je9iKkiyFVvG0bL0Qgvbeg@mail.gmail.com>
	<CALr4HzqoUBa08jiABi7FfwfbtB22=x9dqWKn+7D_DEmfMSX1Rg@mail.gmail.com>
	<CAEY5pxVHOCg7EGf6=nTZ3Xp38ScUbyYVfQ-fCHQrXsfuTdpdZw@mail.gmail.com>
	<F2F1B386-9B97-4DE9-8207-7D85093679FB@hoplahup.net>
	<CA+iFDpw2kxKQa5YsgoU3_AzKv1jtMPQ7BkqPBJD-OjWx-B_xGg@mail.gmail.com>
	<3BC169A5-F0E2-480B-93D7-535D91B7C8A4@hoplahup.net>
	<CAEY5pxXL6gsf=uOsN8LzknmHH95LUKbLdTC-VYBMPzk1kuv_Hg@mail.gmail.com>
Date: Tue, 2 Oct 2012 09:29:17 -0400
Message-ID: <CA+iFDpwXH8=TaUcTb0SaYbnMZQ1iPsiwH0ufamd7iNAWhtorGA@mail.gmail.com>
Subject: Re: Lucene index on NFS
From: Jong Kim <jong.lucene@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec51824024faceb04cb138231

--bcaec51824024faceb04cb138231
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

The setup is I have a home-grown server process that has exclusive access
to the index files. All reads and writes are done through this server. No
other process is reading the same index files whether it's local or over
NFS.
/Jong
On Tue, Oct 2, 2012 at 8:56 AM, Ian Lea <ian.lea@gmail.com> wrote:

> I agree that reliability/corruption is not an issue.
>
> I would also put it that performance is likely to suffer, but that's
> not certain.  A fast disk mounted over NFS can be quicker than a slow
> local disk.  And how much do you care about performance?  Maybe it
> would be fast enough over NFS to make the ease of deployment balance
> out lesser speed.
>
> What's the setup here?  Will you be writing to an index on local disk
> of server A and reading it, over NFS, from server B (and C and ...) or
> what?
>
> --
> Ian.
>
>
> On Tue, Oct 2, 2012 at 1:45 PM, Paul Libbrecht <paul@hoplahup.net> wrote:
> > I doubt NFS is an unreliable file-system.
> > Lucene uses normal random access to files and this has no reason to be
> unreliable unless bad things such as network drops happen (in which case
> you'd get direct failures or  timeouts rather than corruption). I've seen
> fairly large infrastructures being based on NFS and corruption is somethi=
ng
> I've never heard about.
> >
> > Note: no concurrent access to a lucene index, right?
> >
> > Paul
> >
> >
> > Le 2 oct. 2012 =E0 14:01, Jong Kim a =E9crit :
> >
> >> Thank you all for reply.
> >>
> >> So it soudns like it is a known fact that the performance would suffer
> >> rather significantly when the index files are accessed over NFS. But h=
ow
> >> about reliability and robustness (which seems even more important)?
> Isn't
> >> there any increased possibility for intermittent errors such as index
> file
> >> corruption (due to cache inconsistency, difference in delete semantics=
,
> >> etc.) when using NFS? Has anyone run into such trouble? Or is it
> strictly
> >> just a performance issue?
> >>
> >> /Jong
> >> On Tue, Oct 2, 2012 at 5:17 AM, Paul Libbrecht <paul@hoplahup.net>
> wrote:
> >>
> >>> My experience in the Lucene 1.x times were a factor of at least four =
in
> >>> writing to NFS and about two when reading from there. I'd discourage
> this
> >>> as much as possible!
> >>>
> >>> (rsync is way more your friend for transporting and replication =E0 l=
a
> solr
> >>> should also be considered)
> >>>
> >>> paul
> >>>
> >>>
> >>> Le 2 oct. 2012 =E0 11:10, Ian Lea a =E9crit :
> >>>
> >>>> You'll certainly need to factor in the performance of NFS versus loc=
al
> >>> disks.
> >>>>
> >>>> My experience is that smallish low activity indexes work just fine o=
n
> >>>> NFS, but large high activity indexes are not so good, particularly i=
f
> >>>> you have a lot of modifications to the index.
> >>>>
> >>>> You may want to install a custom IndexDeletionPolicy.  See the
> >>>> javadocs for details with specific reference to NFS.
> >>>>
> >>>>
> >>>> --
> >>>> Ian.
> >>>>
> >>>> On Tue, Oct 2, 2012 at 3:21 AM, Vitaly Funstein <vfunstein@gmail.com=
>
> >>> wrote:
> >>>>> How tolerant is your project of decreased search and indexing
> >>> performance?
> >>>>> You could probably write a simple test that compares search and wri=
te
> >>>>> speeds of local and NFS-mounted indexes and make the decision based
> on
> >>> the
> >>>>> results.
> >>>>>
> >>>>> On Mon, Oct 1, 2012 at 3:06 PM, Jong Kim <jong.lucene@gmail.com>
> wrote:
> >>>>>
> >>>>>> Hi,
> >>>>>>
> >>>>>> According to the Lucene In Action (Second Edition), the section
> 2.11.2
> >>>>>> "Accessing an index over a remote file system" explains that there
> are
> >>>>>> issues related to accessing a Lucene index across remote file syst=
em
> >>>>>> including NFS.
> >>>>>>
> >>>>>> I'm particuarly interested in NFS compatibility, and wondering if
> >>> there has
> >>>>>> been any work done to solve or mitigate this problem. Has this iss=
ue
> >>> been
> >>>>>> addressed? If not, are there some reliable work-arounds that make
> this
> >>>>>> possible at the expense of some sacrifice in other areas?
> >>>>>>
> >>>>>> Any information would be greatly appreciated, since my project
> heavily
> >>>>>> depends on the feasibility of this.
> >>>>>>
> >>>>>> Thanks
> >>>>>> /Jong
> >>>>>>
> >>>>
> >>>> --------------------------------------------------------------------=
-
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>
> >>>
> >>> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--bcaec51824024faceb04cb138231--

From java-user-return-53801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct  2 13:35:17 2012
Return-Path: <java-user-return-53801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D52DCDC2F
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  2 Oct 2012 13:35:17 +0000 (UTC)
Received: (qmail 68236 invoked by uid 500); 2 Oct 2012 13:35:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68175 invoked by uid 500); 2 Oct 2012 13:35:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68167 invoked by uid 99); 2 Oct 2012 13:35:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Oct 2012 13:35:15 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jong.lucene@gmail.com designates 209.85.223.176 as permitted sender)
Received: from [209.85.223.176] (HELO mail-ie0-f176.google.com) (209.85.223.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Oct 2012 13:35:09 +0000
Received: by ieak11 with SMTP id k11so17588348iea.35
        for <java-user@lucene.apache.org>; Tue, 02 Oct 2012 06:34:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=vIcSUzO3TaOt7SjKpWkvFToRPNegM4M5UfsS0E3SpcE=;
        b=IcYIC//MBWZau7s+bMAV40ha/aNv+Ps7j2PgSqASVjl9NmHIdIS3Hp+BSNHtd7yXit
         /HVfGsqjU/Lr7fX6z9W0PhFmXWWK69nzyUXwOC/EvNgmWBHoYxiVs2LderU6I/Itiqow
         9nWWXJxf9rNJ1WgiHuqxCo+cRA62Zam/lf7V/d18JiriPtvTltH0HLIyyy/B0vF+cVbm
         DvsEGANrvGxU/9TzD77E7qjfMddfwXwfh6FJVk8pw/mrDHzNcdV0Si6mNc4spaEh+1jt
         9SleQRL4YPmw8yj+62itg9plVD+MhNqjX2aY9Bagm144auf3jqH2M6XFYl6HJVeK2LZk
         MsIQ==
MIME-Version: 1.0
Received: by 10.50.88.161 with SMTP id bh1mr8858112igb.5.1349184887909; Tue,
 02 Oct 2012 06:34:47 -0700 (PDT)
Received: by 10.64.167.205 with HTTP; Tue, 2 Oct 2012 06:34:47 -0700 (PDT)
In-Reply-To: <01a401cda09e$17b00160$47100420$@thetaphi.de>
References: <CA+iFDpxF_B3qq_b-bx8iC+HevXC1Je9iKkiyFVvG0bL0Qgvbeg@mail.gmail.com>
	<CALr4HzqoUBa08jiABi7FfwfbtB22=x9dqWKn+7D_DEmfMSX1Rg@mail.gmail.com>
	<CAEY5pxVHOCg7EGf6=nTZ3Xp38ScUbyYVfQ-fCHQrXsfuTdpdZw@mail.gmail.com>
	<F2F1B386-9B97-4DE9-8207-7D85093679FB@hoplahup.net>
	<CA+iFDpw2kxKQa5YsgoU3_AzKv1jtMPQ7BkqPBJD-OjWx-B_xGg@mail.gmail.com>
	<3BC169A5-F0E2-480B-93D7-535D91B7C8A4@hoplahup.net>
	<01a401cda09e$17b00160$47100420$@thetaphi.de>
Date: Tue, 2 Oct 2012 09:34:47 -0400
Message-ID: <CA+iFDpzvijkMhqyCu-JDxhVwxWwv6i3uN-A=5=wB7N9wC2Q7yg@mail.gmail.com>
Subject: Re: Lucene index on NFS
From: Jong Kim <jong.lucene@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=e89a8f3ba211faecad04cb1395e2

--e89a8f3ba211faecad04cb1395e2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Uwe,

Thanks for the detailed information. Are you aware of an existing
implementation of the IndexDeletionPolicy interface that is "known" to work
reliably with NFS?
/Jong
On Tue, Oct 2, 2012 at 9:01 AM, Uwe Schindler <uwe@thetaphi.de> wrote:

> There are no real issues with NFS regarding safety of the data. The
> problem with NFS is the following (maybe it is fixed in NFS4, I have no
> idea):
> Lucene deletes index files while they are in use, which is perfectly fine
> for local file systems (because the inode is still alive, although it is =
no
> longer appearing in directory listing). Unfortunately the deletes of thos=
e
> index files are not visible to the directory listing asap when using NFS;
> also newly added files are not always showing up in the directory listing
> once created. This causes problems with Lucene like file not found
> exceptions. Also the index directory locking does not work (it times out,
> because NativeFSLockFactory does not work with NFS - which is a somehow a
> bug in NFS).
>
> To use it with NFS make sure:
> - Use a custom deletion policy on IndexWriter, so unused files are not
> deleted asap (
> https://lucene.apache.org/core/3_6_1/api/all/org/apache/lucene/index/Inde=
xDeletionPolicy.html
> )
> - Use SimpleFSLockFactory
>
> Uwe
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
> > -----Original Message-----
> > From: Paul Libbrecht [mailto:paul@hoplahup.net]
> > Sent: Tuesday, October 02, 2012 2:45 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: Lucene index on NFS
> >
> > I doubt NFS is an unreliable file-system.
> > Lucene uses normal random access to files and this has no reason to be
> > unreliable unless bad things such as network drops happen (in which cas=
e
> you'd
> > get direct failures or  timeouts rather than corruption). I've seen
> fairly large
> > infrastructures being based on NFS and corruption is something I've nev=
er
> > heard about.
> >
> > Note: no concurrent access to a lucene index, right?
> >
> > Paul
> >
> >
> > Le 2 oct. 2012 =E0 14:01, Jong Kim a =E9crit :
> >
> > > Thank you all for reply.
> > >
> > > So it soudns like it is a known fact that the performance would suffe=
r
> > > rather significantly when the index files are accessed over NFS. But
> > > how about reliability and robustness (which seems even more
> > > important)? Isn't there any increased possibility for intermittent
> > > errors such as index file corruption (due to cache inconsistency,
> > > difference in delete semantics,
> > > etc.) when using NFS? Has anyone run into such trouble? Or is it
> > > strictly just a performance issue?
> > >
> > > /Jong
> > > On Tue, Oct 2, 2012 at 5:17 AM, Paul Libbrecht <paul@hoplahup.net>
> wrote:
> > >
> > >> My experience in the Lucene 1.x times were a factor of at least four
> > >> in writing to NFS and about two when reading from there. I'd
> > >> discourage this as much as possible!
> > >>
> > >> (rsync is way more your friend for transporting and replication =E0 =
la
> > >> solr should also be considered)
> > >>
> > >> paul
> > >>
> > >>
> > >> Le 2 oct. 2012 =E0 11:10, Ian Lea a =E9crit :
> > >>
> > >>> You'll certainly need to factor in the performance of NFS versus
> > >>> local
> > >> disks.
> > >>>
> > >>> My experience is that smallish low activity indexes work just fine
> > >>> on NFS, but large high activity indexes are not so good,
> > >>> particularly if you have a lot of modifications to the index.
> > >>>
> > >>> You may want to install a custom IndexDeletionPolicy.  See the
> > >>> javadocs for details with specific reference to NFS.
> > >>>
> > >>>
> > >>> --
> > >>> Ian.
> > >>>
> > >>> On Tue, Oct 2, 2012 at 3:21 AM, Vitaly Funstein
> > >>> <vfunstein@gmail.com>
> > >> wrote:
> > >>>> How tolerant is your project of decreased search and indexing
> > >> performance?
> > >>>> You could probably write a simple test that compares search and
> > >>>> write speeds of local and NFS-mounted indexes and make the decisio=
n
> > >>>> based on
> > >> the
> > >>>> results.
> > >>>>
> > >>>> On Mon, Oct 1, 2012 at 3:06 PM, Jong Kim <jong.lucene@gmail.com>
> > wrote:
> > >>>>
> > >>>>> Hi,
> > >>>>>
> > >>>>> According to the Lucene In Action (Second Edition), the section
> > >>>>> 2.11.2 "Accessing an index over a remote file system" explains
> > >>>>> that there are issues related to accessing a Lucene index across
> > >>>>> remote file system including NFS.
> > >>>>>
> > >>>>> I'm particuarly interested in NFS compatibility, and wondering if
> > >> there has
> > >>>>> been any work done to solve or mitigate this problem. Has this
> > >>>>> issue
> > >> been
> > >>>>> addressed? If not, are there some reliable work-arounds that make
> > >>>>> this possible at the expense of some sacrifice in other areas?
> > >>>>>
> > >>>>> Any information would be greatly appreciated, since my project
> > >>>>> heavily depends on the feasibility of this.
> > >>>>>
> > >>>>> Thanks
> > >>>>> /Jong
> > >>>>>
> > >>>
> > >>> -------------------------------------------------------------------=
-
> > >>> - To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>>
> > >>
> > >>
> > >> --------------------------------------------------------------------=
-
> > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>
> > >>
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--e89a8f3ba211faecad04cb1395e2--

From java-user-return-53802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct  2 13:37:43 2012
Return-Path: <java-user-return-53802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A2B0EDC48
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  2 Oct 2012 13:37:43 +0000 (UTC)
Received: (qmail 75649 invoked by uid 500); 2 Oct 2012 13:37:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75590 invoked by uid 500); 2 Oct 2012 13:37:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75577 invoked by uid 99); 2 Oct 2012 13:37:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Oct 2012 13:37:41 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tommaso.teofili@gmail.com designates 209.85.215.48 as permitted sender)
Received: from [209.85.215.48] (HELO mail-la0-f48.google.com) (209.85.215.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Oct 2012 13:37:36 +0000
Received: by lagu2 with SMTP id u2so2791906lag.35
        for <java-user@lucene.apache.org>; Tue, 02 Oct 2012 06:37:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=1nuB31FPG6k7xath8vexsO4BCz4aWnvChSLWUSfDMas=;
        b=Ppk4xtn9XMDbkUuXpXTq6490xE5NTwoFFs5h2Dfz8v0EsZFnFvBmSEtGZhILjIB6FG
         qHY4G30NHiXBXZ+DoAbtgKsXFuCngO6lCQongbJLXMsVMbTIRF09wEsps7bmZr9PHRxL
         LNnxRcE+w7Et7POgXIYiKJs2sGyh1n3hi0MShU7NppCUNy0xIJeG44g5LVbcVQun9sa7
         9ePdF3+nt+VVXKyFE1QkXgbH37QuC9UMBKYkrc4bpnaSvH/Vo15RtHxOW6UxV1dvYiOH
         PONoVjkrsDC5A/upAvvNHzCJsfU7QqAoiBheaOQghecQqoX74mm+B+FYFamz1wEgqKh4
         TBkQ==
Received: by 10.152.103.243 with SMTP id fz19mr14446053lab.27.1349185034473;
 Tue, 02 Oct 2012 06:37:14 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.114.15.103 with HTTP; Tue, 2 Oct 2012 06:36:34 -0700 (PDT)
In-Reply-To: <CA+iFDpwXH8=TaUcTb0SaYbnMZQ1iPsiwH0ufamd7iNAWhtorGA@mail.gmail.com>
References: <CA+iFDpxF_B3qq_b-bx8iC+HevXC1Je9iKkiyFVvG0bL0Qgvbeg@mail.gmail.com>
 <CALr4HzqoUBa08jiABi7FfwfbtB22=x9dqWKn+7D_DEmfMSX1Rg@mail.gmail.com>
 <CAEY5pxVHOCg7EGf6=nTZ3Xp38ScUbyYVfQ-fCHQrXsfuTdpdZw@mail.gmail.com>
 <F2F1B386-9B97-4DE9-8207-7D85093679FB@hoplahup.net> <CA+iFDpw2kxKQa5YsgoU3_AzKv1jtMPQ7BkqPBJD-OjWx-B_xGg@mail.gmail.com>
 <3BC169A5-F0E2-480B-93D7-535D91B7C8A4@hoplahup.net> <CAEY5pxXL6gsf=uOsN8LzknmHH95LUKbLdTC-VYBMPzk1kuv_Hg@mail.gmail.com>
 <CA+iFDpwXH8=TaUcTb0SaYbnMZQ1iPsiwH0ufamd7iNAWhtorGA@mail.gmail.com>
From: Tommaso Teofili <tommaso.teofili@gmail.com>
Date: Tue, 2 Oct 2012 15:36:34 +0200
Message-ID: <CAGnSx04X+DzLE8KrmXP717AxhESzexYByX0X3UJiBA8npV-hEg@mail.gmail.com>
Subject: Re: Lucene index on NFS
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=f46d04083a8bb7500b04cb139eb5
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d04083a8bb7500b04cb139eb5
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Ok, that saves you from concurrency issue, but in my experience is just
much slower than local file system, so still NFS can be used but with some
tradeoff on performance.

My 2 cents,
Tommaso

2012/10/2 Jong Kim <jong.lucene@gmail.com>

> The setup is I have a home-grown server process that has exclusive access
> to the index files. All reads and writes are done through this server. No
> other process is reading the same index files whether it's local or over
> NFS.
> /Jong
> On Tue, Oct 2, 2012 at 8:56 AM, Ian Lea <ian.lea@gmail.com> wrote:
>
> > I agree that reliability/corruption is not an issue.
> >
> > I would also put it that performance is likely to suffer, but that's
> > not certain.  A fast disk mounted over NFS can be quicker than a slow
> > local disk.  And how much do you care about performance?  Maybe it
> > would be fast enough over NFS to make the ease of deployment balance
> > out lesser speed.
> >
> > What's the setup here?  Will you be writing to an index on local disk
> > of server A and reading it, over NFS, from server B (and C and ...) or
> > what?
> >
> > --
> > Ian.
> >
> >
> > On Tue, Oct 2, 2012 at 1:45 PM, Paul Libbrecht <paul@hoplahup.net>
> wrote:
> > > I doubt NFS is an unreliable file-system.
> > > Lucene uses normal random access to files and this has no reason to b=
e
> > unreliable unless bad things such as network drops happen (in which cas=
e
> > you'd get direct failures or  timeouts rather than corruption). I've se=
en
> > fairly large infrastructures being based on NFS and corruption is
> something
> > I've never heard about.
> > >
> > > Note: no concurrent access to a lucene index, right?
> > >
> > > Paul
> > >
> > >
> > > Le 2 oct. 2012 =E0 14:01, Jong Kim a =E9crit :
> > >
> > >> Thank you all for reply.
> > >>
> > >> So it soudns like it is a known fact that the performance would suff=
er
> > >> rather significantly when the index files are accessed over NFS. But
> how
> > >> about reliability and robustness (which seems even more important)?
> > Isn't
> > >> there any increased possibility for intermittent errors such as inde=
x
> > file
> > >> corruption (due to cache inconsistency, difference in delete
> semantics,
> > >> etc.) when using NFS? Has anyone run into such trouble? Or is it
> > strictly
> > >> just a performance issue?
> > >>
> > >> /Jong
> > >> On Tue, Oct 2, 2012 at 5:17 AM, Paul Libbrecht <paul@hoplahup.net>
> > wrote:
> > >>
> > >>> My experience in the Lucene 1.x times were a factor of at least fou=
r
> in
> > >>> writing to NFS and about two when reading from there. I'd discourag=
e
> > this
> > >>> as much as possible!
> > >>>
> > >>> (rsync is way more your friend for transporting and replication =E0=
 la
> > solr
> > >>> should also be considered)
> > >>>
> > >>> paul
> > >>>
> > >>>
> > >>> Le 2 oct. 2012 =E0 11:10, Ian Lea a =E9crit :
> > >>>
> > >>>> You'll certainly need to factor in the performance of NFS versus
> local
> > >>> disks.
> > >>>>
> > >>>> My experience is that smallish low activity indexes work just fine
> on
> > >>>> NFS, but large high activity indexes are not so good, particularly
> if
> > >>>> you have a lot of modifications to the index.
> > >>>>
> > >>>> You may want to install a custom IndexDeletionPolicy.  See the
> > >>>> javadocs for details with specific reference to NFS.
> > >>>>
> > >>>>
> > >>>> --
> > >>>> Ian.
> > >>>>
> > >>>> On Tue, Oct 2, 2012 at 3:21 AM, Vitaly Funstein <
> vfunstein@gmail.com>
> > >>> wrote:
> > >>>>> How tolerant is your project of decreased search and indexing
> > >>> performance?
> > >>>>> You could probably write a simple test that compares search and
> write
> > >>>>> speeds of local and NFS-mounted indexes and make the decision bas=
ed
> > on
> > >>> the
> > >>>>> results.
> > >>>>>
> > >>>>> On Mon, Oct 1, 2012 at 3:06 PM, Jong Kim <jong.lucene@gmail.com>
> > wrote:
> > >>>>>
> > >>>>>> Hi,
> > >>>>>>
> > >>>>>> According to the Lucene In Action (Second Edition), the section
> > 2.11.2
> > >>>>>> "Accessing an index over a remote file system" explains that the=
re
> > are
> > >>>>>> issues related to accessing a Lucene index across remote file
> system
> > >>>>>> including NFS.
> > >>>>>>
> > >>>>>> I'm particuarly interested in NFS compatibility, and wondering i=
f
> > >>> there has
> > >>>>>> been any work done to solve or mitigate this problem. Has this
> issue
> > >>> been
> > >>>>>> addressed? If not, are there some reliable work-arounds that mak=
e
> > this
> > >>>>>> possible at the expense of some sacrifice in other areas?
> > >>>>>>
> > >>>>>> Any information would be greatly appreciated, since my project
> > heavily
> > >>>>>> depends on the feasibility of this.
> > >>>>>>
> > >>>>>> Thanks
> > >>>>>> /Jong
> > >>>>>>
> > >>>>
> > >>>>
> ---------------------------------------------------------------------
> > >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>>>
> > >>>
> > >>>
> > >>> -------------------------------------------------------------------=
--
> > >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>>
> > >>>
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

--f46d04083a8bb7500b04cb139eb5--

From java-user-return-53803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct  2 13:39:34 2012
Return-Path: <java-user-return-53803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9DECADC4B
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  2 Oct 2012 13:39:34 +0000 (UTC)
Received: (qmail 82212 invoked by uid 500); 2 Oct 2012 13:39:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82169 invoked by uid 500); 2 Oct 2012 13:39:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82161 invoked by uid 99); 2 Oct 2012 13:39:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Oct 2012 13:39:32 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.32.147.10] (HELO ohcinmx01.cengagelearning.com) (69.32.147.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Oct 2012 13:39:27 +0000
Received: from pps.filterd (ohcinppagent02 [127.0.0.1])
	by ohcinppagent02.corp.local (8.14.5/8.14.5) with SMTP id q92DadBF014900
	for <java-user@lucene.apache.org>; Tue, 2 Oct 2012 06:39:04 -0700
Received: from ohcinht03.corp.local (ohcinht03.corp.local [10.160.3.175])
	by ohcinppagent02.corp.local with ESMTP id 17jwq8cmv8-8
	(version=TLSv1/SSLv3 cipher=RC4-MD5 bits=128 verify=NOT)
	for <java-user@lucene.apache.org>; Tue, 02 Oct 2012 06:39:04 -0700
Received: from OHCINMBX01.corp.local ([10.160.3.160]) by ohcinht03.corp.local
 ([10.160.3.175]) with mapi; Tue, 2 Oct 2012 09:38:36 -0400
From: "Nader, John P" <john.nader@cengage.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 2 Oct 2012 09:38:33 -0400
Subject: Re: Lucene index on NFS
Thread-Topic: Lucene index on NFS
Thread-Index: Ac2goziePYv5bmq6TOC/za05JxQqNA==
Message-ID: <CC905F51.11A6%john.nader@cengage.com>
In-Reply-To: <CA+iFDpw2kxKQa5YsgoU3_AzKv1jtMPQ7BkqPBJD-OjWx-B_xGg@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
user-agent: Microsoft-MacOutlook/14.2.3.120616
acceptlanguage: en-US
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:5.7.7855,1.0.431,0.0.0000
 definitions=2012-10-02_03:2012-10-02,2012-10-02,1970-01-01 signatures=0
X-Proofpoint-Spam-Details: rule=notspam policy=default score=0 spamscore=0 suspectscore=8 phishscore=0
 bulkscore=0 adultscore=0 classifier=spam adjust=0 reason=mlx scancount=1
 engine=7.0.1-1207200000 definitions=main-1210020121
X-Virus-Checked: Checked by ClamAV on apache.org

We've been in production on Lucene over NFS for about 4 years now.  Though
we've had performance issues related to NFS (similar to those mentioned on
this thread), we've only seen some reliability issues.  Index writing I/O
timeout exceptions are the primary issue.  We've addressed these by
implementing retry logic.  This kept transactional consistency and avoided
corruption.  I can't recall specifically where these timeouts occurred,
but I do remember that on our version of Lucene at the time (3.0.2) the
timeout was not configurable, and defaulted to 5 seconds.  Had it been
configurable, we could have reduced how frequently we needed to rollback
and retry.

On another point, NFS performance can be greatly enhanced with servers
that have extra memory for mapping the index files.  We found after
initial warmup and loading of Lucene that queries performance very well
since most of the data needed to execute them is cached locally.

Also, keep in mind that local disk is not a free ride either.  This takes
you down data replication.  You end up repeating indexing once per
replica.  You also may have to move the indices around as you
add/remove/restart nodes.  We are moving to this architecture with a new
product, so I am just now starting to understand the trade-offs.

Hope that helps.

-John=20




On 10/2/12 8:01 AM, "Jong Kim" <jong.lucene@gmail.com> wrote:

>Thank you all for reply.
>
>So it soudns like it is a known fact that the performance would suffer
>rather significantly when the index files are accessed over NFS. But how
>about reliability and robustness (which seems even more important)? Isn't
>there any increased possibility for intermittent errors such as index file
>corruption (due to cache inconsistency, difference in delete semantics,
>etc.) when using NFS? Has anyone run into such trouble? Or is it strictly
>just a performance issue?
>
>/Jong
>On Tue, Oct 2, 2012 at 5:17 AM, Paul Libbrecht <paul@hoplahup.net> wrote:
>
>> My experience in the Lucene 1.x times were a factor of at least four in
>> writing to NFS and about two when reading from there. I'd discourage
>>this
>> as much as possible!
>>
>> (rsync is way more your friend for transporting and replication =E0 la
>>solr
>> should also be considered)
>>
>> paul
>>
>>
>> Le 2 oct. 2012 =E0 11:10, Ian Lea a =E9crit :
>>
>> > You'll certainly need to factor in the performance of NFS versus local
>> disks.
>> >
>> > My experience is that smallish low activity indexes work just fine on
>> > NFS, but large high activity indexes are not so good, particularly if
>> > you have a lot of modifications to the index.
>> >
>> > You may want to install a custom IndexDeletionPolicy.  See the
>> > javadocs for details with specific reference to NFS.
>> >
>> >
>> > --
>> > Ian.
>> >
>> > On Tue, Oct 2, 2012 at 3:21 AM, Vitaly Funstein <vfunstein@gmail.com>
>> wrote:
>> >> How tolerant is your project of decreased search and indexing
>> performance?
>> >> You could probably write a simple test that compares search and write
>> >> speeds of local and NFS-mounted indexes and make the decision based
>>on
>> the
>> >> results.
>> >>
>> >> On Mon, Oct 1, 2012 at 3:06 PM, Jong Kim <jong.lucene@gmail.com>
>>wrote:
>> >>
>> >>> Hi,
>> >>>
>> >>> According to the Lucene In Action (Second Edition), the section
>>2.11.2
>> >>> "Accessing an index over a remote file system" explains that there
>>are
>> >>> issues related to accessing a Lucene index across remote file system
>> >>> including NFS.
>> >>>
>> >>> I'm particuarly interested in NFS compatibility, and wondering if
>> there has
>> >>> been any work done to solve or mitigate this problem. Has this issue
>> been
>> >>> addressed? If not, are there some reliable work-arounds that make
>>this
>> >>> possible at the expense of some sacrifice in other areas?
>> >>>
>> >>> Any information would be greatly appreciated, since my project
>>heavily
>> >>> depends on the feasibility of this.
>> >>>
>> >>> Thanks
>> >>> /Jong
>> >>>
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct  2 15:13:12 2012
Return-Path: <java-user-return-53804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 524DEDF18
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  2 Oct 2012 15:13:12 +0000 (UTC)
Received: (qmail 91009 invoked by uid 500); 2 Oct 2012 15:13:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90926 invoked by uid 500); 2 Oct 2012 15:13:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90903 invoked by uid 99); 2 Oct 2012 15:13:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Oct 2012 15:13:09 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jong.lucene@gmail.com designates 209.85.223.176 as permitted sender)
Received: from [209.85.223.176] (HELO mail-ie0-f176.google.com) (209.85.223.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Oct 2012 15:13:04 +0000
Received: by ieak11 with SMTP id k11so17935949iea.35
        for <java-user@lucene.apache.org>; Tue, 02 Oct 2012 08:12:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=dlZm5kakHQxjk7ojxzlswo2WMlzZe1oje5bTqpn32C4=;
        b=jAizE2MUHfni/Wqf3KgBbVGOGJfJybC9PS6Be5RZyIFS+bRJM9izksKP+JgcVohBsq
         qE8q2lZLXj+jPgUOFhrxxxzJ4VTEfAA2t9XHX5SjJAqpOusrwYAVX31sHHqYrtJp8NNE
         fP6w28dSwTs+/F/PloekdnbAPAuZuLHOyElXHTsJZv/+7iTJZNpMHLsv55oqSBmYs9fT
         o1uPKldIm/p0qfjFzqrLyKxk9ia68PFHznFh4z/n/ZQh4tFI+ZBvvS8IYHcEjHFtAdZI
         V2WjQIcxfSjA+F8AQ1U36RoLLNIV0YoRnVJ8KXjbM2y3avWJA/sJv3CI2OtejlSFFpva
         tfuA==
MIME-Version: 1.0
Received: by 10.50.0.166 with SMTP id 6mr9096054igf.17.1349190763447; Tue, 02
 Oct 2012 08:12:43 -0700 (PDT)
Received: by 10.64.167.205 with HTTP; Tue, 2 Oct 2012 08:12:43 -0700 (PDT)
In-Reply-To: <CC905F51.11A6%john.nader@cengage.com>
References: <CA+iFDpw2kxKQa5YsgoU3_AzKv1jtMPQ7BkqPBJD-OjWx-B_xGg@mail.gmail.com>
	<CC905F51.11A6%john.nader@cengage.com>
Date: Tue, 2 Oct 2012 11:12:43 -0400
Message-ID: <CA+iFDpyOn+=uJQg4aa4YM+QV91n3-ZJL1Jri_hibZMgUW_tpVg@mail.gmail.com>
Subject: Re: Lucene index on NFS
From: Jong Kim <jong.lucene@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=e89a8f502ff830872d04cb14f4e6
X-Virus-Checked: Checked by ClamAV on apache.org

--e89a8f502ff830872d04cb14f4e6
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

John,

Are you indicating that later Lucene releases might have a config setting
that can control the write I/O timeout? If so, do you happen to know where
it is or how to set it? I did quick Googling, but all I get back is the
write lock timeout which is set to one second by default.
Thanks
/Jong
On Tue, Oct 2, 2012 at 9:38 AM, Nader, John P <john.nader@cengage.com>wrote=
:

> We've been in production on Lucene over NFS for about 4 years now.  Thoug=
h
> we've had performance issues related to NFS (similar to those mentioned o=
n
> this thread), we've only seen some reliability issues.  Index writing I/O
> timeout exceptions are the primary issue.  We've addressed these by
> implementing retry logic.  This kept transactional consistency and avoide=
d
> corruption.  I can't recall specifically where these timeouts occurred,
> but I do remember that on our version of Lucene at the time (3.0.2) the
> timeout was not configurable, and defaulted to 5 seconds.  Had it been
> configurable, we could have reduced how frequently we needed to rollback
> and retry.
>
> On another point, NFS performance can be greatly enhanced with servers
> that have extra memory for mapping the index files.  We found after
> initial warmup and loading of Lucene that queries performance very well
> since most of the data needed to execute them is cached locally.
>
> Also, keep in mind that local disk is not a free ride either.  This takes
> you down data replication.  You end up repeating indexing once per
> replica.  You also may have to move the indices around as you
> add/remove/restart nodes.  We are moving to this architecture with a new
> product, so I am just now starting to understand the trade-offs.
>
> Hope that helps.
>
> -John
>
>
>
>
> On 10/2/12 8:01 AM, "Jong Kim" <jong.lucene@gmail.com> wrote:
>
> >Thank you all for reply.
> >
> >So it soudns like it is a known fact that the performance would suffer
> >rather significantly when the index files are accessed over NFS. But how
> >about reliability and robustness (which seems even more important)? Isn'=
t
> >there any increased possibility for intermittent errors such as index fi=
le
> >corruption (due to cache inconsistency, difference in delete semantics,
> >etc.) when using NFS? Has anyone run into such trouble? Or is it strictl=
y
> >just a performance issue?
> >
> >/Jong
> >On Tue, Oct 2, 2012 at 5:17 AM, Paul Libbrecht <paul@hoplahup.net> wrote=
:
> >
> >> My experience in the Lucene 1.x times were a factor of at least four i=
n
> >> writing to NFS and about two when reading from there. I'd discourage
> >>this
> >> as much as possible!
> >>
> >> (rsync is way more your friend for transporting and replication =E0 la
> >>solr
> >> should also be considered)
> >>
> >> paul
> >>
> >>
> >> Le 2 oct. 2012 =E0 11:10, Ian Lea a =E9crit :
> >>
> >> > You'll certainly need to factor in the performance of NFS versus loc=
al
> >> disks.
> >> >
> >> > My experience is that smallish low activity indexes work just fine o=
n
> >> > NFS, but large high activity indexes are not so good, particularly i=
f
> >> > you have a lot of modifications to the index.
> >> >
> >> > You may want to install a custom IndexDeletionPolicy.  See the
> >> > javadocs for details with specific reference to NFS.
> >> >
> >> >
> >> > --
> >> > Ian.
> >> >
> >> > On Tue, Oct 2, 2012 at 3:21 AM, Vitaly Funstein <vfunstein@gmail.com=
>
> >> wrote:
> >> >> How tolerant is your project of decreased search and indexing
> >> performance?
> >> >> You could probably write a simple test that compares search and wri=
te
> >> >> speeds of local and NFS-mounted indexes and make the decision based
> >>on
> >> the
> >> >> results.
> >> >>
> >> >> On Mon, Oct 1, 2012 at 3:06 PM, Jong Kim <jong.lucene@gmail.com>
> >>wrote:
> >> >>
> >> >>> Hi,
> >> >>>
> >> >>> According to the Lucene In Action (Second Edition), the section
> >>2.11.2
> >> >>> "Accessing an index over a remote file system" explains that there
> >>are
> >> >>> issues related to accessing a Lucene index across remote file syst=
em
> >> >>> including NFS.
> >> >>>
> >> >>> I'm particuarly interested in NFS compatibility, and wondering if
> >> there has
> >> >>> been any work done to solve or mitigate this problem. Has this iss=
ue
> >> been
> >> >>> addressed? If not, are there some reliable work-arounds that make
> >>this
> >> >>> possible at the expense of some sacrifice in other areas?
> >> >>>
> >> >>> Any information would be greatly appreciated, since my project
> >>heavily
> >> >>> depends on the feasibility of this.
> >> >>>
> >> >>> Thanks
> >> >>> /Jong
> >> >>>
> >> >
> >> > --------------------------------------------------------------------=
-
> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--e89a8f502ff830872d04cb14f4e6--

From java-user-return-53805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct  2 15:20:26 2012
Return-Path: <java-user-return-53805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D0725DF6A
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  2 Oct 2012 15:20:26 +0000 (UTC)
Received: (qmail 15057 invoked by uid 500); 2 Oct 2012 15:20:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15006 invoked by uid 500); 2 Oct 2012 15:20:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14998 invoked by uid 99); 2 Oct 2012 15:20:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Oct 2012 15:20:24 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jong.lucene@gmail.com designates 209.85.223.176 as permitted sender)
Received: from [209.85.223.176] (HELO mail-ie0-f176.google.com) (209.85.223.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Oct 2012 15:20:19 +0000
Received: by ieak11 with SMTP id k11so17962372iea.35
        for <java-user@lucene.apache.org>; Tue, 02 Oct 2012 08:19:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=49NQ++F9NBhFUrJwbbgEvMqNrz0GsYgV6eOYktHdAEo=;
        b=Pzf1amycuV+dCtTKEFApO/sXbLQQgwJ70dy8/zlDuqWpWwBRDCSPTpBmLptCI7+R4c
         +kA5QCMYmp1knhS4oTtnrQINNdherdoJVonXVkmzHj1PxTtEUQSznoutIMvqaADh/oqJ
         4DkdGrDVfbObVTSMoOYCNc9Lc4unz/9LA6eRCY0hkiWxdCZQaCFsLOUWIk7cFJke4y1S
         g2ur3jTTbvfoEW3ThbwRzsgUr4cm5x5ClERzIZ/V+3RsW4A6Y2G0ZRe5s8bzuYhsmo/n
         hfVFW1u7oYOSH0qaYvLoe+d5G6fH693avo9J59jWJ5AIi2gohbIFFUTZQXKLmkyh2Zx1
         94uA==
MIME-Version: 1.0
Received: by 10.50.157.234 with SMTP id wp10mr9272497igb.5.1349191198685; Tue,
 02 Oct 2012 08:19:58 -0700 (PDT)
Received: by 10.64.167.205 with HTTP; Tue, 2 Oct 2012 08:19:58 -0700 (PDT)
In-Reply-To: <CAGnSx04X+DzLE8KrmXP717AxhESzexYByX0X3UJiBA8npV-hEg@mail.gmail.com>
References: <CA+iFDpxF_B3qq_b-bx8iC+HevXC1Je9iKkiyFVvG0bL0Qgvbeg@mail.gmail.com>
	<CALr4HzqoUBa08jiABi7FfwfbtB22=x9dqWKn+7D_DEmfMSX1Rg@mail.gmail.com>
	<CAEY5pxVHOCg7EGf6=nTZ3Xp38ScUbyYVfQ-fCHQrXsfuTdpdZw@mail.gmail.com>
	<F2F1B386-9B97-4DE9-8207-7D85093679FB@hoplahup.net>
	<CA+iFDpw2kxKQa5YsgoU3_AzKv1jtMPQ7BkqPBJD-OjWx-B_xGg@mail.gmail.com>
	<3BC169A5-F0E2-480B-93D7-535D91B7C8A4@hoplahup.net>
	<CAEY5pxXL6gsf=uOsN8LzknmHH95LUKbLdTC-VYBMPzk1kuv_Hg@mail.gmail.com>
	<CA+iFDpwXH8=TaUcTb0SaYbnMZQ1iPsiwH0ufamd7iNAWhtorGA@mail.gmail.com>
	<CAGnSx04X+DzLE8KrmXP717AxhESzexYByX0X3UJiBA8npV-hEg@mail.gmail.com>
Date: Tue, 2 Oct 2012 11:19:58 -0400
Message-ID: <CA+iFDpzW9d35AoD2X9UwCT-F4-DVOwCwzUXUos4LxcXz-9EDnQ@mail.gmail.com>
Subject: Re: Lucene index on NFS
From: Jong Kim <jong.lucene@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=e89a8f3ba6f521b95204cb150ef1
X-Virus-Checked: Checked by ClamAV on apache.org

--e89a8f3ba6f521b95204cb150ef1
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

OK, so it sounds like I'm hearing that

(a) Accessing index files over NFS from a "single" physical process on
a single computer is safe and can be made to work.

(b) Accessing index files over NFS from "multiple" processes/machines might
be problematic

(c) In all cases, the performance would be lesser over NFS
Thanks
/Jong
On Tue, Oct 2, 2012 at 9:36 AM, Tommaso Teofili
<tommaso.teofili@gmail.com>wrote:

> Ok, that saves you from concurrency issue, but in my experience is just
> much slower than local file system, so still NFS can be used but with som=
e
> tradeoff on performance.
>
> My 2 cents,
> Tommaso
>
> 2012/10/2 Jong Kim <jong.lucene@gmail.com>
>
> > The setup is I have a home-grown server process that has exclusive acce=
ss
> > to the index files. All reads and writes are done through this server. =
No
> > other process is reading the same index files whether it's local or ove=
r
> > NFS.
> > /Jong
> > On Tue, Oct 2, 2012 at 8:56 AM, Ian Lea <ian.lea@gmail.com> wrote:
> >
> > > I agree that reliability/corruption is not an issue.
> > >
> > > I would also put it that performance is likely to suffer, but that's
> > > not certain.  A fast disk mounted over NFS can be quicker than a slow
> > > local disk.  And how much do you care about performance?  Maybe it
> > > would be fast enough over NFS to make the ease of deployment balance
> > > out lesser speed.
> > >
> > > What's the setup here?  Will you be writing to an index on local disk
> > > of server A and reading it, over NFS, from server B (and C and ...) o=
r
> > > what?
> > >
> > > --
> > > Ian.
> > >
> > >
> > > On Tue, Oct 2, 2012 at 1:45 PM, Paul Libbrecht <paul@hoplahup.net>
> > wrote:
> > > > I doubt NFS is an unreliable file-system.
> > > > Lucene uses normal random access to files and this has no reason to
> be
> > > unreliable unless bad things such as network drops happen (in which
> case
> > > you'd get direct failures or  timeouts rather than corruption). I've
> seen
> > > fairly large infrastructures being based on NFS and corruption is
> > something
> > > I've never heard about.
> > > >
> > > > Note: no concurrent access to a lucene index, right?
> > > >
> > > > Paul
> > > >
> > > >
> > > > Le 2 oct. 2012 =E0 14:01, Jong Kim a =E9crit :
> > > >
> > > >> Thank you all for reply.
> > > >>
> > > >> So it soudns like it is a known fact that the performance would
> suffer
> > > >> rather significantly when the index files are accessed over NFS. B=
ut
> > how
> > > >> about reliability and robustness (which seems even more important)=
?
> > > Isn't
> > > >> there any increased possibility for intermittent errors such as
> index
> > > file
> > > >> corruption (due to cache inconsistency, difference in delete
> > semantics,
> > > >> etc.) when using NFS? Has anyone run into such trouble? Or is it
> > > strictly
> > > >> just a performance issue?
> > > >>
> > > >> /Jong
> > > >> On Tue, Oct 2, 2012 at 5:17 AM, Paul Libbrecht <paul@hoplahup.net>
> > > wrote:
> > > >>
> > > >>> My experience in the Lucene 1.x times were a factor of at least
> four
> > in
> > > >>> writing to NFS and about two when reading from there. I'd
> discourage
> > > this
> > > >>> as much as possible!
> > > >>>
> > > >>> (rsync is way more your friend for transporting and replication =
=E0
> la
> > > solr
> > > >>> should also be considered)
> > > >>>
> > > >>> paul
> > > >>>
> > > >>>
> > > >>> Le 2 oct. 2012 =E0 11:10, Ian Lea a =E9crit :
> > > >>>
> > > >>>> You'll certainly need to factor in the performance of NFS versus
> > local
> > > >>> disks.
> > > >>>>
> > > >>>> My experience is that smallish low activity indexes work just fi=
ne
> > on
> > > >>>> NFS, but large high activity indexes are not so good, particular=
ly
> > if
> > > >>>> you have a lot of modifications to the index.
> > > >>>>
> > > >>>> You may want to install a custom IndexDeletionPolicy.  See the
> > > >>>> javadocs for details with specific reference to NFS.
> > > >>>>
> > > >>>>
> > > >>>> --
> > > >>>> Ian.
> > > >>>>
> > > >>>> On Tue, Oct 2, 2012 at 3:21 AM, Vitaly Funstein <
> > vfunstein@gmail.com>
> > > >>> wrote:
> > > >>>>> How tolerant is your project of decreased search and indexing
> > > >>> performance?
> > > >>>>> You could probably write a simple test that compares search and
> > write
> > > >>>>> speeds of local and NFS-mounted indexes and make the decision
> based
> > > on
> > > >>> the
> > > >>>>> results.
> > > >>>>>
> > > >>>>> On Mon, Oct 1, 2012 at 3:06 PM, Jong Kim <jong.lucene@gmail.com=
>
> > > wrote:
> > > >>>>>
> > > >>>>>> Hi,
> > > >>>>>>
> > > >>>>>> According to the Lucene In Action (Second Edition), the sectio=
n
> > > 2.11.2
> > > >>>>>> "Accessing an index over a remote file system" explains that
> there
> > > are
> > > >>>>>> issues related to accessing a Lucene index across remote file
> > system
> > > >>>>>> including NFS.
> > > >>>>>>
> > > >>>>>> I'm particuarly interested in NFS compatibility, and wondering
> if
> > > >>> there has
> > > >>>>>> been any work done to solve or mitigate this problem. Has this
> > issue
> > > >>> been
> > > >>>>>> addressed? If not, are there some reliable work-arounds that
> make
> > > this
> > > >>>>>> possible at the expense of some sacrifice in other areas?
> > > >>>>>>
> > > >>>>>> Any information would be greatly appreciated, since my project
> > > heavily
> > > >>>>>> depends on the feasibility of this.
> > > >>>>>>
> > > >>>>>> Thanks
> > > >>>>>> /Jong
> > > >>>>>>
> > > >>>>
> > > >>>>
> > ---------------------------------------------------------------------
> > > >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > >>>> For additional commands, e-mail: java-user-help@lucene.apache.or=
g
> > > >>>>
> > > >>>
> > > >>>
> > > >>>
> ---------------------------------------------------------------------
> > > >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >>>
> > > >>>
> > > >
> > > >
> > > > -------------------------------------------------------------------=
--
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>

--e89a8f3ba6f521b95204cb150ef1--

From java-user-return-53806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct  2 15:25:42 2012
Return-Path: <java-user-return-53806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C7BE29B60
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  2 Oct 2012 15:25:42 +0000 (UTC)
Received: (qmail 32755 invoked by uid 500); 2 Oct 2012 15:25:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32635 invoked by uid 500); 2 Oct 2012 15:25:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32627 invoked by uid 99); 2 Oct 2012 15:25:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Oct 2012 15:25:40 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of uwe@thetaphi.de designates 188.138.97.18 as permitted sender)
Received: from [188.138.97.18] (HELO mail.sd-datasolutions.de) (188.138.97.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Oct 2012 15:25:32 +0000
Received: from VEGA (port-92-196-126-162.dynamic.qsc.de [92.196.126.162])
	by mail.sd-datasolutions.de (Postfix) with ESMTPSA id 7318414AA042
	for <java-user@lucene.apache.org>; Tue,  2 Oct 2012 15:25:12 +0000 (UTC)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <CA+iFDpxF_B3qq_b-bx8iC+HevXC1Je9iKkiyFVvG0bL0Qgvbeg@mail.gmail.com>	<CALr4HzqoUBa08jiABi7FfwfbtB22=x9dqWKn+7D_DEmfMSX1Rg@mail.gmail.com>	<CAEY5pxVHOCg7EGf6=nTZ3Xp38ScUbyYVfQ-fCHQrXsfuTdpdZw@mail.gmail.com>	<F2F1B386-9B97-4DE9-8207-7D85093679FB@hoplahup.net>	<CA+iFDpw2kxKQa5YsgoU3_AzKv1jtMPQ7BkqPBJD-OjWx-B_xGg@mail.gmail.com>	<3BC169A5-F0E2-480B-93D7-535D91B7C8A4@hoplahup.net>	<CAEY5pxXL6gsf=uOsN8LzknmHH95LUKbLdTC-VYBMPzk1kuv_Hg@mail.gmail.com>	<CA+iFDpwXH8=TaUcTb0SaYbnMZQ1iPsiwH0ufamd7iNAWhtorGA@mail.gmail.com>	<CAGnSx04X+DzLE8KrmXP717AxhESzexYByX0X3UJiBA8npV-hEg@mail.gmail.com> <CA+iFDpzW9d35AoD2X9UwCT-F4-DVOwCwzUXUos4LxcXz-9EDnQ@mail.gmail.com>
In-Reply-To: <CA+iFDpzW9d35AoD2X9UwCT-F4-DVOwCwzUXUos4LxcXz-9EDnQ@mail.gmail.com>
Subject: RE: Lucene index on NFS
Date: Tue, 2 Oct 2012 17:26:08 +0200
Message-ID: <01ce01cda0b2$3f6ccc10$be466430$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQHqGG4zH+1Jymwpx/29FqGGg6GMewJKfWzwAjUcYuYBBqvMYQHiDcm/AhZcZX0CatPBxQJoEMMyAlyCS+0DCfXihJbPcn6Q
Content-Language: de

> (a) Accessing index files over NFS from a "single" physical process on =
a single computer is safe and can be made to work.

To add: This means writing only. Reading is fine from as many threads as =
you like - and using MMapDirectory for best performance. The problem =
with writing is that locking of index does not work with NFS (see my =
other mail). So use one server (ideally one that has the file system =
locally) and write your index. On the other servers which are using the =
same filesystem (which is local to the writer), you can use NFS to =
access to the writing server.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Jong Kim [mailto:jong.lucene@gmail.com]
> Sent: Tuesday, October 02, 2012 5:20 PM
> To: java-user@lucene.apache.org
> Subject: Re: Lucene index on NFS
>=20
> OK, so it sounds like I'm hearing that
>=20
> (a) Accessing index files over NFS from a "single" physical process on =
a single
> computer is safe and can be made to work.
>=20
> (b) Accessing index files over NFS from "multiple" processes/machines =
might be
> problematic
>=20
> (c) In all cases, the performance would be lesser over NFS Thanks =
/Jong On Tue,
> Oct 2, 2012 at 9:36 AM, Tommaso Teofili
> <tommaso.teofili@gmail.com>wrote:
>=20
> > Ok, that saves you from concurrency issue, but in my experience is
> > just much slower than local file system, so still NFS can be used =
but
> > with some tradeoff on performance.
> >
> > My 2 cents,
> > Tommaso
> >
> > 2012/10/2 Jong Kim <jong.lucene@gmail.com>
> >
> > > The setup is I have a home-grown server process that has exclusive
> > > access to the index files. All reads and writes are done through
> > > this server. No other process is reading the same index files
> > > whether it's local or over NFS.
> > > /Jong
> > > On Tue, Oct 2, 2012 at 8:56 AM, Ian Lea <ian.lea@gmail.com> wrote:
> > >
> > > > I agree that reliability/corruption is not an issue.
> > > >
> > > > I would also put it that performance is likely to suffer, but
> > > > that's not certain.  A fast disk mounted over NFS can be quicker
> > > > than a slow local disk.  And how much do you care about
> > > > performance?  Maybe it would be fast enough over NFS to make the
> > > > ease of deployment balance out lesser speed.
> > > >
> > > > What's the setup here?  Will you be writing to an index on local
> > > > disk of server A and reading it, over NFS, from server B (and C
> > > > and ...) or what?
> > > >
> > > > --
> > > > Ian.
> > > >
> > > >
> > > > On Tue, Oct 2, 2012 at 1:45 PM, Paul Libbrecht =
<paul@hoplahup.net>
> > > wrote:
> > > > > I doubt NFS is an unreliable file-system.
> > > > > Lucene uses normal random access to files and this has no =
reason
> > > > > to
> > be
> > > > unreliable unless bad things such as network drops happen (in
> > > > which
> > case
> > > > you'd get direct failures or  timeouts rather than corruption).
> > > > I've
> > seen
> > > > fairly large infrastructures being based on NFS and corruption =
is
> > > something
> > > > I've never heard about.
> > > > >
> > > > > Note: no concurrent access to a lucene index, right?
> > > > >
> > > > > Paul
> > > > >
> > > > >
> > > > > Le 2 oct. 2012 =C3=A0 14:01, Jong Kim a =C3=A9crit :
> > > > >
> > > > >> Thank you all for reply.
> > > > >>
> > > > >> So it soudns like it is a known fact that the performance =
would
> > suffer
> > > > >> rather significantly when the index files are accessed over
> > > > >> NFS. But
> > > how
> > > > >> about reliability and robustness (which seems even more =
important)?
> > > > Isn't
> > > > >> there any increased possibility for intermittent errors such =
as
> > index
> > > > file
> > > > >> corruption (due to cache inconsistency, difference in delete
> > > semantics,
> > > > >> etc.) when using NFS? Has anyone run into such trouble? Or is
> > > > >> it
> > > > strictly
> > > > >> just a performance issue?
> > > > >>
> > > > >> /Jong
> > > > >> On Tue, Oct 2, 2012 at 5:17 AM, Paul Libbrecht
> > > > >> <paul@hoplahup.net>
> > > > wrote:
> > > > >>
> > > > >>> My experience in the Lucene 1.x times were a factor of at
> > > > >>> least
> > four
> > > in
> > > > >>> writing to NFS and about two when reading from there. I'd
> > discourage
> > > > this
> > > > >>> as much as possible!
> > > > >>>
> > > > >>> (rsync is way more your friend for transporting and
> > > > >>> replication =C3=A0
> > la
> > > > solr
> > > > >>> should also be considered)
> > > > >>>
> > > > >>> paul
> > > > >>>
> > > > >>>
> > > > >>> Le 2 oct. 2012 =C3=A0 11:10, Ian Lea a =C3=A9crit :
> > > > >>>
> > > > >>>> You'll certainly need to factor in the performance of NFS
> > > > >>>> versus
> > > local
> > > > >>> disks.
> > > > >>>>
> > > > >>>> My experience is that smallish low activity indexes work =
just
> > > > >>>> fine
> > > on
> > > > >>>> NFS, but large high activity indexes are not so good,
> > > > >>>> particularly
> > > if
> > > > >>>> you have a lot of modifications to the index.
> > > > >>>>
> > > > >>>> You may want to install a custom IndexDeletionPolicy.  See
> > > > >>>> the javadocs for details with specific reference to NFS.
> > > > >>>>
> > > > >>>>
> > > > >>>> --
> > > > >>>> Ian.
> > > > >>>>
> > > > >>>> On Tue, Oct 2, 2012 at 3:21 AM, Vitaly Funstein <
> > > vfunstein@gmail.com>
> > > > >>> wrote:
> > > > >>>>> How tolerant is your project of decreased search and
> > > > >>>>> indexing
> > > > >>> performance?
> > > > >>>>> You could probably write a simple test that compares =
search
> > > > >>>>> and
> > > write
> > > > >>>>> speeds of local and NFS-mounted indexes and make the
> > > > >>>>> decision
> > based
> > > > on
> > > > >>> the
> > > > >>>>> results.
> > > > >>>>>
> > > > >>>>> On Mon, Oct 1, 2012 at 3:06 PM, Jong Kim
> > > > >>>>> <jong.lucene@gmail.com>
> > > > wrote:
> > > > >>>>>
> > > > >>>>>> Hi,
> > > > >>>>>>
> > > > >>>>>> According to the Lucene In Action (Second Edition), the
> > > > >>>>>> section
> > > > 2.11.2
> > > > >>>>>> "Accessing an index over a remote file system" explains
> > > > >>>>>> that
> > there
> > > > are
> > > > >>>>>> issues related to accessing a Lucene index across remote
> > > > >>>>>> file
> > > system
> > > > >>>>>> including NFS.
> > > > >>>>>>
> > > > >>>>>> I'm particuarly interested in NFS compatibility, and
> > > > >>>>>> wondering
> > if
> > > > >>> there has
> > > > >>>>>> been any work done to solve or mitigate this problem. Has
> > > > >>>>>> this
> > > issue
> > > > >>> been
> > > > >>>>>> addressed? If not, are there some reliable work-arounds
> > > > >>>>>> that
> > make
> > > > this
> > > > >>>>>> possible at the expense of some sacrifice in other areas?
> > > > >>>>>>
> > > > >>>>>> Any information would be greatly appreciated, since my
> > > > >>>>>> project
> > > > heavily
> > > > >>>>>> depends on the feasibility of this.
> > > > >>>>>>
> > > > >>>>>> Thanks
> > > > >>>>>> /Jong
> > > > >>>>>>
> > > > >>>>
> > > > >>>>
> > > =
--------------------------------------------------------------------
> > > -
> > > > >>>> To unsubscribe, e-mail:
> > > > >>>> java-user-unsubscribe@lucene.apache.org
> > > > >>>> For additional commands, e-mail:
> > > > >>>> java-user-help@lucene.apache.org
> > > > >>>>
> > > > >>>
> > > > >>>
> > > > >>>
> > =
---------------------------------------------------------------------
> > > > >>> To unsubscribe, e-mail:
> > > > >>> java-user-unsubscribe@lucene.apache.org
> > > > >>> For additional commands, e-mail:
> > > > >>> java-user-help@lucene.apache.org
> > > > >>>
> > > > >>>
> > > > >
> > > > >
> > > > > =
----------------------------------------------------------------
> > > > > ----- To unsubscribe, e-mail:
> > > > > java-user-unsubscribe@lucene.apache.org
> > > > > For additional commands, e-mail:
> > > > > java-user-help@lucene.apache.org
> > > > >
> > > >
> > > > =
------------------------------------------------------------------
> > > > --- To unsubscribe, e-mail:
> > > > java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: =
java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Oct  4 13:38:14 2012
Return-Path: <java-user-return-53807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2C01C987C
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  4 Oct 2012 13:38:14 +0000 (UTC)
Received: (qmail 91215 invoked by uid 500); 4 Oct 2012 13:38:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90974 invoked by uid 500); 4 Oct 2012 13:38:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90960 invoked by uid 99); 4 Oct 2012 13:38:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Oct 2012 13:38:11 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=MIME_QP_LONG_LINE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [178.21.113.82] (HELO mail.openindex.io) (178.21.113.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Oct 2012 13:38:04 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.openindex.io (Postfix) with ESMTP id 97FA8FC002
	for <java-user@lucene.apache.org>; Thu,  4 Oct 2012 13:41:30 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at mail.openindex.io
Received: from mail.openindex.io ([127.0.0.1])
	by localhost (mail.openindex.io [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id a0p311ikiqYf for <java-user@lucene.apache.org>;
	Thu,  4 Oct 2012 13:41:19 +0000 (UTC)
Received: from mail.openindex.io (localhost [127.0.0.1])
	by mail.openindex.io (Postfix) with ESMTP id 63CEBFC001
	for <java-user@lucene.apache.org>; Thu,  4 Oct 2012 13:41:17 +0000 (UTC)
Subject: Highlighter IOOBE with modified HyphenationCompoundWordTokenFilter
From: =?utf-8?Q?Markus_Jelsma?= <markus.jelsma@openindex.io>
To: =?utf-8?Q?java-user=40lucene=2Eapache=2Eorg?=
  <java-user@lucene.apache.org>
Date: Thu, 4 Oct 2012 13:41:16 +0000
Mime-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-Mailer: Zarafa 7.0.7-34256
Message-Id: <zarafa.506d91fc.37b8.5c673de60d932e43@mail.openindex.io>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I've modified the HyphenationCompoundWordTokenFilter to emit less subtokens because the original filter can emit all kinds of subtokens that have a very different meaning on their own. I've modified it so no overlapping subtokens are emitted and no subtokens are emitted that can be found within another subtoken. I've also modified it to force that the generated subtokens comprise the original token and if they don't forget the subtokens. It also doesn't return the original token anymore, the original filter produces a duplicate of the original input token. For example: verzekeringmaatschappij now becomes verzekering and maatschappij and not verzekeringmaatschappij, ver, zeker, verzeker, zekering, ringmaat, maat and more.

But it seem that i have done something wrong because my modified version sometimes causes the Highlighter to throw the following IOOBE:

java.lang.StringIndexOutOfBoundsException: String index out of range: -14
        at java.lang.String.substring(String.java:1937)
        at org.apache.lucene.search.vectorhighlight.BaseFragmentsBuilder.makeFragment(BaseFragmentsBuilder.java:172)
        at org.apache.lucene.search.vectorhighlight.BaseFragmentsBuilder.createFragments(BaseFragmentsBuilder.java:138)
        at org.apache.lucene.search.vectorhighlight.FastVectorHighlighter.getBestFragments(FastVectorHighlighter.java:186)
        at org.apache.solr.highlight.DefaultSolrHighlighter.doHighlightingByFastVectorHighlighter(DefaultSolrHighlighter.java:571)
        at org.apache.solr.highlight.DefaultSolrHighlighter.doHighlighting(DefaultSolrHighlighter.java:401)
        at org.apache.solr.handler.component.HighlightComponent.process(HighlightComponent.java:136)
        at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:214)
        at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:129)
        at org.apache.solr.core.SolrCore.execute(SolrCore.java:1750)
        at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:455)
        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:276)
        at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1337)
        .....

Anyone to point me in the right direction=3F I've checked the LIA book on how to manipulate the tokenstream and thought it should be alright. My analysis tests also yield good results, nothing strange to be found. Or could it be an error in the highlighter that only now shows up=3F

Thanks,
Markus

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Oct  4 13:49:18 2012
Return-Path: <java-user-return-53808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7188C9893
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  4 Oct 2012 13:49:18 +0000 (UTC)
Received: (qmail 20234 invoked by uid 500); 4 Oct 2012 13:49:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20065 invoked by uid 500); 4 Oct 2012 13:49:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20056 invoked by uid 99); 4 Oct 2012 13:49:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Oct 2012 13:49:15 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=MIME_QP_LONG_LINE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [178.21.113.82] (HELO mail.openindex.io) (178.21.113.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Oct 2012 13:49:09 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.openindex.io (Postfix) with ESMTP id DC6C9FC002
	for <java-user@lucene.apache.org>; Thu,  4 Oct 2012 13:52:35 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at mail.openindex.io
Received: from mail.openindex.io ([127.0.0.1])
	by localhost (mail.openindex.io [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id N7ejgvN-nXBz for <java-user@lucene.apache.org>;
	Thu,  4 Oct 2012 13:52:22 +0000 (UTC)
Received: from mail.openindex.io (localhost [127.0.0.1])
	by mail.openindex.io (Postfix) with ESMTP id 709E6FC001
	for <java-user@lucene.apache.org>; Thu,  4 Oct 2012 13:52:22 +0000 (UTC)
Subject: RE: Highlighter IOOBE with modified
 HyphenationCompoundWordTokenFilter
From: =?utf-8?Q?Markus_Jelsma?= <markus.jelsma@openindex.io>
To: =?utf-8?Q?java-user=40lucene=2Eapache=2Eorg?=
  <java-user@lucene.apache.org>
Date: Thu, 4 Oct 2012 13:52:22 +0000
Mime-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
In-Reply-To: <zarafa.506d91fc.37b8.5c673de60d932e43@mail.openindex.io>
References: <zarafa.506d91fc.37b8.5c673de60d932e43@mail.openindex.io>
X-Priority: 3 (Normal)
X-Mailer: Zarafa 7.0.7-34256
Message-Id: <zarafa.506d9496.3ae4.7194afb80ac6f50b@mail.openindex.io>

I forgot to add that this is with today's build of trunk.=20
=20
-----Original message-----
> From:Markus Jelsma <markus.jelsma@openindex.io>
> Sent: Thu 04-Oct-2012 15:42
> To: java-user@lucene.apache.org
> Subject: Highlighter IOOBE with modified HyphenationCompoundWordTokenFilter
>=20
> Hi,
>=20
> I've modified the HyphenationCompoundWordTokenFilter to emit less subtokens because the original filter can emit all kinds of subtokens that have a very different meaning on their own. I've modified it so no overlapping subtokens are emitted and no subtokens are emitted that can be found within another subtoken. I've also modified it to force that the generated subtokens comprise the original token and if they don't forget the subtokens. It also doesn't return the original token anymore, the original filter produces a duplicate of the original input token. For example: verzekeringmaatschappij now becomes verzekering and maatschappij and not verzekeringmaatschappij, ver, zeker, verzeker, zekering, ringmaat, maat and more.
>=20
> But it seem that i have done something wrong because my modified version sometimes causes the Highlighter to throw the following IOOBE:
>=20
> java.lang.StringIndexOutOfBoundsException: String index out of range: -14
>         at java.lang.String.substring(String.java:1937)
>         at org.apache.lucene.search.vectorhighlight.BaseFragmentsBuilder.makeFragment(BaseFragmentsBuilder.java:172)
>         at org.apache.lucene.search.vectorhighlight.BaseFragmentsBuilder.createFragments(BaseFragmentsBuilder.java:138)
>         at org.apache.lucene.search.vectorhighlight.FastVectorHighlighter.getBestFragments(FastVectorHighlighter.java:186)
>         at org.apache.solr.highlight.DefaultSolrHighlighter.doHighlightingByFastVectorHighlighter(DefaultSolrHighlighter.java:571)
>         at org.apache.solr.highlight.DefaultSolrHighlighter.doHighlighting(DefaultSolrHighlighter.java:401)
>         at org.apache.solr.handler.component.HighlightComponent.process(HighlightComponent.java:136)
>         at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:214)
>         at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:129)
>         at org.apache.solr.core.SolrCore.execute(SolrCore.java:1750)
>         at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:455)
>         at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:276)
>         at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1337)
>         .....
>=20
> Anyone to point me in the right direction=3F I've checked the LIA book on how to manipulate the tokenstream and thought it should be alright. My analysis tests also yield good results, nothing strange to be found. Or could it be an error in the highlighter that only now shows up=3F
>=20
> Thanks,
> Markus
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Oct  4 13:51:24 2012
Return-Path: <java-user-return-53809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E9DFF98A2
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  4 Oct 2012 13:51:24 +0000 (UTC)
Received: (qmail 27908 invoked by uid 500); 4 Oct 2012 13:51:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27825 invoked by uid 500); 4 Oct 2012 13:51:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27811 invoked by uid 99); 4 Oct 2012 13:51:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Oct 2012 13:51:22 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.82.176] (HELO mail-we0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Oct 2012 13:51:16 +0000
Received: by mail-we0-f176.google.com with SMTP id z53so379539wey.35
        for <java-user@lucene.apache.org>; Thu, 04 Oct 2012 06:50:54 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:x-originating-ip:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding
         :x-gm-message-state;
        bh=x5GNUFLdNV2LmaPPa78PjSVCtJPB4ZcybFkcgUaPSEg=;
        b=V6DdYXZNAkjoQDJCnLHmXknc3gSB6h7WDRLHJ+muwBBX+uqYtb+apz2QU9ktRsFlPH
         /jpLYklcFG+MEDAVFd8Tm9FUgYUCYxvrh58WfcPNHjSOAD82rrp5i3avotgQ9kdKN6DS
         CiMIrZw5xcgqYPGq+fseJFqz1Itz+dANAjOq9wflLwAMFd72HNrhB+iGImHY+KvbQWo4
         O7Lawor3SsAnUVVlnJIf26MP9QV2s7NrCO9KZ6yys1TzIQu9+JNpn55zsAPOZR3AKFnh
         76gfSy/X6Eh/iLPWlQVzEdG+jiUuU96ZNU9FY8zbDrS+eSxd1YF0iT1ZhN7mKwTY+BXY
         tThg==
MIME-Version: 1.0
Received: by 10.180.96.164 with SMTP id dt4mr38142247wib.10.1349358654496;
 Thu, 04 Oct 2012 06:50:54 -0700 (PDT)
Received: by 10.223.97.5 with HTTP; Thu, 4 Oct 2012 06:50:54 -0700 (PDT)
X-Originating-IP: [91.183.109.228]
In-Reply-To: <zarafa.506d9496.3ae4.7194afb80ac6f50b@mail.openindex.io>
References: <zarafa.506d91fc.37b8.5c673de60d932e43@mail.openindex.io>
	<zarafa.506d9496.3ae4.7194afb80ac6f50b@mail.openindex.io>
Date: Thu, 4 Oct 2012 15:50:54 +0200
Message-ID: <CABY_-Z54V1ADbFqyGexcSVY3+nYbHpjQc0G+b9nUTye83Q_P=w@mail.gmail.com>
Subject: Re: Highlighter IOOBE with modified HyphenationCompoundWordTokenFilter
From: Thomas Matthijs <lists@selckin.be>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Gm-Message-State: ALoCoQmZT3kJmnDKWHORJMS6NAxHyhUWboRmnsic2f6/UEarIoFZHcz8yPRGEDRdziQQUq43Wpbr
X-Virus-Checked: Checked by ClamAV on apache.org

And to include the code

On Thu, Oct 4, 2012 at 3:52 PM, Markus Jelsma
<markus.jelsma@openindex.io> wrote:
> I forgot to add that this is with today's build of trunk.
>
> -----Original message-----
>> From:Markus Jelsma <markus.jelsma@openindex.io>
>> Sent: Thu 04-Oct-2012 15:42
>> To: java-user@lucene.apache.org
>> Subject: Highlighter IOOBE with modified HyphenationCompoundWordTokenFil=
ter
>>
>> Hi,
>>
>> I've modified the HyphenationCompoundWordTokenFilter to emit less subtok=
ens because the original filter can emit all kinds of subtokens that have a=
 very different meaning on their own. I've modified it so no overlapping su=
btokens are emitted and no subtokens are emitted that can be found within a=
nother subtoken. I've also modified it to force that the generated subtoken=
s comprise the original token and if they don't forget the subtokens. It al=
so doesn't return the original token anymore, the original filter produces =
a duplicate of the original input token. For example: verzekeringmaatschapp=
ij now becomes verzekering and maatschappij and not verzekeringmaatschappij=
, ver, zeker, verzeker, zekering, ringmaat, maat and more.
>>
>> But it seem that i have done something wrong because my modified version=
 sometimes causes the Highlighter to throw the following IOOBE:
>>
>> java.lang.StringIndexOutOfBoundsException: String index out of range: -1=
4
>>         at java.lang.String.substring(String.java:1937)
>>         at org.apache.lucene.search.vectorhighlight.BaseFragmentsBuilder=
.makeFragment(BaseFragmentsBuilder.java:172)
>>         at org.apache.lucene.search.vectorhighlight.BaseFragmentsBuilder=
.createFragments(BaseFragmentsBuilder.java:138)
>>         at org.apache.lucene.search.vectorhighlight.FastVectorHighlighte=
r.getBestFragments(FastVectorHighlighter.java:186)
>>         at org.apache.solr.highlight.DefaultSolrHighlighter.doHighlighti=
ngByFastVectorHighlighter(DefaultSolrHighlighter.java:571)
>>         at org.apache.solr.highlight.DefaultSolrHighlighter.doHighlighti=
ng(DefaultSolrHighlighter.java:401)
>>         at org.apache.solr.handler.component.HighlightComponent.process(=
HighlightComponent.java:136)
>>         at org.apache.solr.handler.component.SearchHandler.handleRequest=
Body(SearchHandler.java:214)
>>         at org.apache.solr.handler.RequestHandlerBase.handleRequest(Requ=
estHandlerBase.java:129)
>>         at org.apache.solr.core.SolrCore.execute(SolrCore.java:1750)
>>         at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispat=
chFilter.java:455)
>>         at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispa=
tchFilter.java:276)
>>         at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter=
(ServletHandler.java:1337)
>>         .....
>>
>> Anyone to point me in the right direction? I've checked the LIA book on =
how to manipulate the tokenstream and thought it should be alright. My anal=
ysis tests also yield good results, nothing strange to be found. Or could i=
t be an error in the highlighter that only now shows up?
>>
>> Thanks,
>> Markus
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Oct  4 23:43:36 2012
Return-Path: <java-user-return-53810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 70196D264
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  4 Oct 2012 23:43:36 +0000 (UTC)
Received: (qmail 91326 invoked by uid 500); 4 Oct 2012 23:43:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91285 invoked by uid 500); 4 Oct 2012 23:43:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91273 invoked by uid 99); 4 Oct 2012 23:43:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Oct 2012 23:43:34 +0000
X-ASF-Spam-Status: No, hits=2.3 required=5.0
	tests=SPF_SOFTFAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: softfail (athena.apache.org: transitioning domain of phani.vempaty@emc.com does not designate 216.139.236.26 as permitted sender)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Oct 2012 23:43:28 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <phani.vempaty@emc.com>)
	id 1TJv4N-0005KD-GZ
	for java-user@lucene.apache.org; Thu, 04 Oct 2012 16:43:07 -0700
Date: Thu, 4 Oct 2012 16:43:07 -0700 (PDT)
From: vempap <phani.vempaty@emc.com>
To: java-user@lucene.apache.org
Message-ID: <1349394187506-4011940.post@n3.nabble.com>
Subject: StandardTokenizer generation from JFlex grammar
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

  I'm trying to generate the standard tokenizer again using the jflex
specification (StandardTokenizerImpl.jflex) but I'm not able to do so due to
some errors (I would like to create my own jflex file using the standard
tokenizer which is why I'm trying to first generate using that to get a hang
of things).

I'm using jflex 1.4.3 and I ran into the following error:

Error in file "<filename>" (line 64): 
Syntax error.
HangulEx       = (!(!\p{Script:Hangul}|!\p{WB:ALetter})) ({Format} |
{Extend})*


Also, I tried installing an eclipse plugin from
http://cup-lex-eclipse.sourceforge.net/ which I thought would provide
options similar to JavaCC (http://eclipse-javacc.sourceforge.net/) through
which we can generate classes within eclipse - but had a hard luck.

Any help would be very helpful.

Regards,
Phani.



--
View this message in context: http://lucene.472066.n3.nabble.com/StandardTokenizer-generation-from-JFlex-grammar-tp4011940.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Oct  4 23:57:00 2012
Return-Path: <java-user-return-53811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 66879D2CA
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  4 Oct 2012 23:57:00 +0000 (UTC)
Received: (qmail 24802 invoked by uid 500); 4 Oct 2012 23:56:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24743 invoked by uid 500); 4 Oct 2012 23:56:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24734 invoked by uid 99); 4 Oct 2012 23:56:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Oct 2012 23:56:58 +0000
X-ASF-Spam-Status: No, hits=-1.0 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.18.82] (HELO smtp1.syr.edu) (128.230.18.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Oct 2012 23:56:50 +0000
Received: from suex10-hub-02.ad.syr.edu ([128.230.108.125])
	by smtp1.syr.edu (8.14.5/8.14.5) with ESMTP id q94NuShS020247
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Thu, 4 Oct 2012 19:56:28 -0400
Received: from SUEX10-MBX-03.ad.syr.edu ([128.230.108.186]) by
 suex10-hub-02.ad.syr.edu ([128.230.108.125]) with mapi id 14.02.0247.003;
 Thu, 4 Oct 2012 19:56:28 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: RE: StandardTokenizer generation from JFlex grammar
Thread-Topic: StandardTokenizer generation from JFlex grammar
Thread-Index: AQHNoooOFv3pTi+gek2rm4eeTOVQoZep0Kag
Date: Thu, 4 Oct 2012 23:56:28 +0000
Message-ID: <6C78E97C707B5B4C8CC61D44F8754586408378@SUEX10-mbx-03.ad.syr.edu>
References: <1349394175518-4011939.post@n3.nabble.com>
In-Reply-To: <1349394175518-4011939.post@n3.nabble.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-originating-ip: [128.230.84.130]
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:5.7.7855,1.0.431,0.0.0000
 definitions=2012-10-04_05:2012-10-04,2012-10-04,1970-01-01 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Phani,

Assuming you're using Lucene 3.6.X, see:

<http://svn.apache.org/repos/asf/lucene/dev/branches/lucene_solr_3_6/lucene=
/core/src/java/org/apache/lucene/analysis/standard/READ_BEFORE_REGENERATING=
.txt>=20

and

<http://svn.apache.org/viewvc/lucene/dev/branches/lucene_solr_3_6/lucene/co=
mmon-build.xml?revision=3D1364130&view=3Dmarkup#l356>

I've pasted the relevant contents below:

=3D=3D=3D=3D
WARNING: if you change StandardTokenizerImpl*.jflex or UAX29URLEmailTokeniz=
er
and need to regenerate the tokenizer, only use the trunk version
of JFlex 1.5 (with a minimum SVN revision 597) at the moment!
----
Please install the jFlex 1.5 version (currently not released)
from its SVN repository:

 svn co http://jflex.svn.sourceforge.net/svnroot/jflex/trunk jflex
 cd jflex
 mvn install

Then, create a build.properties file either in your home
directory, or within the Lucene directory and set the jflex.home
property to the path where the JFlex trunk checkout is located
(in the above example its the directory called "jflex").=20
=3D=3D=3D=3D

Steve

-----Original Message-----
From: vempap [mailto:phani.vempaty@emc.com]=20
Sent: Thursday, October 04, 2012 7:43 PM
To: dev@lucene.apache.org
Subject: StandardTokenizer generation from JFlex grammar

Hello,

  I'm trying to generate the standard tokenizer again using the jflex
specification (StandardTokenizerImpl.jflex) but I'm not able to do so due t=
o
some errors (I would like to create my own jflex file using the standard
tokenizer which is why I'm trying to first generate using that to get a han=
g
of things).

I'm using jflex 1.4.3 and I ran into the following error:

Error in file "<filename>" (line 64):=20
Syntax error.
HangulEx       =3D (!(!\p{Script:Hangul}|!\p{WB:ALetter})) ({Format} |
{Extend})*


Also, I tried installing an eclipse plugin from
http://cup-lex-eclipse.sourceforge.net/ which I thought would provide
options similar to JavaCC (http://eclipse-javacc.sourceforge.net/) through
which we can generate classes within eclipse - but had a hard luck.

Any help would be very helpful.

Regards,
Phani.



--
View this message in context: http://lucene.472066.n3.nabble.com/StandardTo=
kenizer-generation-from-JFlex-grammar-tp4011939.html
Sent from the Lucene - Java Developer mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: dev-unsubscribe@lucene.apache.org
For additional commands, e-mail: dev-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Oct  5 00:11:05 2012
Return-Path: <java-user-return-53812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7808AD350
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  5 Oct 2012 00:11:05 +0000 (UTC)
Received: (qmail 56914 invoked by uid 500); 5 Oct 2012 00:11:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56743 invoked by uid 500); 5 Oct 2012 00:11:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56623 invoked by uid 99); 5 Oct 2012 00:11:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Oct 2012 00:11:03 +0000
X-ASF-Spam-Status: No, hits=2.3 required=5.0
	tests=SPF_SOFTFAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: softfail (athena.apache.org: transitioning domain of phani.vempaty@emc.com does not designate 216.139.236.26 as permitted sender)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Oct 2012 00:10:54 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <phani.vempaty@emc.com>)
	id 1TJvUw-0007F9-8V
	for java-user@lucene.apache.org; Thu, 04 Oct 2012 17:10:34 -0700
Date: Thu, 4 Oct 2012 17:10:34 -0700 (PDT)
From: vempap <phani.vempaty@emc.com>
To: java-user@lucene.apache.org
Message-ID: <1349395834245-4011944.post@n3.nabble.com>
In-Reply-To: <6C78E97C707B5B4C8CC61D44F8754586408378@SUEX10-mbx-03.ad.syr.edu>
References: <1349394187506-4011940.post@n3.nabble.com> <6C78E97C707B5B4C8CC61D44F8754586408378@SUEX10-mbx-03.ad.syr.edu>
Subject: RE: StandardTokenizer generation from JFlex grammar
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Steve for the pointers. I'll look into it.



--
View this message in context: http://lucene.472066.n3.nabble.com/StandardTokenizer-generation-from-JFlex-grammar-tp4011940p4011944.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Oct  5 10:49:31 2012
Return-Path: <java-user-return-53813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F2F8BDEDB
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  5 Oct 2012 10:49:31 +0000 (UTC)
Received: (qmail 57945 invoked by uid 500); 5 Oct 2012 10:49:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57421 invoked by uid 500); 5 Oct 2012 10:49:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57388 invoked by uid 99); 5 Oct 2012 10:49:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Oct 2012 10:49:21 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=MIME_QP_LONG_LINE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [178.21.113.82] (HELO mail.openindex.io) (178.21.113.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Oct 2012 10:49:15 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.openindex.io (Postfix) with ESMTP id 9476CFC002
	for <java-user@lucene.apache.org>; Fri,  5 Oct 2012 10:52:43 +0000 (UTC)
X-Virus-Scanned: Debian amavisd-new at mail.openindex.io
Received: from mail.openindex.io ([127.0.0.1])
	by localhost (mail.openindex.io [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id AanvVsiUPsRM for <java-user@lucene.apache.org>;
	Fri,  5 Oct 2012 10:52:39 +0000 (UTC)
Received: from mail.openindex.io (localhost [127.0.0.1])
	by mail.openindex.io (Postfix) with ESMTP id D5760FC001
	for <java-user@lucene.apache.org>; Fri,  5 Oct 2012 10:52:38 +0000 (UTC)
Subject: RE: Highlighter IOOBE with modified
 HyphenationCompoundWordTokenFilter
From: =?utf-8?Q?Markus_Jelsma?= <markus.jelsma@openindex.io>
To: =?utf-8?Q?java-user=40lucene=2Eapache=2Eorg?=
  <java-user@lucene.apache.org>
Date: Fri, 5 Oct 2012 10:52:38 +0000
Mime-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
In-Reply-To: 
 <CABY_-Z54V1ADbFqyGexcSVY3+nYbHpjQc0G+b9nUTye83Q_P=w@mail.gmail.com>
References: 
 <CABY_-Z54V1ADbFqyGexcSVY3+nYbHpjQc0G+b9nUTye83Q_P=w@mail.gmail.com>
X-Priority: 3 (Normal)
X-Mailer: Zarafa 7.0.7-34256
Message-Id: <zarafa.506ebbf6.44e2.40242b504debc40b@mail.openindex.io>

You're right, but it's fixed now. In Solr's analysis page i spotted an incorrect endOffset for some tokens. After correcting the endOffset the error no longer appears. I should more carefully check the offsets emitted.

Thanks for your time anyway :)=20
=20
-----Original message-----
> From:Thomas Matthijs <lists@selckin.be>
> Sent: Thu 04-Oct-2012 15:55
> To: java-user@lucene.apache.org
> Subject: Re: Highlighter IOOBE with modified HyphenationCompoundWordTokenFilter
>=20
> And to include the code
>=20
> On Thu, Oct 4, 2012 at 3:52 PM, Markus Jelsma
> <markus.jelsma@openindex.io> wrote:
> > I forgot to add that this is with today's build of trunk.
> >
> > -----Original message-----
> >> From:Markus Jelsma <markus.jelsma@openindex.io>
> >> Sent: Thu 04-Oct-2012 15:42
> >> To: java-user@lucene.apache.org
> >> Subject: Highlighter IOOBE with modified HyphenationCompoundWordTokenFilter
> >>
> >> Hi,
> >>
> >> I've modified the HyphenationCompoundWordTokenFilter to emit less subtokens because the original filter can emit all kinds of subtokens that have a very different meaning on their own. I've modified it so no overlapping subtokens are emitted and no subtokens are emitted that can be found within another subtoken. I've also modified it to force that the generated subtokens comprise the original token and if they don't forget the subtokens. It also doesn't return the original token anymore, the original filter produces a duplicate of the original input token. For example: verzekeringmaatschappij now becomes verzekering and maatschappij and not verzekeringmaatschappij, ver, zeker, verzeker, zekering, ringmaat, maat and more.
> >>
> >> But it seem that i have done something wrong because my modified version sometimes causes the Highlighter to throw the following IOOBE:
> >>
> >> java.lang.StringIndexOutOfBoundsException: String index out of range: -14
> >>         at java.lang.String.substring(String.java:1937)
> >>         at org.apache.lucene.search.vectorhighlight.BaseFragmentsBuilder.makeFragment(BaseFragmentsBuilder.java:172)
> >>         at org.apache.lucene.search.vectorhighlight.BaseFragmentsBuilder.createFragments(BaseFragmentsBuilder.java:138)
> >>         at org.apache.lucene.search.vectorhighlight.FastVectorHighlighter.getBestFragments(FastVectorHighlighter.java:186)
> >>         at org.apache.solr.highlight.DefaultSolrHighlighter.doHighlightingByFastVectorHighlighter(DefaultSolrHighlighter.java:571)
> >>         at org.apache.solr.highlight.DefaultSolrHighlighter.doHighlighting(DefaultSolrHighlighter.java:401)
> >>         at org.apache.solr.handler.component.HighlightComponent.process(HighlightComponent.java:136)
> >>         at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:214)
> >>         at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:129)
> >>         at org.apache.solr.core.SolrCore.execute(SolrCore.java:1750)
> >>         at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:455)
> >>         at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:276)
> >>         at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1337)
> >>         .....
> >>
> >> Anyone to point me in the right direction=3F I've checked the LIA book on how to manipulate the tokenstream and thought it should be alright. My analysis tests also yield good results, nothing strange to be found. Or could it be an error in the highlighter that only now shows up=3F
> >>
> >> Thanks,
> >> Markus
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Oct  5 11:33:28 2012
Return-Path: <java-user-return-53814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 82E5BDE9E
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  5 Oct 2012 11:33:28 +0000 (UTC)
Received: (qmail 68188 invoked by uid 500); 5 Oct 2012 11:33:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67959 invoked by uid 500); 5 Oct 2012 11:33:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67931 invoked by uid 99); 5 Oct 2012 11:33:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Oct 2012 11:33:25 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of vvekselva.gm@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-we0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Oct 2012 11:33:16 +0000
Received: by mail-we0-f176.google.com with SMTP id z53so1119646wey.35
        for <java-user@lucene.apache.org>; Fri, 05 Oct 2012 04:32:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=dXNBfmDJpSpOqKXxAlA70eb+bGL/PnrY3nOscKRBu64=;
        b=M1HQECoeAgd/XJSOsqeTQDAgc/TRhF4ZdjVvb/hLQU48Y2/6jrIsAS6gMcN7YOwIwz
         49mNnDqGDbrcBvpumoDkvw+PZAuazThavrcQ/ONLWpGXAtYRWbedrVPC4+k/cr+sXOYr
         RABC3Z8PQlJvwavSl0cMV+H1xDvB8kwV9NKctQGXASqJBvHHDyfJU6/kq29dGEXwUlog
         AWRzPt3lkidY8+BWGaybjitc8tSxzizMERXmpFenccE9SyU8SrzU49boMCKF7zFdc67V
         8G+rRYb4xBfflO3lAWMCAcU2stsoNqAhlLnhucfB7nu+OVqIZ3Tp9DAW8axmWQzZ4SEW
         svQQ==
MIME-Version: 1.0
Received: by 10.216.145.98 with SMTP id o76mr5014039wej.27.1349436776575; Fri,
 05 Oct 2012 04:32:56 -0700 (PDT)
Received: by 10.217.0.3 with HTTP; Fri, 5 Oct 2012 04:32:56 -0700 (PDT)
Date: Fri, 5 Oct 2012 17:02:56 +0530
Message-ID: <CAMbOsno_2jo3n9j7WSYKEVFpt9HrPqudxMnpfr=-39JYzqdysg@mail.gmail.com>
Subject: Apache Lucene Analysis
From: selvakumar netaji <vvekselva.gm@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d58a4eb6f3b904cb4e3be2

--0016e6d58a4eb6f3b904cb4e3be2
Content-Type: text/plain; charset=ISO-8859-1

Hi All,


I'm reading the docs of Apache Lucene.

I just read through the docs of the analyser
docs/core/org/apache/lucene/analysis/package-summary.html.


Here they have given a code snippet,I've ambiguities in the add attribute
method. Should it be added to the token stream instance?

 Version matchVersion = Version.LUCENE_XY; // Substitute desired
Lucene version for XY
    Analyzer analyzer = new StandardAnalyzer(matchVersion); // or any
other analyzer
    TokenStream ts = analyzer.tokenStream("myfield", new
StringReader("some text goes here"));
    OffsetAttribute offsetAtt = addAttribute(OffsetAttribute.class);

    try {
      ts.reset(); // Resets this stream to the beginning. (Required)
      while (ts.incrementToken()) {
        // Use AttributeSource.reflectAsString(boolean)
        // for token stream debugging.
        System.out.println("token: " + ts.reflectAsString(true));

        System.out.println("token start offset: " + offsetAtt.startOffset());
        System.out.println("  token end offset: " + offsetAtt.endOffset());
      }
      ts.end();   // Perform end-of-stream operations, e.g. set the
final offset.
    } finally {
      ts.close(); // Release resources associated with this stream.
    }

--0016e6d58a4eb6f3b904cb4e3be2--

From java-user-return-53815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Oct  5 11:40:40 2012
Return-Path: <java-user-return-53815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 97DB5DECB
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  5 Oct 2012 11:40:40 +0000 (UTC)
Received: (qmail 89341 invoked by uid 500); 5 Oct 2012 11:40:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89234 invoked by uid 500); 5 Oct 2012 11:40:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89216 invoked by uid 99); 5 Oct 2012 11:40:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Oct 2012 11:40:38 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of vvekselva.gm@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-we0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Oct 2012 11:40:30 +0000
Received: by mail-we0-f176.google.com with SMTP id z53so1124083wey.35
        for <java-user@lucene.apache.org>; Fri, 05 Oct 2012 04:40:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=g1Q9bYdXQgg9UVcINjxjh3JIW4beW4+BYYRsS3vRiQE=;
        b=G5Y4jpwBkfoRJnsDPK9F1SJ5eM7RnANnJTzhMZjgKvE7HL+/Oqqt+jfy635lbCci2Z
         HYkyXvU5uVEyzFQxww4qfmD6pfP/HIS2mZ4CsGt6NM2XAl07IQhoBso5Eyor+RFS+3cf
         9GVquOWsu/Qon5+XwLxlIJYaPwGdLf+nF6DtCu9WTepG2VvplIkHIg/HGloGtgS7ptpz
         g24Xa/tWug4AnykHE5lDzeCzCo0uVCy8gGDSo7UPsVq/X8pLOb24kFGMCyWEbnJDmIXg
         5/tmcncQHNSA76jA7M4rtSamVO0Jpd7gVAJzkuMqYTqQy367f5BoCq8hNmm+TiwTN9/2
         qANA==
MIME-Version: 1.0
Received: by 10.180.91.169 with SMTP id cf9mr3032201wib.1.1349437209886; Fri,
 05 Oct 2012 04:40:09 -0700 (PDT)
Received: by 10.217.0.3 with HTTP; Fri, 5 Oct 2012 04:40:09 -0700 (PDT)
In-Reply-To: <CAMbOsno_2jo3n9j7WSYKEVFpt9HrPqudxMnpfr=-39JYzqdysg@mail.gmail.com>
References: <CAMbOsno_2jo3n9j7WSYKEVFpt9HrPqudxMnpfr=-39JYzqdysg@mail.gmail.com>
Date: Fri, 5 Oct 2012 17:10:09 +0530
Message-ID: <CAMbOsnomR-EJvU=pvfu_BN0yLWzgmndit4Sh1XY1Kyy8rEcZeA@mail.gmail.com>
Subject: Re: Apache Lucene Analysis
From: selvakumar netaji <vvekselva.gm@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=f46d043891af8abeb704cb4e5575

--f46d043891af8abeb704cb4e5575
Content-Type: text/plain; charset=ISO-8859-1

Actually I'm getting results if I add it to the tokenStream instance.


Can you please inform is it right?


Thanks in advance.


On Fri, Oct 5, 2012 at 5:02 PM, selvakumar netaji <vvekselva.gm@gmail.com>wrote:

> Hi All,
>
>
> I'm reading the docs of Apache Lucene.
>
> I just read through the docs of the analyser
> docs/core/org/apache/lucene/analysis/package-summary.html.
>
>
> Here they have given a code snippet,I've ambiguities in the add attribute
> method. Should it be added to the token stream instance?
>
>  Version matchVersion = Version.LUCENE_XY; // Substitute desired Lucene version for XY
>     Analyzer analyzer = new StandardAnalyzer(matchVersion); // or any other analyzer
>     TokenStream ts = analyzer.tokenStream("myfield", new StringReader("some text goes here"));
>     OffsetAttribute offsetAtt = addAttribute(OffsetAttribute.class);
>
>     try {
>       ts.reset(); // Resets this stream to the beginning. (Required)
>       while (ts.incrementToken()) {
>         // Use AttributeSource.reflectAsString(boolean)
>         // for token stream debugging.
>         System.out.println("token: " + ts.reflectAsString(true));
>
>         System.out.println("token start offset: " + offsetAtt.startOffset());
>         System.out.println("  token end offset: " + offsetAtt.endOffset());
>       }
>       ts.end();   // Perform end-of-stream operations, e.g. set the final offset.
>     } finally {
>       ts.close(); // Release resources associated with this stream.
>     }
>
>
>
>
>
>
>

--f46d043891af8abeb704cb4e5575--

From java-user-return-53816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Oct  5 14:24:50 2012
Return-Path: <java-user-return-53816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 12271D764
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  5 Oct 2012 14:24:50 +0000 (UTC)
Received: (qmail 29748 invoked by uid 500); 5 Oct 2012 14:24:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29685 invoked by uid 500); 5 Oct 2012 14:24:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29675 invoked by uid 99); 5 Oct 2012 14:24:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Oct 2012 14:24:47 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vvekselva.gm@gmail.com designates 209.85.212.182 as permitted sender)
Received: from [209.85.212.182] (HELO mail-wi0-f182.google.com) (209.85.212.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Oct 2012 14:24:41 +0000
Received: by mail-wi0-f182.google.com with SMTP id hm2so527283wib.5
        for <java-user@lucene.apache.org>; Fri, 05 Oct 2012 07:24:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=n7n5BKWqhNAxaUulGolFAB5F16tHwSnxvgTcTzENtZ8=;
        b=fSr7BHq525BB9YfEidfmVdmL1IjRZ70n/RYay+kLoZTTFz0ZHkT5VkPNp0ceLhtt/O
         jkSrNsPMkV/gIgWSK6Nknm1v4O/dX7J29IrbVmcDRz40FT6aQL8w8Izzk/PDoEDBzDJc
         PkPCjI6CkHYw4f+15aQYisK9TNtFU9q78xEssk6L2PQweeuiaKsMA9IcaDGLDTpBggbS
         Z137jklCjBCPE5zSx+JARvX2LfvGhgTa/vG/CUCMyydrd/Sgg8Zt6pX3zKSKVyUdotKb
         CIV66VPbgKPGKIjF1Kr+CWGmfqfmhp2YoWb0bRYctht0pwXZ8dhTPzBHhfa6aBNAU9+w
         VJeQ==
MIME-Version: 1.0
Received: by 10.180.96.164 with SMTP id dt4mr3741259wib.10.1349447059649; Fri,
 05 Oct 2012 07:24:19 -0700 (PDT)
Received: by 10.217.0.3 with HTTP; Fri, 5 Oct 2012 07:24:19 -0700 (PDT)
In-Reply-To: <CAMbOsnomR-EJvU=pvfu_BN0yLWzgmndit4Sh1XY1Kyy8rEcZeA@mail.gmail.com>
References: <CAMbOsno_2jo3n9j7WSYKEVFpt9HrPqudxMnpfr=-39JYzqdysg@mail.gmail.com>
	<CAMbOsnomR-EJvU=pvfu_BN0yLWzgmndit4Sh1XY1Kyy8rEcZeA@mail.gmail.com>
Date: Fri, 5 Oct 2012 19:54:19 +0530
Message-ID: <CAMbOsnpdTzarQJiRFT2-4pChNa4cADMF58VOK51CbjaZZW5mBA@mail.gmail.com>
Subject: Re: Apache Lucene Analysis
From: selvakumar netaji <vvekselva.gm@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=f46d04426e20a2332904cb50a0cb
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d04426e20a2332904cb50a0cb
Content-Type: text/plain; charset=ISO-8859-1

Hi All,


In the TokenStreamAPI section  of the analysis documentation for lucene 4.0
beta, MyAnalyzer class is defined.

They've added the lengthFilter in the create components method. The length
filter doesn't accept method with three arguments in 4.0. Should I create a
length filter class for this tutorial, but the ambiguity is there's a
length filter defined in the analysis package.

Can you please correct me if I'm wrong.






On Fri, Oct 5, 2012 at 5:10 PM, selvakumar netaji <vvekselva.gm@gmail.com>wrote:

> Actually I'm getting results if I add it to the tokenStream instance.
>
>
> Can you please inform is it right?
>
>
> Thanks in advance.
>
>
>
> On Fri, Oct 5, 2012 at 5:02 PM, selvakumar netaji <vvekselva.gm@gmail.com>wrote:
>
>> Hi All,
>>
>>
>> I'm reading the docs of Apache Lucene.
>>
>> I just read through the docs of the analyser
>> docs/core/org/apache/lucene/analysis/package-summary.html.
>>
>>
>> Here they have given a code snippet,I've ambiguities in the add attribute
>> method. Should it be added to the token stream instance?
>>
>>  Version matchVersion = Version.LUCENE_XY; // Substitute desired Lucene version for XY
>>     Analyzer analyzer = new StandardAnalyzer(matchVersion); // or any other analyzer
>>     TokenStream ts = analyzer.tokenStream("myfield", new StringReader("some text goes here"));
>>     OffsetAttribute offsetAtt = addAttribute(OffsetAttribute.class);
>>
>>     try {
>>       ts.reset(); // Resets this stream to the beginning. (Required)
>>       while (ts.incrementToken()) {
>>         // Use AttributeSource.reflectAsString(boolean)
>>         // for token stream debugging.
>>         System.out.println("token: " + ts.reflectAsString(true));
>>
>>         System.out.println("token start offset: " + offsetAtt.startOffset());
>>         System.out.println("  token end offset: " + offsetAtt.endOffset());
>>       }
>>       ts.end();   // Perform end-of-stream operations, e.g. set the final offset.
>>     } finally {
>>       ts.close(); // Release resources associated with this stream.
>>     }
>>
>>
>>
>>
>>
>>
>>
>

--f46d04426e20a2332904cb50a0cb--

From java-user-return-53817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Oct  6 23:29:02 2012
Return-Path: <java-user-return-53817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6BF56DA92
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat,  6 Oct 2012 23:29:02 +0000 (UTC)
Received: (qmail 93965 invoked by uid 500); 6 Oct 2012 23:29:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93871 invoked by uid 500); 6 Oct 2012 23:28:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93863 invoked by uid 99); 6 Oct 2012 23:28:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Oct 2012 23:28:59 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of kulksac@hawk.iit.edu designates 209.85.223.176 as permitted sender)
Received: from [209.85.223.176] (HELO mail-ie0-f176.google.com) (209.85.223.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Oct 2012 23:28:51 +0000
Received: by mail-ie0-f176.google.com with SMTP id k11so7915973iea.35
        for <java-user@lucene.apache.org>; Sat, 06 Oct 2012 16:28:28 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type
         :x-gm-message-state;
        bh=P+TZkBH9JfNsEz2CBf4SBW20BOSctyxWThvQmItLVvI=;
        b=b1cDRF25pGnxwDCi7s8KQ0XStVwAMDsplcsWZUTksYOxduk6nY1KfV3oT8oIIZ34jb
         /Z2yuDtU0Vhrk6Asez4CQg+omzxp+w3v4FKKB6yt/JmKvzwpSuj7y5pRXuoiPPxSQide
         CfpsEsUlb7syEfeJfrY4t+22AjprBEs1hZYUsUQ6q8ZrQFwoKmVzA8fsM1UZyznjRIE4
         GpnUBR3vhdkYjoD8bDQFswaF5V0FK9urZ4vhAZfp2ACxm0O/P0fIgK/zLiCii6CNsT+k
         AjIgDfQZlJW29LMpc1BnJaDcj5L0myzNWpIMN/H4eup12EHT57qXRcNIxTYHlrtW9lwH
         +vNw==
MIME-Version: 1.0
Received: by 10.50.156.232 with SMTP id wh8mr4264710igb.56.1349566108690; Sat,
 06 Oct 2012 16:28:28 -0700 (PDT)
Received: by 10.64.58.197 with HTTP; Sat, 6 Oct 2012 16:28:28 -0700 (PDT)
Date: Sat, 6 Oct 2012 18:28:28 -0500
Message-ID: <CAOuBjSiTMrLsJ=AY39Gd47N4BMD3mG22JRN3gbKy5q36eiACkw@mail.gmail.com>
Subject: TREC document Parser questions..
From: Sachin Kulkarni <kulksac@hawk.iit.edu>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=e89a8f3b9b5f82678004cb6c58df
X-Gm-Message-State: ALoCoQl7ElxnHAckZJCP+qnpKy5lEA1LPGS7tPyWOeRGLxgKwHBGK9tDYHOyze6IzWIdh3029SOF

--e89a8f3b9b5f82678004cb6c58df
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I am using the TRECParserByPath in lucene to index the TREC disc 4-5 data.
This does cover all the filetypes except CR collection
IS Lucene using the default Gov2parser to par the CR Collection?
IS there a parser that can be use for the CR Collection directly?

Thank you.

Regards,
Sachin

--e89a8f3b9b5f82678004cb6c58df--

From java-user-return-53818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct  8 07:51:27 2012
Return-Path: <java-user-return-53818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 73CF3D302
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  8 Oct 2012 07:51:27 +0000 (UTC)
Received: (qmail 40063 invoked by uid 500); 8 Oct 2012 07:51:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39870 invoked by uid 500); 8 Oct 2012 07:51:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39835 invoked by uid 99); 8 Oct 2012 07:51:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Oct 2012 07:51:19 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of vvekselva.gm@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-wg0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Oct 2012 07:51:11 +0000
Received: by mail-wg0-f48.google.com with SMTP id ds1so2251920wgb.5
        for <java-user@lucene.apache.org>; Mon, 08 Oct 2012 00:50:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=EJS7hCRMTG3uzEqBqUT1Attvm9A+hPL7v1DwLCao2wU=;
        b=nbSSGV3jrHegQ/+L8QLFTls+8mA/Crm92/47BVi6HmpQMOtS334SgqTdCvuwe2L4Ie
         hgfGZgXi5VI3K0pQ6kLkWr8kpsKcYRsGgzBYEnaKZ8Sk/7aaoAl58Pn3LNaDIZph/1A9
         hZN9sxukCnCgJyVhypvu+qvuUeMK7cVULqNmaNp483Ho99R+OhcznF848rWvsjhNHnQL
         6fRul142qyFnN9fi++3QlsaGgXeYUHfjlkkAROnakEFKyUkeyrBEAPKaM4kfS7V35DUh
         9b4QXc3YuZda73VrICZrdqF65zFNsghNwgBFF/abApZIUVQ/SqW34TJMS3WVhlCKJNlq
         L8Pw==
MIME-Version: 1.0
Received: by 10.180.8.40 with SMTP id o8mr19270167wia.9.1349682650913; Mon, 08
 Oct 2012 00:50:50 -0700 (PDT)
Received: by 10.217.0.3 with HTTP; Mon, 8 Oct 2012 00:50:50 -0700 (PDT)
In-Reply-To: <CAMbOsnpdTzarQJiRFT2-4pChNa4cADMF58VOK51CbjaZZW5mBA@mail.gmail.com>
References: <CAMbOsno_2jo3n9j7WSYKEVFpt9HrPqudxMnpfr=-39JYzqdysg@mail.gmail.com>
	<CAMbOsnomR-EJvU=pvfu_BN0yLWzgmndit4Sh1XY1Kyy8rEcZeA@mail.gmail.com>
	<CAMbOsnpdTzarQJiRFT2-4pChNa4cADMF58VOK51CbjaZZW5mBA@mail.gmail.com>
Date: Mon, 8 Oct 2012 13:20:50 +0530
Message-ID: <CAMbOsnqWwAUtmGEfMxJbFbhY5eRU_nHa-BFfZGoGWjP5z=P=Wg@mail.gmail.com>
Subject: Re: Apache Lucene Analysis
From: selvakumar netaji <vvekselva.gm@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec555503cf79d4e04cb877a9d

--bcaec555503cf79d4e04cb877a9d
Content-Type: text/plain; charset=ISO-8859-1

Can you please help me to sort this out.

On Fri, Oct 5, 2012 at 7:54 PM, selvakumar netaji <vvekselva.gm@gmail.com>wrote:

> Hi All,
>
>
> In the TokenStreamAPI section  of the analysis documentation for lucene
> 4.0 beta, MyAnalyzer class is defined.
>
> They've added the lengthFilter in the create components method. The length
> filter doesn't accept method with three arguments in 4.0. Should I create a
> length filter class for this tutorial, but the ambiguity is there's a
> length filter defined in the analysis package.
>
> Can you please correct me if I'm wrong.
>
>
>
>
>
>
> On Fri, Oct 5, 2012 at 5:10 PM, selvakumar netaji <vvekselva.gm@gmail.com>wrote:
>
>> Actually I'm getting results if I add it to the tokenStream instance.
>>
>>
>> Can you please inform is it right?
>>
>>
>> Thanks in advance.
>>
>>
>>
>> On Fri, Oct 5, 2012 at 5:02 PM, selvakumar netaji <vvekselva.gm@gmail.com
>> > wrote:
>>
>>> Hi All,
>>>
>>>
>>> I'm reading the docs of Apache Lucene.
>>>
>>> I just read through the docs of the analyser
>>> docs/core/org/apache/lucene/analysis/package-summary.html.
>>>
>>>
>>> Here they have given a code snippet,I've ambiguities in the add
>>> attribute method. Should it be added to the token stream instance?
>>>
>>>  Version matchVersion = Version.LUCENE_XY; // Substitute desired Lucene version for XY
>>>     Analyzer analyzer = new StandardAnalyzer(matchVersion); // or any other analyzer
>>>     TokenStream ts = analyzer.tokenStream("myfield", new StringReader("some text goes here"));
>>>     OffsetAttribute offsetAtt = addAttribute(OffsetAttribute.class);
>>>
>>>     try {
>>>       ts.reset(); // Resets this stream to the beginning. (Required)
>>>       while (ts.incrementToken()) {
>>>         // Use AttributeSource.reflectAsString(boolean)
>>>         // for token stream debugging.
>>>         System.out.println("token: " + ts.reflectAsString(true));
>>>
>>>         System.out.println("token start offset: " + offsetAtt.startOffset());
>>>         System.out.println("  token end offset: " + offsetAtt.endOffset());
>>>       }
>>>       ts.end();   // Perform end-of-stream operations, e.g. set the final offset.
>>>     } finally {
>>>       ts.close(); // Release resources associated with this stream.
>>>     }
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>
>

--bcaec555503cf79d4e04cb877a9d--

From java-user-return-53819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct  8 09:13:29 2012
Return-Path: <java-user-return-53819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D11AED46A
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  8 Oct 2012 09:13:29 +0000 (UTC)
Received: (qmail 30952 invoked by uid 500); 8 Oct 2012 09:13:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30847 invoked by uid 500); 8 Oct 2012 09:13:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30824 invoked by uid 99); 8 Oct 2012 09:13:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Oct 2012 09:13:25 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.176] (HELO mail-we0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Oct 2012 09:13:16 +0000
Received: by mail-we0-f176.google.com with SMTP id z53so2744427wey.35
        for <java-user@lucene.apache.org>; Mon, 08 Oct 2012 02:12:56 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:x-originating-ip:date:message-id:subject:from:to
         :content-type:x-gm-message-state;
        bh=jy0bxOE9p9vmjHpLmYo3Tr3Drrz/telgm/tTazFiGqY=;
        b=MJEuccR2xcNLiL3QW9QwMa0H37jnW7in0oWlhcW0IuXaQ2QIotklnp4Es71xPHTBYk
         fFv+kD3SbXoZAaxMbcp/8hCx5aJGWexFt484S1o99UuG0HCuishwHBMQD8TXMZhlWr5c
         3+Zv8L+jfUW8seYx5HEX4lOc7uotWLrwlfwsEi9yvMdi7j6r+KP9CIWstBY98av8nl9J
         Vre54uSC4Lw/OYI/dAP0/mEC+euqAEH46OcKEOtZnvdb1T+q/ItWt5bUeUXhhmbS+nOv
         s9hxYpFLocHHiTlhtrsGuzlrmwtDI+nGKXBDD0kdydVL1xioQdc3zDfsoxKiGhVKeWv2
         pKYw==
MIME-Version: 1.0
Received: by 10.180.105.168 with SMTP id gn8mr20267997wib.10.1349687575959;
 Mon, 08 Oct 2012 02:12:55 -0700 (PDT)
Received: by 10.223.97.5 with HTTP; Mon, 8 Oct 2012 02:12:55 -0700 (PDT)
X-Originating-IP: [91.183.109.228]
Date: Mon, 8 Oct 2012 11:12:55 +0200
Message-ID: <CABY_-Z7r=Z0301yf1-1uVBQyW3jf48SRPUhe6syt1eH28vNEPQ@mail.gmail.com>
Subject: lucene-4.0: QueryWrapperFilter & docBase
From: Thomas Matthijs <lists@selckin.be>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Gm-Message-State: ALoCoQnVAmXUPpIdjJu4rMWgb87htRdDe0h6BhlEUv9M7oarKKw/rGo8KpDqn8WFDCQAcQ1Jmq7s

Hello,

I have some custom queries & scorer that need to able to construct the
"global" docIds (doc + docBase).

But when i use these in a QueryWrapperFilter they no longer work,
because QueryWrapperFilter.getDocIdSet uses a "private context"
(context.reader().getContext();) which always has a docBase of 0, and
this is definitely called for every segment as far as i can see, so
the correct docBase is lost here, I tried to naively change it to pass
the original context but that blows up in asserts, I don't really
understand how this all should work.

How do i get the correct docBase in scorers when using QueryWrappedFilter ?

Let me know if you want an example/test.

Thanks

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct  8 09:27:56 2012
Return-Path: <java-user-return-53820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AEF03DCC7
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  8 Oct 2012 09:27:56 +0000 (UTC)
Received: (qmail 72086 invoked by uid 500); 8 Oct 2012 09:27:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71768 invoked by uid 500); 8 Oct 2012 09:27:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71753 invoked by uid 99); 8 Oct 2012 09:27:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Oct 2012 09:27:54 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of uwe@thetaphi.de designates 188.138.97.18 as permitted sender)
Received: from [188.138.97.18] (HELO mail.sd-datasolutions.de) (188.138.97.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Oct 2012 09:27:47 +0000
Received: from VEGA (gate1.marum.de [134.102.237.1])
	by mail.sd-datasolutions.de (Postfix) with ESMTPSA id C8F9114AA01D
	for <java-user@lucene.apache.org>; Mon,  8 Oct 2012 09:27:25 +0000 (UTC)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <CABY_-Z7r=Z0301yf1-1uVBQyW3jf48SRPUhe6syt1eH28vNEPQ@mail.gmail.com>
In-Reply-To: <CABY_-Z7r=Z0301yf1-1uVBQyW3jf48SRPUhe6syt1eH28vNEPQ@mail.gmail.com>
Subject: RE: lucene-4.0: QueryWrapperFilter & docBase
Date: Mon, 8 Oct 2012 11:28:29 +0200
Message-ID: <005401cda537$47197f10$d54c7d30$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQMkrh8B9Kjk06X8fCk78k3o96GNy5UBD3CA
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

This is a known problem currently. I think there is already an issue =
open, so this was not solved for 4.0 (I don't have the issue no =
available at the moment).

My plan to fix this is to make Filters behave like queries (with a =
rewrite() method), so the correct context can be passed to a "rewritten" =
filter (when QueryWrapperFilter rewrites, it rewrites also the query). =
The current approach is for performance reasons, because without =
rewrite, you would have no persistent "state" information between index =
segments, so the Query has to be rewritten on the top-level index for =
every segment again. By the current approach, the query is only =
rewritten against the current segment with a private IndexSearcher. By =
that process the docBase gets lost. So currently this does not work.

I would recommend to *not* use QueryWrapperFilter and instead wrap with =
ConstantScoreQuery and add it to the query as a Boolean MUST clause. In =
that case it should work fine. There is no performance increase by using =
QueryWrapperFilter, so no reason to use it.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Thomas Matthijs [mailto:lists@selckin.be]
> Sent: Monday, October 08, 2012 11:13 AM
> To: java-user@lucene.apache.org
> Subject: lucene-4.0: QueryWrapperFilter & docBase
>=20
> Hello,
>=20
> I have some custom queries & scorer that need to able to construct the =
"global"
> docIds (doc + docBase).
>=20
> But when i use these in a QueryWrapperFilter they no longer work, =
because
> QueryWrapperFilter.getDocIdSet uses a "private context"
> (context.reader().getContext();) which always has a docBase of 0, and =
this is
> definitely called for every segment as far as i can see, so the =
correct docBase is
> lost here, I tried to naively change it to pass the original context =
but that blows
> up in asserts, I don't really understand how this all should work.
>=20
> How do i get the correct docBase in scorers when using =
QueryWrappedFilter ?
>=20
> Let me know if you want an example/test.
>=20
> Thanks
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct  8 09:35:43 2012
Return-Path: <java-user-return-53821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A99D3D3E8
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  8 Oct 2012 09:35:43 +0000 (UTC)
Received: (qmail 92646 invoked by uid 500); 8 Oct 2012 09:35:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92591 invoked by uid 500); 8 Oct 2012 09:35:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92562 invoked by uid 99); 8 Oct 2012 09:35:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Oct 2012 09:35:40 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.176] (HELO mail-we0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Oct 2012 09:35:32 +0000
Received: by mail-we0-f176.google.com with SMTP id z53so2756091wey.35
        for <java-user@lucene.apache.org>; Mon, 08 Oct 2012 02:35:12 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:x-originating-ip:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding
         :x-gm-message-state;
        bh=HDhhpbv8F2GMDVsssRaOnOibO7uXVD3qFCaQVtoC/bA=;
        b=ndyzUu57ZwB01ZfLOnumSfnunPuWlN46U/mDdM0ZFMbQ6C3Jiq/qpOsFMS22j1CvVm
         YTw2C5hoxn9ZFPAl7SncyhyPbrUNxhtBGiy/kjy1G8nhF9cG9al1TzxXM871SWQHpvTS
         5BRBEt/t7fIsUaMjPeIH5IpdJBRzFM1ZyNP72th9RXH6H5DtCO3JcciyxBvFwX3WIFte
         lJaXv4IotgqWc+Pwzjb0xPRb+UUFknJrsgan5yIK0JDqiDVww2sxDRLxANgCqkXQDeHK
         DG0NGcmYivC9BZGJ/h5xuta82gvXl1BVsHh0MczreucCO5i/3l2WLHui2BcY6YN2q3Wf
         rM6Q==
MIME-Version: 1.0
Received: by 10.180.76.69 with SMTP id i5mr20464125wiw.9.1349688912398; Mon,
 08 Oct 2012 02:35:12 -0700 (PDT)
Received: by 10.223.97.5 with HTTP; Mon, 8 Oct 2012 02:35:12 -0700 (PDT)
X-Originating-IP: [91.183.109.228]
In-Reply-To: <005401cda537$47197f10$d54c7d30$@thetaphi.de>
References: <CABY_-Z7r=Z0301yf1-1uVBQyW3jf48SRPUhe6syt1eH28vNEPQ@mail.gmail.com>
	<005401cda537$47197f10$d54c7d30$@thetaphi.de>
Date: Mon, 8 Oct 2012 11:35:12 +0200
Message-ID: <CABY_-Z6+wr0BnCKvsZ6F9XxdSC8Ecz6u6kHMA54H-hJTsU8Lbg@mail.gmail.com>
Subject: Re: lucene-4.0: QueryWrapperFilter & docBase
From: Thomas Matthijs <lists@selckin.be>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Gm-Message-State: ALoCoQn80NRHpGM9YGZqzo5DFOLrCtvc/gQNKAqtEZJeuSkAEjHOTUQxc3Qz/mZaYsy1xf1dCFCV

On Mon, Oct 8, 2012 at 11:28 AM, Uwe Schindler <uwe@thetaphi.de> wrote:
> Hi,
>
> This is a known problem currently. I think there is already an issue open=
, so this was not solved for 4.0 (I don't have the issue no available at th=
e moment).
>
> My plan to fix this is to make Filters behave like queries (with a rewrit=
e() method), so the correct context can be passed to a "rewritten" filter (=
when QueryWrapperFilter rewrites, it rewrites also the query). The current =
approach is for performance reasons, because without rewrite, you would hav=
e no persistent "state" information between index segments, so the Query ha=
s to be rewritten on the top-level index for every segment again. By the cu=
rrent approach, the query is only rewritten against the current segment wit=
h a private IndexSearcher. By that process the docBase gets lost. So curren=
tly this does not work.
>
> I would recommend to *not* use QueryWrapperFilter and instead wrap with C=
onstantScoreQuery and add it to the query as a Boolean MUST clause. In that=
 case it should work fine. There is no performance increase by using QueryW=
rapperFilter, so no reason to use it.
>

Thanks for the explantation and fast reply, I will try to CSQ approach..

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct  8 10:59:21 2012
Return-Path: <java-user-return-53822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C536BD533
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  8 Oct 2012 10:59:21 +0000 (UTC)
Received: (qmail 15387 invoked by uid 500); 8 Oct 2012 10:59:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15111 invoked by uid 500); 8 Oct 2012 10:59:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15083 invoked by uid 99); 8 Oct 2012 10:59:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Oct 2012 10:59:14 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.220.48] (HELO mail-pa0-f48.google.com) (209.85.220.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Oct 2012 10:59:09 +0000
Received: by mail-pa0-f48.google.com with SMTP id kp12so5028247pab.35
        for <java-user@lucene.apache.org>; Mon, 08 Oct 2012 03:58:48 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:x-gm-message-state;
        bh=kuhyokymcTjSslBE4F/QAPrhpxld70799Xn72rBdg10=;
        b=huv9pGnV7prv8+7tQqOLKYOGveWkggh9KlfWtXHIMjp3bEt1wIz0FbEE5JyaZpZbOD
         HVO33pN+wki6utI3wnKilATWONsMdnb2SHEUcJH0PS+hErsAOJfWzfta5w9/XNOASJXe
         Ql1diSyaC7g5S3cw0dnga67P97t8+enu6u+xJW9Q536tEHyLYSrsdBXNiD6mzoD6mfSY
         sVii3ul6Jykdj/qc8UhsADiUmGa162sPE9LODGOBITQaT4Q6Wvyd/Sf1BiRNwf0xe98c
         ocNdkVgilq8iMht/3Y22noEGVvWiH3bUZtL0G32XUDt16vnVe/LwkMvk0qkmzkv4M8lx
         4mFQ==
Received: by 10.68.130.165 with SMTP id of5mr33915961pbb.113.1349693928259;
 Mon, 08 Oct 2012 03:58:48 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.68.73.197 with HTTP; Mon, 8 Oct 2012 03:58:27 -0700 (PDT)
In-Reply-To: <CAMbOsnomR-EJvU=pvfu_BN0yLWzgmndit4Sh1XY1Kyy8rEcZeA@mail.gmail.com>
References: <CAMbOsno_2jo3n9j7WSYKEVFpt9HrPqudxMnpfr=-39JYzqdysg@mail.gmail.com>
 <CAMbOsnomR-EJvU=pvfu_BN0yLWzgmndit4Sh1XY1Kyy8rEcZeA@mail.gmail.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Mon, 8 Oct 2012 06:58:27 -0400
Message-ID: <CAL8PwkayESsZQvcQBjssO_cRRXiM+8aJUi4Se_aNLU6Zz5m=yw@mail.gmail.com>
Subject: Re: Apache Lucene Analysis
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQnxkWZfkeTRRaxOeNr3E18EkI/1Yqwg6cF/1kYIwSUSiC8VsCtaClGoXsQcPz1+ovkjAQOw
X-Virus-Checked: Checked by ClamAV on apache.org

That is correct ... it should be:

    OffsetAttribute offsetAtt = ts.addAttribute(OffsetAttribute.class);

I'll fix the javadocs (for 4.1) ... thanks for raising!

Mike McCandless

http://blog.mikemccandless.com

On Fri, Oct 5, 2012 at 7:40 AM, selvakumar netaji
<vvekselva.gm@gmail.com> wrote:
> Actually I'm getting results if I add it to the tokenStream instance.
>
>
> Can you please inform is it right?
>
>
> Thanks in advance.
>
>
> On Fri, Oct 5, 2012 at 5:02 PM, selvakumar netaji <vvekselva.gm@gmail.com>wrote:
>
>> Hi All,
>>
>>
>> I'm reading the docs of Apache Lucene.
>>
>> I just read through the docs of the analyser
>> docs/core/org/apache/lucene/analysis/package-summary.html.
>>
>>
>> Here they have given a code snippet,I've ambiguities in the add attribute
>> method. Should it be added to the token stream instance?
>>
>>  Version matchVersion = Version.LUCENE_XY; // Substitute desired Lucene version for XY
>>     Analyzer analyzer = new StandardAnalyzer(matchVersion); // or any other analyzer
>>     TokenStream ts = analyzer.tokenStream("myfield", new StringReader("some text goes here"));
>>     OffsetAttribute offsetAtt = addAttribute(OffsetAttribute.class);
>>
>>     try {
>>       ts.reset(); // Resets this stream to the beginning. (Required)
>>       while (ts.incrementToken()) {
>>         // Use AttributeSource.reflectAsString(boolean)
>>         // for token stream debugging.
>>         System.out.println("token: " + ts.reflectAsString(true));
>>
>>         System.out.println("token start offset: " + offsetAtt.startOffset());
>>         System.out.println("  token end offset: " + offsetAtt.endOffset());
>>       }
>>       ts.end();   // Perform end-of-stream operations, e.g. set the final offset.
>>     } finally {
>>       ts.close(); // Release resources associated with this stream.
>>     }
>>
>>
>>
>>
>>
>>
>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct  8 11:01:06 2012
Return-Path: <java-user-return-53823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 12CD7D555
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  8 Oct 2012 11:01:06 +0000 (UTC)
Received: (qmail 20891 invoked by uid 500); 8 Oct 2012 11:01:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20834 invoked by uid 500); 8 Oct 2012 11:01:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20824 invoked by uid 99); 8 Oct 2012 11:01:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Oct 2012 11:01:03 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.210.48] (HELO mail-da0-f48.google.com) (209.85.210.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Oct 2012 11:00:57 +0000
Received: by mail-da0-f48.google.com with SMTP id z8so2041229dad.35
        for <java-user@lucene.apache.org>; Mon, 08 Oct 2012 04:00:36 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:x-gm-message-state;
        bh=hsWfBqkJ2WKzjvMOH+F+cXnOdNPxzcENGX3vVig+tTE=;
        b=StuMJJmdaBWf+5c8hFF/H+kKuDQwqndfI8AuJU2RPexKwVx/+OBBJ7/HDV+/JE/dDP
         QU3/HrqI8WBOiO/lQrxGBYiDSHdScbYJzmR9SNWCHaDVaPpxg/Tz9e64gyvfcqKwtGqj
         Vt0sRcUd9iPDiPV0/kRXM6pe96Oi6E6T5cLylIPxNMS9Jkc72UdIUAUhGxaIDx+SzEj1
         lwSJ6U2GOGXrumtaY1PMN9oEQUKvJwSiLy7gB9YJ7CihkeTOak6ffcVbsPu0v1GmzajO
         EDdBO7hbnuwfIpt6rOt2Lg+8CPdHFZH8AajB1Y7cv0hJW505QKnOxy27e6gsE4m5LNi+
         0wxA==
Received: by 10.68.230.66 with SMTP id sw2mr4008246pbc.119.1349694035939; Mon,
 08 Oct 2012 04:00:35 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.68.73.197 with HTTP; Mon, 8 Oct 2012 04:00:15 -0700 (PDT)
In-Reply-To: <CAMbOsnpdTzarQJiRFT2-4pChNa4cADMF58VOK51CbjaZZW5mBA@mail.gmail.com>
References: <CAMbOsno_2jo3n9j7WSYKEVFpt9HrPqudxMnpfr=-39JYzqdysg@mail.gmail.com>
 <CAMbOsnomR-EJvU=pvfu_BN0yLWzgmndit4Sh1XY1Kyy8rEcZeA@mail.gmail.com> <CAMbOsnpdTzarQJiRFT2-4pChNa4cADMF58VOK51CbjaZZW5mBA@mail.gmail.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Mon, 8 Oct 2012 07:00:15 -0400
Message-ID: <CAL8Pwkbgba9eoBBUTbcFPKo73xV-rgzRXsvy2aqYO=DowS0MxQ@mail.gmail.com>
Subject: Re: Apache Lucene Analysis
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQnQIeGZ78IoAS9A5S4uX2ETotbaZdcInLL3JmqZ0UAVVzE1Y3T4xRt6ZserRRq1F3VLFxEg

On Fri, Oct 5, 2012 at 10:24 AM, selvakumar netaji
<vvekselva.gm@gmail.com> wrote:
> Hi All,
>
>
> In the TokenStreamAPI section  of the analysis documentation for lucene 4.0
> beta, MyAnalyzer class is defined.
>
> They've added the lengthFilter in the create components method. The length
> filter doesn't accept method with three arguments in 4.0.

Looks like it's missing the first required boolean argument
enablePositionIncrements; I'll fix the javadocs.  Thanks for raising
this!

> Should I create a
> length filter class for this tutorial, but the ambiguity is there's a
> length filter defined in the analysis package.

You should be able to just use the existing one (passing true or false
for the first arg) ...

Mike McCandless

http://blog.mikemccandless.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct  8 12:30:19 2012
Return-Path: <java-user-return-53824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B50F1D6F8
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  8 Oct 2012 12:30:19 +0000 (UTC)
Received: (qmail 56165 invoked by uid 500); 8 Oct 2012 12:30:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55715 invoked by uid 500); 8 Oct 2012 12:30:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55684 invoked by uid 99); 8 Oct 2012 12:30:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Oct 2012 12:30:10 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.212.176] (HELO mail-wi0-f176.google.com) (209.85.212.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Oct 2012 12:30:03 +0000
Received: by mail-wi0-f176.google.com with SMTP id hn14so2764393wib.5
        for <java-user@lucene.apache.org>; Mon, 08 Oct 2012 05:29:42 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:x-originating-ip:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding
         :x-gm-message-state;
        bh=172V/N3oCgvMApKwT+5qSKJt9n4LnK5RoglKuufuFuw=;
        b=EzGfMUzsGVzrImzBTNy5N0LR9/GafdebOF87kGCoRjUhmadVmbdS0A+oRxfCMllMdL
         QegMh73zX8l9aB/2QeE2d2z2JvKo/2EtFxRpHtrnNvDXHAf5nTswIiB/nLLn5bLr92st
         oJM0hDQaUMlpRcCEcSCBPmb6cVS9Sb2lNZmyZJurg/Weq0fgtz3S9Ld/PDtRwjOaGvUJ
         OgO599CBekBcNelhFzKzv/FPgtC44kN4gPv0oVJaj9+RIXIuUbSfA5BfWU1JVHXWFW0x
         a2xYDCUAGeRwHYy9P8Ac17PiR2ISPTnsy8rY69/Zh2fGW6u97s8SmntaRwheUCYwbx0o
         TZBg==
MIME-Version: 1.0
Received: by 10.180.79.202 with SMTP id l10mr21581641wix.9.1349699382212; Mon,
 08 Oct 2012 05:29:42 -0700 (PDT)
Received: by 10.223.97.5 with HTTP; Mon, 8 Oct 2012 05:29:42 -0700 (PDT)
X-Originating-IP: [91.183.109.228]
In-Reply-To: <005401cda537$47197f10$d54c7d30$@thetaphi.de>
References: <CABY_-Z7r=Z0301yf1-1uVBQyW3jf48SRPUhe6syt1eH28vNEPQ@mail.gmail.com>
	<005401cda537$47197f10$d54c7d30$@thetaphi.de>
Date: Mon, 8 Oct 2012 14:29:42 +0200
Message-ID: <CABY_-Z5gc6+6Ky_o4NX2=4ebqGZ708GYKxX4Bcxo0r9hpXxNGg@mail.gmail.com>
Subject: Re: lucene-4.0: QueryWrapperFilter & docBase
From: Thomas Matthijs <lists@selckin.be>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Gm-Message-State: ALoCoQlMf3dc3kssVlcmYfXUbnEIS7F4oHEj47Am+vffrPVrHZvxn3mpI9b7OJgYn6B5LCtWgF9F

On Mon, Oct 8, 2012 at 11:28 AM, Uwe Schindler <uwe@thetaphi.de> wrote:
> Hi,
>
> This is a known problem currently. I think there is already an issue open=
, so this was not solved for 4.0 (I don't have the issue no available at th=
e moment).
>
> My plan to fix this is to make Filters behave like queries (with a rewrit=
e() method), so the correct context can be passed to a "rewritten" filter (=
when QueryWrapperFilter rewrites, it rewrites also the query). The current =
approach is for performance reasons, because without rewrite, you would hav=
e no persistent "state" information between index segments, so the Query ha=
s to be rewritten on the top-level index for every segment again. By the cu=
rrent approach, the query is only rewritten against the current segment wit=
h a private IndexSearcher. By that process the docBase gets lost. So curren=
tly this does not work.
>
> I would recommend to *not* use QueryWrapperFilter and instead wrap with C=
onstantScoreQuery and add it to the query as a Boolean MUST clause. In that=
 case it should work fine. There is no performance increase by using QueryW=
rapperFilter, so no reason to use it.

It's important for me that the score does not change from what it was
before, and i'm unable to construct a booleanquery w/ CSQ that
basically ignores the filter score.

So i made a quick attempt at a basic FilteredQuery
(http://pastie.org/4932671) Just returning a ConjunctionScorer with
both the query & filter query, and overriding score() to return the
query score should do the trick i think?

This seems to work correctly in most cases but a test where i just
have a MUST_NOT clause in a (boolean)filter does not work this way,
because BooleanQuery with a single MUST_NOT clause just shortcircuits
this case and returns null from scorer(). A single MUST_NOT clause
worked correct in a BooleanFilter.

I can't wrap my head around it yet why its ok for BooleanQuery to
ignore these clauses ? Anyway i'm now attempting to make a scorer for
only prohibited clauses.

I guess my question is, is there an easier way i'm missing?


Thanks

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct  8 12:52:52 2012
Return-Path: <java-user-return-53825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3ADCCD77C
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  8 Oct 2012 12:52:52 +0000 (UTC)
Received: (qmail 42302 invoked by uid 500); 8 Oct 2012 12:52:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42141 invoked by uid 500); 8 Oct 2012 12:52:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42101 invoked by uid 99); 8 Oct 2012 12:52:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Oct 2012 12:52:47 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.48] (HELO mail-wg0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Oct 2012 12:52:41 +0000
Received: by mail-wg0-f48.google.com with SMTP id ds1so2397816wgb.5
        for <java-user@lucene.apache.org>; Mon, 08 Oct 2012 05:52:21 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:x-originating-ip:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding
         :x-gm-message-state;
        bh=GTi6V6eVPg4ckFEZkKqqEITSIppgN3U4B6JBxlgxPc4=;
        b=Lh/5fB+oZE1a+TyWVtXgj6i4Ubt82QQApw8hsfNQPlkF2J+et4GmS4xzGydh6W/yOJ
         3chaXJ5NHV8PwyA7j/ffFF55f4DdfTIm0uOhDavfy2AJCexAsm1sU4R3aJ570SfPhcO0
         +u3BcOdLvjSFKJZbFAWtTllI6138IYziTqeJs3A3NXOk6S9hoKBCI3nM+Mp4q0wGMpqY
         wN2eQRQAYlR8UpyCzgzlTuzdki8SZj4c/icKnuA2IOLNzJ2vSJcesSkMZHcbbOL7gp8R
         sLlMqp02KGFziVMzM9VdMaZLTdRvTfi4VREG8pUb1m3q+sjH6NEwOZLLzxIswFgXk8YZ
         HuEQ==
MIME-Version: 1.0
Received: by 10.180.96.164 with SMTP id dt4mr21132441wib.10.1349700740981;
 Mon, 08 Oct 2012 05:52:20 -0700 (PDT)
Received: by 10.223.97.5 with HTTP; Mon, 8 Oct 2012 05:52:20 -0700 (PDT)
X-Originating-IP: [91.183.109.228]
In-Reply-To: <CABY_-Z5gc6+6Ky_o4NX2=4ebqGZ708GYKxX4Bcxo0r9hpXxNGg@mail.gmail.com>
References: <CABY_-Z7r=Z0301yf1-1uVBQyW3jf48SRPUhe6syt1eH28vNEPQ@mail.gmail.com>
	<005401cda537$47197f10$d54c7d30$@thetaphi.de>
	<CABY_-Z5gc6+6Ky_o4NX2=4ebqGZ708GYKxX4Bcxo0r9hpXxNGg@mail.gmail.com>
Date: Mon, 8 Oct 2012 14:52:20 +0200
Message-ID: <CABY_-Z4xnat+4Prds+uYXor2d=5PByf=epJ12inTTPO8-+DXgQ@mail.gmail.com>
Subject: Re: lucene-4.0: QueryWrapperFilter & docBase
From: Thomas Matthijs <lists@selckin.be>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Gm-Message-State: ALoCoQk66SgWjD+kJEzkdP2yRn9MP55UAjutUusS0+fczU2UVD/E6rGZhT2+82JcCmyurOXkvxIO

On Mon, Oct 8, 2012 at 2:29 PM, Thomas Matthijs <lists@selckin.be> wrote:
> On Mon, Oct 8, 2012 at 11:28 AM, Uwe Schindler <uwe@thetaphi.de> wrote:
>> Hi,
>>
>> This is a known problem currently. I think there is already an issue ope=
n, so this was not solved for 4.0 (I don't have the issue no available at t=
he moment).
>>
>> My plan to fix this is to make Filters behave like queries (with a rewri=
te() method), so the correct context can be passed to a "rewritten" filter =
(when QueryWrapperFilter rewrites, it rewrites also the query). The current=
 approach is for performance reasons, because without rewrite, you would ha=
ve no persistent "state" information between index segments, so the Query h=
as to be rewritten on the top-level index for every segment again. By the c=
urrent approach, the query is only rewritten against the current segment wi=
th a private IndexSearcher. By that process the docBase gets lost. So curre=
ntly this does not work.
>>
>> I would recommend to *not* use QueryWrapperFilter and instead wrap with =
ConstantScoreQuery and add it to the query as a Boolean MUST clause. In tha=
t case it should work fine. There is no performance increase by using Query=
WrapperFilter, so no reason to use it.
>
> It's important for me that the score does not change from what it was
> before, and i'm unable to construct a booleanquery w/ CSQ that
> basically ignores the filter score.
>
> So i made a quick attempt at a basic FilteredQuery
> (http://pastie.org/4932671) Just returning a ConjunctionScorer with
> both the query & filter query, and overriding score() to return the
> query score should do the trick i think?
>
> This seems to work correctly in most cases but a test where i just
> have a MUST_NOT clause in a (boolean)filter does not work this way,
> because BooleanQuery with a single MUST_NOT clause just shortcircuits
> this case and returns null from scorer(). A single MUST_NOT clause
> worked correct in a BooleanFilter.
>
> I can't wrap my head around it yet why its ok for BooleanQuery to
> ignore these clauses ? Anyway i'm now attempting to make a scorer for
> only prohibited clauses.
>

Guess I can/should not
https://issues.apache.org/jira/browse/LUCENE-3451

Why are pure negative queries such a problem?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct  8 13:14:56 2012
Return-Path: <java-user-return-53826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8BD19D834
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  8 Oct 2012 13:14:56 +0000 (UTC)
Received: (qmail 18916 invoked by uid 500); 8 Oct 2012 13:14:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18716 invoked by uid 500); 8 Oct 2012 13:14:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18681 invoked by uid 99); 8 Oct 2012 13:14:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Oct 2012 13:14:53 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vvekselva.gm@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-wg0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Oct 2012 13:14:48 +0000
Received: by mail-wg0-f48.google.com with SMTP id ds1so2409558wgb.5
        for <java-user@lucene.apache.org>; Mon, 08 Oct 2012 06:14:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=eUknBLwtWxHAl4IbHTF34Sl/jjJ6rgXIRUPa7PlUrb0=;
        b=rKbX0fHKEVTALsWZYncKwi+uMniSdeaA9P/noUsfF9Zom/lZsTs70QYFZg+h/tdxkV
         9WCDNZwPtC/9B2bkfPDhHFm4sq0mAaX3Jcq4LAxajXcUAyoVVf/RaghpTWmYyINisjKG
         9hDGgjvd294qvyBXwseezVXtnIPRKms9X9/mJv4x+gXRxvysUJyEzDz1K+flFI7nNxsu
         qrdJ8Z9IzrFITZmtWNJQoJ+mI5vTKvmaBJMmM068l+lWQYdDGY4/FLCcPWXKTZQsARal
         gFY2EeSlU1dMiylXJsqIohfNbwMteZguk+XomtKxqGjNJ4g9gkKABf3A7ZuNXwZcUyaV
         z1FQ==
MIME-Version: 1.0
Received: by 10.180.8.40 with SMTP id o8mr21255776wia.9.1349702066757; Mon, 08
 Oct 2012 06:14:26 -0700 (PDT)
Received: by 10.217.0.3 with HTTP; Mon, 8 Oct 2012 06:14:26 -0700 (PDT)
In-Reply-To: <CAL8Pwkbgba9eoBBUTbcFPKo73xV-rgzRXsvy2aqYO=DowS0MxQ@mail.gmail.com>
References: <CAMbOsno_2jo3n9j7WSYKEVFpt9HrPqudxMnpfr=-39JYzqdysg@mail.gmail.com>
	<CAMbOsnomR-EJvU=pvfu_BN0yLWzgmndit4Sh1XY1Kyy8rEcZeA@mail.gmail.com>
	<CAMbOsnpdTzarQJiRFT2-4pChNa4cADMF58VOK51CbjaZZW5mBA@mail.gmail.com>
	<CAL8Pwkbgba9eoBBUTbcFPKo73xV-rgzRXsvy2aqYO=DowS0MxQ@mail.gmail.com>
Date: Mon, 8 Oct 2012 18:44:26 +0530
Message-ID: <CAMbOsno-mj4MCiHdm6-TPqa9RKMi_QzpcdNyVATdRaBkn=1R7A@mail.gmail.com>
Subject: Re: Apache Lucene Analysis
From: selvakumar netaji <vvekselva.gm@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec555503c3de21504cb8c00f4
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec555503c3de21504cb8c00f4
Content-Type: text/plain; charset=ISO-8859-1

Thanks Mike.

On Mon, Oct 8, 2012 at 4:30 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> On Fri, Oct 5, 2012 at 10:24 AM, selvakumar netaji
> <vvekselva.gm@gmail.com> wrote:
> > Hi All,
> >
> >
> > In the TokenStreamAPI section  of the analysis documentation for lucene
> 4.0
> > beta, MyAnalyzer class is defined.
> >
> > They've added the lengthFilter in the create components method. The
> length
> > filter doesn't accept method with three arguments in 4.0.
>
> Looks like it's missing the first required boolean argument
> enablePositionIncrements; I'll fix the javadocs.  Thanks for raising
> this!
>
> > Should I create a
> > length filter class for this tutorial, but the ambiguity is there's a
> > length filter defined in the analysis package.
>
> You should be able to just use the existing one (passing true or false
> for the first arg) ...
>
> Mike McCandless
>
> http://blog.mikemccandless.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--bcaec555503c3de21504cb8c00f4--

From java-user-return-53827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct  8 17:36:33 2012
Return-Path: <java-user-return-53827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 22BCBDE1E
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  8 Oct 2012 17:36:33 +0000 (UTC)
Received: (qmail 73298 invoked by uid 500); 8 Oct 2012 17:36:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73125 invoked by uid 500); 8 Oct 2012 17:36:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73115 invoked by uid 99); 8 Oct 2012 17:36:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Oct 2012 17:36:30 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of uwe@thetaphi.de designates 188.138.97.18 as permitted sender)
Received: from [188.138.97.18] (HELO mail.sd-datasolutions.de) (188.138.97.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Oct 2012 17:36:21 +0000
Received: from VEGA (port-92-196-126-162.dynamic.qsc.de [92.196.126.162])
	by mail.sd-datasolutions.de (Postfix) with ESMTPSA id 0F2E614AA01D
	for <java-user@lucene.apache.org>; Mon,  8 Oct 2012 17:36:01 +0000 (UTC)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <CABY_-Z7r=Z0301yf1-1uVBQyW3jf48SRPUhe6syt1eH28vNEPQ@mail.gmail.com>	<005401cda537$47197f10$d54c7d30$@thetaphi.de>	<CABY_-Z5gc6+6Ky_o4NX2=4ebqGZ708GYKxX4Bcxo0r9hpXxNGg@mail.gmail.com> <CABY_-Z4xnat+4Prds+uYXor2d=5PByf=epJ12inTTPO8-+DXgQ@mail.gmail.com>
In-Reply-To: <CABY_-Z4xnat+4Prds+uYXor2d=5PByf=epJ12inTTPO8-+DXgQ@mail.gmail.com>
Subject: RE: lucene-4.0: QueryWrapperFilter & docBase
Date: Mon, 8 Oct 2012 19:37:05 +0200
Message-ID: <01d101cda57b$88d2a8c0$9a77fa40$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQMkrh8B9Kjk06X8fCk78k3o96GNywJE755oAfpoDLMB2YyNvZTQ0uGA
Content-Language: de

> >> I would recommend to *not* use QueryWrapperFilter and instead wrap =
with
> ConstantScoreQuery and add it to the query as a Boolean MUST clause. =
In that
> case it should work fine. There is no performance increase by using
> QueryWrapperFilter, so no reason to use it.
> >
> > It's important for me that the score does not change from what it =
was
> > before, and i'm unable to construct a booleanquery w/ CSQ that
> > basically ignores the filter score.

A CSQ with boost=3D0.0f does returns a score of 0. If you add it to a =
BooleanQuery(disableCoord=3Dtrue), it should not change score (because =
scores are summed up). The Top-Level BooleanQuery would have disabled =
coord, consisting of your main query and the filter query.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct  9 12:00:10 2012
Return-Path: <java-user-return-53828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7A920D5AF
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  9 Oct 2012 12:00:10 +0000 (UTC)
Received: (qmail 89728 invoked by uid 500); 9 Oct 2012 12:00:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89063 invoked by uid 500); 9 Oct 2012 12:00:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88990 invoked by uid 99); 9 Oct 2012 11:59:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Oct 2012 11:59:58 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.113.200.5] (HELO homiemail-a91.g.dreamhost.com) (208.113.200.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Oct 2012 11:59:53 +0000
Received: from homiemail-a91.g.dreamhost.com (localhost [127.0.0.1])
	by homiemail-a91.g.dreamhost.com (Postfix) with ESMTP id BF0EAAE05B
	for <java-user@lucene.apache.org>; Tue,  9 Oct 2012 04:59:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed; d=getopt.org; h=message-id
	:date:from:mime-version:to:subject:content-type:
	content-transfer-encoding; s=getopt.org; bh=uymqCEgDv4tNMjFn9U2E
	FuSLt5U=; b=miyhSHbHw7A+V48RYuFjq/viIWAIHIPYCzhDKH8djyxV0/dnT7oB
	LBuCKctDPitKzfFeqgqVX4ROdPebboM/HskjqoIg7Q734x9Ss6tt5kTKNpJA7Ped
	3FK1xKFVwBfdruPH/jWuNV3Yb+6mQFr3Q8gg7KoJcFQSAIVYXWXy1Zg=
Received: from abacus.local (unknown [81.219.54.251])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	(Authenticated sender: ab@getopt.org)
	by homiemail-a91.g.dreamhost.com (Postfix) with ESMTPSA id CDBF0AE059
	for <java-user@lucene.apache.org>; Tue,  9 Oct 2012 04:59:30 -0700 (PDT)
Message-ID: <5074119F.2040307@getopt.org>
Date: Tue, 09 Oct 2012 13:59:27 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:15.0) Gecko/20120907 Thunderbird/15.0.1
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Lucene 4 architecture - paper available
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

Together with Grant Ingersoll and Robert Muir we have submitted a paper 
to the "SIGIR 2012 Workshop on Open Source Information Retrieval" held 
on 16 Aug 2012 in Portland (http://opensearchlab.otago.ac.nz/). The 
paper has been accepted, and presented by Grant during the workshop, and 
it's available from the Proceedings page here:

http://opensearchlab.otago.ac.nz/paper_10.pdf

The paper gives an overview of the Lucene 4 high-level architecture, 
major areas of functionality, new features in version 4, and presents 
the Open Source development process.

For people already familiar with Lucene 4 the material presented in the 
paper is probably kind of obvious. But one of the goals of this paper 
was also to present recent advances in Lucene to the academic IR 
community in a way understandable to this community (which is otherwise 
rather hermetic), and to provide a reference paper to be cited that 
better reflects current capabilities of Lucene than the older existing 
references from the time of Lucene 2.x or earlier. It could also provide 
a gentle introduction to Lucene 4 for people already familiar with 
information retrieval in general.

We hope you enjoy the reading. :)

-- 
Best regards,
Andrzej Bialecki
http://www.sigram.com, blog http://www.sigram.com/blog
  ___.,___,___,___,_._. __________________<><____________________
[___||.__|__/|__||\/|: Information Retrieval, System Integration
___|||__||..\|..||..|: Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct  9 12:27:38 2012
Return-Path: <java-user-return-53829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B44DCDC9D
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  9 Oct 2012 12:27:38 +0000 (UTC)
Received: (qmail 68811 invoked by uid 500); 9 Oct 2012 12:27:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68685 invoked by uid 500); 9 Oct 2012 12:27:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68669 invoked by uid 99); 9 Oct 2012 12:27:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Oct 2012 12:27:35 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.220.48] (HELO mail-pa0-f48.google.com) (209.85.220.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Oct 2012 12:27:30 +0000
Received: by mail-pa0-f48.google.com with SMTP id kp12so6516251pab.35
        for <java-user@lucene.apache.org>; Tue, 09 Oct 2012 05:27:08 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:x-gm-message-state;
        bh=mkxKQ6dvi1lSS45uAZYjei/x7VgUnXWEy2rLmrW+ygY=;
        b=mukzmWDQcfvD6PTBF5Pev7d8ewmQWJPx6KlWK7C+py27+iv7GlksS/IJ/D2k1bolf1
         xGHhXGmVFfBLO2m7WP92cqkBEcnAeLWa8FQbbT0y1rKARxR1/iLRN7uB1pJWH5Vy+zKe
         icEFw0FOTyKCobqxJ1VMJCXe214Ma+NTnyaTBBa/MqNfBrPsnXtwJjLxtSB0U3uOLJ+8
         upVDQP4SgpiyNF9o5OgEZI8bBKwVep2WA5JqLZJMgyAjNXh7MUVPrhUJyxqCT6J12i/j
         4szkpuJqPsG0HOkfjvnUo9qtUziJTNZcoHbTzx5FimDfxuG3kHZDTTMHdtifCvnkmGDp
         nBcw==
Received: by 10.68.130.67 with SMTP id oc3mr63297699pbb.18.1349785628471; Tue,
 09 Oct 2012 05:27:08 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.68.73.197 with HTTP; Tue, 9 Oct 2012 05:26:48 -0700 (PDT)
In-Reply-To: <5074119F.2040307@getopt.org>
References: <5074119F.2040307@getopt.org>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Tue, 9 Oct 2012 08:26:48 -0400
Message-ID: <CAL8PwkbPAOhnoP=MwrJ9whqJRxqYhD=Uf-wdLSLouncsoZn6Cw@mail.gmail.com>
Subject: Re: Lucene 4 architecture - paper available
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQkUtPRxJWhpdkEnvVv/uWokrI3igjaLcOSw7vzySDQckPvdFVoXHiXSYjwpppIyJ/RLM2kM

Thanks for doing this Grant, Robert and Andrzej!

Writing a paper is a lot of work but very much worthwhile, especially
in this case in order to bridge over to the IR community.

Lucene has made awesome advances (flexible scoring, indexing) lately
that are relevant to / enabling for ongoing IR research...

Mike McCandless

http://blog.mikemccandless.com

On Tue, Oct 9, 2012 at 7:59 AM, Andrzej Bialecki <ab@getopt.org> wrote:
> Hi all,
>
> Together with Grant Ingersoll and Robert Muir we have submitted a paper to
> the "SIGIR 2012 Workshop on Open Source Information Retrieval" held on 16
> Aug 2012 in Portland (http://opensearchlab.otago.ac.nz/). The paper has been
> accepted, and presented by Grant during the workshop, and it's available
> from the Proceedings page here:
>
> http://opensearchlab.otago.ac.nz/paper_10.pdf
>
> The paper gives an overview of the Lucene 4 high-level architecture, major
> areas of functionality, new features in version 4, and presents the Open
> Source development process.
>
> For people already familiar with Lucene 4 the material presented in the
> paper is probably kind of obvious. But one of the goals of this paper was
> also to present recent advances in Lucene to the academic IR community in a
> way understandable to this community (which is otherwise rather hermetic),
> and to provide a reference paper to be cited that better reflects current
> capabilities of Lucene than the older existing references from the time of
> Lucene 2.x or earlier. It could also provide a gentle introduction to Lucene
> 4 for people already familiar with information retrieval in general.
>
> We hope you enjoy the reading. :)
>
> --
> Best regards,
> Andrzej Bialecki
> http://www.sigram.com, blog http://www.sigram.com/blog
>  ___.,___,___,___,_._. __________________<><____________________
> [___||.__|__/|__||\/|: Information Retrieval, System Integration
> ___|||__||..\|..||..|: Contact: info at sigram dot com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct  9 17:24:47 2012
Return-Path: <java-user-return-53830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 47F9FD13A
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  9 Oct 2012 17:24:47 +0000 (UTC)
Received: (qmail 15483 invoked by uid 500); 9 Oct 2012 17:24:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15391 invoked by uid 500); 9 Oct 2012 17:24:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15379 invoked by uid 99); 9 Oct 2012 17:24:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Oct 2012 17:24:44 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vvekselva.gm@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-we0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Oct 2012 17:24:38 +0000
Received: by mail-we0-f176.google.com with SMTP id z53so3823188wey.35
        for <java-user@lucene.apache.org>; Tue, 09 Oct 2012 10:24:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=ltyhyCczRoLinYdmAM9c6K1UkSJBBd919RgF7Q4zmLE=;
        b=fDoOhPBKONvv+krpIR8WaO6JrY2euGs3yA0utJwsiqd+P/wtwSSH7/Yd6Uk+kaPfa5
         rcIedeWnZotxu/Vx12TT3GRn1MvWRmf1rDV5UKkL7B2S59QXay9Vuj64v7k/3HIcEJa5
         Pki4RzXDpdtD4I8TjXQpLgvyw1TqKxtmtaqLYjnZ8YOsNuyreZVDS8HOqv0e5/eOyEl7
         sdQfZEi0wlGjzF6YrO3ItQ8uw66GLPb8u+hFn1lG8FpCW3XJigXiMWSZUaxTggNuzdDy
         I7vvtX8ggpkl58KajtS5m/Oy922qrS+Fax3l7sDKLg44wOAmF4kvcYP5aVcg4t6QxGO6
         HxBg==
MIME-Version: 1.0
Received: by 10.180.74.33 with SMTP id q1mr6204517wiv.4.1349803456705; Tue, 09
 Oct 2012 10:24:16 -0700 (PDT)
Received: by 10.217.0.3 with HTTP; Tue, 9 Oct 2012 10:24:16 -0700 (PDT)
Date: Tue, 9 Oct 2012 22:54:16 +0530
Message-ID: <CAMbOsnoCY_q7ZkJoXygD6SrKN32n6vFMEjY2TX4yW70LNu1MHg@mail.gmail.com>
Subject: Solr Integrations.,
From: selvakumar netaji <vvekselva.gm@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=f46d043c7ebc8db29a04cba39b32
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d043c7ebc8db29a04cba39b32
Content-Type: text/plain; charset=ISO-8859-1

Hi All,

We're using Solr for searches from the index created form a large dataset.
We've deployed the solr as a seperate war in the server, additionally we
have two different wars deployed in the server for our application. Is it
possbile to deploy the solr along with any of the two wars instead of
separate war, so that we could expose search service in the same war.



Warm Regards,
Selvakumar N

--f46d043c7ebc8db29a04cba39b32--

From java-user-return-53831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct  9 17:35:11 2012
Return-Path: <java-user-return-53831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5148CDC3A
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  9 Oct 2012 17:35:11 +0000 (UTC)
Received: (qmail 55379 invoked by uid 500); 9 Oct 2012 17:35:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55312 invoked by uid 500); 9 Oct 2012 17:35:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55304 invoked by uid 99); 9 Oct 2012 17:35:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Oct 2012 17:35:09 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kulksac@hawk.iit.edu designates 209.85.223.176 as permitted sender)
Received: from [209.85.223.176] (HELO mail-ie0-f176.google.com) (209.85.223.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Oct 2012 17:35:05 +0000
Received: by mail-ie0-f176.google.com with SMTP id k11so13915333iea.35
        for <java-user@lucene.apache.org>; Tue, 09 Oct 2012 10:34:43 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:x-gm-message-state;
        bh=dLELhTE6RAW46R1CxEehe04TrGuEXEnRpGMoh+kGlMY=;
        b=FtjC1ZCu0KY9NWs8cdbz3jDGKn0iCxanQTJjhYxX/YhcT85sQ+d2LBemkaP3xuYIfG
         D1f86rRGdEnfdd51TheDBM0voeVpXNTbrKRipEdIqm7j0hFSGUWeMy7LLhGNADsuweTi
         hpBfPJInNtoPl1KI8B86aRekVZbLdf2O6ZDppcTprstoSaJzeD62hPEO4t6RVbsJR2OH
         uAW9S/3uU81Qou6+KerdJwLjCbbjBO3s/RetRFdf8eqIFfApiKEdYW/BrGUML6BfOZ5b
         4XzrulaIydQha6wr3Ri0nipWAtjnUFgqQYo9fjNWYJz6vym45qtpsj5dJtzdOrGuMuUC
         rp2Q==
MIME-Version: 1.0
Received: by 10.50.57.130 with SMTP id i2mr2508675igq.56.1349804083117; Tue,
 09 Oct 2012 10:34:43 -0700 (PDT)
Received: by 10.64.58.197 with HTTP; Tue, 9 Oct 2012 10:34:43 -0700 (PDT)
In-Reply-To: <5074119F.2040307@getopt.org>
References: <5074119F.2040307@getopt.org>
Date: Tue, 9 Oct 2012 12:34:43 -0500
Message-ID: <CAOuBjSiCs81erD7gNm64bkAH2Zmn_KB3C4DsHk=AUhEVyNqA2w@mail.gmail.com>
Subject: Re: Lucene 4 architecture - paper available
From: Sachin Kulkarni <kulksac@hawk.iit.edu>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=14dae93403b7e3fd8604cba3c012
X-Gm-Message-State: ALoCoQlokX/qsTDtopiRRfPUgbSGybBNyj/M5I754FxibuLkN99KnTErwFn7W1L+XPN53gaPHqfE
X-Virus-Checked: Checked by ClamAV on apache.org

--14dae93403b7e3fd8604cba3c012
Content-Type: text/plain; charset=ISO-8859-1

Hi Andrzej,

Heartiest congratulations to all three of you.
Kindly forward my wishes to  Grant Ingersoll and Robert Muir as well if
possible.

Having a paper in SIGIR is commendable and so is your work.
Lucene is a great library and even though I am only few months into using
it I like it a lot.

Kind Regards,
Sachin Kulkarni

On Tue, Oct 9, 2012 at 6:59 AM, Andrzej Bialecki <ab@getopt.org> wrote:

> Hi all,
>
> Together with Grant Ingersoll and Robert Muir we have submitted a paper to
> the "SIGIR 2012 Workshop on Open Source Information Retrieval" held on 16
> Aug 2012 in Portland (http://opensearchlab.otago.**ac.nz/<http://opensearchlab.otago.ac.nz/>).
> The paper has been accepted, and presented by Grant during the workshop,
> and it's available from the Proceedings page here:
>
> http://opensearchlab.otago.ac.**nz/paper_10.pdf<http://opensearchlab.otago.ac.nz/paper_10.pdf>
>
> The paper gives an overview of the Lucene 4 high-level architecture, major
> areas of functionality, new features in version 4, and presents the Open
> Source development process.
>
> For people already familiar with Lucene 4 the material presented in the
> paper is probably kind of obvious. But one of the goals of this paper was
> also to present recent advances in Lucene to the academic IR community in a
> way understandable to this community (which is otherwise rather hermetic),
> and to provide a reference paper to be cited that better reflects current
> capabilities of Lucene than the older existing references from the time of
> Lucene 2.x or earlier. It could also provide a gentle introduction to
> Lucene 4 for people already familiar with information retrieval in general.
>
> We hope you enjoy the reading. :)
>
> --
> Best regards,
> Andrzej Bialecki
> http://www.sigram.com, blog http://www.sigram.com/blog
>  ___.,___,___,___,_._. __________________<><_________**___________
> [___||.__|__/|__||\/|: Information Retrieval, System Integration
> ___|||__||..\|..||..|: Contact: info at sigram dot com
>
>
> ------------------------------**------------------------------**---------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.**apache.org<java-user-unsubscribe@lucene.apache.org>
> For additional commands, e-mail: java-user-help@lucene.apache.**org<java-user-help@lucene.apache.org>
>
>

--14dae93403b7e3fd8604cba3c012--

From java-user-return-53832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct  9 19:05:01 2012
Return-Path: <java-user-return-53832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3761ADF2A
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  9 Oct 2012 19:05:01 +0000 (UTC)
Received: (qmail 27174 invoked by uid 500); 9 Oct 2012 19:04:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27128 invoked by uid 500); 9 Oct 2012 19:04:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27118 invoked by uid 99); 9 Oct 2012 19:04:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Oct 2012 19:04:58 +0000
X-ASF-Spam-Status: No, hits=1.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of parnab.2007@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-ia0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Oct 2012 19:04:52 +0000
Received: by mail-ia0-f176.google.com with SMTP id h11so1222254iae.35
        for <java-user@lucene.apache.org>; Tue, 09 Oct 2012 12:04:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=BWLk3nbLGUe8YIOWG6ak1etffAAFSjaAsov+Y8kQM2Y=;
        b=LkWZUz5nf33jbRghNTMHkr2oF1Cgu7Hdrw+bdemASx5wC88GEvlBDMGWKWyQqwE5Lm
         0dNviuayTxSRP1GTApLkWBOZnc7m8JvxS5foiZaCgwIzF8Su9iQ89L8CCBNvMBPw9qcy
         2I1UqOc4QQBrx0LoCX8RbdmEJDXsNrGID9EVpdn1zdBI7+9OyFw0u/orsg7Hv0KmJaVV
         hmwb5/K1CQroIkqgAULhEFRGhO667aBVeO9x3rr9pJjGQbep2mFetNj1VN1Rdg//Y2z+
         4a1xTS4rkBWDl5JHjH6R1+xOfNLoHTjDr7P/YMWSxnx+JkN8y7tEGZjBZOWHWb1NMzoV
         3EAw==
MIME-Version: 1.0
Received: by 10.50.149.131 with SMTP id ua3mr2503154igb.46.1349809471737; Tue,
 09 Oct 2012 12:04:31 -0700 (PDT)
Received: by 10.50.94.165 with HTTP; Tue, 9 Oct 2012 12:04:31 -0700 (PDT)
Date: Wed, 10 Oct 2012 00:34:31 +0530
Message-ID: <CAMOErykgATiJGNvgPBd=4O9_eME8Db27t8sS_fH52oMvRzkCxw@mail.gmail.com>
Subject: machine learned ranking of documents
From: parnab kumar <parnab.2007@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=e89a8f3bb05313d08c04cba50265
X-Virus-Checked: Checked by ClamAV on apache.org

--e89a8f3bb05313d08c04cba50265
Content-Type: text/plain; charset=ISO-8859-1

Hi All,
        How do i incorporate machine learned ranking components  into
lucene. I donot want to do re-ranking of documents(i.e I donot want to
pre-fetch documents and then look into their features ). i want to do it on
the fly as lucene does it . The various parameters (tf ,idf, norm ,boost
 in different fields ) that lucene uses for scoring will be used as one
among the several features i have . I want to supply these features to a
model which will compute a score and return me back a score which i want to
incorporate into the lucene scoring components. Where should i look into ?
which modules ,class i should modify,implement etc.
                              Please advice/recommend or give any pointers
!!

Thanks,
Parnab

--e89a8f3bb05313d08c04cba50265--

From java-user-return-53833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct  9 19:29:44 2012
Return-Path: <java-user-return-53833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 25927DF03
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  9 Oct 2012 19:29:44 +0000 (UTC)
Received: (qmail 485 invoked by uid 500); 9 Oct 2012 19:29:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 434 invoked by uid 500); 9 Oct 2012 19:29:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 424 invoked by uid 99); 9 Oct 2012 19:29:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Oct 2012 19:29:41 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [93.93.131.52] (HELO haggis.mythic-beasts.com) (93.93.131.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Oct 2012 19:29:32 +0000
Received: from [89.243.217.80] (helo=[192.168.0.3])
	by haggis.mythic-beasts.com with esmtpsa (TLS1.0:RSA_AES_128_CBC_SHA1:16)
	(Exim 4.69)
	(envelope-from <alan.woodward@romseysoftware.co.uk>)
	id 1TLfUM-0001ld-Vh
	for java-user@lucene.apache.org; Tue, 09 Oct 2012 20:29:11 +0100
From: Alan Woodward <alan.woodward@romseysoftware.co.uk>
Mime-Version: 1.0 (Apple Message framework v1278)
Content-Type: multipart/alternative; boundary="Apple-Mail=_71D04E22-2AB2-4972-B23A-161080C46B61"
Subject: Re: machine learned ranking of documents
Date: Tue, 9 Oct 2012 20:29:10 +0100
In-Reply-To: <CAMOErykgATiJGNvgPBd=4O9_eME8Db27t8sS_fH52oMvRzkCxw@mail.gmail.com>
To: java-user@lucene.apache.org
References: <CAMOErykgATiJGNvgPBd=4O9_eME8Db27t8sS_fH52oMvRzkCxw@mail.gmail.com>
Message-Id: <8A9D3793-6F6E-49E8-9D23-048307899A3D@romseysoftware.co.uk>
X-Mailer: Apple Mail (2.1278)
X-BlackCat-Spam-Score: -13
X-Mythic-Debug: Threshold =  On = 
X-Old-Spam-Status: No, score=-1.4

--Apple-Mail=_71D04E22-2AB2-4972-B23A-161080C46B61
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=iso-8859-1

Hi parnab,

You want to look at the similarities package:
=
http://lucene.apache.org/core/4_0_0-ALPHA/core/org/apache/lucene/search/si=
milarities/package-summary.html

Alan Woodward

On 9 Oct 2012, at 20:04, parnab kumar wrote:

> Hi All,
>        How do i incorporate machine learned ranking components  into
> lucene. I donot want to do re-ranking of documents(i.e I donot want to
> pre-fetch documents and then look into their features ). i want to do =
it on
> the fly as lucene does it . The various parameters (tf ,idf, norm =
,boost
> in different fields ) that lucene uses for scoring will be used as one
> among the several features i have . I want to supply these features to =
a
> model which will compute a score and return me back a score which i =
want to
> incorporate into the lucene scoring components. Where should i look =
into ?
> which modules ,class i should modify,implement etc.
>                              Please advice/recommend or give any =
pointers
> !!
>=20
> Thanks,
> Parnab


--Apple-Mail=_71D04E22-2AB2-4972-B23A-161080C46B61--

From java-user-return-53834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 10 00:17:26 2012
Return-Path: <java-user-return-53834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D2788D59D
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 10 Oct 2012 00:17:25 +0000 (UTC)
Received: (qmail 31774 invoked by uid 500); 10 Oct 2012 00:17:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31729 invoked by uid 500); 10 Oct 2012 00:17:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31719 invoked by uid 99); 10 Oct 2012 00:17:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Oct 2012 00:17:23 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of vfunstein@gmail.com designates 209.85.215.48 as permitted sender)
Received: from [209.85.215.48] (HELO mail-la0-f48.google.com) (209.85.215.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Oct 2012 00:17:17 +0000
Received: by mail-la0-f48.google.com with SMTP id u2so3844074lag.35
        for <java-user@lucene.apache.org>; Tue, 09 Oct 2012 17:16:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=8coC8w7Qu4i8NknPEx3pi8HpJ2APulP5GITcVe7W1Gw=;
        b=OV/Ui7sCdtEn44EZV17RpNKMaez9nkgCZ3Iw3CRmU1DlpKWmnMBWsMyuSnfzjspBKJ
         y7U2FbfrPcDk7WOpp0/Jd+33YI6vh6TG1T41GnbGbXKV0849pwq3whcmUMdoX0Skn2cr
         EVNc7Ye2wjr1Au+XRiOKBkR8QAMsSKZ6n/FvAlcdBH0cqq5XSjkOaDg0/VKrRnHFl4IH
         4ibS8Q3kVYkQeUcfyXlvNWCGTNxgcDmd3WEyGUpiSkDQHNqlcQHzvNV6pdobTtykV+zx
         JXFFVy4NIyjtcIaozEwqTtfqwraTxtRyn+J2FAehw2qRwDgotrlKqqqSMYssbBgUDEul
         ZDyg==
MIME-Version: 1.0
Received: by 10.152.133.140 with SMTP id pc12mr18372003lab.53.1349828216517;
 Tue, 09 Oct 2012 17:16:56 -0700 (PDT)
Received: by 10.114.13.161 with HTTP; Tue, 9 Oct 2012 17:16:56 -0700 (PDT)
In-Reply-To: <CAG0hk_8=VK-mKuH=qTKZeyrxxtKNi8+=2fJUMekZtdq5do4rAQ@mail.gmail.com>
References: <CAG0hk_8y0MDN4un6UuZGNuBkZo=ziWmreCWZo39xAU=WZcz2pQ@mail.gmail.com>
	<c67e84a3-96e7-4e23-81e2-acff98be8db1@email.android.com>
	<CAG0hk_8=VK-mKuH=qTKZeyrxxtKNi8+=2fJUMekZtdq5do4rAQ@mail.gmail.com>
Date: Tue, 9 Oct 2012 17:16:56 -0700
Message-ID: <CALr4Hzrni94j9vOs0SwasY9LjsAezcJfLnixuAH+V6Vyt_Fu8w@mail.gmail.com>
Subject: Re: Lucene 4.0-BETA : MultiReader isCurrent openIfChanged
From: Vitaly Funstein <vfunstein@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=f46d042dfe995a745104cba95f88

--f46d042dfe995a745104cba95f88
Content-Type: text/plain; charset=ISO-8859-1

You have probably figured it out by now, but my suggestion would be to use
SearcherManager the way it is documented for maintaining a searcher backed
by an NRT reader.

On Sun, Aug 26, 2012 at 2:03 PM, Mossaab Bagdouri <bagdouri_mossaab@yahoo.fr
> wrote:

> Thanks for the quick reply.
>
> I've changed my code to the following. The problem now is that the
> MultiReader doesn't seem to get closed. In fact, the number of open files
> (returned by "lsof | grep index/ | wc -l") keeps increasing whenever the
> IndexWriter adds new documents until the webapp crashes. Am I missing
> something?
>
> private IndexSearcher getIndexSearcher() {
>         try {
>             boolean refresh = false;
>             if (is == null) {
>                 refresh = true;
>             } else {
>                 MultiReader ir = ((MultiReader) is.getIndexReader());
>                 if (ir.getRefCount() == 0) {
>                     refresh = true;
>                 } else {
>                     for (DirectoryReader dr : (List<DirectoryReader>)
> ir.getSequentialSubReaders()) {
>                         if (!dr.isCurrent()) {
>                             refresh = true;
>                             ir.close();
>                             break;
>                         }
>                     }
>                 }
>             }
>
>             if (refresh) {
>                 DirectoryReader readers[] = new DirectoryReader[2];
>                 for (int i = 0; i < 2; i++) {
>                     readers[i] =
> DirectoryReader.open(MyFSDirectories.get(i));
>                 }
>                 is = new IndexSearcher(new MultiReader(readers, true));
>             }
>         } catch (Exception e) {
>             e.printStackTrace();
>         }
>         return is;
>     }
>
> Regards,
> Mossaab
>
> 2012/8/26 Uwe Schindler <uwe@thetaphi.de>
>
> > 1. getRefCount()
> > 2. No
> >
> >
> >
> > Mossaab Bagdouri <bagdouri_mossaab@yahoo.fr> schrieb:
> >
> > >Hi,
> > >
> > >I've just migrated my webapp from Lucene 3.6 to 4.0-BETA. My 2 indexes
> > >are
> > >updated every couple of minutes by a batch. The webapp searcher needs
> > >to
> > >get refreshed whenever this happens. In 3.6, I was doing it this way:
> > >
> > >private IndexSearcher getIndexSearcher() {
> > >        try {
> > >            if (is == null || !is.getIndexReader().isCurrent()) {
> > >                if (is != null) {
> > >                    is.close();
> > >                }
> > >                IndexReader readers[] = new IndexReader[2];
> > >                for (int i = 0; i < 2; i++) {
> > >                 readers[i] = IndexReader.open(MyFSDirectories.get(i));
> > >                }
> > >                is = new IndexSearcher(new MultiReader(readers));
> > >            }
> > >        } catch (Exception e) {
> > >            e.printStackTrace();
> > >        }
> > >        return is;
> > >    }
> > >
> > >Now that the API changed in 4.0-BETA. I'm doing it this odd way:
> > >
> > >private IndexSearcher getIndexSearcher() {
> > >        try {
> > >            boolean refresh = false;
> > >            if (is == null) {
> > >                refresh = true;
> > >            } else {
> > >                MultiReader ir = ((MultiReader) is.getIndexReader());
> > >                List<DirectoryReader> list = (List<DirectoryReader>)
> > >ir.getSequentialSubReaders();
> > >                try {
> > >                    if (!list.get(0).isCurrent() ||
> > >!list.get(1).isCurrent()) {
> > >                        refresh = true;
> > >                    }
> > >                } catch (Exception e) {
> > >                    e.printStackTrace();
> > >                    refresh = true;
> > >                }
> > >
> > >            }
> > >            if (refresh) {
> > >                if (is != null) {
> > >                    ((MultiReader) is.getIndexReader()).close();
> > >                }
> > >                DirectoryReader readers[] = new DirectoryReader[2];
> > >                for (int i = 0; i < 2; i++) {
> > >                    readers[i] =
> > >DirectoryReader.open(MyFSDirectories.get(i));
> > >                }
> > >                is = new IndexSearcher(new MultiReader(readers));
> > >            }
> > >        } catch (Exception e) {
> > >            e.printStackTrace();
> > >        }
> > >        return is;
> > >    }
> > >
> > >The problem is that sometimes isCurrent() returns an exception
> > >indicating
> > >that the underlying IndexReader is closed.
> > >
> > >My questions are:
> > >1. How can I verify of the IndexReader is open before calling
> > >isCurrent();
> > >2. Is there a better way to deal with MultiReaders?
> > >
> > >Regards,
> > >Mossaab
> >
> > --
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, 28213 Bremen
> > http://www.thetaphi.de
>

--f46d042dfe995a745104cba95f88--

From java-user-return-53835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 10 11:29:52 2012
Return-Path: <java-user-return-53835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E41CBD023
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 10 Oct 2012 11:29:51 +0000 (UTC)
Received: (qmail 47463 invoked by uid 500); 10 Oct 2012 11:29:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47214 invoked by uid 500); 10 Oct 2012 11:29:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 16399 invoked by uid 99); 10 Oct 2012 10:47:28 -0000
X-ASF-Spam-Status: No, hits=2.0 required=5.0
	tests=SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.26 is neither permitted nor denied by domain of rajputadesh@gmail.com)
Date: Wed, 10 Oct 2012 03:47:01 -0700 (PDT)
From: rajputadesh <rajputadesh@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1349866021428-4012877.post@n3.nabble.com>
Subject: Storing html files in lucene index and get back them
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Hi to all I am using Apache Lucene in java Swing API . For searching i am
indexing on the contents of html files   
But the problem is that i have to give the complete software to the client
and we dont want to give the actual html files but they should be stored in
lucene index. and on client side he could access them only with the help of
lucene index . 
Is it possible in lucene if yes then please suggest me the code of storing
as well accessing the html files on client side 
regards 
thanks in advance



--
View this message in context: http://lucene.472066.n3.nabble.com/Storing-html-files-in-lucene-index-and-get-back-them-tp4012877.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 10 11:39:57 2012
Return-Path: <java-user-return-53836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0576DD04B
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 10 Oct 2012 11:39:57 +0000 (UTC)
Received: (qmail 71555 invoked by uid 500); 10 Oct 2012 11:39:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71229 invoked by uid 500); 10 Oct 2012 11:39:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 65095 invoked by uid 99); 10 Oct 2012 11:38:10 -0000
X-ASF-Spam-Status: No, hits=1.3 required=5.0
	tests=SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Date: Wed, 10 Oct 2012 13:37:38 +0200
From: =?utf-8?Q?Rafa=C5=82_Ku=C4=87?= <r.kuc@solr.pl>
X-Priority: 3 (Normal)
Message-ID: <1885725510.20121010133738@alud.com.pl>
To: java-user@lucene.apache.org
Subject: Re: Storing html files in lucene index and get back them
In-Reply-To: <1349866021428-4012877.post@n3.nabble.com>
References: <1349866021428-4012877.post@n3.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hello!

Add a stored field to your index - it will store the original value
you pass to Lucene, not the analyzed one. Take a look at the Field
class - http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/docum=
ent/Field.html

As for the clients side - your clients doesn't work on the Lucene
indices but they work with your application right ? If that's true
than your application should have a functionality which allows to get
the contents of such field.

--=20
Regards,
 Rafa=C5=82 Ku=C4=87
 Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch

> Hi to all I am using Apache Lucene in java Swing API . For searching i am
> indexing on the contents of html files  =20
> But the problem is that i have to give the complete software to the client
> and we dont want to give the actual html files but they should be stored =
in
> lucene index. and on client side he could access them only with the help =
of
> lucene index .=20
> Is it possible in lucene if yes then please suggest me the code of storing
> as well accessing the html files on client side=20
> regards=20
> thanks in advance



> --
> View this message in context:
> http://lucene.472066.n3.nabble.com/Storing-html-files-in-lucene-index-and=
-get-back-them-tp4012877.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.

> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Oct 11 21:00:17 2012
Return-Path: <java-user-return-53837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 70FEAD358
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 11 Oct 2012 21:00:17 +0000 (UTC)
Received: (qmail 66818 invoked by uid 500); 11 Oct 2012 21:00:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65943 invoked by uid 500); 11 Oct 2012 21:00:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65605 invoked by uid 99); 11 Oct 2012 21:00:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Oct 2012 21:00:11 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of richard.marr@gmail.com designates 209.85.215.176 as permitted sender)
Received: from [209.85.215.176] (HELO mail-ea0-f176.google.com) (209.85.215.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Oct 2012 21:00:05 +0000
Received: by mail-ea0-f176.google.com with SMTP id n12so443512eaa.35
        for <multiple recipients>; Thu, 11 Oct 2012 13:59:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=dK7p2dEZex1jfSo8+/b13xP5JM47m3ICrsBvbp/PyME=;
        b=hkNPSYQFJZdzdvuTozz08ZxrI3onnTBzQ89511SEkoRbzTWhjCF77OzUFFdTvJ7ZpZ
         DLjQ0/SaimN28I1BfMLbDp6vjV2ysZ3PcLFVIkDitpcg0jcKFHlDUz2BVdptq+pNv9X+
         8vQmC8T42f76O/eH5ojlJuU6j8WyNGUiLIEgH/DSJxX31oQ17ZNiEzh/getlAXYo1d/c
         NeSL+xHOspT4hVzgYXFubjh5vbV0icEpuk00clYkHmb0vTrWu/lbPYF4IJOFxtm0HjXB
         vN/htHkkzhyWX8f+w8F0+V7OizeJ7ACW+ldT+fxa52BSY8u1msF9MukCdnIrcrloPtTV
         cntA==
MIME-Version: 1.0
Received: by 10.14.213.65 with SMTP id z41mr3857879eeo.29.1349989185166; Thu,
 11 Oct 2012 13:59:45 -0700 (PDT)
Received: by 10.14.185.136 with HTTP; Thu, 11 Oct 2012 13:59:45 -0700 (PDT)
Date: Thu, 11 Oct 2012 21:59:45 +0100
Message-ID: <CAPhsquh=i-4GBJc6zk8XADYV90wPtgbsSMcpH8Nm4pWBtYnHMw@mail.gmail.com>
Subject: Open Source Social (London) - 23rd Oct
From: Richard Marr <richard.marr@gmail.com>
To: java-user@lucene.apache.org, solr-user@lucene.apache.org, 
	elasticsearch@googlegroups.com
Content-Type: multipart/alternative; boundary=047d7b621ee2d51dfe04cbced919

--047d7b621ee2d51dfe04cbced919
Content-Type: text/plain; charset=ISO-8859-1

Hi all,

The next Open Source Search Social is on the 23rd Oct at The Plough, in
Bloomsbury.

We usually get a good mix of regulars and newcomers, and a good mix of
backgrounds and experience levels, so please come along if you can. As
usual the format is completely open so we'll be talking about whatever is
most interesting at any one particular moment... ooo, a shiny thing...

Details and RSVP options on the Meetup page:
http://www.meetup.com/london-search-social/events/86580442/

Hope to see you there,

Richard

@richmarr

--047d7b621ee2d51dfe04cbced919--

From java-user-return-53838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Oct 12 08:10:53 2012
Return-Path: <java-user-return-53838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 45AC2D0FB
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 12 Oct 2012 08:10:53 +0000 (UTC)
Received: (qmail 68111 invoked by uid 500); 12 Oct 2012 08:10:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66756 invoked by uid 500); 12 Oct 2012 08:10:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65933 invoked by uid 99); 12 Oct 2012 08:10:45 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Oct 2012 08:10:45 +0000
Received: from localhost (HELO mail-vb0-f48.google.com) (127.0.0.1)
  (smtp-auth username rmuir, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Oct 2012 08:10:45 +0000
Received: by mail-vb0-f48.google.com with SMTP id e21so3261518vbm.35
        for <multiple recipients>; Fri, 12 Oct 2012 01:10:43 -0700 (PDT)
Received: by 10.58.133.48 with SMTP id oz16mr2225909veb.1.1350029443917; Fri,
 12 Oct 2012 01:10:43 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.220.2.85 with HTTP; Fri, 12 Oct 2012 01:10:23 -0700 (PDT)
From: Robert Muir <rmuir@apache.org>
Date: Fri, 12 Oct 2012 04:10:23 -0400
Message-ID: <CAOdYfZXgabz+GE0hLio19hbEHy6dGKgiSHZxF3s15L3Fa06F4A@mail.gmail.com>
Subject: [ANNOUNCE] Apache Lucene 4.0 released.
To: dev@lucene.apache.org, Lucene mailing list <general@lucene.apache.org>, 
	java-user <java-user@lucene.apache.org>, announce <announce@apache.org>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

October 12 2012, Apache Lucene=E2=80=9A 4.0 available.
The Lucene PMC is pleased to announce the release of Apache Lucene 4.0

Apache Lucene is a high-performance, full-featured text search engine
library written entirely in Java. It is a technology suitable for
nearly any application that requires full-text search, especially
cross-platform.

This release contains numerous bug fixes, optimizations, and
improvements, some of which are highlighted below.  The release is
available for immediate download at:
   http://lucene.apache.org/core/mirrors-core-latest-redir.html

See the CHANGES.txt file included with the release for a full list of detai=
ls.

Lucene 4.0 Release Highlights:

 * The index formats for terms, postings lists, stored fields, term
vectors, etc are pluggable via the Codec api. You can select from the
provided implementations or customize the index format with your own
Codec to meet your needs.

 * Similarity has been decoupled from the vector space model (TF/IDF).
Additional models such as BM25, Divergence from Randomness, Language
Models, and Information-based models are provided (see
http://www.lucidimagination.com/blog/2011/09/12/flexible-ranking-in-lucene-=
4).

 * The new doc values feature stores typed values per-document.  It
can be used for custom scoring factors (accessible via Similarity),
for pre-sorted Sort values, and more.

 * IndexWriter now flushes segments to disk concurrently, when the
application uses multiple threads for indexing, resulting in
substantial performance improvements (see
http://blog.mikemccandless.com/2011/05/265-indexing-speedup-with-lucenes.ht=
ml).

 * Per-document normalization factors ("norms") are no longer limited
to a single byte. Similarity implementations can use any DocValues
type to store norms.

 * New index statistics have been added, including the number of
tokens for a term or field, number of postings for a field, and number
of documents with a posting for a field.  These support additional
scoring models (see
http://blog.mikemccandless.com/2012/03/new-index-statistics-in-lucene-40.ht=
ml).

 * A new default term dictionary/index (BlockTree) indexes shared
prefixes instead of every n'th term. This is not only more time- and
space- efficient, but can avoid going to disk at all for terms that do
not exist in certain cases. Alternative term dictionary implementions
are provided and pluggable via the Codec api.

 * Indexed terms are no longer limited to UTF-16 char sequences; they
can now be any binary value encoded as byte arrays. By default, text
terms are encoded as UTF-8 bytes. Sort order of terms is defined by
their binary value, which is identical to UTF-8 (Unicode code point)
sort order.

 * Substantially faster performance when using a Filter during searching.

 * File-system based directories can rate-limit the IO (MB/sec) of
merge threads, to reduce IO contention between merging and searching
threads.

 * A number of alternative Codecs and components have been added:
"Appending" works with append-only filesystems (such as Hadoop DFS),
"Memory" writes the entire terms+postings as an FST read into RAM (see
http://blog.mikemccandless.com/2011/06/primary-key-lookups-are-28x-faster-w=
ith.html),
"Pulsing" inlines the postings for low-frequency terms into the term
dictionary (see
http://blog.mikemccandless.com/2010/06/lucenes-pulsingcodec-on-primary-key.=
html),
"SimpleText" writes all files in plain-text for easy
debugging/transparency (see
http://blog.mikemccandless.com/2010/10/lucenes-simpletext-codec.html),
"Bloom" uses a bloom filter to sometimes avoid disk seeks when looking
up terms, "Direct" holds all postings as simple byte[] and int[] for
very fast performance at the cost of very high RAM consumption,
"Block" use a new index layout and compression scheme for improved
performance, among others.

 * Term offsets can be optionally encoded into the postings lists and
retrieved per-position.

 * A new AutomatonQuery returns all documents containing any term
matching a provided finite-state automaton (see
http://www.slideshare.net/otisg/finite-state-queries-in-lucene).

 * FuzzyQuery is 100-200 times faster than in past releases (see
http://blog.mikemccandless.com/2011/03/lucenes-fuzzyquery-is-100-times-fast=
er.html).

 * A new spell checker, DirectSpellChecker, finds possible corrections
directly against the main search index without requiring a separate
index.

 * Various in-memory data structures such as the term dictionary and
FieldCache are represented more efficiently with less object overhead
(see http://blog.mikemccandless.com/2010/07/lucenes-ram-usage-for-searching=
.html).

 * All search logic is now required to work per segment, IndexReader
was therefore refactored to differentiate between atomic and composite
readers (see http://blog.thetaphi.de/2012/02/is-your-indexreader-atomic-maj=
or.html).

 * Lucene 4.0 provides a modular API, consolidating components such as
Analyzers and Queries that were previously scattered across Lucene
core, contrib, and Solr. These modules also include additional
functionality such as UIMA analyzer integration and a completely
reworked spatial search implementation.

Noteworthy changes since 4.0-BETA:

 * A new "Block" PostingsFormat offering improved search performance
and index compression. This will likely become the default format in a
future release. (see
http://blog.mikemccandless.com/2012/08/lucenes-new-blockpostingsformat-than=
ks.html).

 * All non-default codec implementations were moved to a separated
codecs module. Just add lucene-codecs-4.0.0.jar to your classpath to
test these out.

 * Payloads can be optionally stored on the term vectors.

 * Many bugfixes and optimizations.

Please read CHANGES.txt and MIGRATE.txt for a full list of new
features and notes on upgrading. Particularly, the new apis are not
compatible with previous versions of Lucene, however, file format
backwards compatibility is provided for indexes from the 3.0 series
and the 4.0-alpha and -beta releases.

Please report any feedback to the mailing lists
(http://lucene.apache.org/core/discussion.html)

Note: The Apache Software Foundation uses an extensive mirroring
network for distributing releases.  It is possible that the mirror you
are using may not have replicated the release yet.  If that is the
case, please try another mirror.  This also goes for Maven access.

Happy searching,

Apache Lucene/Solr Developers

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Oct 12 14:04:57 2012
Return-Path: <java-user-return-53839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4B1B5D815
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 12 Oct 2012 14:04:57 +0000 (UTC)
Received: (qmail 38795 invoked by uid 500); 12 Oct 2012 14:04:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38672 invoked by uid 500); 12 Oct 2012 14:04:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38649 invoked by uid 99); 12 Oct 2012 14:04:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Oct 2012 14:04:53 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [213.239.154.11] (HELO adonis.tweakers.net) (213.239.154.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Oct 2012 14:04:45 +0000
Received: from [10.75.99.57] (devvers.tweaknet.net [212.41.134.182])
	by adonis.tweakers.net (Postfix) with ESMTPSA id 53D81F4044B
	for <java-user@lucene.apache.org>; Fri, 12 Oct 2012 16:04:23 +0200 (CEST)
Message-ID: <50782363.1020008@tweakers.net>
Date: Fri, 12 Oct 2012 16:04:19 +0200
From: Arjen van der Meijden <acmmailing@tweakers.net>
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:15.0) Gecko/20120907 Thunderbird/15.0.1
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Testing whether a document is up-to-date in Lucene 4.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello List,

I'm currently trying to update my Lucene 3.6-application to 4.0.

Most of it works (although your migration guide lacks a bit of aspects I 
had to figure out myself), but for one fairly large database I want to 
check whether the Document in the Lucene database is already at the 
latest modification time. If so, I can continue to the next item on the 
list.

So to do that, I index an additional field in the Document with the 
modification time and later retrieve that.

With 3.6, I did this:
IndexReader reader = writer.getReader();
Term idTerm = new Term("idField, "idText");
TermDocs termDocs = reader.termDocs(idTerm);

if(termDocs.next())
{
  int docNum = termDocs.doc();
  Document doc = reader.document(docNum);
  // etc
}

It worked as far as I can tell, besides, it worked regardless of whether 
the writer was actually started with a empty directory (on disk) or one 
that had data in it.

What is the correct way to implement something like the above procedure 
in 4.0? The writer doesn't have a getReader() anymore and the 
IndexReader doesn't have a termDocs()-method (and the docsEnum is only 
on specific IndexReader's?).

The "migration guide" isn't very clear on this and I wasn't really able 
to find any useful documentation on how the new reader/writer-stuff is 
actually to be used... Did I overlook the documentation?

And there are some additional things to consider, like the database may 
not have been created yet (i.e. it may be empty at the moment of the 
above code). And in my current code, I only have access to the 
IndexWriter, a reader or searcher hasn't even been created yet.

Best regards,

Arjen

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Oct 12 14:22:34 2012
Return-Path: <java-user-return-53840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 26E11D8C2
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 12 Oct 2012 14:22:34 +0000 (UTC)
Received: (qmail 4626 invoked by uid 500); 12 Oct 2012 14:22:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4491 invoked by uid 500); 12 Oct 2012 14:22:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4483 invoked by uid 99); 12 Oct 2012 14:22:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Oct 2012 14:22:32 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of uwe@thetaphi.de designates 188.138.97.18 as permitted sender)
Received: from [188.138.97.18] (HELO mail.sd-datasolutions.de) (188.138.97.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Oct 2012 14:22:25 +0000
Received: from VEGA (port-92-196-126-162.dynamic.qsc.de [92.196.126.162])
	by mail.sd-datasolutions.de (Postfix) with ESMTPSA id 8C98E14AA042
	for <java-user@lucene.apache.org>; Fri, 12 Oct 2012 14:22:04 +0000 (UTC)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <50782363.1020008@tweakers.net>
In-Reply-To: <50782363.1020008@tweakers.net>
Subject: RE: Testing whether a document is up-to-date in Lucene 4.0
Date: Fri, 12 Oct 2012 16:23:12 +0200
Message-ID: <008701cda885$1c9117c0$55b34740$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQJHOC9MAQjqK2csomQj9Rao0uiz+5bCmU4Q
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Maybe also read: =
http://blog.thetaphi.de/2012/02/is-your-indexreader-atomic-major.html
A simple idea would be to wrap the NRT reader by =
SlowCompositeReaderWrapper, which has DocsEnum. If you don't do this for =
searching, the slowness does not matter.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Arjen van der Meijden [mailto:acmmailing@tweakers.net]
> Sent: Friday, October 12, 2012 4:04 PM
> To: java-user@lucene.apache.org
> Subject: Testing whether a document is up-to-date in Lucene 4.0
>=20
> Hello List,
>=20
> I'm currently trying to update my Lucene 3.6-application to 4.0.
>=20
> Most of it works (although your migration guide lacks a bit of aspects =
I had to
> figure out myself), but for one fairly large database I want to check =
whether
> the Document in the Lucene database is already at the latest =
modification time.
> If so, I can continue to the next item on the list.
>=20
> So to do that, I index an additional field in the Document with the =
modification
> time and later retrieve that.
>=20
> With 3.6, I did this:
> IndexReader reader =3D writer.getReader(); Term idTerm =3D new =
Term("idField,
> "idText"); TermDocs termDocs =3D reader.termDocs(idTerm);
>=20
> if(termDocs.next())
> {
>   int docNum =3D termDocs.doc();
>   Document doc =3D reader.document(docNum);
>   // etc
> }
>=20
> It worked as far as I can tell, besides, it worked regardless of =
whether the
> writer was actually started with a empty directory (on disk) or one =
that had
> data in it.
>=20
> What is the correct way to implement something like the above =
procedure in
> 4.0? The writer doesn't have a getReader() anymore and the IndexReader
> doesn't have a termDocs()-method (and the docsEnum is only on specific
> IndexReader's?).
>=20
> The "migration guide" isn't very clear on this and I wasn't really =
able to find any
> useful documentation on how the new reader/writer-stuff is actually to =
be
> used... Did I overlook the documentation?
>=20
> And there are some additional things to consider, like the database =
may not
> have been created yet (i.e. it may be empty at the moment of the above =
code).
> And in my current code, I only have access to the IndexWriter, a =
reader or
> searcher hasn't even been created yet.
>=20
> Best regards,
>=20
> Arjen
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Oct 12 14:34:17 2012
Return-Path: <java-user-return-53841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B29AFD878
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 12 Oct 2012 14:34:17 +0000 (UTC)
Received: (qmail 70439 invoked by uid 500); 12 Oct 2012 14:34:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70331 invoked by uid 500); 12 Oct 2012 14:34:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70320 invoked by uid 99); 12 Oct 2012 14:34:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Oct 2012 14:34:15 +0000
X-ASF-Spam-Status: No, hits=3.0 required=5.0
	tests=FORGED_YAHOO_RCVD,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Oct 2012 14:34:08 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <zpvie@yahoo.com>)
	id 1TMgJA-00041T-6m
	for java-user@lucene.apache.org; Fri, 12 Oct 2012 07:33:48 -0700
Date: Fri, 12 Oct 2012 07:33:48 -0700 (PDT)
From: "Zeynep P." <zpvie@yahoo.com>
To: java-user@lucene.apache.org
Message-ID: <1350052428199-4013363.post@n3.nabble.com>
Subject: pruning & Lucene 4.0
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Hi,

Do you have any information about when the pruning package will be available
for Lucene 4.0 ? 

Best Regards
Thanks in advance
ZP





--
View this message in context: http://lucene.472066.n3.nabble.com/pruning-Lucene-4-0-tp4013363.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Oct 14 11:52:37 2012
Return-Path: <java-user-return-53842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4643ED68C
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 14 Oct 2012 11:52:37 +0000 (UTC)
Received: (qmail 75908 invoked by uid 500); 14 Oct 2012 11:52:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75488 invoked by uid 500); 14 Oct 2012 11:52:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75453 invoked by uid 99); 14 Oct 2012 11:52:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Oct 2012 11:52:28 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of emmanuel.gosse@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pb0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Oct 2012 11:52:21 +0000
Received: by mail-pb0-f48.google.com with SMTP id wy7so5242721pbc.35
        for <java-user@lucene.apache.org>; Sun, 14 Oct 2012 04:52:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:from:date:message-id:subject:to:content-type;
        bh=EaBqm2E1UG84Pap3cSSwkvjZI5qBCy/tdU4RG8NY3To=;
        b=iO8K73QL8dB4QhBIu+CX+a3yPxWLwI/rRVjy1cu6NQ1oFFhyRvdgHW3v4WChHjIOzo
         cr3di81IKgWHy8d4qhvINgdnfr5RrddyVNWupLDI3CEhG6WWVgRm4J1dPVZ1vmStyyxR
         gdbqU5y8frgh8E6n9YU2iSCywLMeA3bKgEZuaCOcgj7pRf8mXi+yTkkpYc0gCNSuVQ4Y
         e9AXIKMQJL3I9JAd1k6ZNwIWcrkgSjHKxAqr0PBRMQ2I4lxqixRWOL6acGkqZ6FuumRr
         wb45CcPXrT8sj1Dru82Ny++EikMIws0Te+yOrfkDDRg7n/S5ffIzfNlocsCfUHmCRvG7
         C/OQ==
Received: by 10.68.138.229 with SMTP id qt5mr28129336pbb.122.1350215521239;
 Sun, 14 Oct 2012 04:52:01 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.68.16.201 with HTTP; Sun, 14 Oct 2012 04:51:21 -0700 (PDT)
From: emmanuel Gosse <emmanuel.gosse@gmail.com>
Date: Sun, 14 Oct 2012 13:51:21 +0200
Message-ID: <CAHgjhBHz75SjA6vUb80JvYFrfNXn6Dq06hQPYU36+jXv1a07jA@mail.gmail.com>
Subject: How could i take into account the other part of a field which not
 matches with the query
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=047d7b15aa5b8380fd04cc038ca2
X-Virus-Checked: Checked by ClamAV on apache.org

--047d7b15aa5b8380fd04cc038ca2
Content-Type: text/plain; charset=ISO-8859-1

>
> Hi,



> How could i take into account in a query the fact that the searched words
> could be more precise in a document field than an other.
>

example :
2 documents :
doc1 :  title : taxi
doc2 : title : taxi driver

Query : TermQuery : title:taxi

How could doc1 has a better score than doc2 ?

That's a very basic example.

By rewriting a query, i have not enough lucene skills.
The way I think is more to use an other field with length or number of
words in title to use in a sort. (i don't use tf or idf in similarity).


> Best Regards
>
>
> E

--047d7b15aa5b8380fd04cc038ca2--

From java-user-return-53843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Oct 14 19:59:58 2012
Return-Path: <java-user-return-53843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D3C059E31
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 14 Oct 2012 19:59:58 +0000 (UTC)
Received: (qmail 89261 invoked by uid 500); 14 Oct 2012 19:59:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88414 invoked by uid 500); 14 Oct 2012 19:59:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88401 invoked by uid 99); 14 Oct 2012 19:59:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Oct 2012 19:59:54 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-ob0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Oct 2012 19:59:46 +0000
Received: by mail-ob0-f176.google.com with SMTP id x4so5315644obh.35
        for <java-user@lucene.apache.org>; Sun, 14 Oct 2012 12:59:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        bh=yaU8VaJwv7SPtz7gbzCNZwIv+NJZCAy51KFZY3a7pO4=;
        b=x7vs0L9MY1DEQNAyWuxouJn2Was2SBnK9gtnA+yJDSPD8xGx88uKfi+IeDGNx4mgq2
         A6K7dbomgzmKrbh8H2Cu1u7fXpQNt4k3AU9aM7hh7X0xWTGBVaxBbl9q0rx3XVqL+nps
         LnVCeMt+RB4MCg1NrbpIID8mhkTxLR6Lh3I5off3c+d1DptdFMLaC/68MCWalGB/eNYn
         oidvt7+ttvi9LsV0hIpifJiObR1RUuPlF247UMJtgIVKq/efhaR0PTLYwAeiRbL0mo6o
         6TrtQg3CD7ZfjWuBSvX6/TstOCcW18qgvMKvmccOLH8xwcrUeTR0BMPklXzvvn541OnJ
         noVw==
MIME-Version: 1.0
Received: by 10.60.170.179 with SMTP id an19mr3110328oec.46.1350244765911;
 Sun, 14 Oct 2012 12:59:25 -0700 (PDT)
Received: by 10.60.11.72 with HTTP; Sun, 14 Oct 2012 12:59:25 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <CAHgjhBHz75SjA6vUb80JvYFrfNXn6Dq06hQPYU36+jXv1a07jA@mail.gmail.com>
References: <CAHgjhBHz75SjA6vUb80JvYFrfNXn6Dq06hQPYU36+jXv1a07jA@mail.gmail.com>
Date: Sun, 14 Oct 2012 21:59:25 +0200
Message-ID: <CAAHmpkjsFMfJeOduANoZPv6J-42Lmx56mQvNhG0Vq5PLLzku-g@mail.gmail.com>
Subject: Re: How could i take into account the other part of a field which not
 matches with the query
From: Simon Willnauer <simon.willnauer@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

hey.

On Sun, Oct 14, 2012 at 1:51 PM, emmanuel Gosse
<emmanuel.gosse@gmail.com> wrote:
>>
>> Hi,
>
>
>
>> How could i take into account in a query the fact that the searched words
>> could be more precise in a document field than an other.
>>
>
> example :
> 2 documents :
> doc1 :  title : taxi
> doc2 : title : taxi driver
>
> Query : TermQuery : title:taxi
>
> How could doc1 has a better score than doc2 ?
>
> That's a very basic example.
>
> By rewriting a query, i have not enough lucene skills.
> The way I think is more to use an other field with length or number of
> words in title to use in a sort. (i don't use tf or idf in similarity).

TF/IDF would score doc 1 better than doc 2 due to length
normalization. This seems like what you want to take into account. if
you really wanna go around similarity you can still use the norm value
that every field has (given you don't omit norms) and use it for
scroing. look into similarity how to decode / fetch norms.

simon
>
>
>> Best Regards
>>
>>
>> E

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct 16 07:09:33 2012
Return-Path: <java-user-return-53844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A8B01D334
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 16 Oct 2012 07:09:33 +0000 (UTC)
Received: (qmail 91964 invoked by uid 500); 16 Oct 2012 07:09:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91488 invoked by uid 500); 16 Oct 2012 07:09:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91449 invoked by uid 99); 16 Oct 2012 07:09:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Oct 2012 07:09:25 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.138.91.139] (HELO nm9-vm3.bullet.mail.ne1.yahoo.com) (98.138.91.139)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Oct 2012 07:09:16 +0000
Received: from [98.138.90.57] by nm9.bullet.mail.ne1.yahoo.com with NNFMP; 16 Oct 2012 07:08:55 -0000
Received: from [98.138.226.163] by tm10.bullet.mail.ne1.yahoo.com with NNFMP; 16 Oct 2012 07:08:55 -0000
Received: from [127.0.0.1] by omp1064.mail.ne1.yahoo.com with NNFMP; 16 Oct 2012 07:08:55 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 486672.19344.bm@omp1064.mail.ne1.yahoo.com
Received: (qmail 62163 invoked by uid 60001); 16 Oct 2012 07:08:53 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1350371333; bh=4mXg2tXV53J603ha81o1ehRuYs981A2B6f279LGCAFc=; h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type; b=pOCE+nnQITai4Qoh2uMPvSisnJGreFuf+fGIXYxuZsclSpiMRhRt9S75zEKFGv9fbFYkz5KcInygMjW6vn8rNOUxwe2j0zUuukpEh4UBPcRvS5WuooP3VpcmDOpX5CBaNzQ8Tc/mHffNusWevudfwp6TbI0rA0R+0uUQntdrOZY=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type;
  b=ETn8sfL5YhkFb8qLxHEe8+xxBd75x5Odj/YOLwIDrq7maemLP3Spk7+wA3u4l4qreAvRbzN7VU+qjL692F8LcDR0SXCbEOdAOiDNcmeLhjw1Kq4uZk1uB0ZLhLXEs/yBCyS3tMHBrZChePC/6XM0fy8UU4jwg8eqvgB+AEVWjCQ=;
X-YMail-OSG: rAnKpucVM1mihmvGEpTLonZ.VyLOk0ZIm0Zuelb0NZqzaVi
 ZFyiE5eFlJMfZaw0v2UF8oDrrJPG4t8rVBoBDX7g4abulzo7kaQnfvyNBKKr
 GBPILcCMXfG4Phrwh_qmwo5JyoVW9TRBpwl3ib5r2Q9wlBn30CAMoYKLGUcp
 xz4cxU205igec2V1977PUGpn.UcMsoBdHAfXN4Iv6XVaSK0poRQ3y97ViaoV
 Nf7eL2l7RAa5OFNYPKGdaYWS4jQmzdgU17SG6A.Go.0D0_JvyFE_4IT22wzv
 6vN83hbhfTfR5V3YOa3CpO0M.5eY899pdW5QPLVjunoiL7bJSMy78nLsWrrL
 XXQ17P07KwhEI_eEKqQQZlxvdXhPRDhaH4Z2ggBNYCaOmt24dsqsRLEE4agr
 TIbritkIU6Zg2hU4GjKOqANmYWEbyNDhdegWGO9Ri8z5l8YgmkBxnXIm0IW5
 WY2fppINib5gyoOyT.ZrmnR5S3vkb2yi.Mw3MZtd_8vDD5Ws9qbxM_VL8
Received: from [116.197.178.83] by web110315.mail.gq1.yahoo.com via HTTP; Tue, 16 Oct 2012 00:08:53 PDT
X-Rocket-MIMEInfo: 001.001,SGksCsKgIMKgIMKgSSBhbSBsb29raW5nIHRvIHVzZSBMdWNlbmUgZm9yIGNyZWF0aW5nIHNlYXJjaCBpbmRleCB3aXRoIE51dGNoIDEuNSBpbnN0ZWFkIG9mIFNvbHIuIEkgYW0gdXNpbmcgTnV0Y2ggMS4wIHRpbGwgbm93IHdpdGggbW9kaWZpY2F0aW9uIHRvIGFkZCBjdXN0b20gZmllbGRzIGluIHNlYXJjaCBpbmRleC4gQ3VycmVudGx5IG51dGNoIGRvZXMgbm90IHN1cHBvcnQgaW5kZXggY3JlYXRpb24sIEkgbWVhbiB5b3UgY2FuIHVzZSBTb2xyIHBsdWdpbiB3aXRoIE51Y3RoIHRvIGltcGxlbWVudCBzZWEBMAEBAQE-
X-Mailer: YahooMailWebService/0.8.123.450
Message-ID: <1350371333.56106.YahooMailNeo@web110315.mail.gq1.yahoo.com>
Date: Tue, 16 Oct 2012 00:08:53 -0700 (PDT)
From: Cool The Breezer <techcool.kumar@yahoo.com>
Reply-To: Cool The Breezer <techcool.kumar@yahoo.com>
Subject: Lucene for creating search index with Nutch 1.5 instead of Solr
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="1213288186-997808698-1350371333=:56106"
X-Virus-Checked: Checked by ClamAV on apache.org

--1213288186-997808698-1350371333=:56106
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,=0A=A0 =A0 =A0I am looking to use Lucene for creating search index with =
Nutch 1.5 instead of Solr. I am using Nutch 1.0 till now with modification =
to add custom fields in search index. Currently nutch does not support inde=
x creation, I mean you can use Solr plugin with Nucth to implement searchin=
g functionality. If anybody has already implemented, could provide me help.=
 Thanks in advance.=0A=0A=0Aregards,=0ARantjil
--1213288186-997808698-1350371333=:56106--

From java-user-return-53845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct 16 08:37:26 2012
Return-Path: <java-user-return-53845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9E976D3BD
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 16 Oct 2012 08:37:26 +0000 (UTC)
Received: (qmail 20773 invoked by uid 500); 16 Oct 2012 08:37:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20090 invoked by uid 500); 16 Oct 2012 08:37:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20053 invoked by uid 99); 16 Oct 2012 08:37:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Oct 2012 08:37:14 +0000
X-ASF-Spam-Status: No, hits=3.0 required=5.0
	tests=FORGED_YAHOO_RCVD,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Oct 2012 08:37:08 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <sxamt@yahoo.com>)
	id 1TO2dr-0005Zq-Vg
	for java-user@lucene.apache.org; Tue, 16 Oct 2012 01:36:47 -0700
Date: Tue, 16 Oct 2012 01:36:47 -0700 (PDT)
From: sxam <sxamt@yahoo.com>
To: java-user@lucene.apache.org
Message-ID: <1350376607967-4013905.post@n3.nabble.com>
Subject: Restrict Lucene search in concrete document ids
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
Prior to search I have a concrete list of Lucene Document Ids (different
every time) and I want to limit my search only to those specific documents.
Is there a way to do it? I don't need to check any fields or anything, I
know the possible document ids before so if possible I wouldn't want to use
Query.. Besides it would be a huge query (let's say I want to limit to 5,000
documents ids, it would be 5,000 Clauses..).

Any help is greatly appreciated,

Maxim



--
View this message in context: http://lucene.472066.n3.nabble.com/Restrict-Lucene-search-in-concrete-document-ids-tp4013905.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct 16 10:42:13 2012
Return-Path: <java-user-return-53846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C448BD5C7
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 16 Oct 2012 10:42:13 +0000 (UTC)
Received: (qmail 2590 invoked by uid 500); 16 Oct 2012 10:42:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99975 invoked by uid 500); 16 Oct 2012 10:42:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99010 invoked by uid 99); 16 Oct 2012 10:42:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Oct 2012 10:42:02 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of richard.marr@gmail.com designates 209.85.215.176 as permitted sender)
Received: from [209.85.215.176] (HELO mail-ea0-f176.google.com) (209.85.215.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Oct 2012 10:41:57 +0000
Received: by mail-ea0-f176.google.com with SMTP id n12so1612944eaa.35
        for <multiple recipients>; Tue, 16 Oct 2012 03:41:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=VqdMoOErBqsSwwcfH54+RFlz9Nqnl9hL5Kp5qJD1dwA=;
        b=uKVC50gsRBEQ0oMfyPTnKdrPwucXAQQjZ9qIQ+cJTL7IzWJHfLV9TflJsLgXHGhnPT
         puJLKwL8982XAM11ajPT6bEOygum78MnqsXo8pMqGEXZXiokHVICIKqjyfbrHNP+Ln7G
         Q4eBoN0lL7FcptpgqH1HAmMvCoU5xAwMT4y4R7wvTKwA8UOO8E/LaS5Koun6n2ox26oR
         9iEGW27ETC2w8GaoqD+VtItEG+X28OzO9sUvHD98yEXxCiujpeAVZSQ1mUORYwLjKzc3
         AcO8Bhfe9papUVICudLeRLbZZxg6qbD5otZ6oj1b/SFt2+OYiK4UPkSBRd7yzunaibiB
         5Csg==
MIME-Version: 1.0
Received: by 10.14.179.136 with SMTP id h8mr19969570eem.6.1350384096067; Tue,
 16 Oct 2012 03:41:36 -0700 (PDT)
Received: by 10.14.133.16 with HTTP; Tue, 16 Oct 2012 03:41:36 -0700 (PDT)
In-Reply-To: <CAPhsquh=i-4GBJc6zk8XADYV90wPtgbsSMcpH8Nm4pWBtYnHMw@mail.gmail.com>
References: <CAPhsquh=i-4GBJc6zk8XADYV90wPtgbsSMcpH8Nm4pWBtYnHMw@mail.gmail.com>
Date: Tue, 16 Oct 2012 11:41:36 +0100
Message-ID: <CAPhsquiM32oF4Qws8huczfZMSsRkDT_o5KRgBEuv3zc+ztH1RQ@mail.gmail.com>
Subject: Re: Open Source Social (London) - 23rd Oct
From: Richard Marr <richard.marr@gmail.com>
To: java-user@lucene.apache.org, solr-user@lucene.apache.org, 
	elasticsearch@googlegroups.com
Content-Type: multipart/alternative; boundary=047d7b603e925b3f7504cc2acc89
X-Virus-Checked: Checked by ClamAV on apache.org

--047d7b603e925b3f7504cc2acc89
Content-Type: text/plain; charset=ISO-8859-1

Don't forget,

The London Search Social is on Tuesday next week. Come and grab a beer with
us and talk about Search, NLP, ML, Hadoop. All experience levels welcome.



On 11 October 2012 21:59, Richard Marr <richard.marr@gmail.com> wrote:

> Hi all,
>
> The next Open Source Search Social is on the 23rd Oct at The Plough, in
> Bloomsbury.
>
> We usually get a good mix of regulars and newcomers, and a good mix of
> backgrounds and experience levels, so please come along if you can. As
> usual the format is completely open so we'll be talking about whatever is
> most interesting at any one particular moment... ooo, a shiny thing...
>
> Details and RSVP options on the Meetup page:
> http://www.meetup.com/london-search-social/events/86580442/
>
> Hope to see you there,
>
> Richard
>
> @richmarr
>

--047d7b603e925b3f7504cc2acc89--

From java-user-return-53847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct 16 11:47:15 2012
Return-Path: <java-user-return-53847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C01A2D716
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 16 Oct 2012 11:47:15 +0000 (UTC)
Received: (qmail 20978 invoked by uid 500); 16 Oct 2012 11:47:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20483 invoked by uid 500); 16 Oct 2012 11:47:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20462 invoked by uid 99); 16 Oct 2012 11:47:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Oct 2012 11:47:10 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ha.lund@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bk0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Oct 2012 11:47:02 +0000
Received: by mail-bk0-f48.google.com with SMTP id ik5so2720281bkc.35
        for <java-user@lucene.apache.org>; Tue, 16 Oct 2012 04:46:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=xq/CLhn8NEwhwxKhtDXIXgnt75dvfj7rTGD9PQPkiEI=;
        b=o2BuCnzJEkMGq7YjZOan6B4lsQPwHQqXB2zG9+b2/oSGyAo13a30f6FcR/bGJ89rwD
         Gw6xvK3ZxpxX9R1Xeuom2AudbGWJwCWHg6KltiVKeKohBYllePDwVrqPryyYYUN/QbjK
         axxw2+flimouswXRGAY1tWT1Wg5pPEUcqah4dJOOdMdVFVgr9ocOIKimuGIc1+8kger5
         5wmvoDux4Lzs5agpxDoNipTk1BRyZYUjFNl4Zsqnqz+qJUyfs71rGcMucs4yipHQoSVx
         HhvlqRYFoQHnvZq78I61gQKgRnvhal5AMgfXEunV/KitXS6wnujYbSeZ9uKdGP4gqCNK
         BmhQ==
MIME-Version: 1.0
Received: by 10.204.150.206 with SMTP id z14mr4054121bkv.105.1350388002465;
 Tue, 16 Oct 2012 04:46:42 -0700 (PDT)
Received: by 10.204.100.4 with HTTP; Tue, 16 Oct 2012 04:46:42 -0700 (PDT)
Date: Tue, 16 Oct 2012 13:46:42 +0200
Message-ID: <CALUM-yuwQReCDyUEcGu5i6ydGvgTrzcysVJ0X++tH=4Dj7etRw@mail.gmail.com>
Subject: upgrade to 4.0.0
From: Hans Lund <ha.lund@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175cd7ea32263204cc2bb5e7
X-Virus-Checked: Checked by ClamAV on apache.org

--0015175cd7ea32263204cc2bb5e7
Content-Type: text/plain; charset=ISO-8859-1

I'm currently in the process of upgrading from 4.0.0-BETA to  4.0.0 and
just stumbled upon a difference in Analyzer.getTokenStream(String
fieldName, Reader reader).

In the BETA release, the method returned a TokenStream that is reset, but
in the 4.0.0 release the tokenStream is eof until manually reset.

Is this intentional behavior? and if so why?

Regards
Hans Lund

--0015175cd7ea32263204cc2bb5e7--

From java-user-return-53848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct 16 12:05:29 2012
Return-Path: <java-user-return-53848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3DA82D7BD
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 16 Oct 2012 12:05:29 +0000 (UTC)
Received: (qmail 71954 invoked by uid 500); 16 Oct 2012 12:05:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71691 invoked by uid 500); 16 Oct 2012 12:05:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71654 invoked by uid 99); 16 Oct 2012 12:05:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Oct 2012 12:05:23 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.219.48 as permitted sender)
Received: from [209.85.219.48] (HELO mail-oa0-f48.google.com) (209.85.219.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Oct 2012 12:05:18 +0000
Received: by mail-oa0-f48.google.com with SMTP id h2so7447696oag.35
        for <java-user@lucene.apache.org>; Tue, 16 Oct 2012 05:04:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=NJ2bSdba+CDtX2da87ojAioLTuG6DsrECur3TjaSGSw=;
        b=nZnXZHMAoDf6HLA2+P+JEJKZO/BubVJeigCAQw4r2lf4kbVGNMEFwdRB7p5IxuBomH
         UnvlNQxeWA/oNBf02+I9vioLPtNYu8miX5vRu+rVVu+ksqJMvvMLf+TJZfZwAhRV2vYK
         g2fV66sCJx1JwHEcb3tjNsXkpL3ej9Dv11UidOjkqzJdlwzfm0ziBqsm3uDlIotMnxDI
         OdSgn0tN/BpP0tl9+D45qV2WTeIFjudNbXAz7lYIsEWfiCn+FXqKh+A13pRvoLbtSid/
         YLMCB0TPnczZr4ybECzl95z9MDqOcS56M6nFHEREpWDQJey8Vk62zJtbwWlkTgQjqlO5
         udaw==
MIME-Version: 1.0
Received: by 10.60.25.228 with SMTP id f4mr12220587oeg.29.1350389097532; Tue,
 16 Oct 2012 05:04:57 -0700 (PDT)
Received: by 10.60.63.227 with HTTP; Tue, 16 Oct 2012 05:04:57 -0700 (PDT)
In-Reply-To: <1350376607967-4013905.post@n3.nabble.com>
References: <1350376607967-4013905.post@n3.nabble.com>
Date: Tue, 16 Oct 2012 08:04:57 -0400
Message-ID: <CAN4YXvfB7vtyNagvpaFAQOiCQhTJqNMishF+FHOTAYv1Q_nPVg@mail.gmail.com>
Subject: Re: Restrict Lucene search in concrete document ids
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

You probably want to use a Lucene Filter then use
one of the query methods that takes a filter.

Best
Erick

On Tue, Oct 16, 2012 at 4:36 AM, sxam <sxamt@yahoo.com> wrote:
> Hi,
> Prior to search I have a concrete list of Lucene Document Ids (different
> every time) and I want to limit my search only to those specific documents.
> Is there a way to do it? I don't need to check any fields or anything, I
> know the possible document ids before so if possible I wouldn't want to use
> Query.. Besides it would be a huge query (let's say I want to limit to 5,000
> documents ids, it would be 5,000 Clauses..).
>
> Any help is greatly appreciated,
>
> Maxim
>
>
>
> --
> View this message in context: http://lucene.472066.n3.nabble.com/Restrict-Lucene-search-in-concrete-document-ids-tp4013905.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct 16 13:20:29 2012
Return-Path: <java-user-return-53849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7E2E7D901
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 16 Oct 2012 13:20:29 +0000 (UTC)
Received: (qmail 85405 invoked by uid 500); 16 Oct 2012 13:20:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85122 invoked by uid 500); 16 Oct 2012 13:20:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85082 invoked by uid 99); 16 Oct 2012 13:20:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Oct 2012 13:20:20 +0000
X-ASF-Spam-Status: No, hits=2.8 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of xekoukou@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-ob0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Oct 2012 13:20:14 +0000
Received: by mail-ob0-f176.google.com with SMTP id x4so7447819obh.35
        for <java-user@lucene.apache.org>; Tue, 16 Oct 2012 06:19:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=YHhZHu++PcuG4zQBzK+HBSvurDdouHv+7w5bkNEGSOc=;
        b=G53IN6XZzEVPNvgByAPCSS7DArGhQc0Pn531wER00AxxBHxMG43ZcA48sPWxpV+BRn
         3hj7TzrTDByU/5jzg/kxRa6ZncpbBp3/t3EtKe6tW1O6iKFwaFtzB9Y4rvEV3Yc8k0ih
         jMiFRMaj9N0Ngex2P5TGaxzEY0S9XHjw5AmekJWJOFYN5r/vQj3DTa6NxmVYmP61mids
         FC2KSO6sPrgrqnjtpnSTZumesEZq/zj00I37xYVg7gpdicth6a/+K/nYK66wHZUGvX6Q
         Rkjq+zq01jLRgqytsYpf/fyD/yqxoiMH6xM/k4PXGPcyTwW+CeOSdL1QIcrStRouiLIC
         3s5g==
MIME-Version: 1.0
Received: by 10.182.114.33 with SMTP id jd1mr10463350obb.81.1350393594123;
 Tue, 16 Oct 2012 06:19:54 -0700 (PDT)
Received: by 10.60.171.171 with HTTP; Tue, 16 Oct 2012 06:19:54 -0700 (PDT)
In-Reply-To: <CAN4YXvfB7vtyNagvpaFAQOiCQhTJqNMishF+FHOTAYv1Q_nPVg@mail.gmail.com>
References: <1350376607967-4013905.post@n3.nabble.com>
	<CAN4YXvfB7vtyNagvpaFAQOiCQhTJqNMishF+FHOTAYv1Q_nPVg@mail.gmail.com>
Date: Tue, 16 Oct 2012 16:19:54 +0300
Message-ID: <CAOX4E5GKYnAwVGJQs6m3ks6V+YM=6nzw8qp4tUALHYRSU0Pf6Q@mail.gmail.com>
Subject: Re: Restrict Lucene search in concrete document ids
From: Apostolis Xekoukoulotakis <xekoukou@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=f46d044517bd7c16ac04cc2d0289
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d044517bd7c16ac04cc2d0289
Content-Type: text/plain; charset=ISO-8859-1

How much time does it take to load a filter? If the filter needs to change
for every query, that might be a problem.

2012/10/16 Erick Erickson <erickerickson@gmail.com>

> You probably want to use a Lucene Filter then use
> one of the query methods that takes a filter.
>
> Best
> Erick
>
> On Tue, Oct 16, 2012 at 4:36 AM, sxam <sxamt@yahoo.com> wrote:
> > Hi,
> > Prior to search I have a concrete list of Lucene Document Ids (different
> > every time) and I want to limit my search only to those specific
> documents.
> > Is there a way to do it? I don't need to check any fields or anything, I
> > know the possible document ids before so if possible I wouldn't want to
> use
> > Query.. Besides it would be a huge query (let's say I want to limit to
> 5,000
> > documents ids, it would be 5,000 Clauses..).
> >
> > Any help is greatly appreciated,
> >
> > Maxim
> >
> >
> >
> > --
> > View this message in context:
> http://lucene.472066.n3.nabble.com/Restrict-Lucene-search-in-concrete-document-ids-tp4013905.html
> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 


Sincerely yours,

     Apostolis Xekoukoulotakis

--f46d044517bd7c16ac04cc2d0289--

From java-user-return-53850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct 16 13:29:48 2012
Return-Path: <java-user-return-53850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A8655D87F
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 16 Oct 2012 13:29:48 +0000 (UTC)
Received: (qmail 20231 invoked by uid 500); 16 Oct 2012 13:29:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19933 invoked by uid 500); 16 Oct 2012 13:29:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19903 invoked by uid 99); 16 Oct 2012 13:29:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Oct 2012 13:29:45 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-we0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Oct 2012 13:29:38 +0000
Received: by mail-we0-f176.google.com with SMTP id z53so4282864wey.35
        for <java-user@lucene.apache.org>; Tue, 16 Oct 2012 06:29:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=TWsxYG6ebeOZLWvSA5EG/9i29EyVtdo5pfWyCH5KbnY=;
        b=VQOvNO9zTKQlpVNs1WtSwp/p8roCrlNN4lRydY8Au4UR5dA70UYQf8IL7V648mT842
         7cUibxq986OG9u/aSJJr6KEroLl998F/sn2t/jZqRDNr3FQmkVd4co8AycTTREry+uvr
         hAwjuK8OE7L2ybX2lYzNRbvW2Pr11hvpMM3AkIdBPPE1eBQfWwt+hWzQIwlZyrddEApe
         SV7E5Jn9arjrYbdna1aA22xnO8ColizECDOu+MdZYmfMZuFPBfU5mFUm7gZwLsZAQeta
         /Wn7JpwRUdMa3L5upfiUGkgLq8WgtwEPu5t/mc1eRZC5sL8NNHzjMMz0chQXJSOkOkMC
         0lUg==
MIME-Version: 1.0
Received: by 10.180.89.7 with SMTP id bk7mr32057688wib.0.1350394158346; Tue,
 16 Oct 2012 06:29:18 -0700 (PDT)
Received: by 10.223.32.12 with HTTP; Tue, 16 Oct 2012 06:29:18 -0700 (PDT)
In-Reply-To: <CAOX4E5GKYnAwVGJQs6m3ks6V+YM=6nzw8qp4tUALHYRSU0Pf6Q@mail.gmail.com>
References: <1350376607967-4013905.post@n3.nabble.com>
	<CAN4YXvfB7vtyNagvpaFAQOiCQhTJqNMishF+FHOTAYv1Q_nPVg@mail.gmail.com>
	<CAOX4E5GKYnAwVGJQs6m3ks6V+YM=6nzw8qp4tUALHYRSU0Pf6Q@mail.gmail.com>
Date: Tue, 16 Oct 2012 09:29:18 -0400
Message-ID: <CAN4YXvcHQMUOBdpBetc1S2Z8xXgpwmAo3M9BLUF3q_Fb7JskGQ@mail.gmail.com>
Subject: Re: Restrict Lucene search in concrete document ids
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Well, the original problem statement was that there is a list
of doc IDs. On the assumption that these are _lucene_ doc
IDs, it's just a matter of turning on the bit for each indicated
doc in a relatively small, in-memory structure. This presumably
could be done once whenever the original list of doc IDs
was generated.

But it's almost certainly going to be cheaper than constructing
a large OR clause consisting of thousands of doc IDs...

Best
Erick

On Tue, Oct 16, 2012 at 9:19 AM, Apostolis Xekoukoulotakis
<xekoukou@gmail.com> wrote:
> How much time does it take to load a filter? If the filter needs to change
> for every query, that might be a problem.
>
> 2012/10/16 Erick Erickson <erickerickson@gmail.com>
>
>> You probably want to use a Lucene Filter then use
>> one of the query methods that takes a filter.
>>
>> Best
>> Erick
>>
>> On Tue, Oct 16, 2012 at 4:36 AM, sxam <sxamt@yahoo.com> wrote:
>> > Hi,
>> > Prior to search I have a concrete list of Lucene Document Ids (different
>> > every time) and I want to limit my search only to those specific
>> documents.
>> > Is there a way to do it? I don't need to check any fields or anything, I
>> > know the possible document ids before so if possible I wouldn't want to
>> use
>> > Query.. Besides it would be a huge query (let's say I want to limit to
>> 5,000
>> > documents ids, it would be 5,000 Clauses..).
>> >
>> > Any help is greatly appreciated,
>> >
>> > Maxim
>> >
>> >
>> >
>> > --
>> > View this message in context:
>> http://lucene.472066.n3.nabble.com/Restrict-Lucene-search-in-concrete-document-ids-tp4013905.html
>> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> --
>
>
> Sincerely yours,
>
>      Apostolis Xekoukoulotakis

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 17 12:53:20 2012
Return-Path: <java-user-return-53851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C2B35D7A0
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 17 Oct 2012 12:53:20 +0000 (UTC)
Received: (qmail 28200 invoked by uid 500); 17 Oct 2012 12:53:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27527 invoked by uid 500); 17 Oct 2012 12:53:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27422 invoked by uid 99); 17 Oct 2012 12:53:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Oct 2012 12:53:09 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of justdpk@gmail.com designates 209.85.217.176 as permitted sender)
Received: from [209.85.217.176] (HELO mail-lb0-f176.google.com) (209.85.217.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Oct 2012 12:53:02 +0000
Received: by mail-lb0-f176.google.com with SMTP id s4so5557345lbc.35
        for <java-user@lucene.apache.org>; Wed, 17 Oct 2012 05:52:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=Pre0mu1/RxrukBkA/qzs2tN2eZItzlqHD6s/yYGGwg0=;
        b=P8rXtl9hT10QTaEOG01RVrqrNP0xcD7yuAlbnemNTuduQTh9Rpxyv905AZoyDBgtGq
         OxVZEWOGzozD8klZflGGd2TTEnFFPwkuMWmzX6wPx4+4pCdkbeugF2HYmbTE9OPmOpHo
         ZNrmTkSNPc1xGznjHVcIO9E557LP9FsJXx3eLD6Rk+RMbqoRJyWyqFKNBaZn1qnAMuY0
         fH8XqKq+ELhH9mE5ysmKlTMtad1V12KFfFhPN4PbFTI5hpR9Xjtd7fxItDGlFI6KCdiu
         Drk+QiteIriZ9pZ2YglrHH2Y3S8RyBULSNrKXEveeLtzNEmu9whUrvTI8tJpeuZh0VKz
         +BcA==
MIME-Version: 1.0
Received: by 10.112.100.196 with SMTP id fa4mr6807123lbb.0.1350478361062; Wed,
 17 Oct 2012 05:52:41 -0700 (PDT)
Received: by 10.112.106.164 with HTTP; Wed, 17 Oct 2012 05:52:41 -0700 (PDT)
Date: Wed, 17 Oct 2012 18:22:41 +0530
Message-ID: <CAKgH_VCoyLVmn6TAx9ZEnWHoqwpdR2vJNV=hu5mJL7JbuPF1Mw@mail.gmail.com>
Subject: Lucene updateDocument deletes the document, but the counts keep increasing
From: Deepak Shakya <justdpk@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=14dae9d71214fceed604cc40be75
X-Virus-Checked: Checked by ClamAV on apache.org

--14dae9d71214fceed604cc40be75
Content-Type: text/plain; charset=UTF-8

I am using updateDocument() method to update my document in the lucene
index. Here is how I am doing it.

writer.updateDocument(new Term(Constants.DOC_ID_FIELD,
doc.get(Constants.DOC_ID_FIELD)), doc);

I check my index data with Luke, and find that on second run of the
indexing, Luke tells that Deleted Document - not available. So basically,
the document is marked as deleted, but it still resides in the index.

I don't want to keep these marked deleted documents. Am I doing it wrong?

Also, my understanding was that, when I am updating the document, it
deletes the old one and then adds the new one. Is that not the case?

-- 
With Regards,
Deepak Shakya

--14dae9d71214fceed604cc40be75--

From java-user-return-53852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 17 13:04:34 2012
Return-Path: <java-user-return-53852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AAFCBD800
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 17 Oct 2012 13:04:34 +0000 (UTC)
Received: (qmail 64772 invoked by uid 500); 17 Oct 2012 13:04:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64656 invoked by uid 500); 17 Oct 2012 13:04:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64638 invoked by uid 99); 17 Oct 2012 13:04:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Oct 2012 13:04:31 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-ia0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Oct 2012 13:04:25 +0000
Received: by mail-ia0-f176.google.com with SMTP id h11so6269572iae.35
        for <java-user@lucene.apache.org>; Wed, 17 Oct 2012 06:04:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=4fdk5oBMfNZgD1WjAFmupF51vZdS95QAgAxb+oLGoUI=;
        b=z/laPydTv+9YvqHGR9sMIJdUXU1jzlKkMY2+L7fsg4HIio1H0dSroeFdjgOBBvBQ+U
         /Xvx3GIs3Mm695WJZ04PyMDhYvCw2gro+pmqLxvyOvMdIsb44CFCW8C3HdWxmnbyagn6
         BXLKsHFRF1NJtzQKlpaQZQL4+3jKOhy4BDBF2OxXJ/XI+3xhGwM48WFqY4LN7PdBUh+F
         BWwrViWOwHT2oD6aODc2pARQhqwKABuuKqriSvFSDEd0RGFPoOQ+TURDPmcEEI5a3XwX
         ziE80vJACYWG9uzGdSgspTQreg8qQRlHVbiXYh/IbNCTYtcTzi0BEqDCUjyg7RG39ovn
         IR6Q==
Received: by 10.50.173.106 with SMTP id bj10mr1473552igc.13.1350479044973;
 Wed, 17 Oct 2012 06:04:04 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.64.61.2 with HTTP; Wed, 17 Oct 2012 06:03:44 -0700 (PDT)
In-Reply-To: <CAKgH_VCoyLVmn6TAx9ZEnWHoqwpdR2vJNV=hu5mJL7JbuPF1Mw@mail.gmail.com>
References: <CAKgH_VCoyLVmn6TAx9ZEnWHoqwpdR2vJNV=hu5mJL7JbuPF1Mw@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 17 Oct 2012 14:03:44 +0100
Message-ID: <CAEY5pxWP4ODnsbxwRAK_cqB7tf3y_cD=8usaubc4VMkKHnJVYQ@mail.gmail.com>
Subject: Re: Lucene updateDocument deletes the document, but the counts keep increasing
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, IndexWriter.updateDocument() deletes and then adds. See the
javadocs.  So your index will have deleted docs.  Why do you care?
They'll go away eventually as segments get merged.

If you really do care, see IndexWriter,forceMergeDeletes().  See also
the javadoc for that: This is often a horribly costly operation;
rarely is it warranted.


--
Ian.


On Wed, Oct 17, 2012 at 1:52 PM, Deepak Shakya <justdpk@gmail.com> wrote:
> I am using updateDocument() method to update my document in the lucene
> index. Here is how I am doing it.
>
> writer.updateDocument(new Term(Constants.DOC_ID_FIELD,
> doc.get(Constants.DOC_ID_FIELD)), doc);
>
> I check my index data with Luke, and find that on second run of the
> indexing, Luke tells that Deleted Document - not available. So basically,
> the document is marked as deleted, but it still resides in the index.
>
> I don't want to keep these marked deleted documents. Am I doing it wrong?
>
> Also, my understanding was that, when I am updating the document, it
> deletes the old one and then adds the new one. Is that not the case?
>
> --
> With Regards,
> Deepak Shakya

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 17 13:09:34 2012
Return-Path: <java-user-return-53853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F2370D81B
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 17 Oct 2012 13:09:33 +0000 (UTC)
Received: (qmail 79776 invoked by uid 500); 17 Oct 2012 13:09:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79726 invoked by uid 500); 17 Oct 2012 13:09:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79717 invoked by uid 99); 17 Oct 2012 13:09:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Oct 2012 13:09:31 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of justdpk@gmail.com designates 209.85.215.48 as permitted sender)
Received: from [209.85.215.48] (HELO mail-la0-f48.google.com) (209.85.215.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Oct 2012 13:09:23 +0000
Received: by mail-la0-f48.google.com with SMTP id u2so5526615lag.35
        for <java-user@lucene.apache.org>; Wed, 17 Oct 2012 06:09:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=1g327/RUlprHGQ+tLdGuUZGAdPl8OVLladTWzCeKmng=;
        b=D72ZM/2oRrsTfV2dsnKOs4j/YBxtuG4nA6ChjcF5OKaudSySXLOQk9zeLnFaXe/abG
         qVKpiELKjKPx2yObzJEJHa1Py5Dpq/t0ArjqNsnjPXF5/q3a8kIxidSvqfRp1k8u3KIx
         haGgb22yrl5LSoJqvWldcLWX5wLavnFXo6GFvmRY9zXyWkMmskgkBDLAnfoHZQfRWHnr
         cTVyeczCCCUxRyUEcmTspoXI2fdoRRx7fERtRX6ygMEDHYSc75YnTbESz2gSD6l3Rqa3
         zndAk2HPiDeJDcsp8UBYb0rjTleFLZK5rG+vW7DiLq70p10UrXmxGOpwngH3ZO9L05vy
         tQug==
MIME-Version: 1.0
Received: by 10.152.104.148 with SMTP id ge20mr15452771lab.51.1350479343062;
 Wed, 17 Oct 2012 06:09:03 -0700 (PDT)
Received: by 10.112.106.164 with HTTP; Wed, 17 Oct 2012 06:09:03 -0700 (PDT)
In-Reply-To: <CAEY5pxWP4ODnsbxwRAK_cqB7tf3y_cD=8usaubc4VMkKHnJVYQ@mail.gmail.com>
References: <CAKgH_VCoyLVmn6TAx9ZEnWHoqwpdR2vJNV=hu5mJL7JbuPF1Mw@mail.gmail.com>
	<CAEY5pxWP4ODnsbxwRAK_cqB7tf3y_cD=8usaubc4VMkKHnJVYQ@mail.gmail.com>
Date: Wed, 17 Oct 2012 18:39:03 +0530
Message-ID: <CAKgH_VCiDuYdxQzvrX25L8HENu-=uLPiGLUTS5T4XHVZ-XBy2Q@mail.gmail.com>
Subject: Re: Lucene updateDocument deletes the document, but the counts keep increasing
From: Deepak Shakya <justdpk@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=f46d04071169850dab04cc40f913
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d04071169850dab04cc40f913
Content-Type: text/plain; charset=UTF-8

Oh is it. So whenever in future these segments gets merged, i will have my
document count going down right?

On Wed, Oct 17, 2012 at 6:33 PM, Ian Lea <ian.lea@gmail.com> wrote:

> Yes, IndexWriter.updateDocument() deletes and then adds. See the
> javadocs.  So your index will have deleted docs.  Why do you care?
> They'll go away eventually as segments get merged.
>
> If you really do care, see IndexWriter,forceMergeDeletes().  See also
> the javadoc for that: This is often a horribly costly operation;
> rarely is it warranted.
>
>
> --
> Ian.
>
>
> On Wed, Oct 17, 2012 at 1:52 PM, Deepak Shakya <justdpk@gmail.com> wrote:
> > I am using updateDocument() method to update my document in the lucene
> > index. Here is how I am doing it.
> >
> > writer.updateDocument(new Term(Constants.DOC_ID_FIELD,
> > doc.get(Constants.DOC_ID_FIELD)), doc);
> >
> > I check my index data with Luke, and find that on second run of the
> > indexing, Luke tells that Deleted Document - not available. So basically,
> > the document is marked as deleted, but it still resides in the index.
> >
> > I don't want to keep these marked deleted documents. Am I doing it wrong?
> >
> > Also, my understanding was that, when I am updating the document, it
> > deletes the old one and then adds the new one. Is that not the case?
> >
> > --
> > With Regards,
> > Deepak Shakya
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
With Regards,
Deepak Shakya
http://www.google.com/profiles/justdpk

--f46d04071169850dab04cc40f913--

From java-user-return-53854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 17 13:41:16 2012
Return-Path: <java-user-return-53854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 79DAED8BA
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 17 Oct 2012 13:41:16 +0000 (UTC)
Received: (qmail 5736 invoked by uid 500); 17 Oct 2012 13:41:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5604 invoked by uid 500); 17 Oct 2012 13:41:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5596 invoked by uid 99); 17 Oct 2012 13:41:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Oct 2012 13:41:14 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.223.176 as permitted sender)
Received: from [209.85.223.176] (HELO mail-ie0-f176.google.com) (209.85.223.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Oct 2012 13:41:06 +0000
Received: by mail-ie0-f176.google.com with SMTP id k11so13658270iea.35
        for <java-user@lucene.apache.org>; Wed, 17 Oct 2012 06:40:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=kmZr3qmsBTKxLJm+CLewP1Ox6xl+MNvFqJN3Aax5Xrk=;
        b=sW5TF87SsVYpsFRkaVyv+lYzOSQXvgiHEpvqMWiMoHVFBi8w5zmh2S7hQN6pZ7dhSk
         QSla+EcOXOCT0wIcHHYv4W1exG5xHzrgaXrYmpmpmwvebuC5utuVNJnJ28fK28TjZjL+
         T0ejzWU200ZxllngYQP77W8ZhYz1xiVg6A0GV6y9AQ1b3BJShqfFfdQvX2P76tEfWQM1
         +vUIVFt8U6UUQNgnAVsOUinmKDJ/p5G3ilBcr6TLCjuruDlPwXgJL0T5N0D6VWh9Hxxo
         ePT/W7uQR+DN0OOgzoFThDtcFMLoD1bJEWvpCUXyOtbUULJYJMxdnpL5yvZAqXrsCzCa
         se0A==
Received: by 10.50.152.196 with SMTP id va4mr1599095igb.13.1350481244974; Wed,
 17 Oct 2012 06:40:44 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.64.61.2 with HTTP; Wed, 17 Oct 2012 06:40:24 -0700 (PDT)
In-Reply-To: <CAKgH_VCiDuYdxQzvrX25L8HENu-=uLPiGLUTS5T4XHVZ-XBy2Q@mail.gmail.com>
References: <CAKgH_VCoyLVmn6TAx9ZEnWHoqwpdR2vJNV=hu5mJL7JbuPF1Mw@mail.gmail.com>
 <CAEY5pxWP4ODnsbxwRAK_cqB7tf3y_cD=8usaubc4VMkKHnJVYQ@mail.gmail.com> <CAKgH_VCiDuYdxQzvrX25L8HENu-=uLPiGLUTS5T4XHVZ-XBy2Q@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 17 Oct 2012 14:40:24 +0100
Message-ID: <CAEY5pxWQSNg=tk5go_x=SMO0vhujUh+ehtX0cnKxOOLt5ZADrQ@mail.gmail.com>
Subject: Re: Lucene updateDocument deletes the document, but the counts keep increasing
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

I guess so.  I don't pay much attention to these figures but
presumably IndexReader.numDocs() and numDeletedDocs() will adjust as
deletions get merged away.  Try it and see.


--
Ian.


On Wed, Oct 17, 2012 at 2:09 PM, Deepak Shakya <justdpk@gmail.com> wrote:
> Oh is it. So whenever in future these segments gets merged, i will have my
> document count going down right?
>
> On Wed, Oct 17, 2012 at 6:33 PM, Ian Lea <ian.lea@gmail.com> wrote:
>
>> Yes, IndexWriter.updateDocument() deletes and then adds. See the
>> javadocs.  So your index will have deleted docs.  Why do you care?
>> They'll go away eventually as segments get merged.
>>
>> If you really do care, see IndexWriter,forceMergeDeletes().  See also
>> the javadoc for that: This is often a horribly costly operation;
>> rarely is it warranted.
>>
>>
>> --
>> Ian.
>>
>>
>> On Wed, Oct 17, 2012 at 1:52 PM, Deepak Shakya <justdpk@gmail.com> wrote:
>> > I am using updateDocument() method to update my document in the lucene
>> > index. Here is how I am doing it.
>> >
>> > writer.updateDocument(new Term(Constants.DOC_ID_FIELD,
>> > doc.get(Constants.DOC_ID_FIELD)), doc);
>> >
>> > I check my index data with Luke, and find that on second run of the
>> > indexing, Luke tells that Deleted Document - not available. So basically,
>> > the document is marked as deleted, but it still resides in the index.
>> >
>> > I don't want to keep these marked deleted documents. Am I doing it wrong?
>> >
>> > Also, my understanding was that, when I am updating the document, it
>> > deletes the old one and then adds the new one. Is that not the case?
>> >
>> > --
>> > With Regards,
>> > Deepak Shakya
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> --
> With Regards,
> Deepak Shakya
> http://www.google.com/profiles/justdpk

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 17 13:43:30 2012
Return-Path: <java-user-return-53855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 151FBD8DB
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 17 Oct 2012 13:43:30 +0000 (UTC)
Received: (qmail 12089 invoked by uid 500); 17 Oct 2012 13:43:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11994 invoked by uid 500); 17 Oct 2012 13:43:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11986 invoked by uid 99); 17 Oct 2012 13:43:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Oct 2012 13:43:28 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of justdpk@gmail.com designates 209.85.215.48 as permitted sender)
Received: from [209.85.215.48] (HELO mail-la0-f48.google.com) (209.85.215.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Oct 2012 13:43:21 +0000
Received: by mail-la0-f48.google.com with SMTP id u2so5557597lag.35
        for <java-user@lucene.apache.org>; Wed, 17 Oct 2012 06:43:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=lF+n55k3TYzf0OuaL7ifMqo4ocBrc4xY6JfAzk+Zx+o=;
        b=tgY1RgG7FbK5NCKS6iDkxGrDoJIaZWY6CxIhvkyffkNMGE8XBvk1ScvquJB9OvOFgd
         IwW6uFtBMiAYTe8A8Q+sWwVCbokXY4a3gr6VCbgofXCcH1wo70+ryEMUDQX8XtNi0nZ3
         3rT2RxOX9N7pzMwZGSXIwJ2cU910QoqO3zefErfJvcsjFTBaBOulW0+XPNxELL5XItRX
         VLmvecER/U1NQQXR39n2cRf+/niWgw1ZP9utkGX40VXNFmuH657ztt/fKehuN6IRELWu
         XbvpsjfV736E2JYl83MG3SgCuynnWsGaqbUuIS8/DgdBEC6ezWWqbeX0E1TDeYU+TSl/
         xmKg==
MIME-Version: 1.0
Received: by 10.152.105.33 with SMTP id gj1mr15874746lab.49.1350481379904;
 Wed, 17 Oct 2012 06:42:59 -0700 (PDT)
Received: by 10.112.106.164 with HTTP; Wed, 17 Oct 2012 06:42:59 -0700 (PDT)
In-Reply-To: <CAEY5pxWQSNg=tk5go_x=SMO0vhujUh+ehtX0cnKxOOLt5ZADrQ@mail.gmail.com>
References: <CAKgH_VCoyLVmn6TAx9ZEnWHoqwpdR2vJNV=hu5mJL7JbuPF1Mw@mail.gmail.com>
	<CAEY5pxWP4ODnsbxwRAK_cqB7tf3y_cD=8usaubc4VMkKHnJVYQ@mail.gmail.com>
	<CAKgH_VCiDuYdxQzvrX25L8HENu-=uLPiGLUTS5T4XHVZ-XBy2Q@mail.gmail.com>
	<CAEY5pxWQSNg=tk5go_x=SMO0vhujUh+ehtX0cnKxOOLt5ZADrQ@mail.gmail.com>
Date: Wed, 17 Oct 2012 19:12:59 +0530
Message-ID: <CAKgH_VBmKYEvN35NAPqaqqb=BATz9FAoCJtMdDEmp_T_dYhTWg@mail.gmail.com>
Subject: Re: Lucene updateDocument deletes the document, but the counts keep increasing
From: Deepak Shakya <justdpk@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=f46d040716e3ecce4304cc417218
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d040716e3ecce4304cc417218
Content-Type: text/plain; charset=UTF-8

K. Thanks for the clarification.

On Wed, Oct 17, 2012 at 7:10 PM, Ian Lea <ian.lea@gmail.com> wrote:

> I guess so.  I don't pay much attention to these figures but
> presumably IndexReader.numDocs() and numDeletedDocs() will adjust as
> deletions get merged away.  Try it and see.
>
>
> --
> Ian.
>
>
> On Wed, Oct 17, 2012 at 2:09 PM, Deepak Shakya <justdpk@gmail.com> wrote:
> > Oh is it. So whenever in future these segments gets merged, i will have
> my
> > document count going down right?
> >
> > On Wed, Oct 17, 2012 at 6:33 PM, Ian Lea <ian.lea@gmail.com> wrote:
> >
> >> Yes, IndexWriter.updateDocument() deletes and then adds. See the
> >> javadocs.  So your index will have deleted docs.  Why do you care?
> >> They'll go away eventually as segments get merged.
> >>
> >> If you really do care, see IndexWriter,forceMergeDeletes().  See also
> >> the javadoc for that: This is often a horribly costly operation;
> >> rarely is it warranted.
> >>
> >>
> >> --
> >> Ian.
> >>
> >>
> >> On Wed, Oct 17, 2012 at 1:52 PM, Deepak Shakya <justdpk@gmail.com>
> wrote:
> >> > I am using updateDocument() method to update my document in the lucene
> >> > index. Here is how I am doing it.
> >> >
> >> > writer.updateDocument(new Term(Constants.DOC_ID_FIELD,
> >> > doc.get(Constants.DOC_ID_FIELD)), doc);
> >> >
> >> > I check my index data with Luke, and find that on second run of the
> >> > indexing, Luke tells that Deleted Document - not available. So
> basically,
> >> > the document is marked as deleted, but it still resides in the index.
> >> >
> >> > I don't want to keep these marked deleted documents. Am I doing it
> wrong?
> >> >
> >> > Also, my understanding was that, when I am updating the document, it
> >> > deletes the old one and then adds the new one. Is that not the case?
> >> >
> >> > --
> >> > With Regards,
> >> > Deepak Shakya
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
> > --
> > With Regards,
> > Deepak Shakya
> > http://www.google.com/profiles/justdpk
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
With Regards,
Deepak Shakya
http://www.google.com/profiles/justdpk

--f46d040716e3ecce4304cc417218--

From java-user-return-53856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 17 13:48:34 2012
Return-Path: <java-user-return-53856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6FDF5D909
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 17 Oct 2012 13:48:34 +0000 (UTC)
Received: (qmail 32079 invoked by uid 500); 17 Oct 2012 13:48:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32033 invoked by uid 500); 17 Oct 2012 13:48:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32024 invoked by uid 99); 17 Oct 2012 13:48:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Oct 2012 13:48:32 +0000
X-ASF-Spam-Status: No, hits=3.0 required=5.0
	tests=FORGED_YAHOO_RCVD,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Oct 2012 13:48:26 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <zpvie@yahoo.com>)
	id 1TOTyf-00019A-Ij
	for java-user@lucene.apache.org; Wed, 17 Oct 2012 06:48:05 -0700
Date: Wed, 17 Oct 2012 06:48:05 -0700 (PDT)
From: "Zeynep P." <zpvie@yahoo.com>
To: java-user@lucene.apache.org
Message-ID: <1350481685564-4014238.post@n3.nabble.com>
Subject: Lucene 4.0 benchmark bug?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi to all,

I started to use benchmark 4.0 to create submission report files with the
following code:
	  
        BufferedReader br = new BufferedReader(fr);
        QualityQuery qqs[] = qReader.readQueries(br);  
        QualityQueryParser qqParser = new SimpleQQParser("title", "body");  
        QualityBenchmark qrun = new QualityBenchmark(qqs, qqParser,
searcher, "docname") ;
        SubmissionReport submitLog = new SubmissionReport(loggertest,
"test"); 
        QualityStats stats[] = qrun.execute(null, submitLog, null);

My index is created by lucene 3.6. I use LA Times topics 401-450. With 3.6,
no problem. However, when I use benchmark 4.0 I realised that it returns the
results only for the first query 401 which is "foreign minorities, Germany". 
When I debug the code, at SimpleQQParser, the boolean query generated is
"body:foreign" without other keywords. I go on debugging and it seems that
the problem is raised at  QueryParserBase.newFieldQuery  which returns null
for  the rest of all queries and other keywords in the same query.  I
updated the code for my adhoc use. Unless, I don't know  how to fix it or 
it also happens to someone else?!


Second problem, for the same collection MAP = 0.17 with default similarity,
MAP= 0.07 with lucene 4.0 BM25 similarity (b=0.75, k1=1.2). I got MAP = 0.14
with BM25 implemented based on http://ipl.cs.aueb.gr/stougianni/bm25_2.html.
However this collection is represented in the litterature with MAP around
0.25 with BM25 scoring function. Did someone evaluate the different
similarities and can share the results? 

Best Regards,
ZP





--
View this message in context: http://lucene.472066.n3.nabble.com/Lucene-4-0-benchmark-bug-tp4014238.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 17 14:50:42 2012
Return-Path: <java-user-return-53857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EFBE0DAB0
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 17 Oct 2012 14:50:41 +0000 (UTC)
Received: (qmail 27595 invoked by uid 500); 17 Oct 2012 14:50:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27547 invoked by uid 500); 17 Oct 2012 14:50:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27536 invoked by uid 99); 17 Oct 2012 14:50:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Oct 2012 14:50:39 +0000
X-ASF-Spam-Status: No, hits=3.0 required=5.0
	tests=FORGED_YAHOO_RCVD,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Oct 2012 14:50:34 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <sxamt@yahoo.com>)
	id 1TOUwn-0006eR-G5
	for java-user@lucene.apache.org; Wed, 17 Oct 2012 07:50:13 -0700
Date: Wed, 17 Oct 2012 07:50:13 -0700 (PDT)
From: sxam <sxamt@yahoo.com>
To: java-user@lucene.apache.org
Message-ID: <1350485413353-4014258.post@n3.nabble.com>
In-Reply-To: <CAN4YXvcHQMUOBdpBetc1S2Z8xXgpwmAo3M9BLUF3q_Fb7JskGQ@mail.gmail.com>
References: <1350376607967-4013905.post@n3.nabble.com> <CAN4YXvfB7vtyNagvpaFAQOiCQhTJqNMishF+FHOTAYv1Q_nPVg@mail.gmail.com> <CAOX4E5GKYnAwVGJQs6m3ks6V+YM=6nzw8qp4tUALHYRSU0Pf6Q@mail.gmail.com> <CAN4YXvcHQMUOBdpBetc1S2Z8xXgpwmAo3M9BLUF3q_Fb7JskGQ@mail.gmail.com>
Subject: Re: Restrict Lucene search in concrete document ids
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
Well, those are Lucene Document Ids I am talking about. And I know it could
be done using a Filter with a Query, but I thought that if I can tell Lucene
to somehow look in a specified set of Documents, it would speed up the
search substantially. Otherwise it's just the same as adding 5000 Clauses to
the search query isn't it?
Or am I missing something and using Filter is better than in a search query?
But why, isn't Filter using the same query ifc and just works on a received
result set? How do I add Document Id as a clause (to Filter/Query), BTW?



--
View this message in context: http://lucene.472066.n3.nabble.com/Restrict-Lucene-search-in-concrete-document-ids-tp4013905p4014258.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 17 14:59:01 2012
Return-Path: <java-user-return-53858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7FF65DB0C
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 17 Oct 2012 14:59:01 +0000 (UTC)
Received: (qmail 55024 invoked by uid 500); 17 Oct 2012 14:58:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54966 invoked by uid 500); 17 Oct 2012 14:58:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54958 invoked by uid 99); 17 Oct 2012 14:58:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Oct 2012 14:58:59 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qc0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Oct 2012 14:58:52 +0000
Received: by mail-qc0-f176.google.com with SMTP id n41so7143317qco.35
        for <java-user@lucene.apache.org>; Wed, 17 Oct 2012 07:58:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=Wy3Pp04J8GJGSgvVIuSW0xb06KKtgGduL93/Dxd5q/E=;
        b=oEGzARqbr58k9d4p+xgjq7/NZ5bEHT6UdyD2hwhF/V6In4dmxvY6T2qAkrjQ/1nrtj
         hIZPAebMYvEz9rG0xiZW2gDuLKX9mFf3ecPl5cPcVi7SWyyTADHCI1uxk7iTcEUz2G6P
         Fy7bP3K5IgMOrxRCeR6BPB1dZYYcHKj120IATVsx2HYIwy7RBZtpoUsC2lgIUjjD9hFa
         c11Tn7GZssuOKkeE14PS+CcmFWUwxsigJC3WDlrITJcs+cH1jsonzC0Hhns8tjK+mZER
         f7hR5ZfR6OcxrMJOQ2R0twbeXFAUjGwlThIqgfCAb3EIIcTOun0hgwmm6120ofSSRQZO
         xSnw==
Received: by 10.49.2.200 with SMTP id 8mr44041233qew.20.1350485912323; Wed, 17
 Oct 2012 07:58:32 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.49.26.37 with HTTP; Wed, 17 Oct 2012 07:58:12 -0700 (PDT)
In-Reply-To: <1350481685564-4014238.post@n3.nabble.com>
References: <1350481685564-4014238.post@n3.nabble.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Wed, 17 Oct 2012 07:58:12 -0700
Message-ID: <CAOdYfZV9fTEJ2Hu-DPQ9vi_dvpsJo8UtRjPKJ5_RkApBP4mB+g@mail.gmail.com>
Subject: Re: Lucene 4.0 benchmark bug?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Oct 17, 2012 at 6:48 AM, Zeynep P. <zpvie@yahoo.com> wrote:
>
> My index is created by lucene 3.6.

> Second problem, for the same collection MAP = 0.17 with default similarity,
> MAP= 0.07 with lucene 4.0 BM25 similarity (b=0.75, k1=1.2).

Did you read CHANGES.txt before doing this? This is really important to do.

Note: most of the models do rely upon index statistics that are new in
Lucene 4.0, so
for existing 3.x indexes its a good idea to upgrade your index to the
new format with IndexUpgrader first.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 17 15:04:03 2012
Return-Path: <java-user-return-53859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E14C0DB44
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 17 Oct 2012 15:04:02 +0000 (UTC)
Received: (qmail 66586 invoked by uid 500); 17 Oct 2012 15:04:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66535 invoked by uid 500); 17 Oct 2012 15:04:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66527 invoked by uid 99); 17 Oct 2012 15:04:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Oct 2012 15:04:00 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.223.176 as permitted sender)
Received: from [209.85.223.176] (HELO mail-ie0-f176.google.com) (209.85.223.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Oct 2012 15:03:54 +0000
Received: by mail-ie0-f176.google.com with SMTP id k11so13848199iea.35
        for <java-user@lucene.apache.org>; Wed, 17 Oct 2012 08:03:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=pZI90ESTa3YeQ3uDkC4TiYUI+zpXFlzyUX0u0dl82gI=;
        b=bAJKOh8Plc6RPVutaUUdCCCR+3kwhS4tVlDkF2rP+at8DB1Kb6Jo3tpjkPqVKbjrIl
         vIJUs7wKpqrH/cMrHARJkNv6sTvz8MxMN4zGW29tbditc9R9HXuYaHSmirNA4UPDGeHA
         gsIYxs1iIXIlgVDFQlH6SnNYHEH5DVD372ImzpByYqPMqhZxDQFYJwQ4VJgk8XgKM2yw
         kz/ocE8cB0LfHcpQBLP8mliVbHSWax3yg5fpu0HXWQwYu59zJXjNnq2+AV0VJC7WpF6i
         GhLoasu4CCVk+sx0To1ugZSaqwWKR3A/sVc9TQtxyTgyHZQBnd6bSGT4bXqsB2RG935A
         +9ZQ==
Received: by 10.50.57.169 with SMTP id j9mr1861803igq.16.1350486213280; Wed,
 17 Oct 2012 08:03:33 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.64.61.2 with HTTP; Wed, 17 Oct 2012 08:03:13 -0700 (PDT)
In-Reply-To: <1350485413353-4014258.post@n3.nabble.com>
References: <1350376607967-4013905.post@n3.nabble.com> <CAN4YXvfB7vtyNagvpaFAQOiCQhTJqNMishF+FHOTAYv1Q_nPVg@mail.gmail.com>
 <CAOX4E5GKYnAwVGJQs6m3ks6V+YM=6nzw8qp4tUALHYRSU0Pf6Q@mail.gmail.com>
 <CAN4YXvcHQMUOBdpBetc1S2Z8xXgpwmAo3M9BLUF3q_Fb7JskGQ@mail.gmail.com> <1350485413353-4014258.post@n3.nabble.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 17 Oct 2012 16:03:13 +0100
Message-ID: <CAEY5pxXHOnr8+QTOSDofQ761i_h8Dywcr=yoFxYB5EMbMotxtw@mail.gmail.com>
Subject: Re: Restrict Lucene search in concrete document ids
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

I would expect a filter to be quicker than adding thousands of clauses
because Filters are just bit sets and operations are extremely fast.
But never take performance predictions, particularly from me, on trust
- test it in your app with your index on your hardware.

To use a filter here I think you'd create a Filter subclass with a
getDocIdSet() method that returned a DocIdSet, probably an OpenBitSet,
that had the relevant bits set.


Presumably you're aware of the transient nature of lucene internal
docids and the per-segment complexities and everything.


--
Ian.


On Wed, Oct 17, 2012 at 3:50 PM, sxam <sxamt@yahoo.com> wrote:
> Hi,
> Well, those are Lucene Document Ids I am talking about. And I know it could
> be done using a Filter with a Query, but I thought that if I can tell Lucene
> to somehow look in a specified set of Documents, it would speed up the
> search substantially. Otherwise it's just the same as adding 5000 Clauses to
> the search query isn't it?
> Or am I missing something and using Filter is better than in a search query?
> But why, isn't Filter using the same query ifc and just works on a received
> result set? How do I add Document Id as a clause (to Filter/Query), BTW?
>
>
>
> --
> View this message in context: http://lucene.472066.n3.nabble.com/Restrict-Lucene-search-in-concrete-document-ids-tp4013905p4014258.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 17 18:51:28 2012
Return-Path: <java-user-return-53860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F120ED0F6
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 17 Oct 2012 18:51:28 +0000 (UTC)
Received: (qmail 32078 invoked by uid 500); 17 Oct 2012 18:51:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32030 invoked by uid 500); 17 Oct 2012 18:51:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 55544 invoked by uid 99); 17 Oct 2012 14:31:29 -0000
X-ASF-Spam-Status: No, hits=4.6 required=5.0
	tests=FILL_THIS_FORM_FRAUD_PHISH,HTML_MESSAGE,SPF_NEUTRAL,T_FILL_THIS_FORM_SHORT,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Date: Wed, 17 Oct 2012 07:31:04 -0700 (PDT)
From: "shawn@sriusa.com" <shawn@sriusa.com>
To: java-user@lucene.apache.org
Message-ID: <1350484264119-4014251.post@n3.nabble.com>
Subject: Java with Lucene in San Jose, CA
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12743_3764218.1350484264214"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_12743_3764218.1350484264214
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Hello,Please send me your resume if you are interested in the below
position.Position: Java with Lucene Location: San Jose, CALong term Contrac=
t=09
7 to 10 yrs experienceLucene search experience, Includes knowledge of Lucen=
e
API and internals.Java/J2EE and web services knowledge Kindly provide the
following details:Full Name                     : Contact Number          =
=20
: Email ID                        :Current Location            :
Availability                    : Best time to call you      : Visa Status =
                =20
:Hourly rate on C2C        : Last 4 Digits SSN#        :Any other potential
offers lined up:Two Professional References:Thanks in advance and have a
great day.ShawnStrategic Resources International, Inc., 777 Washington Rd,
Suite =E2=80=93 2, Parlin, NJ. 08859Direct :732-751-4203 Fax: 732-909-2222E=
mail:
shawn@sriusa.comWebsite: www.sriusa.com



--
View this message in context: http://lucene.472066.n3.nabble.com/Java-with-=
Lucene-in-San-Jose-CA-tp4014251.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.
------=_Part_12743_3764218.1350484264214--

From java-user-return-53861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 17 20:25:00 2012
Return-Path: <java-user-return-53861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8B593DA67
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 17 Oct 2012 20:25:00 +0000 (UTC)
Received: (qmail 28678 invoked by uid 500); 17 Oct 2012 20:24:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28638 invoked by uid 500); 17 Oct 2012 20:24:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28628 invoked by uid 99); 17 Oct 2012 20:24:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Oct 2012 20:24:58 +0000
X-ASF-Spam-Status: No, hits=2.9 required=5.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [77.92.64.121] (HELO smtp1.cix.co.uk) (77.92.64.121)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Oct 2012 20:24:49 +0000
Received: (qmail 26326 invoked from network); 17 Oct 2012 20:24:28 -0000
Received: from unknown (HELO mail.lemur.co.uk) (86.143.202.157)
  by smtp1.cix.co.uk with SMTP; 17 Oct 2012 20:24:28 -0000
Received: from [192.168.1.250] ([192.168.1.250])
	by mail.lemur.co.uk
	; Wed, 17 Oct 2012 21:24:22 +0100
Message-ID: <507F140C.6020301@digitorial.co.uk>
Date: Wed, 17 Oct 2012 21:24:44 +0100
From: =?ISO-8859-1?Q?Dawn_Zo=EB_Raison?= <dawn@digitorial.co.uk>
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:16.0) Gecko/20121010 Thunderbird/16.0.1
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Question on method visibility in Highlighter - WeightedSpanTermExtractor
 class
Content-Type: multipart/alternative;
 boundary="------------000907060001010509010307"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------000907060001010509010307
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi folks,

Is there a reason why the setMaxDocCharsToAnalyze() method of 
WeightedSpanTermExtractor() is protected?

The class is a perfect fit for my requirement (enumerating the list of 
terms present in a document that match the current query for subsequent 
highlighting in a PDF file) with the lone exception that this property 
defaults to 0 and cannot be changed externally...

I currently have this one class in my source tree with this property 
changed to public, but would obviously prefer not to duplicate.

-- 

Rgds.
*Dawn Raison*
Technical Director, Digitorial Ltd.


--------------000907060001010509010307--


From java-user-return-53862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Oct 18 18:34:55 2012
Return-Path: <java-user-return-53862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 02FEBD2D0
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 18 Oct 2012 18:34:55 +0000 (UTC)
Received: (qmail 59752 invoked by uid 500); 18 Oct 2012 18:34:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59101 invoked by uid 500); 18 Oct 2012 18:34:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59060 invoked by uid 99); 18 Oct 2012 18:34:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Oct 2012 18:34:48 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jainr@ivycomptech.com designates 203.153.210.130 as permitted sender)
Received: from [203.153.210.130] (HELO ivymail.ivycomptech.com) (203.153.210.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Oct 2012 18:34:42 +0000
Received: from HYDSVWIN280a.ivycomptech.partygaming.local ([10.1.10.231]) by ivymail.ivycomptech.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Fri, 19 Oct 2012 00:04:18 +0530
Received: from HYDSVWIN-EXAR1.ivycomptech.partygaming.local ([::1]) by
 HYDSVWIN280a.ivycomptech.partygaming.local ([::1]) with mapi id
 14.02.0318.004; Fri, 19 Oct 2012 00:04:17 +0530
From: Jain Rahul <jainr@ivycomptech.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: flush/commit seems to be taking a huge time after some time.
Thread-Topic: flush/commit seems to be taking a huge time after some time.
Thread-Index: Ac2tVG6bSv9AsFDVQzm83M1GnGWSmAACG73Q
Date: Thu, 18 Oct 2012 18:34:16 +0000
Message-ID: <04119417CE2C6E43B71CAFC4AD4E22BB7C1519AA@HYDSVWIN-EXAR1.ivycomptech.partygaming.local>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-originating-ip: [10.3.110.190]
Content-Type: multipart/alternative;
	boundary="_000_04119417CE2C6E43B71CAFC4AD4E22BB7C1519AAHYDSVWINEXAR1iv_"
MIME-Version: 1.0
X-OriginalArrivalTime: 18 Oct 2012 18:34:18.0535 (UTC) FILETIME=[2EFB9370:01CDAD5F]
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_04119417CE2C6E43B71CAFC4AD4E22BB7C1519AAHYDSVWINEXAR1iv_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi All,

I am currently using the solr-4.0.0 to allow searching the logs for one of =
our project. I am testing with a dataset of around 17Gb containing only log=
s. We prepare each line as one document (SolrInputDocument) having 9 fields=
, around having size as 200byte to 500 bytes(If exception stack trace). Rou=
ghly each 1 Gb contains around 5million log lines, so the same number of do=
cument object are prepared. We are using solr as embedded mode (EmbeddedSol=
rServer).

While indexing initially solr/lucene is able to process around 8Gb in 8-10 =
minutes but slowly it is getting slowed(see below logs). By looking at IO i=
t seems that io wait time roughly stands at 50-60% and at that time all thr=
eads running for indexing get in pause state. We have observed the pause ti=
me around 47 mins with cpu being 100 to 200% max (total is 2400% as 24 core=
) at that time.

We have disable the merging in this by creating an extension of NoMergeSche=
duler (Just for testing). By looking at thread dumps it seems to be  that a=
ll threads are waiting on writeBytes method of RandomAccessFile.

Can you guys please suggest what might be going wrong.  Please let me know =
if I need to provide more details.

Couldn't attach the logs (thread-dumps, iostat and infostream file) due to =
size so uploaded at below link.

http://dc414.2shared.com/download/s0_EKGIi/logs.zip?tsid=3D20121018-181700-=
bce0d673
or
http://www.2shared.com/file/s0_EKGIi/logs.html

Some insights about the app.

Below is the machine configuration.
Physical server, Intel 2.4 Ghz 12 core(each is dual core), 48 GB RAM. Disk =
is local
Java Process is with 12gb heap.
6 Solr core,  Having a global thread pool of 32 threads, where for one core=
 max 8 threads can work at a time (achieved by using semaphore), the whole =
application is based on Producer -Consumer design. Producer reads the file,=
 create a 10k document and add it to ThreadPoolExecutor as a task.
We have made some small extension to lucene/solr api (by extending classes)=
 to achieve reusing lucene document object and by-passing the xml marshalli=
ng/unmarshalling and directly passing SolrInputDocument object to solr's Up=
dateProcessor.

Snippet of Log that shows the time difference:

2012-10-17 12:04:56,873 INFO  [LOGMINER -1-thread-2] NEW_INDEXER_LOGGER: To=
tal time taken to index gclog_10.1.86.212 is 20711
2012-10-17 12:04:56,873 INFO  [LOGMINER -1-thread-2] NEW_INDEXER_LOGGER: To=
tal no.of documents created for gclog_10.1.86.212 is 313431--total:97280056=
 total processed data size(MB):15546
2012-10-17 12:04:56,873 INFO  [LOGMINER -1-thread-2] NEW_INDEXER_LOGGER: ##=
###########################
2012-10-17 12:04:58,397 INFO  [LOGMINER -1-thread-8] NEW_INDEXER_LOGGER: ##=
###########################
2012-10-17 12:04:58,397 INFO  [LOGMINER -1-thread-8] NEW_INDEXER_LOGGER: To=
tal time taken to index gclog_10.1.65.231 is 39967
2012-10-17 12:04:58,397 INFO  [LOGMINER -1-thread-8] NEW_INDEXER_LOGGER: To=
tal no.of documents created for gclog_10.1.65.231 is 314402--total:97340056=
 total processed data size(MB):15568
2012-10-17 12:04:58,397 INFO  [LOGMINER -1-thread-8] NEW_INDEXER_LOGGER: ##=
###########################
2012-10-17 12:51:16,590 INFO  [LOGMINER -1-thread-9] NEW_INDEXER_LOGGER: ##=
###########################
2012-10-17 12:51:16,590 INFO  [LOGMINER -1-thread-9] NEW_INDEXER_LOGGER: To=
tal time taken to index gsctlog_10.1.86.207 is 2830070
2012-10-17 12:51:16,590 INFO  [LOGMINER -1-thread-9] NEW_INDEXER_LOGGER: To=
tal no.of documents created for gsctlog_10.1.86.207 is 146808--total:983300=
56 total processed data size(MB):15591
2012-10-17 12:51:16,590 INFO  [LOGMINER -1-thread-9] NEW_INDEXER_LOGGER: ##=
###########################
2012-10-17 12:51:21,877 INFO  [LOGMINER -1-thread-9] NEW_INDEXER_LOGGER: ##=
###########################
2012-10-17 12:51:21,877 INFO  [LOGMINER -1-thread-9] NEW_INDEXER_LOGGER: To=
tal time taken to index gslog_10.1.86.207 is 5287
2012-10-17 12:51:21,877 INFO  [LOGMINER -1-thread-9] NEW_INDEXER_LOGGER: To=
tal no.of documents created for gslog_10.1.86.207 is 59800--total:98650056 =
total processed data size(MB):15612


Solr-Config file.

   <directoryFactory name=3D"DirectoryFactory" class=3D"${solr.directoryFac=
tory:solr.StandardDirectoryFactory}"/>

<indexConfig>
    <ramBufferSizeMB>1024</ramBufferSizeMB>
  <infoStream file=3D"/home/ppoker/apache-solr-4.0.0/example/multicore/INFO=
STREAM.txt">true</infoStream>
  </indexConfig>

<updateHandler class=3D"solr.DirectUpdateHandler2">
     <autoCommit>
       <maxTime>1800000</maxTime> // 30 mins,
       <openSearcher>false</openSearcher>
     </autoCommit>
  </updateHandler>


Regards
Rahul
This email and any attachments are confidential, and may be legally privile=
ged and protected by copyright. If you are not the intended recipient disse=
mination or copying of this email is prohibited. If you have received this =
in error, please notify the sender by replying by email and then delete the=
 email completely from your system. Any views or opinions are solely those =
of the sender. This communication is not intended to form a binding contrac=
t unless expressly indicated to the contrary and properly authorised. Any a=
ctions taken on the basis of this email are at the recipient's own risk.

--_000_04119417CE2C6E43B71CAFC4AD4E22BB7C1519AAHYDSVWINEXAR1iv_--

From java-user-return-53863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Oct 19 12:59:58 2012
Return-Path: <java-user-return-53863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 618C5D7E4
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 19 Oct 2012 12:59:58 +0000 (UTC)
Received: (qmail 67532 invoked by uid 500); 19 Oct 2012 12:59:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67105 invoked by uid 500); 19 Oct 2012 12:59:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67074 invoked by uid 99); 19 Oct 2012 12:59:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Oct 2012 12:59:50 +0000
X-ASF-Spam-Status: No, hits=2.1 required=5.0
	tests=FS_START_DOYOU2,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.219.48 as permitted sender)
Received: from [209.85.219.48] (HELO mail-oa0-f48.google.com) (209.85.219.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Oct 2012 12:59:42 +0000
Received: by mail-oa0-f48.google.com with SMTP id h2so426412oag.35
        for <java-user@lucene.apache.org>; Fri, 19 Oct 2012 05:59:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=8j+6dfQT3ZUUTLkvOoCSJPaBf8n0pA4tIV/iCpoQeB0=;
        b=R2Jcyk0n4t8saz9cPLYcR1AKeqyCOJEO1Qy0VOwew3ZCWWpZ4Oq75WX5rWrMy6OuDM
         ffnfDI2lhCUN5qPpgkaPcGUC5lIUjUb7stL7xhapMpP/h1f5HP7eN9RglNvYHQxlOtQr
         sss/vnSN3SPcN62St3+r8vYJGpnK12i+fYmkb1TBFqGAVjebCW5h3FyuagBrENZ53Jdr
         UxBDOjoPsK4pbaJ9wPDOlIUUf9YFpOab2yZhSRT0BKjhK2Y2GiaoNaBhLcXmopU6W3iP
         mFFOvaBU036Gffa1AckjraU1XtlI3+IQXd1gYu/XQwkF+VOqwjfgTG2tmu8M9L3KvIRw
         v1JA==
MIME-Version: 1.0
Received: by 10.182.42.6 with SMTP id j6mr322090obl.93.1350651561465; Fri, 19
 Oct 2012 05:59:21 -0700 (PDT)
Received: by 10.60.32.179 with HTTP; Fri, 19 Oct 2012 05:59:21 -0700 (PDT)
Date: Fri, 19 Oct 2012 08:59:21 -0400
Message-ID: <CACn_-AwX0Ghwk-8gwQzFsiOc9W+XgFtEsf=4xAKT4o=GrEepiA@mail.gmail.com>
Subject: Do you have a case study for a new O'Reilly book on Lucene and Solr?
From: Jason Rutherglen <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Greetings,

There is a new book from O'Reilly on Lucene and Solr, and you can
submit a case study about your Lucene project for inclusion in the
book.  Feel free to contact me directly, jason.rutherglen@gmail.com

Regards,

Jason Rutherglen

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Oct 19 16:50:40 2012
Return-Path: <java-user-return-53864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C45FEDD75
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 19 Oct 2012 16:50:40 +0000 (UTC)
Received: (qmail 15537 invoked by uid 500); 19 Oct 2012 16:50:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15168 invoked by uid 500); 19 Oct 2012 16:50:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 58761 invoked by uid 99); 19 Oct 2012 16:33:39 -0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of divarun@gmail.com designates 209.85.210.176 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=WKTsFU8B6Ov0n0IpCkudUYQi2dsjdmOmLDlNAKdfMGw=;
        b=mCAmb6G1YAmBzSMcV7owcXENmj/uSobeg6SPibNqajAEjHCR6iC0BX2Oes5KH4B5N1
         an+RQtoC7LYa5Rqfnlx8pEGq6Pd/P5dnQDfHaOXW5YA1ZIqdeiQ9LFlGjSzi6+6nECkV
         6Wx91tXZc0KzC4IqdOpzIgiqZ1oxZ6jbmBseFraedBDPpPMldsT5jA/6BylJaYApqFSb
         LSJJtiO3oSmWVkSfqpRP8mkMR6GkU6CSKOh3vBbC7JcmyGwkuTbNXpID2Y+eUcy5qZwa
         bAGnfdtD22lNhUyq3jclfYqtcWxf45D6lYWlVwb7+SnnOCgdrx/xyvGF8rE5fQuaiuYh
         PYhg==
MIME-Version: 1.0
Date: Fri, 19 Oct 2012 09:33:13 -0700
Message-ID: <CAHYZg-d+J_ALt-zoJXKeyd=khaWUnE1aXQHRbUxDqQb4vC6sYA@mail.gmail.com>
Subject: Nested Documents
From: Divya Arunachalam <divarun@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec51869dc63b2cc04cc6c0f09
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec51869dc63b2cc04cc6c0f09
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I am pretty new to solr and I am trying to create Nested Indexes. But i am
not able to find proper documentation or to get it working. Following is my
issue/scenario:

We have a List of Providers who can be at multiple locations.We initially
had a document for each provider location. So there might be 6 documents
for a provider who has 6 locations. This works fine, but when we try to
sort/paginate we want to do by provider. But now we have the documents at
the provider location level, we have to do some post processing.

Is there any way to have a parent(provider) and child(location). I have
read i can use block join query to get details from parent and child. But
iam not able to get the nested index. If i have one document and multiple
entities, it just gives me a list.

http://stackoverflow.com/questions/5256389/can-we-have-multiple-entity-in-solr-result-structure

my thoughts are same as the post.

Can you please help.

-Divya

--bcaec51869dc63b2cc04cc6c0f09--

From java-user-return-53865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Oct 20 00:38:49 2012
Return-Path: <java-user-return-53865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F176CD8F2
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat, 20 Oct 2012 00:38:48 +0000 (UTC)
Received: (qmail 33481 invoked by uid 500); 20 Oct 2012 00:38:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33328 invoked by uid 500); 20 Oct 2012 00:38:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 24392 invoked by uid 99); 19 Oct 2012 20:41:12 -0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,T_FILL_THIS_FORM_SHORT,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.26 is neither permitted nor denied by domain of manishgarg28@gmail.com)
Date: Fri, 19 Oct 2012 13:40:45 -0700 (PDT)
From: manigg <manishgarg28@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1350679245636-4014829.post@n3.nabble.com>
Subject: Requirement -- Search Consultant (Lucene/ SOLR & J2EE exp.) --
 Brooklyn, NY or REFER someone
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Assignment Name:=09Search Engine Consultant (Lucene/ SOLR & J2EE exp.)
Work Location:=09Brooklyn, NY
Scheduled Work Hours:=099am to 5pm Monday to Friday
Duration:=0912+ Months
Interview: =09In person/ F2F required

SCOPE OF SERVICES=20
Local Law 5 of 2012 sets forth timelines that DoITT must adhere to for
posting material terms of contracts entered into by the City on a public,
online, searchable database.  To comply with this law, the Transparency
Project search application, created as part of the Doing Business
Accountability Project Phase 4, will be leveraged.  The Transparency Projec=
t
search application will be updated to include the data elements listed in
Local Law 5 and additional functionality will be added to the application t=
o
improve the user experience. =20
Responsibilities include:=20
=E2=80=A2=09Participate in development of systems design emphasizing the se=
arch
requirements of the application
=E2=80=A2=09Expertise in Lucene and/or SOLR, and related search frameworks
=E2=80=A2=09Coding and designing the search elements of the application
=E2=80=A2=09Perform unit testing and fixes during testing Phase
=E2=80=A2=09Document coding and testing efforts
=E2=80=A2=09Apply industry best practices and follow departmental standards=
 for
development
=E2=80=A2=09Create/document deployment and operational procedures
=E2=80=A2=09All documentation regarding system design
=E2=80=A2=09Use cases and misuse cases for handoff to QA team
MANDATORY SKILLS/EXPERIENCE Note: candidates who do not have the mandatory
skills will not be considered.
=E2=80=A2=09At least 8 years experience in building search applications usi=
ng Lucene
or Solr=20
=E2=80=A2=09A minimum of 4 years experience in Java/J2EE development for la=
rge-scale
enterprise applications;=20
=E2=80=A2=09Strong knowledge of major search engines=20
=E2=80=A2=09Strong knowledge of XML Technologies=20
=E2=80=A2=09Familiarity with AJAX, DHTML, JavaScript, CSS;=20
=E2=80=A2=09Experience with relational databases preferably Oracle;=20
=E2=80=A2=09Strong Knowledge of BEA Weblogic, UNIX, Solaris, and Linux=20
=E2=80=A2=09Ability to plan technical architecture and develop documentatio=
n;=20
=E2=80=A2=09Excellent oral and written communication skills are required;=
=20
DESIRABLE SKILLS/EXPERIENCE :
=E2=80=A2=09Knowledge of NYC Government culture.
SPECIAL REQUIREMENTS:
References should be provided from at least two former or current clients
where the contractor has performed the same or similar work.  Provide the
name, address, phone number and e-mail address of the reference as well as =
a
brief description of the work performed.

Regards,
Manish | GCOM Software Inc.
Manish@gcomsoft.com | www.gcomsoft.com
Direct Contacts : (917) 720 5892| Fax: (518) 869-1673




--
View this message in context: http://lucene.472066.n3.nabble.com/Requiremen=
t-Search-Consultant-Lucene-SOLR-J2EE-exp-Brooklyn-NY-or-REFER-someone-tp401=
4829.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Oct 21 19:24:55 2012
Return-Path: <java-user-return-53866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E716ADD56
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 21 Oct 2012 19:24:54 +0000 (UTC)
Received: (qmail 34468 invoked by uid 500); 21 Oct 2012 19:24:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33646 invoked by uid 500); 21 Oct 2012 19:24:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33539 invoked by uid 99); 21 Oct 2012 19:24:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 21 Oct 2012 19:24:48 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of richard.marr@gmail.com designates 74.125.83.48 as permitted sender)
Received: from [74.125.83.48] (HELO mail-ee0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 21 Oct 2012 19:24:42 +0000
Received: by mail-ee0-f48.google.com with SMTP id b45so841220eek.35
        for <multiple recipients>; Sun, 21 Oct 2012 12:24:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=x4UQ3hQfxWGRQU6WClQW7SjluS+8rvgMGpnIT5/4o84=;
        b=fJdpWZ2xGsQUZPw/mdEx3mG3Pxqm734R7LSK83sdSXLnG3EPpFwfH8gHQ8mixGmbhv
         SAXZdFzO+DpP1mjpYI39DLNYOP0BLcKvxRTCLmlbOzD31F2fudW19aNRwyX5ubc/ue7a
         bXF0Ao95ODGmU2ekCWNfPYnzX/mb7tE2jwPbqb8ntz9WSdtjAM1AsPUD3aFqsfroNxXP
         q9zDHtU9SACjixLyObGP6mkKuCMBIm2cvh0QMPFVZKkTgyGUVNyBd+JK5rL5dT3/r59S
         47Lo9g+O3pFh5m5MjLyPe7lN8nHsXbVg6hLuTW8AvnFx8y6TowTsgRzdFERuNVZjlyEK
         E5RA==
MIME-Version: 1.0
Received: by 10.14.207.5 with SMTP id m5mr9487967eeo.22.1350847461862; Sun, 21
 Oct 2012 12:24:21 -0700 (PDT)
Received: by 10.14.133.16 with HTTP; Sun, 21 Oct 2012 12:24:21 -0700 (PDT)
In-Reply-To: <CAPhsquiM32oF4Qws8huczfZMSsRkDT_o5KRgBEuv3zc+ztH1RQ@mail.gmail.com>
References: <CAPhsquh=i-4GBJc6zk8XADYV90wPtgbsSMcpH8Nm4pWBtYnHMw@mail.gmail.com>
	<CAPhsquiM32oF4Qws8huczfZMSsRkDT_o5KRgBEuv3zc+ztH1RQ@mail.gmail.com>
Date: Sun, 21 Oct 2012 20:24:21 +0100
Message-ID: <CAPhsqugnwyQwwU5J0xJdPFSABDs=kP-R1j1J2Q_f1mZuw=XKdA@mail.gmail.com>
Subject: Re: Open Source Social (London) - 23rd Oct
From: Richard Marr <richard.marr@gmail.com>
To: java-user@lucene.apache.org, solr-user@lucene.apache.org, 
	elasticsearch@googlegroups.com
Content-Type: multipart/alternative; boundary=047d7b33dc641c2e7304cc96af2d
X-Virus-Checked: Checked by ClamAV on apache.org

--047d7b33dc641c2e7304cc96af2d
Content-Type: text/plain; charset=ISO-8859-1

Last reminder... come along on Tuesday if you can! We'd love to meet you
and share search/NLP/scaling war stories.



> On 11 October 2012 21:59, Richard Marr <richard.marr@gmail.com> wrote:
>
>> Hi all,
>>
>> The next Open Source Search Social is on the 23rd Oct at The Plough, in
>> Bloomsbury.
>>
>> We usually get a good mix of regulars and newcomers, and a good mix of
>> backgrounds and experience levels, so please come along if you can. As
>> usual the format is completely open so we'll be talking about whatever is
>> most interesting at any one particular moment... ooo, a shiny thing...
>>
>> Details and RSVP options on the Meetup page:
>> http://www.meetup.com/london-search-social/events/86580442/
>>
>> Hope to see you there,
>>
>> Richard
>>
>> @richmarr
>>
>
>
>
>
>


-- 
Richard Marr

--047d7b33dc641c2e7304cc96af2d--

From java-user-return-53867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct 22 06:58:26 2012
Return-Path: <java-user-return-53867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6AE35D539
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 22 Oct 2012 06:58:26 +0000 (UTC)
Received: (qmail 30046 invoked by uid 500); 22 Oct 2012 06:58:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29738 invoked by uid 500); 22 Oct 2012 06:58:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29694 invoked by uid 99); 22 Oct 2012 06:58:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Oct 2012 06:58:15 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.26 is neither permitted nor denied by domain of sagar.gole8@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Oct 2012 06:58:09 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <sagar.gole8@gmail.com>)
	id 1TQBxN-00071n-Cr
	for java-user@lucene.apache.org; Sun, 21 Oct 2012 23:57:49 -0700
Date: Sun, 21 Oct 2012 23:57:49 -0700 (PDT)
From: "sagar.gole8" <sagar.gole8@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1350889069388-4015054.post@n3.nabble.com>
Subject: Removing Indexed field data.
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
I want to remove the data from indexed field, not documents that containing
that data.
i.e. 
Suppose I have a field person containing some person names and I want to
remove some un-named data from that person field.

e.g.(O/p from luke file)

No.    Rank    Field     Text
1       466     Person   Mahatma Gandhi
2       080     Person   Zokgh
3       069     Person   PARBHANI

See the image for details:
<http://lucene.472066.n3.nabble.com/file/n4015054/Solr-Index.png> 

>From above data I want remove the entry for "Zokgh" value from Person field.

Please anyone can suggest?



--
View this message in context: http://lucene.472066.n3.nabble.com/Removing-Indexed-field-data-tp4015054.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct 22 08:09:50 2012
Return-Path: <java-user-return-53868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B567DD68E
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 22 Oct 2012 08:09:50 +0000 (UTC)
Received: (qmail 10033 invoked by uid 500); 22 Oct 2012 08:09:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9683 invoked by uid 500); 22 Oct 2012 08:09:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9646 invoked by uid 99); 22 Oct 2012 08:09:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Oct 2012 08:09:46 +0000
X-ASF-Spam-Status: No, hits=2.8 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of findbestopensource@gmail.com designates 209.85.217.176 as permitted sender)
Received: from [209.85.217.176] (HELO mail-lb0-f176.google.com) (209.85.217.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Oct 2012 08:09:41 +0000
Received: by mail-lb0-f176.google.com with SMTP id s4so1627425lbc.35
        for <java-user@lucene.apache.org>; Mon, 22 Oct 2012 01:09:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=Cft6D1tX5/u251rdSPdacUNs36LQMPi46jtE6qq4LVY=;
        b=oTA+5LiqPrsNXL06tiL1bARPzh3nNwx38Ujnn40f+hiexc5bYA/Uth6rP9hsn+a7W/
         tu5V8GdFJeGJhhciBb21ODmNTG7VMhyzZOAZ5P9Pt4OYQqKn+zN9G3Gezu2bKpgATtEg
         njG29nXV7bRytfTOqT1p7tUd0YC9U5yJiszkGW2hPjxiVWSmNPLxJURWPWEj1OEk5n3g
         gDaQT4NQytSYTPag4zMuNBcMGEukzLQPg6zi/z7XKojjyaBRjAERqGbkz7tJlUNafX2s
         7a9Czd63poSLaQq0CAZn3RqvMpKrY1g4TvGd2rOC4IXWQBkHaYbmQ0Hq92+V+xQvY1uV
         N5Wg==
MIME-Version: 1.0
Received: by 10.152.135.139 with SMTP id ps11mr7403343lab.29.1350893360378;
 Mon, 22 Oct 2012 01:09:20 -0700 (PDT)
Received: by 10.114.0.179 with HTTP; Mon, 22 Oct 2012 01:09:20 -0700 (PDT)
In-Reply-To: <1350889069388-4015054.post@n3.nabble.com>
References: <1350889069388-4015054.post@n3.nabble.com>
Date: Mon, 22 Oct 2012 13:39:20 +0530
Message-ID: <CAE9W93OE3ZPP27s6NfXD-R1hJJGexNrd=Q+kpciGBVgJ7P0yKw@mail.gmail.com>
Subject: Re: Removing Indexed field data.
From: Aditya <findbestopensource@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=f46d0435bf4edff13b04cca15e90
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d0435bf4edff13b04cca15e90
Content-Type: text/plain; charset=ISO-8859-1

You need to modify / re-index the document. You cannot delete a particular
field. Re-index / update the document with blank / NULL value for the field.

1. Retrieve the document,
2. Set Blank value for the particular field
3. Update the document

Regards
Aditya
www.findbestopensource.com


On Mon, Oct 22, 2012 at 12:27 PM, sagar.gole8 <sagar.gole8@gmail.com> wrote:

> Hi,
> I want to remove the data from indexed field, not documents that containing
> that data.
> i.e.
> Suppose I have a field person containing some person names and I want to
> remove some un-named data from that person field.
>
> e.g.(O/p from luke file)
>
> No.    Rank    Field     Text
> 1       466     Person   Mahatma Gandhi
> 2       080     Person   Zokgh
> 3       069     Person   PARBHANI
>
> See the image for details:
> <http://lucene.472066.n3.nabble.com/file/n4015054/Solr-Index.png>
>
> From above data I want remove the entry for "Zokgh" value from Person
> field.
>
> Please anyone can suggest?
>
>
>
> --
> View this message in context:
> http://lucene.472066.n3.nabble.com/Removing-Indexed-field-data-tp4015054.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--f46d0435bf4edff13b04cca15e90--

From java-user-return-53869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct 22 08:38:33 2012
Return-Path: <java-user-return-53869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9AF77D6C1
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 22 Oct 2012 08:38:33 +0000 (UTC)
Received: (qmail 78199 invoked by uid 500); 22 Oct 2012 08:38:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78149 invoked by uid 500); 22 Oct 2012 08:38:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78132 invoked by uid 99); 22 Oct 2012 08:38:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Oct 2012 08:38:29 +0000
X-ASF-Spam-Status: No, hits=3.0 required=5.0
	tests=FORGED_YAHOO_RCVD,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Oct 2012 08:38:23 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <sxamt@yahoo.com>)
	id 1TQDWM-0004dS-GQ
	for java-user@lucene.apache.org; Mon, 22 Oct 2012 01:38:02 -0700
Date: Mon, 22 Oct 2012 01:38:02 -0700 (PDT)
From: sxam <sxamt@yahoo.com>
To: java-user@lucene.apache.org
Message-ID: <1350895082501-4015074.post@n3.nabble.com>
In-Reply-To: <CAEY5pxXHOnr8+QTOSDofQ761i_h8Dywcr=yoFxYB5EMbMotxtw@mail.gmail.com>
References: <1350376607967-4013905.post@n3.nabble.com> <CAN4YXvfB7vtyNagvpaFAQOiCQhTJqNMishF+FHOTAYv1Q_nPVg@mail.gmail.com> <CAOX4E5GKYnAwVGJQs6m3ks6V+YM=6nzw8qp4tUALHYRSU0Pf6Q@mail.gmail.com> <CAN4YXvcHQMUOBdpBetc1S2Z8xXgpwmAo3M9BLUF3q_Fb7JskGQ@mail.gmail.com> <1350485413353-4014258.post@n3.nabble.com> <CAEY5pxXHOnr8+QTOSDofQ761i_h8Dywcr=yoFxYB5EMbMotxtw@mail.gmail.com>
Subject: Re: Restrict Lucene search in concrete document ids
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
I try to set the filter but I encounter the following problem - while
overriding Bits method, how do I know the document id from the indexReader I
get in the method?
I can see the documents by indexReader.Documents, but no id there..



--
View this message in context: http://lucene.472066.n3.nabble.com/Restrict-Lucene-search-in-concrete-document-ids-tp4013905p4015074.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct 22 08:50:42 2012
Return-Path: <java-user-return-53870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 51E3CD6EE
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 22 Oct 2012 08:50:42 +0000 (UTC)
Received: (qmail 18405 invoked by uid 500); 22 Oct 2012 08:50:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18356 invoked by uid 500); 22 Oct 2012 08:50:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18329 invoked by uid 99); 22 Oct 2012 08:50:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Oct 2012 08:50:39 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [193.52.32.76] (HELO storck.univ-ubs.fr) (193.52.32.76)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Oct 2012 08:50:31 +0000
Received: from [193.50.242.50] (dhcp-193-50-242-50.eduroam.univ-ubs.fr [193.50.242.50])
	(authenticated bits=0)
	by storck.univ-ubs.fr (8.14.3/8.14.3) with ESMTP id q9M8o9LA025240
	(version=TLSv1/SSLv3 cipher=DHE-RSA-CAMELLIA256-SHA bits=256 verify=NO);
	Mon, 22 Oct 2012 10:50:09 +0200 (CEST)
	(envelope-from pierre-francois.marteau@univ-ubs.fr)
Message-ID: <508508C1.8020209@univ-ubs.fr>
Date: Mon, 22 Oct 2012 10:50:09 +0200
From: Pierre-Francois Marteau <pierre-francois.marteau@univ-ubs.fr>
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:16.0) Gecko/20121011 Thunderbird/16.0.1
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Retrieval of the position of indexed terms
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,
I am a recent user of the Lucene platform and have some difficulty to 
migrate from V3.6 to V4.0 a small IR fulltext application that requires 
to retrieve the positions of occurrence into the indexed documents of 
the query terms (I was using SpanQueries that are deprecated in the new 
version).
This had certainly already addressed spmewhere, but I cannot figure out 
where. A short example of source code would be much helpful;
Thanks for your expertise,
P-F.

-- 
-------------------------------------+-----------------------------+
Pr. Pierre-Franois Marteau          |                             |
IRISA - Universit de Bretagne-Sud,  |                             |
Universit Europenne de Bretagne    | Tl :    +33-2.97.01.72.99  |
Campus de Tohannic-BP 573,           | Fax :    +33-2.97.01.72.79  |
56017 Vannes Cedex, France           | Sec :    +33-2.97.01.72.35  |
-------------------------------------+-----------------------------|
http://www-irisa.univ-ubs.fr/Pierre-Francois.Marteau/          	   |
-------------------------------------------------------------------+


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct 22 11:57:03 2012
Return-Path: <java-user-return-53871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F0EC9D9DE
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 22 Oct 2012 11:57:03 +0000 (UTC)
Received: (qmail 47416 invoked by uid 500); 22 Oct 2012 11:57:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47283 invoked by uid 500); 22 Oct 2012 11:57:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47246 invoked by uid 99); 22 Oct 2012 11:57:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Oct 2012 11:57:00 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.26 is neither permitted nor denied by domain of sagar.gole8@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Oct 2012 11:56:54 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <sagar.gole8@gmail.com>)
	id 1TQGcT-0007gB-O9
	for java-user@lucene.apache.org; Mon, 22 Oct 2012 04:56:33 -0700
Date: Mon, 22 Oct 2012 04:56:33 -0700 (PDT)
From: "sagar.gole8" <sagar.gole8@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1350906993740-4015099.post@n3.nabble.com>
In-Reply-To: <CAE9W93OE3ZPP27s6NfXD-R1hJJGexNrd=Q+kpciGBVgJ7P0yKw@mail.gmail.com>
References: <1350889069388-4015054.post@n3.nabble.com> <CAE9W93OE3ZPP27s6NfXD-R1hJJGexNrd=Q+kpciGBVgJ7P0yKw@mail.gmail.com>
Subject: Re: Removing Indexed field data.
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you Aditya,

Actually, I want to remove only that value('Zokgh'), not that field or that
document. Just remove the indexed entry of that value. Because that
particular document or field contains other useful data. If u remove that
document, the other data will lose.



--
View this message in context: http://lucene.472066.n3.nabble.com/Removing-Indexed-field-data-tp4015054p4015099.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct 22 13:08:44 2012
Return-Path: <java-user-return-53872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8E3B1DB6F
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 22 Oct 2012 13:08:44 +0000 (UTC)
Received: (qmail 43454 invoked by uid 500); 22 Oct 2012 13:08:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43392 invoked by uid 500); 22 Oct 2012 13:08:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43354 invoked by uid 99); 22 Oct 2012 13:08:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Oct 2012 13:08:40 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-ob0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Oct 2012 13:08:35 +0000
Received: by mail-ob0-f176.google.com with SMTP id x4so2853161obh.35
        for <java-user@lucene.apache.org>; Mon, 22 Oct 2012 06:08:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=2XMF2OtMh38blE8tJ8/tYiaPuJL/mAAZ0DAeMRxcSxE=;
        b=kE1vhPni0Rrz0DkLWBM8oA+65lqefvwH+fBql5+JwyvfsP3wfHFycS2zLfNvb4jLAS
         hBeh0J3QoUWRvYC5in8ctOcyHkvLqCixXUHqgxcpKLpSahSBIP5hEdmTExpgeOMLMyIX
         DGigHpDsr+7jMy8BSBcGLt1TPEVRscegQ4r4WfIeUpmM9fArsLgBiiwvPhuWAq4GPJEu
         U0uTLs7CWcsIJSCUxiNiOtj7mYNSHPiYaJKhseP4bvo/vjd+LgYtvfLjWQHUOg9WJm1g
         40lpDd8Y0qP68KWKwJr0FRx0HaT2SsiEZ1W6ppT9Au9CvrRr77BI5XgWqgaU9SJEVndf
         YS5A==
Received: by 10.60.24.228 with SMTP id x4mr7871007oef.5.1350911294483; Mon, 22
 Oct 2012 06:08:14 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.76.24.227 with HTTP; Mon, 22 Oct 2012 06:07:54 -0700 (PDT)
In-Reply-To: <1350906993740-4015099.post@n3.nabble.com>
References: <1350889069388-4015054.post@n3.nabble.com> <CAE9W93OE3ZPP27s6NfXD-R1hJJGexNrd=Q+kpciGBVgJ7P0yKw@mail.gmail.com>
 <1350906993740-4015099.post@n3.nabble.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Mon, 22 Oct 2012 14:07:54 +0100
Message-ID: <CAEY5pxU2B3Qkync8T7o0Tpdho37oHYhMkO6og=8rCTZpzUcuxg@mail.gmail.com>
Subject: Re: Removing Indexed field data.
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

As Aditya said, you'll need to recreate that document.

http://wiki.apache.org/lucene-java/LuceneFAQ#How_do_I_update_a_document_or_a_set_of_documents_that_are_already_indexed.3F


The fact that you only want to remove one value is irrelevant.


--
Ian.


On Mon, Oct 22, 2012 at 12:56 PM, sagar.gole8 <sagar.gole8@gmail.com> wrote:
> Thank you Aditya,
>
> Actually, I want to remove only that value('Zokgh'), not that field or that
> document. Just remove the indexed entry of that value. Because that
> particular document or field contains other useful data. If u remove that
> document, the other data will lose.
>
>
>
> --
> View this message in context: http://lucene.472066.n3.nabble.com/Removing-Indexed-field-data-tp4015054p4015099.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct 22 13:12:52 2012
Return-Path: <java-user-return-53873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8BFE6DB7E
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 22 Oct 2012 13:12:52 +0000 (UTC)
Received: (qmail 54383 invoked by uid 500); 22 Oct 2012 13:12:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54345 invoked by uid 500); 22 Oct 2012 13:12:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54333 invoked by uid 99); 22 Oct 2012 13:12:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Oct 2012 13:12:50 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.219.48 as permitted sender)
Received: from [209.85.219.48] (HELO mail-oa0-f48.google.com) (209.85.219.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Oct 2012 13:12:43 +0000
Received: by mail-oa0-f48.google.com with SMTP id h2so2859327oag.35
        for <java-user@lucene.apache.org>; Mon, 22 Oct 2012 06:12:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=QKNDvILuGM7sU1OeoNlBgVFgvMom3OHt/kihNWiGyfM=;
        b=t6xCaZ+QqBiSVJv69IdDoI0l6TpSreEQI+ePq8AYiSf4vq276KuXkFadkklCnHBZ/R
         tU5uLMndtMy6u5jbTBzBN23E5/B8Do6gFWUcheGWruskLaErbIbATWSCXxuw08Q8IHAP
         P4H5F/FgSslaUmHmERXjBq2ZinNrHdEw3f2lWS6pBhH5XQJMLKFI0TPztZRhI9aZQQC2
         1PZIbNetWI41mLfqNGQtffuLWuFOeO+GZ4yGLcVFj+870fLG6ePGb9BkkTATwjFShkVJ
         ZCXIsXIAx1/pBDFqPIhuCe+5KgNhvEH8s98Ivvn9oCyroVlMPwtlbGa5gc6avYVEaATs
         1+WQ==
Received: by 10.60.2.65 with SMTP id 1mr7854961oes.19.1350911542838; Mon, 22
 Oct 2012 06:12:22 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.76.24.227 with HTTP; Mon, 22 Oct 2012 06:12:02 -0700 (PDT)
In-Reply-To: <1350895082501-4015074.post@n3.nabble.com>
References: <1350376607967-4013905.post@n3.nabble.com> <CAN4YXvfB7vtyNagvpaFAQOiCQhTJqNMishF+FHOTAYv1Q_nPVg@mail.gmail.com>
 <CAOX4E5GKYnAwVGJQs6m3ks6V+YM=6nzw8qp4tUALHYRSU0Pf6Q@mail.gmail.com>
 <CAN4YXvcHQMUOBdpBetc1S2Z8xXgpwmAo3M9BLUF3q_Fb7JskGQ@mail.gmail.com>
 <1350485413353-4014258.post@n3.nabble.com> <CAEY5pxXHOnr8+QTOSDofQ761i_h8Dywcr=yoFxYB5EMbMotxtw@mail.gmail.com>
 <1350895082501-4015074.post@n3.nabble.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Mon, 22 Oct 2012 14:12:02 +0100
Message-ID: <CAEY5pxW0t=C9WXSVeTDxQpknHLB_h9nY4U8YcM7AZxNzTNr42g@mail.gmail.com>
Subject: Re: Restrict Lucene search in concrete document ids
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Exactly what method in which class of which version of lucene are you
trying to override?  There is no "Bits" method.  There is no
"indexReader.Documents" method.

I said this earlier in this thread: Presumably you're aware of the
transient nature of lucene internal docids and the per-segment
complexities and everything.

I would now add: if not, don't do this.


--
Ian.

On Mon, Oct 22, 2012 at 9:38 AM, sxam <sxamt@yahoo.com> wrote:
> Hi,
> I try to set the filter but I encounter the following problem - while
> overriding Bits method, how do I know the document id from the indexReader I
> get in the method?
> I can see the documents by indexReader.Documents, but no id there..
>
>
>
> --
> View this message in context: http://lucene.472066.n3.nabble.com/Restrict-Lucene-search-in-concrete-document-ids-tp4013905p4015074.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct 22 13:58:40 2012
Return-Path: <java-user-return-53874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A8549DC83
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 22 Oct 2012 13:58:40 +0000 (UTC)
Received: (qmail 25620 invoked by uid 500); 22 Oct 2012 13:58:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25435 invoked by uid 500); 22 Oct 2012 13:58:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25414 invoked by uid 99); 22 Oct 2012 13:58:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Oct 2012 13:58:37 +0000
X-ASF-Spam-Status: No, hits=3.0 required=5.0
	tests=FORGED_YAHOO_RCVD,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Oct 2012 13:58:32 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <sxamt@yahoo.com>)
	id 1TQIWA-0006w4-PV
	for java-user@lucene.apache.org; Mon, 22 Oct 2012 06:58:10 -0700
Date: Mon, 22 Oct 2012 06:58:10 -0700 (PDT)
From: sxam <sxamt@yahoo.com>
To: java-user@lucene.apache.org
Message-ID: <1350914290710-4015123.post@n3.nabble.com>
In-Reply-To: <CAEY5pxW0t=C9WXSVeTDxQpknHLB_h9nY4U8YcM7AZxNzTNr42g@mail.gmail.com>
References: <1350376607967-4013905.post@n3.nabble.com> <CAN4YXvfB7vtyNagvpaFAQOiCQhTJqNMishF+FHOTAYv1Q_nPVg@mail.gmail.com> <CAOX4E5GKYnAwVGJQs6m3ks6V+YM=6nzw8qp4tUALHYRSU0Pf6Q@mail.gmail.com> <CAN4YXvcHQMUOBdpBetc1S2Z8xXgpwmAo3M9BLUF3q_Fb7JskGQ@mail.gmail.com> <1350485413353-4014258.post@n3.nabble.com> <CAEY5pxXHOnr8+QTOSDofQ761i_h8Dywcr=yoFxYB5EMbMotxtw@mail.gmail.com> <1350895082501-4015074.post@n3.nabble.com> <CAEY5pxW0t=C9WXSVeTDxQpknHLB_h9nY4U8YcM7AZxNzTNr42g@mail.gmail.com>
Subject: Re: Restrict Lucene search in concrete document ids
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I work with Lucene.Net. , version 2.9
The code is :

Searching:
Filter filter = new PictureIdFilter( allowedResources );
TopDocs docs = searcher.Search( boolQuery, filter, documentCount );
ScoreDoc[] hits = docs.scoreDocs;

And the filter is :

class PictureIdFilter : Filter
+    {
+        ILog log = LogManager.GetLogger("PictureIdFilter");
+        private BitArray bits;
+
+        private HashSet<String> bag;
+
+        public PictureIdFilter(ResourceKey[] allowedResources)
+        {
+            var sw = new Stopwatch();
+            sw.Start();
+            bag = new HashSet<string>(allowedResources.Select(
x=>x.ResourceId.ToString() ));
+            sw.Stop();
+            log.Warn("PictureIdFilter hashset create: " +
sw.ElapsedMilliseconds);
+        }
+
+        public override BitArray Bits(IndexReader reader)
+        {
+            var maxDoc = reader.MaxDoc();
+            log.Warn("PictureIdFilter maxdoc: " + maxDoc);
+            var result = new BitArray(maxDoc);
+            var sw = new Stopwatch();
+            sw.Start();
+            for (int i = 0; i < maxDoc; i++)
+            {
+                var doc = reader.Document( i );
+                Field field = doc.GetField( "IDPicture" );
+                string fieldValue = field.StringValue();
+                if (bag.Contains( fieldValue ))
+                {
+                    result[i] = true;
+                }
+            }
+            sw.Stop();
+            log.Warn("PictureIdFilter going over results: " +
sw.ElapsedMilliseconds);
+            return result;
+        }
+    }

The problem with that code is that it takes too much time.. That's why I
tried to filter by DocumentId somehow, but couldn't find the proper ifc.



--
View this message in context: http://lucene.472066.n3.nabble.com/Restrict-Lucene-search-in-concrete-document-ids-tp4013905p4015123.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct 22 14:04:43 2012
Return-Path: <java-user-return-53875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BF791DCCD
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 22 Oct 2012 14:04:43 +0000 (UTC)
Received: (qmail 46667 invoked by uid 500); 22 Oct 2012 14:04:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46611 invoked by uid 500); 22 Oct 2012 14:04:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46577 invoked by uid 99); 22 Oct 2012 14:04:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Oct 2012 14:04:40 +0000
X-ASF-Spam-Status: No, hits=1.3 required=5.0
	tests=SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [89.161.223.23] (HELO v044473.home.net.pl) (89.161.223.23)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 22 Oct 2012 14:04:33 +0000
Received: from 078088007253.bialystok.vectranet.pl [78.88.7.253] (HELO localhost)
 by alud.home.pl [89.161.223.23] with SMTP (IdeaSmtpServer v0.80)
 id cfbfa4a5e6ec375a; Mon, 22 Oct 2012 16:04:12 +0200
Date: Mon, 22 Oct 2012 16:04:11 +0200
From: =?utf-8?Q?Rafa=C5=82_Ku=C4=87?= <r.kuc@solr.pl>
X-Priority: 3 (Normal)
Message-ID: <1961183.20121022160411@alud.com.pl>
To: java-user@lucene.apache.org
Subject: Re: Restrict Lucene search in concrete document ids
In-Reply-To: <1350914290710-4015123.post@n3.nabble.com>
References: <1350376607967-4013905.post@n3.nabble.com> <CAN4YXvfB7vtyNagvpaFAQOiCQhTJqNMishF+FHOTAYv1Q_nPVg@mail.gmail.com> <CAOX4E5GKYnAwVGJQs6m3ks6V+YM=6nzw8qp4tUALHYRSU0Pf6Q@mail.gmail.com> <CAN4YXvcHQMUOBdpBetc1S2Z8xXgpwmAo3M9BLUF3q_Fb7JskGQ@mail.gmail.com> <1350485413353-4014258.post@n3.nabble.com> <CAEY5pxXHOnr8+QTOSDofQ761i_h8Dywcr=yoFxYB5EMbMotxtw@mail.gmail.com> <1350895082501-4015074.post@n3.nabble.com> <CAEY5pxW0t=C9WXSVeTDxQpknHLB_h9nY4U8YcM7AZxNzTNr42g@mail.gmail.com> <1350914290710-4015123.post@n3.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hello!

I think you should ask about Lucene.NET on the proper mailing list
dedicated to it, instead on the current one which is dedicated to Java
version of Lucene.

You can find the proper mailing addresses here: http://lucenenet.apache.org=
/community.html

--=20
Regards,
 Rafa=C5=82 Ku=C4=87
 Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch

> I work with Lucene.Net. , version 2.9
> The code is :

> Searching:
> Filter filter =3D new PictureIdFilter( allowedResources );
> TopDocs docs =3D searcher.Search( boolQuery, filter, documentCount );
> ScoreDoc[] hits =3D docs.scoreDocs;

> And the filter is :

> class PictureIdFilter : Filter
> +    {
> +        ILog log =3D LogManager.GetLogger("PictureIdFilter");
> +        private BitArray bits;
> +
> +        private HashSet<String> bag;
> +
> +        public PictureIdFilter(ResourceKey[] allowedResources)
> +        {
> +            var sw =3D new Stopwatch();
> +            sw.Start();
> +            bag =3D new HashSet<string>(allowedResources.Select(
x=3D>>x.ResourceId.ToString() ));
> +            sw.Stop();
> +            log.Warn("PictureIdFilter hashset create: " +
> sw.ElapsedMilliseconds);
> +        }
> +
> +        public override BitArray Bits(IndexReader reader)
> +        {
> +            var maxDoc =3D reader.MaxDoc();
> +            log.Warn("PictureIdFilter maxdoc: " + maxDoc);
> +            var result =3D new BitArray(maxDoc);
> +            var sw =3D new Stopwatch();
> +            sw.Start();
> +            for (int i =3D 0; i < maxDoc; i++)
> +            {
> +                var doc =3D reader.Document( i );
> +                Field field =3D doc.GetField( "IDPicture" );
> +                string fieldValue =3D field.StringValue();
> +                if (bag.Contains( fieldValue ))
> +                {
> +                    result[i] =3D true;
> +                }
> +            }
> +            sw.Stop();
> +            log.Warn("PictureIdFilter going over results: " +
> sw.ElapsedMilliseconds);
> +            return result;
> +        }
> +    }

> The problem with that code is that it takes too much time.. That's why I
> tried to filter by DocumentId somehow, but couldn't find the proper ifc.



> --
> View this message in context:
> http://lucene.472066.n3.nabble.com/Restrict-Lucene-search-in-concrete-doc=
ument-ids-tp4013905p4015123.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.

> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct 22 14:10:27 2012
Return-Path: <java-user-return-53876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F1B8DDD1E
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 22 Oct 2012 14:10:27 +0000 (UTC)
Received: (qmail 73301 invoked by uid 500); 22 Oct 2012 14:10:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73243 invoked by uid 500); 22 Oct 2012 14:10:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73229 invoked by uid 99); 22 Oct 2012 14:10:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Oct 2012 14:10:25 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-ob0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Oct 2012 14:10:18 +0000
Received: by mail-ob0-f176.google.com with SMTP id x4so2929545obh.35
        for <java-user@lucene.apache.org>; Mon, 22 Oct 2012 07:09:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        bh=yJ2RHi0LVikQv4TWRPjIZO+rrqHsOVSAFk6PWl6cFbU=;
        b=aWsnfYjXCcTR7kMgtlJPI7MjlwKqDeavvz1GX5FFZ22+exgMIkNkwuJBDsRTgbH9WZ
         D7dGXVCSbvlpkOjuHIS1+XBtXlWGLYjn4rynyIJTUREYmYXwXG6NEb6khKDNMwuHLp8u
         xUgPIX+Z4TSebPsPwORKmn11gFfPBGR34R1ZB0KNRryFDXsZ0TpB56uyvC5jha+4fQ6K
         7kcmOu1Ml+oZzslYlT6xPY9b55+LUeUfww2ulVZQs71zB3zxrtkayaSuFUsnYQ3gIUT6
         AefIeGzPUAzr3+RvHJ02aQ1XdDzdX7OuQfaKSb8ftQccFlCQAUKpLAppeUBMOwgmtkYL
         uvoA==
Received: by 10.182.89.42 with SMTP id bl10mr7066212obb.27.1350914997505; Mon,
 22 Oct 2012 07:09:57 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.76.24.227 with HTTP; Mon, 22 Oct 2012 07:09:36 -0700 (PDT)
In-Reply-To: <1961183.20121022160411@alud.com.pl>
References: <1350376607967-4013905.post@n3.nabble.com> <CAN4YXvfB7vtyNagvpaFAQOiCQhTJqNMishF+FHOTAYv1Q_nPVg@mail.gmail.com>
 <CAOX4E5GKYnAwVGJQs6m3ks6V+YM=6nzw8qp4tUALHYRSU0Pf6Q@mail.gmail.com>
 <CAN4YXvcHQMUOBdpBetc1S2Z8xXgpwmAo3M9BLUF3q_Fb7JskGQ@mail.gmail.com>
 <1350485413353-4014258.post@n3.nabble.com> <CAEY5pxXHOnr8+QTOSDofQ761i_h8Dywcr=yoFxYB5EMbMotxtw@mail.gmail.com>
 <1350895082501-4015074.post@n3.nabble.com> <CAEY5pxW0t=C9WXSVeTDxQpknHLB_h9nY4U8YcM7AZxNzTNr42g@mail.gmail.com>
 <1350914290710-4015123.post@n3.nabble.com> <1961183.20121022160411@alud.com.pl>
From: Ian Lea <ian.lea@gmail.com>
Date: Mon, 22 Oct 2012 15:09:36 +0100
Message-ID: <CAEY5pxXiGS-vG9wqUSC4o_kO+adM7eyRG0nGAyfO9AmvyCex2A@mail.gmail.com>
Subject: Re: Restrict Lucene search in concrete document ids
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Good advice.  But glancing at the code you posted, you appear to be
examining every document in your index to see if the value of one
field is contained in a HashSet.  No wonder it's slow.  Lucene, on the
other hand, is very quick at finding docs that contains particular
values.

Why aren't you using a normal query to find these matching docs?  If
you then want to use that as a filter, use QueryWrapperFilter.


--
Ian.


On Mon, Oct 22, 2012 at 3:04 PM, Rafa=C5=82 Ku=C4=87 <r.kuc@solr.pl> wrote:
> Hello!
>
> I think you should ask about Lucene.NET on the proper mailing list
> dedicated to it, instead on the current one which is dedicated to Java
> version of Lucene.
>
> You can find the proper mailing addresses here: http://lucenenet.apache.o=
rg/community.html
>
> --
> Regards,
>  Rafa=C5=82 Ku=C4=87
>  Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
>
>> I work with Lucene.Net. , version 2.9
>> The code is :
>
>> Searching:
>> Filter filter =3D new PictureIdFilter( allowedResources );
>> TopDocs docs =3D searcher.Search( boolQuery, filter, documentCount );
>> ScoreDoc[] hits =3D docs.scoreDocs;
>
>> And the filter is :
>
>> class PictureIdFilter : Filter
>> +    {
>> +        ILog log =3D LogManager.GetLogger("PictureIdFilter");
>> +        private BitArray bits;
>> +
>> +        private HashSet<String> bag;
>> +
>> +        public PictureIdFilter(ResourceKey[] allowedResources)
>> +        {
>> +            var sw =3D new Stopwatch();
>> +            sw.Start();
>> +            bag =3D new HashSet<string>(allowedResources.Select(
> x=3D>>x.ResourceId.ToString() ));
>> +            sw.Stop();
>> +            log.Warn("PictureIdFilter hashset create: " +
>> sw.ElapsedMilliseconds);
>> +        }
>> +
>> +        public override BitArray Bits(IndexReader reader)
>> +        {
>> +            var maxDoc =3D reader.MaxDoc();
>> +            log.Warn("PictureIdFilter maxdoc: " + maxDoc);
>> +            var result =3D new BitArray(maxDoc);
>> +            var sw =3D new Stopwatch();
>> +            sw.Start();
>> +            for (int i =3D 0; i < maxDoc; i++)
>> +            {
>> +                var doc =3D reader.Document( i );
>> +                Field field =3D doc.GetField( "IDPicture" );
>> +                string fieldValue =3D field.StringValue();
>> +                if (bag.Contains( fieldValue ))
>> +                {
>> +                    result[i] =3D true;
>> +                }
>> +            }
>> +            sw.Stop();
>> +            log.Warn("PictureIdFilter going over results: " +
>> sw.ElapsedMilliseconds);
>> +            return result;
>> +        }
>> +    }
>
>> The problem with that code is that it takes too much time.. That's why I
>> tried to filter by DocumentId somehow, but couldn't find the proper ifc.
>
>
>
>> --
>> View this message in context:
>> http://lucene.472066.n3.nabble.com/Restrict-Lucene-search-in-concrete-do=
cument-ids-tp4013905p4015123.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct 22 14:17:10 2012
Return-Path: <java-user-return-53877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 29A8FDD59
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 22 Oct 2012 14:17:10 +0000 (UTC)
Received: (qmail 2215 invoked by uid 500); 22 Oct 2012 14:17:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2072 invoked by uid 500); 22 Oct 2012 14:17:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2046 invoked by uid 99); 22 Oct 2012 14:17:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Oct 2012 14:17:06 +0000
X-ASF-Spam-Status: No, hits=3.0 required=5.0
	tests=FORGED_YAHOO_RCVD,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Oct 2012 14:16:58 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <sxamt@yahoo.com>)
	id 1TQIo1-0008K2-B4
	for java-user@lucene.apache.org; Mon, 22 Oct 2012 07:16:37 -0700
Date: Mon, 22 Oct 2012 07:16:37 -0700 (PDT)
From: sxam <sxamt@yahoo.com>
To: java-user@lucene.apache.org
Message-ID: <1350915397335-4015138.post@n3.nabble.com>
In-Reply-To: <CAEY5pxXiGS-vG9wqUSC4o_kO+adM7eyRG0nGAyfO9AmvyCex2A@mail.gmail.com>
References: <CAN4YXvfB7vtyNagvpaFAQOiCQhTJqNMishF+FHOTAYv1Q_nPVg@mail.gmail.com> <CAOX4E5GKYnAwVGJQs6m3ks6V+YM=6nzw8qp4tUALHYRSU0Pf6Q@mail.gmail.com> <CAN4YXvcHQMUOBdpBetc1S2Z8xXgpwmAo3M9BLUF3q_Fb7JskGQ@mail.gmail.com> <1350485413353-4014258.post@n3.nabble.com> <CAEY5pxXHOnr8+QTOSDofQ761i_h8Dywcr=yoFxYB5EMbMotxtw@mail.gmail.com> <1350895082501-4015074.post@n3.nabble.com> <CAEY5pxW0t=C9WXSVeTDxQpknHLB_h9nY4U8YcM7AZxNzTNr42g@mail.gmail.com> <1350914290710-4015123.post@n3.nabble.com> <1961183.20121022160411@alud.com.pl> <CAEY5pxXiGS-vG9wqUSC4o_kO+adM7eyRG0nGAyfO9AmvyCex2A@mail.gmail.com>
Subject: Re: Restrict Lucene search in concrete document ids
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Because that was still way too slow and I am looking whether I can use this
information that I got (document Ids) to speed things up...



--
View this message in context: http://lucene.472066.n3.nabble.com/Restrict-Lucene-search-in-concrete-document-ids-tp4013905p4015138.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct 22 19:23:46 2012
Return-Path: <java-user-return-53878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 506EED720
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 22 Oct 2012 19:23:46 +0000 (UTC)
Received: (qmail 12070 invoked by uid 500); 22 Oct 2012 19:23:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12009 invoked by uid 500); 22 Oct 2012 19:23:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12000 invoked by uid 99); 22 Oct 2012 19:23:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Oct 2012 19:23:44 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spotter@gmail.com designates 209.85.223.176 as permitted sender)
Received: from [209.85.223.176] (HELO mail-ie0-f176.google.com) (209.85.223.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Oct 2012 19:23:36 +0000
Received: by mail-ie0-f176.google.com with SMTP id k11so4799539iea.35
        for <java-user@lucene.apache.org>; Mon, 22 Oct 2012 12:23:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding;
        bh=3qVjEiR5J2gp1apZq6HZgLJXNjf7bciBJ0xLnpVkoU8=;
        b=DR2a4wqHZkHsoY4ubJph//xOz8S+LHgk8J5muLLpUM1D4t/IgUCBz4go6izmLS4T1d
         ZPBKkFM5zJe4I4YgEV8cthlJ62FukCxvw3hktf3p/vA4GcEn88PZhKFwoPALFD6pweTX
         4QheEdih6sPykF3IKDVQSI/rR2SjInZIs5RuJBI+pmnPmE/+TUds2roU/GQ/yX/JG2mK
         KG6713/wFTtPrDUVzly8LgweD+ay1nuUkFs8SfaL06hmEyhdJ347s2Q5MOdyWYshrGNb
         5HbxfsIZRUaYFVVnfhl3hM/qd7P13NMhDI0OJHhpMzMdO3jSc6Ua+AZnb7aBgFZJ1eFW
         pIIA==
Received: by 10.50.149.234 with SMTP id ud10mr10280988igb.12.1350933795603;
        Mon, 22 Oct 2012 12:23:15 -0700 (PDT)
Received: from [192.168.0.102] (user-1087p1o.cable.mindspring.com. [64.131.228.56])
        by mx.google.com with ESMTPS id 10sm23161308ign.5.2012.10.22.12.23.14
        (version=SSLv3 cipher=OTHER);
        Mon, 22 Oct 2012 12:23:14 -0700 (PDT)
Message-ID: <50859D20.2090806@gmail.com>
Date: Mon, 22 Oct 2012 15:23:12 -0400
From: Shaya Potter <spotter@gmail.com>
User-Agent: Mozilla/5.0 (X11; Linux i686; rv:16.0) Gecko/20121011 Thunderbird/16.0.1
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: understanding the need to reindex a document
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

so there are lots of Qs that are asked about wanting to modify a lucene 
document (i.e. remove fields, add fields....) but are told that one 
needs to reindex.

No one ever answers the technical Q of why this is, and I'm interested 
in that.  presumambly because documents aren't stored as documents or 
even in any form that could be reassembled into a document, but I'm 
interested in what the actual answer is.

thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct 22 19:44:17 2012
Return-Path: <java-user-return-53879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 804D7D7C2
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 22 Oct 2012 19:44:17 +0000 (UTC)
Received: (qmail 89514 invoked by uid 500); 22 Oct 2012 19:44:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89458 invoked by uid 500); 22 Oct 2012 19:44:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89450 invoked by uid 99); 22 Oct 2012 19:44:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Oct 2012 19:44:15 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of xekoukou@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-ob0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Oct 2012 19:44:09 +0000
Received: by mail-ob0-f176.google.com with SMTP id x4so3377035obh.35
        for <java-user@lucene.apache.org>; Mon, 22 Oct 2012 12:43:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=dc5YZQIrHEBDBhBoGlW6j/k/bVUdDgo3zd93OsFKlVc=;
        b=r84PjMivT8roqCKfltIsOWgOhmyDTH0656uyD9tgLhEAoKBP2PhSV/71Z3ePj5INVk
         KKN4pb+elRuKjadGGw3nefWIKehwf9pXm4MQ19cTP1b7C4PHFGUttexw7SXK1b11NaJX
         kU17sF7rAseCSdfa5f0H68JB56mhuCKclMurF6H1+WCqfn+O1C1vvz4Zxw6H3QCRWdof
         /GHLrwnYyKcrBIgFOE/Z7T0XbwLiXk2P61JNBO8Y2yAwdIdMAG8F2vx9BnBReZzqaQYl
         0lyXcHoJ165ztbP/GcVZpn4N3s3gS+Pbeke2iePytNsCIul2HzBYJTLRiG/4KNztyqJo
         CFwg==
MIME-Version: 1.0
Received: by 10.182.54.103 with SMTP id i7mr7910313obp.62.1350935028833; Mon,
 22 Oct 2012 12:43:48 -0700 (PDT)
Received: by 10.60.171.171 with HTTP; Mon, 22 Oct 2012 12:43:48 -0700 (PDT)
In-Reply-To: <50859D20.2090806@gmail.com>
References: <50859D20.2090806@gmail.com>
Date: Mon, 22 Oct 2012 22:43:48 +0300
Message-ID: <CAOX4E5HTpz7dee9akVnS+Zaom-9pMSmM=Q5OCs2-P+gqHb3kRw@mail.gmail.com>
Subject: Re: understanding the need to reindex a document
From: Apostolis Xekoukoulotakis <xekoukou@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=14dae93a113d821f2b04ccab1277
X-Virus-Checked: Checked by ClamAV on apache.org

--14dae93a113d821f2b04ccab1277
Content-Type: text/plain; charset=ISO-8859-1

I am not that familiar with Lucene, so my answer may be a bit off.

Search on the internet about log structured storage. There you will find
why rewriting an entry is better than updating an existing entry.

Leveldb/cassandra/bigTable use it. maybe search these terms as well.

2012/10/22 Shaya Potter <spotter@gmail.com>

> so there are lots of Qs that are asked about wanting to modify a lucene
> document (i.e. remove fields, add fields....) but are told that one needs
> to reindex.
>
> No one ever answers the technical Q of why this is, and I'm interested in
> that.  presumambly because documents aren't stored as documents or even in
> any form that could be reassembled into a document, but I'm interested in
> what the actual answer is.
>
> thanks.
>
> ------------------------------**------------------------------**---------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.**apache.org<java-user-unsubscribe@lucene.apache.org>
> For additional commands, e-mail: java-user-help@lucene.apache.**org<java-user-help@lucene.apache.org>
>
>


-- 


Sincerely yours,

     Apostolis Xekoukoulotakis

--14dae93a113d821f2b04ccab1277--

From java-user-return-53880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct 22 19:48:31 2012
Return-Path: <java-user-return-53880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9CE53D7E6
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 22 Oct 2012 19:48:31 +0000 (UTC)
Received: (qmail 3363 invoked by uid 500); 22 Oct 2012 19:48:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3318 invoked by uid 500); 22 Oct 2012 19:48:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3310 invoked by uid 99); 22 Oct 2012 19:48:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Oct 2012 19:48:29 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spotter@gmail.com designates 209.85.223.176 as permitted sender)
Received: from [209.85.223.176] (HELO mail-ie0-f176.google.com) (209.85.223.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Oct 2012 19:48:21 +0000
Received: by mail-ie0-f176.google.com with SMTP id k11so4844760iea.35
        for <java-user@lucene.apache.org>; Mon, 22 Oct 2012 12:48:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        bh=OxtULwRtoAEXYrGuFZX+oPR2xfh2Ai7+BLLoV5iDygk=;
        b=wJv3hV2Q7L5owQj7UQbxyrEubolxp25OhdSROC+QeWF+6eYIkotzvr9QjWdKvwTQLz
         iKoJqtvKN8VoSc8Ez1H+BG/vxzzlqPAyPsm7MKyqhjkPeJmED+hJRs8Lw7bCE3psJcsd
         tQXG97CRn18M7yL7KgWy0+PJ5uOEkVMxdLYiUww+XCshPVb1KjG7g7j9EHFfyEwFUV3d
         Ai9x/pSXpJdK+4Tbw3Gy/Hg8vtIFPaZt2WJhLwfhx2G2cwKENOy3hWp0zAa9iYMa6qpe
         uw1PbhrlBonhakt5kBbCSWgVjFvIAy7Tt2Q1snbaAU6Lay65m66ghI+O5pKy4EZ8go8e
         GxNA==
Received: by 10.43.7.132 with SMTP id oo4mr8744243icb.6.1350935280439;
        Mon, 22 Oct 2012 12:48:00 -0700 (PDT)
Received: from [192.168.0.102] (user-1087p1o.cable.mindspring.com. [64.131.228.56])
        by mx.google.com with ESMTPS id d19sm23204659igp.6.2012.10.22.12.47.58
        (version=SSLv3 cipher=OTHER);
        Mon, 22 Oct 2012 12:47:59 -0700 (PDT)
Message-ID: <5085A2ED.4080800@gmail.com>
Date: Mon, 22 Oct 2012 15:47:57 -0400
From: Shaya Potter <spotter@gmail.com>
User-Agent: Mozilla/5.0 (X11; Linux i686; rv:16.0) Gecko/20121011 Thunderbird/16.0.1
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: understanding the need to reindex a document
References: <50859D20.2090806@gmail.com> <CAOX4E5HTpz7dee9akVnS+Zaom-9pMSmM=Q5OCs2-P+gqHb3kRw@mail.gmail.com>
In-Reply-To: <CAOX4E5HTpz7dee9akVnS+Zaom-9pMSmM=Q5OCs2-P+gqHb3kRw@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I can understand that (i.e. why in place wont work), but the Q would be, 
why one can't read in a document, add() or removeField() that document 
and then updateDocument() that document.

On 10/22/2012 03:43 PM, Apostolis Xekoukoulotakis wrote:
> I am not that familiar with Lucene, so my answer may be a bit off.
>
> Search on the internet about log structured storage. There you will find
> why rewriting an entry is better than updating an existing entry.
>
> Leveldb/cassandra/bigTable use it. maybe search these terms as well.
>
> 2012/10/22 Shaya Potter <spotter@gmail.com>
>
>> so there are lots of Qs that are asked about wanting to modify a lucene
>> document (i.e. remove fields, add fields....) but are told that one needs
>> to reindex.
>>
>> No one ever answers the technical Q of why this is, and I'm interested in
>> that.  presumambly because documents aren't stored as documents or even in
>> any form that could be reassembled into a document, but I'm interested in
>> what the actual answer is.
>>
>> thanks.
>>
>> ------------------------------**------------------------------**---------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.**apache.org<java-user-unsubscribe@lucene.apache.org>
>> For additional commands, e-mail: java-user-help@lucene.apache.**org<java-user-help@lucene.apache.org>
>>
>>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct 22 19:55:08 2012
Return-Path: <java-user-return-53881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A2502D80D
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 22 Oct 2012 19:55:08 +0000 (UTC)
Received: (qmail 27277 invoked by uid 500); 22 Oct 2012 19:55:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27215 invoked by uid 500); 22 Oct 2012 19:55:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27207 invoked by uid 99); 22 Oct 2012 19:55:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Oct 2012 19:55:06 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of xekoukou@gmail.com designates 209.85.219.48 as permitted sender)
Received: from [209.85.219.48] (HELO mail-oa0-f48.google.com) (209.85.219.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Oct 2012 19:55:01 +0000
Received: by mail-oa0-f48.google.com with SMTP id h2so3421468oag.35
        for <java-user@lucene.apache.org>; Mon, 22 Oct 2012 12:54:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=vFeD27hM7K7DsGCRHB4IEEU4WyjRNhLcnFP7cFBEjNc=;
        b=dmc+mq8luzRLqXgJPPniDR9fKGsYdAQAplRHgQT3hoIZSXEQ2SqxUNdGWKQUCRZBw9
         NqXyDJeIQg+mPzs/RR7ctV2CRnNOnyUPCodDc1lZc0e7GTXJcn25FVD1PzAnY58Ji2NG
         DAuHeWr90GHmOb+ieK0YBrjfFWTM+mQs+Ik+fWIQM/L4O8rGcRj84fW1Zhl+ejBlWcHS
         golCw+G6eRnnLFPJtwQ5Rh/GBGcz6Hk6JigY62qdr1L74NjT7C1FtvKoLFI9uqrjAVPm
         vpQZYO6YV/eWAKFet5SxcMUCdnudzC4FCfEVTRIUlANYEV546VD3oIsKQfaD4XqiTr/K
         +xQw==
MIME-Version: 1.0
Received: by 10.182.212.70 with SMTP id ni6mr8091779obc.44.1350935680673; Mon,
 22 Oct 2012 12:54:40 -0700 (PDT)
Received: by 10.60.171.171 with HTTP; Mon, 22 Oct 2012 12:54:40 -0700 (PDT)
In-Reply-To: <5085A2ED.4080800@gmail.com>
References: <50859D20.2090806@gmail.com>
	<CAOX4E5HTpz7dee9akVnS+Zaom-9pMSmM=Q5OCs2-P+gqHb3kRw@mail.gmail.com>
	<5085A2ED.4080800@gmail.com>
Date: Mon, 22 Oct 2012 22:54:40 +0300
Message-ID: <CAOX4E5HiD0Lp9ebWAibd0472KoM4vaZxc4ThWg543yU2nejmVA@mail.gmail.com>
Subject: Re: understanding the need to reindex a document
From: Apostolis Xekoukoulotakis <xekoukou@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=e89a8f50395e5c690604ccab39bd
X-Virus-Checked: Checked by ClamAV on apache.org

--e89a8f50395e5c690604ccab39bd
Content-Type: text/plain; charset=ISO-8859-1

I cant answer you that. But even if it is feasible, maybe the answer is
that noone really needed it.

2012/10/22 Shaya Potter <spotter@gmail.com>

> I can understand that (i.e. why in place wont work), but the Q would be,
> why one can't read in a document, add() or removeField() that document and
> then updateDocument() that document.
>
>
> On 10/22/2012 03:43 PM, Apostolis Xekoukoulotakis wrote:
>
>> I am not that familiar with Lucene, so my answer may be a bit off.
>>
>> Search on the internet about log structured storage. There you will find
>> why rewriting an entry is better than updating an existing entry.
>>
>> Leveldb/cassandra/bigTable use it. maybe search these terms as well.
>>
>> 2012/10/22 Shaya Potter <spotter@gmail.com>
>>
>>  so there are lots of Qs that are asked about wanting to modify a lucene
>>> document (i.e. remove fields, add fields....) but are told that one needs
>>> to reindex.
>>>
>>> No one ever answers the technical Q of why this is, and I'm interested in
>>> that.  presumambly because documents aren't stored as documents or even
>>> in
>>> any form that could be reassembled into a document, but I'm interested in
>>> what the actual answer is.
>>>
>>> thanks.
>>>
>>> ------------------------------****----------------------------**
>>> --**---------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.****apache.org<
>>> java-user-**unsubscribe@lucene.apache.org<java-user-unsubscribe@lucene.apache.org>
>>> >
>>> For additional commands, e-mail: java-user-help@lucene.apache.****org<
>>> java-user-help@lucene.**apache.org <java-user-help@lucene.apache.org>>
>>>
>>>
>>>
>>
>>
> ------------------------------**------------------------------**---------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.**apache.org<java-user-unsubscribe@lucene.apache.org>
> For additional commands, e-mail: java-user-help@lucene.apache.**org<java-user-help@lucene.apache.org>
>
>


-- 


Sincerely yours,

     Apostolis Xekoukoulotakis

--e89a8f50395e5c690604ccab39bd--

From java-user-return-53882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct 22 19:56:33 2012
Return-Path: <java-user-return-53882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 623EED828
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 22 Oct 2012 19:56:33 +0000 (UTC)
Received: (qmail 37272 invoked by uid 500); 22 Oct 2012 19:56:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37189 invoked by uid 500); 22 Oct 2012 19:56:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37181 invoked by uid 99); 22 Oct 2012 19:56:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Oct 2012 19:56:31 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [89.161.223.23] (HELO v044473.home.net.pl) (89.161.223.23)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 22 Oct 2012 19:56:25 +0000
Received: from 078088007253.bialystok.vectranet.pl [78.88.7.253] (HELO localhost)
 by alud.home.pl [89.161.223.23] with SMTP (IdeaSmtpServer v0.80)
 id 25c5aa7f58e9ee09; Mon, 22 Oct 2012 21:56:02 +0200
Date: Mon, 22 Oct 2012 21:56:00 +0200
From: =?utf-8?Q?Rafa=C5=82_Ku=C4=87?= <r.kuc@solr.pl>
X-Priority: 3 (Normal)
Message-ID: <1213768112.20121022215600@alud.com.pl>
To: java-user@lucene.apache.org
Subject: Re: understanding the need to reindex a document
In-Reply-To: <5085A2ED.4080800@gmail.com>
References: <50859D20.2090806@gmail.com> <CAOX4E5HTpz7dee9akVnS+Zaom-9pMSmM=Q5OCs2-P+gqHb3kRw@mail.gmail.com> <5085A2ED.4080800@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=windows-1250
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hello!

This is because how the Lucene inverted index works and the amount of
changes that would have to be done. However there is a work in
progress issue - https://issues.apache.org/jira/browse/LUCENE-3837
There is some technical information there, so you may want to check
it.

--=20
Regards,
 Rafa=B3 Ku=E6
 Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch

> I can understand that (i.e. why in place wont work), but the Q would be,
> why one can't read in a document, add() or removeField() that document
> and then updateDocument() that document.

> On 10/22/2012 03:43 PM, Apostolis Xekoukoulotakis wrote:
>> I am not that familiar with Lucene, so my answer may be a bit off.
>>
>> Search on the internet about log structured storage. There you will find
>> why rewriting an entry is better than updating an existing entry.
>>
>> Leveldb/cassandra/bigTable use it. maybe search these terms as well.
>>
>> 2012/10/22 Shaya Potter <spotter@gmail.com>
>>
>>> so there are lots of Qs that are asked about wanting to modify a lucene
>>> document (i.e. remove fields, add fields....) but are told that one nee=
ds
>>> to reindex.
>>>
>>> No one ever answers the technical Q of why this is, and I'm interested =
in
>>> that.  presumambly because documents aren't stored as documents or even=
 in
>>> any form that could be reassembled into a document, but I'm interested =
in
>>> what the actual answer is.
>>>
>>> thanks.
>>>
>>> ------------------------------**------------------------------**-------=
--
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.**apache.org<java-=
user-unsubscribe@lucene.apache.org>
>>> For additional commands, e-mail: java-user-help@lucene.apache.**org<jav=
a-user-help@lucene.apache.org>
>>>
>>>
>>
>>

> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct 22 20:00:14 2012
Return-Path: <java-user-return-53883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AB060D846
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 22 Oct 2012 20:00:14 +0000 (UTC)
Received: (qmail 45262 invoked by uid 500); 22 Oct 2012 20:00:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45122 invoked by uid 500); 22 Oct 2012 20:00:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45114 invoked by uid 99); 22 Oct 2012 20:00:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Oct 2012 20:00:12 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of SRS0=Je8Ao9=IT=basetechnology.com=jack@yourhostingaccount.com designates 65.254.254.66 as permitted sender)
Received: from [65.254.254.66] (HELO mailout04.yourhostingaccount.com) (65.254.254.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Oct 2012 20:00:05 +0000
Received: from mailscan16.yourhostingaccount.com ([10.1.15.16] helo=mailscan16.yourhostingaccount.com)
	by mailout04.yourhostingaccount.com with esmtp (Exim)
	id 1TQOA4-0005yV-Cb
	for java-user@lucene.apache.org; Mon, 22 Oct 2012 15:59:44 -0400
Received: from impout02.yourhostingaccount.com ([10.1.55.2] helo=impout02.yourhostingaccount.com)
	by mailscan16.yourhostingaccount.com with esmtp (Exim)
	id 1TQOA3-0000NF-RX
	for java-user@lucene.apache.org; Mon, 22 Oct 2012 15:59:44 -0400
Received: from authsmtp09.yourhostingaccount.com ([10.1.18.9])
	by impout02.yourhostingaccount.com with NO UCE
	id EKzj1k0090BkWne01Kzjzf; Mon, 22 Oct 2012 15:59:43 -0400
X-Authority-Analysis: v=2.0 cv=HIVB5/Rv c=1 sm=1
 a=PHQHB1QSaEYgcU2qnZkzMw==:17 a=aQzbgH187woA:10 a=6dLva2aqwuQA:10
 a=3jZET7lWBKwA:10 a=8nJEP1OIZ-IA:10 a=jvYhGVW7AAAA:8 a=TMl_aYNz_yQA:10
 a=mV9VRH-2AAAA:8 a=pGLkceISAAAA:8 a=6RUfnnJspCiH0zFOUhIA:9 a=wPNLvfGTeEIA:10
 a=MSl-tDqOz04A:10 a=88iI8knYSJUA:10 a=6Nsp9XPxgQEopsMv/m97rg==:117
X-EN-OrigOutIP: 10.1.18.9
X-EN-IMPSID: EKzj1k0090BkWne01Kzjzf
Received: from 207-237-102-116.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com ([207.237.102.116] helo=JackKrupansky)
	by authsmtp09.yourhostingaccount.com with esmtpa (Exim)
	id 1TQOA3-0001jw-3Z
	for java-user@lucene.apache.org; Mon, 22 Oct 2012 15:59:43 -0400
Message-ID: <66CD4792CDD446FF9FA1EE8DC3D644DB@JackKrupansky>
From: "Jack Krupansky" <jack@basetechnology.com>
To: <java-user@lucene.apache.org>
References: <50859D20.2090806@gmail.com> <CAOX4E5HTpz7dee9akVnS+Zaom-9pMSmM=Q5OCs2-P+gqHb3kRw@mail.gmail.com> <5085A2ED.4080800@gmail.com>
In-Reply-To: <5085A2ED.4080800@gmail.com>
Subject: Re: understanding the need to reindex a document
Date: Mon, 22 Oct 2012 15:59:40 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3555.308
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3555.308
X-EN-UserInfo: e0a4b55451ed9f27313ebf02e3d4348d:fc4a93e1349e680c52bdd723c0ab3ef6
X-EN-AuthUser: jack@basetechnology.com
Sender:  "Jack Krupansky" <jack@basetechnology.com>
X-EN-OrigIP: 207.237.102.116
X-EN-OrigHost: 207-237-102-116.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com
X-Virus-Checked: Checked by ClamAV on apache.org

You can in fact add fields. And you can remove the value of a field for a 
single document. Both can be done by simply re-adding the document with the 
same unique key value. But that won't add that field to other or all 
documents, or remove the value of that field for all other documents.

Re-indexing is usually required when you change the type of a field, its 
attributes, or its analyzer.

The primary difficulty with automatically re-indexing from the index itself 
is that Lucene does not require all fields to be "stored". So, replacing a 
document means you need to have an external source for all non-stored 
fields, or at least non-stored fields which are not copied from another 
field which is stored.

-- Jack Krupansky

-----Original Message----- 
From: Shaya Potter
Sent: Monday, October 22, 2012 3:47 PM
To: java-user@lucene.apache.org
Subject: Re: understanding the need to reindex a document

I can understand that (i.e. why in place wont work), but the Q would be,
why one can't read in a document, add() or removeField() that document
and then updateDocument() that document.

On 10/22/2012 03:43 PM, Apostolis Xekoukoulotakis wrote:
> I am not that familiar with Lucene, so my answer may be a bit off.
>
> Search on the internet about log structured storage. There you will find
> why rewriting an entry is better than updating an existing entry.
>
> Leveldb/cassandra/bigTable use it. maybe search these terms as well.
>
> 2012/10/22 Shaya Potter <spotter@gmail.com>
>
>> so there are lots of Qs that are asked about wanting to modify a lucene
>> document (i.e. remove fields, add fields....) but are told that one needs
>> to reindex.
>>
>> No one ever answers the technical Q of why this is, and I'm interested in
>> that.  presumambly because documents aren't stored as documents or even 
>> in
>> any form that could be reassembled into a document, but I'm interested in
>> what the actual answer is.
>>
>> thanks.
>>
>> ------------------------------**------------------------------**---------
>> To unsubscribe, e-mail: 
>> java-user-unsubscribe@lucene.**apache.org<java-user-unsubscribe@lucene.apache.org>
>> For additional commands, e-mail: 
>> java-user-help@lucene.apache.**org<java-user-help@lucene.apache.org>
>>
>>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct 22 21:26:11 2012
Return-Path: <java-user-return-53884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C22AAD899
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 22 Oct 2012 21:26:11 +0000 (UTC)
Received: (qmail 10613 invoked by uid 500); 22 Oct 2012 21:26:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10564 invoked by uid 500); 22 Oct 2012 21:26:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10555 invoked by uid 99); 22 Oct 2012 21:26:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Oct 2012 21:26:09 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of siraj@jobdiva.com designates 64.147.106.2 as permitted sender)
Received: from [64.147.106.2] (HELO mail.jobdiva.com) (64.147.106.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Oct 2012 21:26:03 +0000
Received: from JOBDIVAEXMB1.jobdiva.local ([::1]) by jobdivaexf.jobdiva.local
 ([::1]) with mapi; Mon, 22 Oct 2012 17:25:40 -0400
From: Siraj Haider <siraj@jobdiva.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 22 Oct 2012 17:25:38 -0400
Subject: Scoring based on document
Thread-Topic: Scoring based on document
Thread-Index: Ac2wm8fIWW7Z+ZZdS5yRwTO+/kaAiQ==
Message-ID: <7276923E6E5AA04C97876BF29FF86716E071A7C4@jobdivaexmb1.jobdiva.local>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_7276923E6E5AA04C97876BF29FF86716E071A7C4jobdivaexmb1job_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_7276923E6E5AA04C97876BF29FF86716E071A7C4jobdivaexmb1job_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I am using DefaultSimilarity and did not boost any field while indexing. My=
 index is comprised of the following fields:

-          Title

-          Author

-          Bookname

-          Description

All of the 4 fields are indexed and can be searched on by the user. Now let=
's say the user searches for "oracle" in Title field, the score is computed=
 based on the Title field only, and its disregarding the frequency of the t=
erm "oracle" in other fields. It might be like that by design but I need to=
 change it so that the documents are ranked based on the frequency in the w=
hole document and not based on the field searches. Please help!

Thanks in advance
-Siraj


________________________________
This electronic mail message and any attachments may contain information wh=
ich is privileged, sensitive and/or otherwise exempt from disclosure under =
applicable law. The information is intended only for the use of the individ=
ual or entity named as the addressee above. If you are not the intended rec=
ipient, you are hereby notified that any disclosure, copying, distribution =
(electronic or otherwise) or forwarding of, or the taking of any action in =
reliance on, the contents of this transmission is strictly prohibited. If y=
ou have received this electronic transmission in error, please notify us by=
 telephone, facsimile, or e-mail as noted above to arrange for the return o=
f any electronic mail or attachments. Thank You.

--_000_7276923E6E5AA04C97876BF29FF86716E071A7C4jobdivaexmb1job_--

From java-user-return-53885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct 23 07:51:57 2012
Return-Path: <java-user-return-53885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 657C3D697
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 23 Oct 2012 07:51:57 +0000 (UTC)
Received: (qmail 70854 invoked by uid 500); 23 Oct 2012 07:51:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70464 invoked by uid 500); 23 Oct 2012 07:51:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70340 invoked by uid 99); 23 Oct 2012 07:51:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Oct 2012 07:51:49 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@gmail.com designates 209.85.219.48 as permitted sender)
Received: from [209.85.219.48] (HELO mail-oa0-f48.google.com) (209.85.219.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Oct 2012 07:51:42 +0000
Received: by mail-oa0-f48.google.com with SMTP id h2so3942416oag.35
        for <java-user@lucene.apache.org>; Tue, 23 Oct 2012 00:51:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        bh=PyNE++R0YR5NXTvCr5VrBUIe5ul8qFRvtklOkR1QnA4=;
        b=ItWIAdH5QCkOfRRuE+s+gvrg9WQY097ESQFrl7ElVLCjtC+5VG/XofUCrUIDqXqu0P
         869cZ68l4lhcePO7EY/2xUZFTZXWOZdl3qaN09JLZ+YnaNU2q80aRX4qReSoOQlT05nz
         8DRtacBkvuExxt07f12FbgxgD+s1y4fFpL9h4TPj6HLt/z5j94fM8caEDMz4OBD8jx1c
         pm8U3BTpvQpaMQ29+pS1mMYerDHHFqcuAxr8Iw30urwSwYLz2wtHLl/ysSYk/MIynKuH
         rFefE91Gya4TRgnU9mypMfbSgNoKenmOu+IUW1wW7gZJH8h9LddJDWCVcG4vPLRj7whe
         B0Og==
MIME-Version: 1.0
Received: by 10.60.27.36 with SMTP id q4mr10515378oeg.111.1350978681523; Tue,
 23 Oct 2012 00:51:21 -0700 (PDT)
Received: by 10.60.11.72 with HTTP; Tue, 23 Oct 2012 00:51:21 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <7276923E6E5AA04C97876BF29FF86716E071A7C4@jobdivaexmb1.jobdiva.local>
References: <7276923E6E5AA04C97876BF29FF86716E071A7C4@jobdivaexmb1.jobdiva.local>
Date: Tue, 23 Oct 2012 09:51:21 +0200
Message-ID: <CAAHmpkgOsAbCkXYc+vY5WXVtuPexn_X0HD_E4SUtD372a4txfA@mail.gmail.com>
Subject: Re: Scoring based on document
From: Simon Willnauer <simon.willnauer@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

hey there,


in Lucene 4 you can override the termStatistics / CollectionStatistics
used for scoring in the IndexSearcher. You can take multiple fields
into account here in order use it for scoring. Here is the javadoc
link:

http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/IndexSear=
cher.html#termStatistics(org.apache.lucene.index.Term,
org.apache.lucene.index.TermContext)
http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/IndexSear=
cher.html#collectionStatistics(java.lang.String)


simon
On Mon, Oct 22, 2012 at 11:25 PM, Siraj Haider <siraj@jobdiva.com> wrote:
> I am using DefaultSimilarity and did not boost any field while indexing. =
My index is comprised of the following fields:
>
> -          Title
>
> -          Author
>
> -          Bookname
>
> -          Description
>
> All of the 4 fields are indexed and can be searched on by the user. Now l=
et's say the user searches for "oracle" in Title field, the score is comput=
ed based on the Title field only, and its disregarding the frequency of the=
 term "oracle" in other fields. It might be like that by design but I need =
to change it so that the documents are ranked based on the frequency in the=
 whole document and not based on the field searches. Please help!
>
> Thanks in advance
> -Siraj
>
>
> ________________________________
> This electronic mail message and any attachments may contain information =
which is privileged, sensitive and/or otherwise exempt from disclosure unde=
r applicable law. The information is intended only for the use of the indiv=
idual or entity named as the addressee above. If you are not the intended r=
ecipient, you are hereby notified that any disclosure, copying, distributio=
n (electronic or otherwise) or forwarding of, or the taking of any action i=
n reliance on, the contents of this transmission is strictly prohibited. If=
 you have received this electronic transmission in error, please notify us =
by telephone, facsimile, or e-mail as noted above to arrange for the return=
 of any electronic mail or attachments. Thank You.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct 23 14:18:50 2012
Return-Path: <java-user-return-53886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6D1C0DF0F
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 23 Oct 2012 14:18:50 +0000 (UTC)
Received: (qmail 56492 invoked by uid 500); 23 Oct 2012 14:18:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55872 invoked by uid 500); 23 Oct 2012 14:18:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55836 invoked by uid 99); 23 Oct 2012 14:18:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Oct 2012 14:18:42 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of siraj@jobdiva.com designates 64.147.106.2 as permitted sender)
Received: from [64.147.106.2] (HELO mail.jobdiva.com) (64.147.106.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Oct 2012 14:18:37 +0000
Received: from JOBDIVAEXMB1.jobdiva.local ([::1]) by jobdivaexf.jobdiva.local
 ([::1]) with mapi; Tue, 23 Oct 2012 10:18:15 -0400
From: Siraj Haider <siraj@jobdiva.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>,
	"simon.willnauer@gmail.com" <simon.willnauer@gmail.com>
Date: Tue, 23 Oct 2012 10:18:14 -0400
Subject: RE: Scoring based on document
Thread-Topic: Scoring based on document
Thread-Index: Ac2w80bHANBEwambSJGaUc0wM0UsTgANO1Zw
Message-ID: <7276923E6E5AA04C97876BF29FF86716E071A7F4@jobdivaexmb1.jobdiva.local>
References: <7276923E6E5AA04C97876BF29FF86716E071A7C4@jobdivaexmb1.jobdiva.local>
 <CAAHmpkgOsAbCkXYc+vY5WXVtuPexn_X0HD_E4SUtD372a4txfA@mail.gmail.com>
In-Reply-To: <CAAHmpkgOsAbCkXYc+vY5WXVtuPexn_X0HD_E4SUtD372a4txfA@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

U28sIGp1c3QgdG8gY29uZmlybSwgdXNpbmcgTHVjZW5lIDQuMCwgd2Ugd291bGQgYmUgYWJsZSB0
byBpc3N1ZSBhIHNlYXJjaCBvbiBvbmUgb3IgbW9yZSBmaWVsZHMgYW5kIHdvdWxkIGJlIGFibGUg
dG8gZ2V0IHRoZSByZXN1bHRzIHNvcnRlZCBieSBhIGN1c3RvbSBmaWVsZCBhbmQgYWxzbyB3b3Vs
ZCBiZSBhYmxlIHRvIGdldCB0aGUgc2NvcmUgb2YgZWFjaCBkb2N1bWVudCBiYXNlZCBvbiB0aGUg
ZnJlcXVlbmN5IG9mIHRoZSB0ZXJtcyBzZWFyY2hlZCBpbiBhbGwgdGhlIGluZGV4ZWQgZmllbGRz
IG9mIHRoYXQgZG9jdW1lbnQgKHJhdGhlciB0aGFuIGdldHRpbmcgaXQgc2NvcmVkIGp1c3QgYnkg
dGhlIGZpZWxkcyBpbiB0aGUgcXVlcnksIHdoaWNoIGlzIHRoZSBjYXNlIG5vdykuDQoNCklmIHRo
aXMgaXMgdHJ1ZSwgY291bGQgYmUgcGxlYXNlIGd1aWRlIG1lIGludG8gdGhlIGRpcmVjdGlvbiBv
biBob3cgdG8gaW1wbGVtZW50IGl0Pw0KDQpUaGFua3MgYSBsb3QgZm9yIHlvdXIgaGVscC4NCg0K
LVNpcmFqDQooMjEyKSAzMDYtMDE1NA0KDQotLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KRnJv
bTogU2ltb24gV2lsbG5hdWVyIFttYWlsdG86c2ltb24ud2lsbG5hdWVyQGdtYWlsLmNvbV0NClNl
bnQ6IFR1ZXNkYXksIE9jdG9iZXIgMjMsIDIwMTIgMzo1MSBBTQ0KVG86IGphdmEtdXNlckBsdWNl
bmUuYXBhY2hlLm9yZw0KU3ViamVjdDogUmU6IFNjb3JpbmcgYmFzZWQgb24gZG9jdW1lbnQNCg0K
aGV5IHRoZXJlLA0KDQoNCmluIEx1Y2VuZSA0IHlvdSBjYW4gb3ZlcnJpZGUgdGhlIHRlcm1TdGF0
aXN0aWNzIC8gQ29sbGVjdGlvblN0YXRpc3RpY3MgdXNlZCBmb3Igc2NvcmluZyBpbiB0aGUgSW5k
ZXhTZWFyY2hlci4gWW91IGNhbiB0YWtlIG11bHRpcGxlIGZpZWxkcyBpbnRvIGFjY291bnQgaGVy
ZSBpbiBvcmRlciB1c2UgaXQgZm9yIHNjb3JpbmcuIEhlcmUgaXMgdGhlIGphdmFkb2MNCmxpbms6
DQoNCmh0dHA6Ly9sdWNlbmUuYXBhY2hlLm9yZy9jb3JlLzRfMF8wL2NvcmUvb3JnL2FwYWNoZS9s
dWNlbmUvc2VhcmNoL0luZGV4U2VhcmNoZXIuaHRtbCN0ZXJtU3RhdGlzdGljcyhvcmcuYXBhY2hl
Lmx1Y2VuZS5pbmRleC5UZXJtLA0Kb3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguVGVybUNvbnRleHQp
DQpodHRwOi8vbHVjZW5lLmFwYWNoZS5vcmcvY29yZS80XzBfMC9jb3JlL29yZy9hcGFjaGUvbHVj
ZW5lL3NlYXJjaC9JbmRleFNlYXJjaGVyLmh0bWwjY29sbGVjdGlvblN0YXRpc3RpY3MoamF2YS5s
YW5nLlN0cmluZykNCg0KDQpzaW1vbg0KT24gTW9uLCBPY3QgMjIsIDIwMTIgYXQgMTE6MjUgUE0s
IFNpcmFqIEhhaWRlciA8c2lyYWpAam9iZGl2YS5jb20+IHdyb3RlOg0KPiBJIGFtIHVzaW5nIERl
ZmF1bHRTaW1pbGFyaXR5IGFuZCBkaWQgbm90IGJvb3N0IGFueSBmaWVsZCB3aGlsZSBpbmRleGlu
Zy4gTXkgaW5kZXggaXMgY29tcHJpc2VkIG9mIHRoZSBmb2xsb3dpbmcgZmllbGRzOg0KPg0KPiAt
ICAgICAgICAgIFRpdGxlDQo+DQo+IC0gICAgICAgICAgQXV0aG9yDQo+DQo+IC0gICAgICAgICAg
Qm9va25hbWUNCj4NCj4gLSAgICAgICAgICBEZXNjcmlwdGlvbg0KPg0KPiBBbGwgb2YgdGhlIDQg
ZmllbGRzIGFyZSBpbmRleGVkIGFuZCBjYW4gYmUgc2VhcmNoZWQgb24gYnkgdGhlIHVzZXIuIE5v
dyBsZXQncyBzYXkgdGhlIHVzZXIgc2VhcmNoZXMgZm9yICJvcmFjbGUiIGluIFRpdGxlIGZpZWxk
LCB0aGUgc2NvcmUgaXMgY29tcHV0ZWQgYmFzZWQgb24gdGhlIFRpdGxlIGZpZWxkIG9ubHksIGFu
ZCBpdHMgZGlzcmVnYXJkaW5nIHRoZSBmcmVxdWVuY3kgb2YgdGhlIHRlcm0gIm9yYWNsZSIgaW4g
b3RoZXIgZmllbGRzLiBJdCBtaWdodCBiZSBsaWtlIHRoYXQgYnkgZGVzaWduIGJ1dCBJIG5lZWQg
dG8gY2hhbmdlIGl0IHNvIHRoYXQgdGhlIGRvY3VtZW50cyBhcmUgcmFua2VkIGJhc2VkIG9uIHRo
ZSBmcmVxdWVuY3kgaW4gdGhlIHdob2xlIGRvY3VtZW50IGFuZCBub3QgYmFzZWQgb24gdGhlIGZp
ZWxkIHNlYXJjaGVzLiBQbGVhc2UgaGVscCENCj4NCj4gVGhhbmtzIGluIGFkdmFuY2UNCj4gLVNp
cmFqDQo+DQo+DQo+IF9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fDQo+IFRoaXMgZWxl
Y3Ryb25pYyBtYWlsIG1lc3NhZ2UgYW5kIGFueSBhdHRhY2htZW50cyBtYXkgY29udGFpbiBpbmZv
cm1hdGlvbiB3aGljaCBpcyBwcml2aWxlZ2VkLCBzZW5zaXRpdmUgYW5kL29yIG90aGVyd2lzZSBl
eGVtcHQgZnJvbSBkaXNjbG9zdXJlIHVuZGVyIGFwcGxpY2FibGUgbGF3LiBUaGUgaW5mb3JtYXRp
b24gaXMgaW50ZW5kZWQgb25seSBmb3IgdGhlIHVzZSBvZiB0aGUgaW5kaXZpZHVhbCBvciBlbnRp
dHkgbmFtZWQgYXMgdGhlIGFkZHJlc3NlZSBhYm92ZS4gSWYgeW91IGFyZSBub3QgdGhlIGludGVu
ZGVkIHJlY2lwaWVudCwgeW91IGFyZSBoZXJlYnkgbm90aWZpZWQgdGhhdCBhbnkgZGlzY2xvc3Vy
ZSwgY29weWluZywgZGlzdHJpYnV0aW9uIChlbGVjdHJvbmljIG9yIG90aGVyd2lzZSkgb3IgZm9y
d2FyZGluZyBvZiwgb3IgdGhlIHRha2luZyBvZiBhbnkgYWN0aW9uIGluIHJlbGlhbmNlIG9uLCB0
aGUgY29udGVudHMgb2YgdGhpcyB0cmFuc21pc3Npb24gaXMgc3RyaWN0bHkgcHJvaGliaXRlZC4g
SWYgeW91IGhhdmUgcmVjZWl2ZWQgdGhpcyBlbGVjdHJvbmljIHRyYW5zbWlzc2lvbiBpbiBlcnJv
ciwgcGxlYXNlIG5vdGlmeSB1cyBieSB0ZWxlcGhvbmUsIGZhY3NpbWlsZSwgb3IgZS1tYWlsIGFz
IG5vdGVkIGFib3ZlIHRvIGFycmFuZ2UgZm9yIHRoZSByZXR1cm4gb2YgYW55IGVsZWN0cm9uaWMg
bWFpbCBvciBhdHRhY2htZW50cy4gVGhhbmsgWW91Lg0KDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vi
c2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0K
Rm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFw
YWNoZS5vcmcNCg0KDQpUaGlzIGVsZWN0cm9uaWMgbWFpbCBtZXNzYWdlIGFuZCBhbnkgYXR0YWNo
bWVudHMgbWF5IGNvbnRhaW4gaW5mb3JtYXRpb24gd2hpY2ggaXMgcHJpdmlsZWdlZCwgc2Vuc2l0
aXZlIGFuZC9vciBvdGhlcndpc2UgZXhlbXB0IGZyb20gZGlzY2xvc3VyZSB1bmRlciBhcHBsaWNh
YmxlIGxhdy4gVGhlIGluZm9ybWF0aW9uIGlzIGludGVuZGVkIG9ubHkgZm9yIHRoZSB1c2Ugb2Yg
dGhlIGluZGl2aWR1YWwgb3IgZW50aXR5IG5hbWVkIGFzIHRoZSBhZGRyZXNzZWUgYWJvdmUuIElm
IHlvdSBhcmUgbm90IHRoZSBpbnRlbmRlZCByZWNpcGllbnQsIHlvdSBhcmUgaGVyZWJ5IG5vdGlm
aWVkIHRoYXQgYW55IGRpc2Nsb3N1cmUsIGNvcHlpbmcsIGRpc3RyaWJ1dGlvbiAoZWxlY3Ryb25p
YyBvciBvdGhlcndpc2UpIG9yIGZvcndhcmRpbmcgb2YsIG9yIHRoZSB0YWtpbmcgb2YgYW55IGFj
dGlvbiBpbiByZWxpYW5jZSBvbiwgdGhlIGNvbnRlbnRzIG9mIHRoaXMgdHJhbnNtaXNzaW9uIGlz
IHN0cmljdGx5IHByb2hpYml0ZWQuIElmIHlvdSBoYXZlIHJlY2VpdmVkIHRoaXMgZWxlY3Ryb25p
YyB0cmFuc21pc3Npb24gaW4gZXJyb3IsIHBsZWFzZSBub3RpZnkgdXMgYnkgdGVsZXBob25lLCBm
YWNzaW1pbGUsIG9yIGUtbWFpbCBhcyBub3RlZCBhYm92ZSB0byBhcnJhbmdlIGZvciB0aGUgcmV0
dXJuIG9mIGFueSBlbGVjdHJvbmljIG1haWwgb3IgYXR0YWNobWVudHMuIFRoYW5rIFlvdS4NCg==
DQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11
bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMs
IGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcNCg0K

From java-user-return-53887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct 23 17:58:02 2012
Return-Path: <java-user-return-53887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AB8D5D4A2
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 23 Oct 2012 17:58:02 +0000 (UTC)
Received: (qmail 87362 invoked by uid 500); 23 Oct 2012 17:58:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87307 invoked by uid 500); 23 Oct 2012 17:58:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87278 invoked by uid 99); 23 Oct 2012 17:57:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Oct 2012 17:57:59 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of vvekselva.gm@gmail.com designates 209.85.212.170 as permitted sender)
Received: from [209.85.212.170] (HELO mail-wi0-f170.google.com) (209.85.212.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Oct 2012 17:57:51 +0000
Received: by mail-wi0-f170.google.com with SMTP id hm2so3311364wib.5
        for <java-user@lucene.apache.org>; Tue, 23 Oct 2012 10:57:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type;
        bh=dM5eSptwQTk9koysBF62mUXu64jeGswEcj9ydaiVtmk=;
        b=dn2cRaTCGePOZUI1lY88I9GXDVMtptnn0RhH0TVPXwwXGl2csrYXWsYa/dDmXMziiz
         0dFJY577KXz2WaXSf6l9TsN1HG9edFsT/h8W7X36n9wc6Xrus4/GzUyt6bLsL0UlUigX
         AaI+Sla65R7W8ROHnH4/lVP476msl3Wk19Y0X135bmcz8/jKvasmzNOxzqZAzsViQh4n
         9PplhSIHnvF+YIDQgdgb5G/A0SBAVyavsYk3upV7oYeDPySrQE/gnBdO1ZEAC30FF8Ra
         lhfGnK8jLU52+tg9u8/LsQn0tntzGsU2KY7B/SsitT3rrV5labXn7+bMkbIbenZ+57j6
         nMsA==
MIME-Version: 1.0
Received: by 10.180.103.38 with SMTP id ft6mr30934790wib.9.1351015051515; Tue,
 23 Oct 2012 10:57:31 -0700 (PDT)
Received: by 10.217.0.3 with HTTP; Tue, 23 Oct 2012 10:57:31 -0700 (PDT)
In-Reply-To: <7276923E6E5AA04C97876BF29FF86716E071A7F4@jobdivaexmb1.jobdiva.local>
References: <7276923E6E5AA04C97876BF29FF86716E071A7C4@jobdivaexmb1.jobdiva.local>
	<CAAHmpkgOsAbCkXYc+vY5WXVtuPexn_X0HD_E4SUtD372a4txfA@mail.gmail.com>
	<7276923E6E5AA04C97876BF29FF86716E071A7F4@jobdivaexmb1.jobdiva.local>
Date: Tue, 23 Oct 2012 23:27:31 +0530
Message-ID: <CAMbOsnpp9QYBaM7VwktQhKXz1K7P=zp_uiE8GG97YtUe9Q7d4g@mail.gmail.com>
Subject: Re: Scoring based on document
From: selvakumar netaji <vvekselva.gm@gmail.com>
To: java-user@lucene.apache.org
Cc: "simon.willnauer@gmail.com" <simon.willnauer@gmail.com>
Content-Type: multipart/alternative; boundary=f46d0444039e3b581804ccbdb43a
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d0444039e3b581804ccbdb43a
Content-Type: text/plain; charset=ISO-8859-1

Hi All,

Just wanted to make sure that will approach would fails for this case.

Having a copy field for each of the document, having the concatenated
values  of all the fields in that document and searching on the copy field
would just produce the result. The resulting docs would  be based on the
frequency of the query terms in the whole document.

On Tue, Oct 23, 2012 at 7:48 PM, Siraj Haider <siraj@jobdiva.com> wrote:

> So, just to confirm, using Lucene 4.0, we would be able to issue a search
> on one or more fields and would be able to get the results sorted by a
> custom field and also would be able to get the score of each document based
> on the frequency of the terms searched in all the indexed fields of that
> document (rather than getting it scored just by the fields in the query,
> which is the case now).
>
> If this is true, could be please guide me into the direction on how to
> implement it?
>
> Thanks a lot for your help.
>
> -Siraj
> (212) 306-0154
>
> -----Original Message-----
> From: Simon Willnauer [mailto:simon.willnauer@gmail.com]
> Sent: Tuesday, October 23, 2012 3:51 AM
> To: java-user@lucene.apache.org
> Subject: Re: Scoring based on document
>
> hey there,
>
>
> in Lucene 4 you can override the termStatistics / CollectionStatistics
> used for scoring in the IndexSearcher. You can take multiple fields into
> account here in order use it for scoring. Here is the javadoc
> link:
>
>
> http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/IndexSearcher.html#termStatistics(org.apache.lucene.index.Term
> ,
> org.apache.lucene.index.TermContext)
>
> http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/IndexSearcher.html#collectionStatistics(java.lang.String)
>
>
> simon
> On Mon, Oct 22, 2012 at 11:25 PM, Siraj Haider <siraj@jobdiva.com> wrote:
> > I am using DefaultSimilarity and did not boost any field while indexing.
> My index is comprised of the following fields:
> >
> > -          Title
> >
> > -          Author
> >
> > -          Bookname
> >
> > -          Description
> >
> > All of the 4 fields are indexed and can be searched on by the user. Now
> let's say the user searches for "oracle" in Title field, the score is
> computed based on the Title field only, and its disregarding the frequency
> of the term "oracle" in other fields. It might be like that by design but I
> need to change it so that the documents are ranked based on the frequency
> in the whole document and not based on the field searches. Please help!
> >
> > Thanks in advance
> > -Siraj
> >
> >
> > ________________________________
> > This electronic mail message and any attachments may contain information
> which is privileged, sensitive and/or otherwise exempt from disclosure
> under applicable law. The information is intended only for the use of the
> individual or entity named as the addressee above. If you are not the
> intended recipient, you are hereby notified that any disclosure, copying,
> distribution (electronic or otherwise) or forwarding of, or the taking of
> any action in reliance on, the contents of this transmission is strictly
> prohibited. If you have received this electronic transmission in error,
> please notify us by telephone, facsimile, or e-mail as noted above to
> arrange for the return of any electronic mail or attachments. Thank You.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> This electronic mail message and any attachments may contain information
> which is privileged, sensitive and/or otherwise exempt from disclosure
> under applicable law. The information is intended only for the use of the
> individual or entity named as the addressee above. If you are not the
> intended recipient, you are hereby notified that any disclosure, copying,
> distribution (electronic or otherwise) or forwarding of, or the taking of
> any action in reliance on, the contents of this transmission is strictly
> prohibited. If you have received this electronic transmission in error,
> please notify us by telephone, facsimile, or e-mail as noted above to
> arrange for the return of any electronic mail or attachments. Thank You.
>

--f46d0444039e3b581804ccbdb43a--

From java-user-return-53888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct 23 20:35:57 2012
Return-Path: <java-user-return-53888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 776CADA10
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 23 Oct 2012 20:35:57 +0000 (UTC)
Received: (qmail 97627 invoked by uid 500); 23 Oct 2012 20:35:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97553 invoked by uid 500); 23 Oct 2012 20:35:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97545 invoked by uid 99); 23 Oct 2012 20:35:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Oct 2012 20:35:55 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_IMAGE_ONLY_32,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.215.48] (HELO mail-la0-f48.google.com) (209.85.215.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Oct 2012 20:35:46 +0000
Received: by mail-la0-f48.google.com with SMTP id u2so2942963lag.35
        for <java-user@lucene.apache.org>; Tue, 23 Oct 2012 13:35:26 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:x-originating-ip:in-reply-to:references:date
         :message-id:subject:from:to:content-type:x-gm-message-state;
        bh=T5g5BvY1hcfsZico32wMjweeNSmVWjzvSKp1Ci4shpE=;
        b=L6ixZUWG5rJkPFdTREIS/QYpYCjHt8oG3bld5ELw1Ek8lYgIC+gyPJeKXxMoJo/sBX
         BY/TI02gIEyKlCpLQK4XwpFt4qgH5jn5W/uXurxhBE15f2NOLFPlogJmPTyBYRDbuxWe
         GgHZhHyAnBq0WUDOyO8jkC9x/bk6sI0rWLmddH/s2zl9mr98TYyDqnOtJEfIy2SLo3Jk
         WAEoKhHCk1AKYUKAF1JR5lHTeG7Dzf3foR6RDWiQyH0doRqQQTc8251pd+Gh4IDi7wgN
         U1rlT/q2yLzNGZPpZvVNuVTQACaCojW2IZAqWmFLY8CyKBdTgFtTdb5uohTUUf5o9nbr
         gG8g==
MIME-Version: 1.0
Received: by 10.112.25.168 with SMTP id d8mr5426806lbg.61.1351024525995; Tue,
 23 Oct 2012 13:35:25 -0700 (PDT)
Received: by 10.112.19.164 with HTTP; Tue, 23 Oct 2012 13:35:25 -0700 (PDT)
X-Originating-IP: [168.226.214.71]
In-Reply-To: <CACG3uwLWNO0s3H-6f0N2Vgr2FBXS5TGMDc+_8GJRqfG18CP4Og@mail.gmail.com>
References: <CACG3uwLWNO0s3H-6f0N2Vgr2FBXS5TGMDc+_8GJRqfG18CP4Og@mail.gmail.com>
Date: Tue, 23 Oct 2012 17:35:25 -0300
Message-ID: <CACG3uwLVbyfYSd_EQTUJq_jTDm8mCUCg44gv1ypti8LJoK4hDw@mail.gmail.com>
Subject: Solr/Lucene + Oracle Database seamless integration
From: Maximiliano Keen <mkeen@scotas.com>
To: java-user@lucene.apache.org
Content-Type: multipart/related; boundary=bcaec553ff42f4703304ccbfe8aa
X-Gm-Message-State: ALoCoQmxrhr68rTIWJbTD5AP9jUOBbl5L72BfmEUZD6s6BTAXvb0SbyjzBVDr6Wx9Fr0cpxbV0/a
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec553ff42f4703304ccbfe8aa
Content-Type: multipart/alternative; boundary=bcaec553ff42f4702e04ccbfe8a9

--bcaec553ff42f4702e04ccbfe8a9
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

*Scotas* brings a remarkable advancement to Enterprise Text Search. Scotas
combines and synchronize the high-performance, full-featured Solr/Lucene
text search engine with the industry leading Oracle Database's performance,
scalability, security, and reliability.

Main features are:

   - Full Integration with Near Real Time index updating
   - Solr syntax embedded in PLSQL queries
   - Oracle Scalability, Performance and Security


Don't hesitate to contact us for further questions.




[image: Im=E1genes integradas 1]
*
*
*Maximiliano Keen*
mkeen@scotas.com

PS: Scotas is pleased to announce the release of the new website. *
http://www.scotas.com*

--bcaec553ff42f4702e04ccbfe8a9
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

<br><div class=3D"gmail_quote"><div><span style=3D"color:rgb(51,51,51);font=
-family:&#39;lucida grande&#39;,tahoma,verdana,arial,sans-serif;line-height=
:14px"><b>Scotas</b> brings a remarkable advancement to Enterprise Text Sea=
rch. Scotas combines and synchronize the high-performance, full-featured So=
lr/Lucene text search engine with the industry leading Oracle Database&#39;=
s performance, scalability, security, and reliability.</span></div>



<div><span style=3D"line-height:14px;color:rgb(51,51,51);font-family:&#39;l=
ucida grande&#39;,tahoma,verdana,arial,sans-serif"><br></span></div><div><s=
pan style=3D"line-height:14px;color:rgb(51,51,51);font-family:&#39;lucida g=
rande&#39;,tahoma,verdana,arial,sans-serif">Main features are:=A0</span></d=
iv>



<div><ul><li><span>Full
Integration with Near Real Time index updating</span></li><li><span>Solr sy=
ntax embedded in PLSQL queries=A0</span></li><li><span>Oracle Scalability, =
Performance and Security</span></li></ul></div><div><span style=3D"line-hei=
ght:14px;color:rgb(51,51,51);font-family:&#39;lucida grande&#39;,tahoma,ver=
dana,arial,sans-serif"><br>



</span></div><div><span style=3D"line-height:14px;color:rgb(51,51,51);font-=
family:&#39;lucida grande&#39;,tahoma,verdana,arial,sans-serif">Don&#39;t h=
esitate to contact us for further questions.</span></div>
<div><span style=3D"line-height:14px;color:rgb(51,51,51);font-family:&#39;l=
ucida grande&#39;,tahoma,verdana,arial,sans-serif"><br></span></div><div><b=
r></div><div><br></div><div><span style=3D"line-height:14px;color:rgb(51,51=
,51);font-family:&#39;lucida grande&#39;,tahoma,verdana,arial,sans-serif"><=
br>

</span></div><div><span style=3D"line-height:14px;color:rgb(51,51,51);font-=
family:&#39;lucida grande&#39;,tahoma,verdana,arial,sans-serif"><img src=3D=
"cid:ii_13a8f0042ec44eb7" alt=3D"Im=E1genes integradas 1"><span class=3D"HO=
EnZb"><font color=3D"#888888"><br>

</font></span></span></div><span class=3D"HOEnZb"><font color=3D"#888888"><=
div><div><b style=3D"color:rgb(51,51,51);font-family:&#39;lucida grande&#39=
;,tahoma,verdana,arial,sans-serif;line-height:14px"><br></b></div><div><b s=
tyle=3D"color:rgb(51,51,51);font-family:&#39;lucida grande&#39;,tahoma,verd=
ana,arial,sans-serif;line-height:14px">Maximiliano Keen</b></div>



</div><div><span style=3D"line-height:14px;color:rgb(51,51,51);font-family:=
&#39;lucida grande&#39;,tahoma,verdana,arial,sans-serif"><a href=3D"mailto:=
mkeen@scotas.com" target=3D"_blank">mkeen@scotas.com</a></span></div>
</font></span><div><div><br></div><div><font face=3D"lucida grande, tahoma,=
 verdana, arial, sans-serif"><span style=3D"line-height:14px">PS:=A0</span>=
</font><span style=3D"color:rgb(51,51,51);font-family:&#39;lucida grande&#3=
9;,tahoma,verdana,arial,sans-serif;font-size:13px;line-height:18px">Scotas =
is pleased to announce the release of the new website.=A0</span><b style=3D=
"color:rgb(51,51,51);font-family:&#39;lucida grande&#39;,tahoma,verdana,ari=
al,sans-serif;font-size:13px;line-height:18px"><a href=3D"http://www.scotas=
.com/" target=3D"_blank">http://www.scotas.com</a></b></div>


</div><div><span style=3D"line-height:14px;color:rgb(51,51,51);font-family:=
&#39;lucida grande&#39;,tahoma,verdana,arial,sans-serif"><br></span></div><=
div></div>
</div><br>

--bcaec553ff42f4702e04ccbfe8a9--
--bcaec553ff42f4703304ccbfe8aa--

From java-user-return-53889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct 23 20:45:55 2012
Return-Path: <java-user-return-53889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 04EFADA67
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 23 Oct 2012 20:45:55 +0000 (UTC)
Received: (qmail 36168 invoked by uid 500); 23 Oct 2012 20:45:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36084 invoked by uid 500); 23 Oct 2012 20:45:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36073 invoked by uid 99); 23 Oct 2012 20:45:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Oct 2012 20:45:52 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of petite_abeille@me.com designates 17.158.232.38 as permitted sender)
Received: from [17.158.232.38] (HELO nk11p03mm-asmtp003.mac.com) (17.158.232.38)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Oct 2012 20:45:46 +0000
MIME-version: 1.0
Content-transfer-encoding: 7BIT
Content-type: text/plain; CHARSET=US-ASCII
Received: from [192.168.1.47] ([178.194.176.158]) by nk11p03mm-asmtp003.mac.com
 (Oracle Communications Messaging Server 7u4-24.01(7.0.4.24.0) 64bit (built Jan
  3 2012)) with ESMTPSA id <0MCD00BE55MNUY00@nk11p03mm-asmtp003.mac.com> for
 java-user@lucene.apache.org; Tue, 23 Oct 2012 20:45:20 +0000 (GMT)
X-Proofpoint-Virus-Version: vendor=fsecure
 engine=2.50.10432:5.7.7855,1.0.431,0.0.0000
 definitions=2012-10-23_07:2012-10-23,2012-10-23,1970-01-01 signatures=0
X-Proofpoint-Spam-Details: rule=notspam policy=default score=0 spamscore=0
 ipscore=0 suspectscore=1 phishscore=0 bulkscore=0 adultscore=0 classifier=spam
 adjust=0 reason=mlx scancount=1 engine=6.0.2-1203120001
 definitions=main-1210230262
Subject: Re: Solr/Lucene + Oracle Database seamless integration
From: Petite Abeille <petite_abeille@me.com>
In-reply-to:
 <CACG3uwLVbyfYSd_EQTUJq_jTDm8mCUCg44gv1ypti8LJoK4hDw@mail.gmail.com>
Date: Tue, 23 Oct 2012 22:44:45 +0200
Message-id: <C05DD8D7-F1C8-4BCD-8C83-48FA1680EFD8@me.com>
References:
 <CACG3uwLWNO0s3H-6f0N2Vgr2FBXS5TGMDc+_8GJRqfG18CP4Og@mail.gmail.com>
 <CACG3uwLVbyfYSd_EQTUJq_jTDm8mCUCg44gv1ypti8LJoK4hDw@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1499)
X-Virus-Checked: Checked by ClamAV on apache.org


On Oct 23, 2012, at 10:35 PM, Maximiliano Keen <mkeen@scotas.com> wrote:

> Scotas combines and synchronize the high-performance, full-featured Solr/Lucene text search engine with the industry leading Oracle Database's performance, scalability, security, and reliability.

How does this compares/contrasts to Oracle Text itself [1]?

[1] http://www.oracle.com/technetwork/database/enterprise-edition/index-098492.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct 23 21:04:04 2012
Return-Path: <java-user-return-53890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AA85DDB38
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 23 Oct 2012 21:04:04 +0000 (UTC)
Received: (qmail 7176 invoked by uid 500); 23 Oct 2012 21:04:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7108 invoked by uid 500); 23 Oct 2012 21:04:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6902 invoked by uid 99); 23 Oct 2012 21:04:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Oct 2012 21:04:02 +0000
X-ASF-Spam-Status: No, hits=1.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of raghavan8585@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vb0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Oct 2012 21:03:55 +0000
Received: by mail-vb0-f48.google.com with SMTP id e21so5438801vbm.35
        for <java-user@lucene.apache.org>; Tue, 23 Oct 2012 14:03:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=RbpeIYykIR3xuv1rE0yW8ZF9FmsRliRZ2SJFww366Ns=;
        b=yFKWL777T2BgcRc14OJ7Ygpr1jFqUj1+397D/L6vX4iLE2U7bLsHxK8wzJOS2gUNZ0
         JZWHibroY/yC/clTH4Fbe0Kg+rVFBR0eUNYJXoBk+A/1GuOLqB3UtwIZqsWUmWoGkZcr
         qgTS3V4kQnv1Z/WmI6q7VDXfDkY1qbOkJ8fQCVofLGQw7kW+O+X2pk0bBFsXU5UoZ3ri
         lrdDHSgnrOPQqAN0tMZjcGb4/X1eGw7ALvm7RTHw0ujzduF5hU3zXR6QBdXVHI0+C51N
         8fmIlOFpxx20rMPwJ1ia3+9sADE+rxDjsOMn1+4Pis1r7pI849xagWBUU6HUu0Lt8XyJ
         3ywA==
Received: by 10.52.173.74 with SMTP id bi10mr19047176vdc.81.1351026214509;
 Tue, 23 Oct 2012 14:03:34 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.220.14.21 with HTTP; Tue, 23 Oct 2012 14:03:13 -0700 (PDT)
In-Reply-To: <CANTbCXKwfz1_vqg_dJ8i7RNOo7SS3_jD=TOA22+VDU8BMvhLnA@mail.gmail.com>
References: <CANTbCXKwfz1_vqg_dJ8i7RNOo7SS3_jD=TOA22+VDU8BMvhLnA@mail.gmail.com>
From: Raghavan Parthasarathy <raghavan8585@gmail.com>
Date: Tue, 23 Oct 2012 17:03:13 -0400
Message-ID: <CANTbCX+4h5Md_HJ=s7=NcZ_fP3yb_RmqU4EB=8P3P9BMAHzcCQ@mail.gmail.com>
Subject: Multiple Blocking Threads with search during an Index reload
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec51b1bb9991cd204ccc04d10
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec51b1bb9991cd204ccc04d10
Content-Type: text/plain; charset=ISO-8859-1

Hi,

We are using Lucene-core and we reindex once a day and plan to do it more
often in a day sooner.

During re loading of the lucene indexes, some of the slave servers don't
recover and we have to restart them to get them working again.

Here is the stacktrace:

Here is the Full stack trace of BLOCKED search class:

"daemon prio=5 state=BLOCKED
        at
org.apache.lucene.index.SegmentReader$CoreReaders.getTermsReader(SegmentReader.java:169)
        at
org.apache.lucene.index.SegmentTermDocs.seek(SegmentTermDocs.java:57)
        at
org.apache.lucene.search.MultiTermQueryWrapperFilter.getDocIdSet(MultiTermQueryWrapperFilter.java:120)
        at
org.apache.lucene.search.ChainedFilter.getDocIdSet(ChainedFilter.java:176)
        at
org.apache.lucene.search.ChainedFilter.getDocIdSet(ChainedFilter.java:104)
        at
org.apache.lucene.search.ChainedFilter.getDocIdSet(ChainedFilter.java:176)
        at
org.apache.lucene.search.ChainedFilter.getDocIdSet(ChainedFilter.java:104)
        at
org.apache.lucene.search.CachingWrapperFilter.getDocIdSet(CachingWrapperFilter.java:203)
        at
org.apache.lucene.search.ChainedFilter.getDocIdSet(ChainedFilter.java:176)
        at
org.apache.lucene.search.ChainedFilter.getDocIdSet(ChainedFilter.java:104)
        at
org.apache.lucene.search.CachingWrapperFilter.getDocIdSet(CachingWrapperFilter.java:203)
        at
org.apache.lucene.search.IndexSearcher.searchWithFilter(IndexSearcher.java:544)
        at
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:525)
        at
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:384)
        at
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:291)
        at
com.atypon.publish.search.SearchWorker.search(SearchWorker.java:98)
        at
com.atypon.publish.search.SearchWorker.search(SearchWorker.java:41)
.....
....


We are using lucene-core version 3.1. Please tell us what we need to do to
resolve this issue.

Thanks,
Raghavan

--bcaec51b1bb9991cd204ccc04d10--

From java-user-return-53891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct 23 21:06:23 2012
Return-Path: <java-user-return-53891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EFB2BDB56
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 23 Oct 2012 21:06:22 +0000 (UTC)
Received: (qmail 18128 invoked by uid 500); 23 Oct 2012 21:06:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18079 invoked by uid 500); 23 Oct 2012 21:06:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18071 invoked by uid 99); 23 Oct 2012 21:06:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Oct 2012 21:06:20 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.176] (HELO mail-lb0-f176.google.com) (209.85.217.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Oct 2012 21:06:15 +0000
Received: by mail-lb0-f176.google.com with SMTP id s4so738912lbc.35
        for <java-user@lucene.apache.org>; Tue, 23 Oct 2012 14:05:54 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:x-originating-ip:in-reply-to:references:date
         :message-id:subject:from:to:content-type:x-gm-message-state;
        bh=lySvA3g4UcH9EzjLtZR1dNYkznRty5BBsJqTbMLlql4=;
        b=Q+hRzV4k2Fj8BDYumRLzTpFetfKSmSmCLbypLnwLuQr/QT4fFufbZqJ8pEFGIBxbgZ
         0cG8qXxgAXgU9Vdyp1JzWcMWoPtHWHT2YdYzIJvCz1lQ7IOdiwiPJxEtpbMUIJ2Ub74V
         ydIDMMiuHGbxDs8yjhQ+pcwJCQVXa3uHWLEYY/+eVMnqk4MK9rlQAxTPIB9jjNySDQgs
         ZGBO8KfU5UgIaQNq1vRS/rJ8PXqJMScOPhkrOYpOxktHEe0s1soAMT5uEmD7MtusGkEo
         bky1o0ArOWQAyxVYFMM2hVOYwf4BAHsCREGxQ4UenvacyBYZn9hoB/9gSS8BnNB9OHoi
         yl6g==
MIME-Version: 1.0
Received: by 10.152.105.103 with SMTP id gl7mr12354335lab.10.1351026354080;
 Tue, 23 Oct 2012 14:05:54 -0700 (PDT)
Received: by 10.112.19.164 with HTTP; Tue, 23 Oct 2012 14:05:54 -0700 (PDT)
X-Originating-IP: [168.226.214.71]
In-Reply-To: <C05DD8D7-F1C8-4BCD-8C83-48FA1680EFD8@me.com>
References: <CACG3uwLWNO0s3H-6f0N2Vgr2FBXS5TGMDc+_8GJRqfG18CP4Og@mail.gmail.com>
	<CACG3uwLVbyfYSd_EQTUJq_jTDm8mCUCg44gv1ypti8LJoK4hDw@mail.gmail.com>
	<C05DD8D7-F1C8-4BCD-8C83-48FA1680EFD8@me.com>
Date: Tue, 23 Oct 2012 18:05:54 -0300
Message-ID: <CACG3uwLm-h3uFmJOsesa4A7HvioFvD1-4TZJcGV_RMc-Yu5t6A@mail.gmail.com>
Subject: Re: Solr/Lucene + Oracle Database seamless integration
From: Maximiliano Keen <mkeen@scotas.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=f46d040714a7eacb2404ccc05506
X-Gm-Message-State: ALoCoQnZj1MxqmL+/hCtlhAM6r4l2BdmOWYAmXILpk5drM9A7ra3mwo1qV42v4kDEI3CY0H1qKfE
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d040714a7eacb2404ccc05506
Content-Type: text/plain; charset=ISO-8859-1

The main advantages are full text search capabilities and performance.

Oracle Text is a pre-google technology. It doesn't support features like
facets, "did you mean", "more like this", spacial search, etc.

Besides Oracle text has serious problems when scaling to big volumes of
information.

You can see further information here: http://www.scotas.com/products or
contact me to my email.




2012/10/23 Petite Abeille <petite_abeille@me.com>

>
> On Oct 23, 2012, at 10:35 PM, Maximiliano Keen <mkeen@scotas.com> wrote:
>
> > Scotas combines and synchronize the high-performance, full-featured
> Solr/Lucene text search engine with the industry leading Oracle Database's
> performance, scalability, security, and reliability.
>
> How does this compares/contrasts to Oracle Text itself [1]?
>
> [1]
> http://www.oracle.com/technetwork/database/enterprise-edition/index-098492.html
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--f46d040714a7eacb2404ccc05506--

From java-user-return-53892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct 23 22:06:26 2012
Return-Path: <java-user-return-53892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 647B1DCBA
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 23 Oct 2012 22:06:26 +0000 (UTC)
Received: (qmail 86838 invoked by uid 500); 23 Oct 2012 22:06:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86786 invoked by uid 500); 23 Oct 2012 22:06:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86777 invoked by uid 99); 23 Oct 2012 22:06:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Oct 2012 22:06:24 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of siraj@jobdiva.com designates 64.147.106.2 as permitted sender)
Received: from [64.147.106.2] (HELO mail.jobdiva.com) (64.147.106.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Oct 2012 22:06:17 +0000
Received: from JOBDIVAEXMB1.jobdiva.local ([::1]) by jobdivaexf.jobdiva.local
 ([::1]) with mapi; Tue, 23 Oct 2012 18:05:55 -0400
From: Siraj Haider <siraj@jobdiva.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
CC: "simon.willnauer@gmail.com" <simon.willnauer@gmail.com>
Date: Tue, 23 Oct 2012 18:05:51 -0400
Subject: RE: Scoring based on document
Thread-Topic: Scoring based on document
Thread-Index: Ac2xR/JjdaioY7z6QnO8LZ+ocUQ5qAAIlQXA
Message-ID: <7276923E6E5AA04C97876BF29FF86716E071A894@jobdivaexmb1.jobdiva.local>
References: <7276923E6E5AA04C97876BF29FF86716E071A7C4@jobdivaexmb1.jobdiva.local>
	<CAAHmpkgOsAbCkXYc+vY5WXVtuPexn_X0HD_E4SUtD372a4txfA@mail.gmail.com>
	<7276923E6E5AA04C97876BF29FF86716E071A7F4@jobdivaexmb1.jobdiva.local>
 <CAMbOsnpp9QYBaM7VwktQhKXz1K7P=zp_uiE8GG97YtUe9Q7d4g@mail.gmail.com>
In-Reply-To: <CAMbOsnpp9QYBaM7VwktQhKXz1K7P=zp_uiE8GG97YtUe9Q7d4g@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the suggestion, but in that scenario, I would lose the ability t=
o search on individual fields, i.e. I would not be able to search on title =
field only, and would end up with results where the searched term might be =
in the description field.

regards
-Siraj
(212) 306-0154

-----Original Message-----
From: selvakumar netaji [mailto:vvekselva.gm@gmail.com]
Sent: Tuesday, October 23, 2012 1:58 PM
To: java-user@lucene.apache.org
Cc: simon.willnauer@gmail.com
Subject: Re: Scoring based on document

Hi All,

Just wanted to make sure that will approach would fails for this case.

Having a copy field for each of the document, having the concatenated value=
s  of all the fields in that document and searching on the copy field would=
 just produce the result. The resulting docs would  be based on the frequen=
cy of the query terms in the whole document.

On Tue, Oct 23, 2012 at 7:48 PM, Siraj Haider <siraj@jobdiva.com> wrote:

> So, just to confirm, using Lucene 4.0, we would be able to issue a
> search on one or more fields and would be able to get the results
> sorted by a custom field and also would be able to get the score of
> each document based on the frequency of the terms searched in all the
> indexed fields of that document (rather than getting it scored just by
> the fields in the query, which is the case now).
>
> If this is true, could be please guide me into the direction on how to
> implement it?
>
> Thanks a lot for your help.
>
> -Siraj
> (212) 306-0154
>
> -----Original Message-----
> From: Simon Willnauer [mailto:simon.willnauer@gmail.com]
> Sent: Tuesday, October 23, 2012 3:51 AM
> To: java-user@lucene.apache.org
> Subject: Re: Scoring based on document
>
> hey there,
>
>
> in Lucene 4 you can override the termStatistics / CollectionStatistics
> used for scoring in the IndexSearcher. You can take multiple fields
> into account here in order use it for scoring. Here is the javadoc
> link:
>
>
> http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/Inde
> xSearcher.html#termStatistics(org.apache.lucene.index.Term
> ,
> org.apache.lucene.index.TermContext)
>
> http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/Inde
> xSearcher.html#collectionStatistics(java.lang.String)
>
>
> simon
> On Mon, Oct 22, 2012 at 11:25 PM, Siraj Haider <siraj@jobdiva.com> wrote:
> > I am using DefaultSimilarity and did not boost any field while indexing=
.
> My index is comprised of the following fields:
> >
> > -          Title
> >
> > -          Author
> >
> > -          Bookname
> >
> > -          Description
> >
> > All of the 4 fields are indexed and can be searched on by the user.
> > Now
> let's say the user searches for "oracle" in Title field, the score is
> computed based on the Title field only, and its disregarding the
> frequency of the term "oracle" in other fields. It might be like that
> by design but I need to change it so that the documents are ranked
> based on the frequency in the whole document and not based on the field s=
earches. Please help!
> >
> > Thanks in advance
> > -Siraj
> >
> >
> > ________________________________
> > This electronic mail message and any attachments may contain
> > information
> which is privileged, sensitive and/or otherwise exempt from disclosure
> under applicable law. The information is intended only for the use of
> the individual or entity named as the addressee above. If you are not
> the intended recipient, you are hereby notified that any disclosure,
> copying, distribution (electronic or otherwise) or forwarding of, or
> the taking of any action in reliance on, the contents of this
> transmission is strictly prohibited. If you have received this
> electronic transmission in error, please notify us by telephone,
> facsimile, or e-mail as noted above to arrange for the return of any elec=
tronic mail or attachments. Thank You.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> This electronic mail message and any attachments may contain
> information which is privileged, sensitive and/or otherwise exempt
> from disclosure under applicable law. The information is intended only
> for the use of the individual or entity named as the addressee above.
> If you are not the intended recipient, you are hereby notified that
> any disclosure, copying, distribution (electronic or otherwise) or
> forwarding of, or the taking of any action in reliance on, the
> contents of this transmission is strictly prohibited. If you have
> received this electronic transmission in error, please notify us by
> telephone, facsimile, or e-mail as noted above to arrange for the return =
of any electronic mail or attachments. Thank You.
>

This electronic mail message and any attachments may contain information wh=
ich is privileged, sensitive and/or otherwise exempt from disclosure under =
applicable law. The information is intended only for the use of the individ=
ual or entity named as the addressee above. If you are not the intended rec=
ipient, you are hereby notified that any disclosure, copying, distribution =
(electronic or otherwise) or forwarding of, or the taking of any action in =
reliance on, the contents of this transmission is strictly prohibited. If y=
ou have received this electronic transmission in error, please notify us by=
 telephone, facsimile, or e-mail as noted above to arrange for the return o=
f any electronic mail or attachments. Thank You.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 24 00:01:30 2012
Return-Path: <java-user-return-53893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A5FCBDF3D
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 24 Oct 2012 00:01:30 +0000 (UTC)
Received: (qmail 92911 invoked by uid 500); 24 Oct 2012 00:01:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92823 invoked by uid 500); 24 Oct 2012 00:01:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92814 invoked by uid 99); 24 Oct 2012 00:01:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Oct 2012 00:01:28 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ssmith@mainstreamdata.com designates 209.63.42.202 as permitted sender)
Received: from [209.63.42.202] (HELO nexus2.mainstreamdata.com) (209.63.42.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Oct 2012 00:01:23 +0000
Received: from localhost (localhost [127.0.0.1])
	by nexus2.mainstreamdata.com (Postfix) with ESMTP id 9565E4012F
	for <java-user@lucene.apache.org>; Tue, 23 Oct 2012 18:01:02 -0600 (MDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=
	mainstreamdata.com; h=mime-version:content-type:content-type
	:content-language:accept-language:message-id:date:date:subject
	:subject:from:from:received:received:received; s=key1; t=
	1351036859; bh=uCe1nO/d3+AkZLlaz8bs19W5Xzh7VUq+8dlSXd3gX0Q=; b=v
	rYIKgLadsi53Ty/TBqkxDe61oyqXi/qLtVmSeqtsO89teLgTKLcNxQD/q1Q2rTbW
	IPM6SZlkm5fu1p2V/tGcdg9+68CzCeIaKOZm7P8ulYUCFj4u9U5Bs9qwf+MgUGBB
	T7SBWUHWRfZKpz7ILdTZwla12gK8BbQ8TYflXTYlGc5iMUyN2y0XjESseF0luekO
	egYkGgp4mCwNMsq7EcXpS1lxVdrL5FqA5ocoQmBpmdrmKNija8ECHD3O4+ykAy8g
	4EaF5Ku4IZhYW3C8iCou5AQH34Xg35z4DvFkvpGihEDKx3G7t0dZs14/Mv1jLcWz
	5uGTPZ6EgCTTe1HXQLTvQ==
X-Virus-Scanned: Debian amavisd-new at nexus2.mainstreamdata.com
Received: from nexus2.mainstreamdata.com ([127.0.0.1])
	by localhost (nexus2.mainstreamdata.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id EqEmX+rSoaZb for <java-user@lucene.apache.org>;
	Tue, 23 Oct 2012 18:00:59 -0600 (MDT)
Received: from webmail.mainstreamdata.com (hedwig.slc.mainstreamdata.com [10.2.1.133])
	by nexus2.mainstreamdata.com (Postfix) with ESMTPS id CA59440138
	for <java-user@lucene.apache.org>; Tue, 23 Oct 2012 18:00:43 -0600 (MDT)
Received: from hedwig.slc.mainstreamdata.com ([10.2.1.133]) by
 hedwig.slc.mainstreamdata.com ([10.2.1.133]) with mapi id 14.01.0355.002;
 Tue, 23 Oct 2012 18:00:43 -0600
From: Scott Smith <ssmith@mainstreamdata.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Highlighting html pages
Thread-Topic: Highlighting html pages
Thread-Index: Ac2xeps+21paIBY8QMylE73KEnA3cQ==
Date: Wed, 24 Oct 2012 00:00:42 +0000
Message-ID: <B29111A755EFB5419E6C7BC998C6E867966382@hedwig.slc.mainstreamdata.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-originating-ip: [10.7.11.146]
Content-Type: multipart/alternative;
	boundary="_000_B29111A755EFB5419E6C7BC998C6E867966382hedwigslcmainstre_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_B29111A755EFB5419E6C7BC998C6E867966382hedwigslcmainstre_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I need to take an html page  that I retrieve from my lucene search and high=
light all of the terms that are part of the search.  I need to skip over an=
y html tags since I don't want any words in tags which happen to match the =
search to be highlighted.

Note that I don't want sections of the document.  I need to highlight all t=
erms in the document (with a <span> or something similar) and get back the =
entire document (with the new <span>s) so it can be displayed in its entire=
ty with the search terms highlighted.

Last time I did this (in the days of 1.4.2 - so a while ago), I had to writ=
e a custom tokenizer that skipped over the html tokens so that I didn't acc=
identally highlight them.  I'm hoping that there is an easier way to do thi=
s now.

Suggestions?

--_000_B29111A755EFB5419E6C7BC998C6E867966382hedwigslcmainstre_--

From java-user-return-53894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 24 03:04:49 2012
Return-Path: <java-user-return-53894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6D494D18C
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 24 Oct 2012 03:04:49 +0000 (UTC)
Received: (qmail 53074 invoked by uid 500); 24 Oct 2012 03:04:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52863 invoked by uid 500); 24 Oct 2012 03:04:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52799 invoked by uid 99); 24 Oct 2012 03:04:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Oct 2012 03:04:43 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sokolov@ifactory.com designates 65.223.181.132 as permitted sender)
Received: from [65.223.181.132] (HELO camelot.ifactory.com) (65.223.181.132)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Oct 2012 03:04:34 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by camelot.ifactory.com (Postfix) with ESMTP id C2BDC1920004;
	Tue, 23 Oct 2012 23:04:10 -0400 (EDT)
X-Virus-Scanned: amavisd-new at camelot.ifactory.com
Received: from camelot.ifactory.com ([127.0.0.1])
	by localhost (camelot.ifactory.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id JiNF3gExAj4x; Tue, 23 Oct 2012 23:04:09 -0400 (EDT)
Received: from [192.168.1.8] (pool-173-76-135-186.bstnma.fios.verizon.net [173.76.135.186])
	by camelot.ifactory.com (Postfix) with ESMTPSA id B7DA81920002;
	Tue, 23 Oct 2012 23:04:09 -0400 (EDT)
Message-ID: <50875AA9.1070103@ifactory.com>
Date: Tue, 23 Oct 2012 23:04:09 -0400
From: Michael Sokolov <sokolov@ifactory.com>
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:16.0) Gecko/20121010 Thunderbird/16.0.1
MIME-Version: 1.0
To: java-user@lucene.apache.org
CC: Scott Smith <ssmith@mainstreamdata.com>
Subject: Re: Highlighting html pages
References: <B29111A755EFB5419E6C7BC998C6E867966382@hedwig.slc.mainstreamdata.com>
In-Reply-To: <B29111A755EFB5419E6C7BC998C6E867966382@hedwig.slc.mainstreamdata.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

If you use HTMLStripCharFilter, it extracts the text only, leaving tags 
out, and remembering the word positions so that highlighting works 
properly.  Should do exactly what you want out of the box...


On 10/23/2012 8:00 PM, Scott Smith wrote:
> I need to take an html page  that I retrieve from my lucene search and highlight all of the terms that are part of the search.  I need to skip over any html tags since I don't want any words in tags which happen to match the search to be highlighted.
>
> Note that I don't want sections of the document.  I need to highlight all terms in the document (with a <span> or something similar) and get back the entire document (with the new <span>s) so it can be displayed in its entirety with the search terms highlighted.
>
> Last time I did this (in the days of 1.4.2 - so a while ago), I had to write a custom tokenizer that skipped over the html tokens so that I didn't accidentally highlight them.  I'm hoping that there is an easier way to do this now.
>
> Suggestions?
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 24 10:42:47 2012
Return-Path: <java-user-return-53895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 264F1DC2B
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 24 Oct 2012 10:42:47 +0000 (UTC)
Received: (qmail 83628 invoked by uid 500); 24 Oct 2012 10:42:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83574 invoked by uid 500); 24 Oct 2012 10:42:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83555 invoked by uid 99); 24 Oct 2012 10:42:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Oct 2012 10:42:44 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [98.138.90.66] (HELO nm3.bullet.mail.ne1.yahoo.com) (98.138.90.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Oct 2012 10:42:33 +0000
Received: from [98.138.226.176] by nm3.bullet.mail.ne1.yahoo.com with NNFMP; 24 Oct 2012 10:42:11 -0000
Received: from [98.138.226.160] by tm11.bullet.mail.ne1.yahoo.com with NNFMP; 24 Oct 2012 10:42:11 -0000
Received: from [127.0.0.1] by omp1061.mail.ne1.yahoo.com with NNFMP; 24 Oct 2012 10:42:11 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 726607.98632.bm@omp1061.mail.ne1.yahoo.com
Received: (qmail 95966 invoked by uid 60001); 24 Oct 2012 10:42:11 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1351075331; bh=pLYsKBYYjBWWcp780ytYV23UEHWcBnxvcuLL1jTCHGs=; h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type; b=3N2Zp+t1uD2AMenavkJpWtvNHUyHBHYfhNlCchdIrHJZCWLK8+a0c4tEZTUCSOHby8VmQ1AIyJeoP1xDbhWUsDLAognaeBok0kcwRcor34R7QltlWEaOU9UFTBL83e0pjEDaGaT2mnc2SCjid/6NaxNCzW/iBgm4vDsHAAG4noA=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type;
  b=fwcoNUfjB+wTiB5+fuSCo14gi9wnGzP74CDyVlRSFgZsCeVegc3bdlvBALu9xKN93ko+3ZSJLzugGiu74zndFb5auD8Rl+/8bsKypQeDItVn+1GtBe5xh+OrpjQELa44MZmZOGGY5mDI0TS9NNJ7nUDN7bbuAg/PEjSWtcSVO/c=;
X-YMail-OSG: BaZO_4IVM1kz63tdrXFXq7xB7DxEAuTH5uFtP8VW8XLerAH
 6UCrLqnJQo5emn1JtxXC4_99BnUayrU.sn5PQkoh92_Hz3n1Y60WXjNG05Oc
 g0wdWvWU5aciKOSanvhyllAyntIDStHL.JlZ7MdjOdRt5zcHNiwpXa3NdBgg
 wQnOgSygJ5klTl1ZAfLP4_NCPSAEQWEt608Wx6o.oXmXm4D7Odh4BCNAHZMU
 vsh1VcI9lmcqt9QlXZsknKC38z7qhkZTX0VKMcrPAVHsYyrskJKQcsaruopI
 bWwCHeXPCSKGDRXRUDJJL5k6N1I0rwA6q6fNRzMpi_HHlLoV0jSlTvTtgrTe
 04lgRmCcSAvMbvSzdQgc.GG_edh6ecnhduSvLgk3BTnp15eRvbwOX3VwR7ud
 PaCodTHXQCm9oGCzZO48MQMtQEPwKSLGTZb6n6jZrIpPbsR784NIolQqBeuR
 zayQYyh.jnmpGqF6Lb7lIr2uzzKllFIxAreZNJEk5WJTDcOnFqMlAFTqJ7cL
 H817ppk8F9w5KUUOUjwlmce82KGeVGWOqFITgeI0Ri5V9mGDHWYVwhA--
Received: from [146.101.57.209] by web120703.mail.ne1.yahoo.com via HTTP; Wed, 24 Oct 2012 03:42:11 PDT
X-Rocket-MIMEInfo: 001.001,SGkgYWxsLAoKU29ycnkgaWYgSSdtIGFza2luZyBhbiBhZ2Ugb2xkIHF1ZXN0aW9uIGJ1dCB3ZSBoYXZlIG1pZ3JhdGVkIHRvIGx1Y2VuZSAzLjYuMCBhbmQgSSBzZWUgU3RhbmRhcmRBbmFseXplciBoYXMgY2hhbmdlZCBpdHMgYmVoYXZpb3VyLCBwYXJ0aWN1bGFybHkgd2hlbiB0b2tlbml6aW5nIGVtYWlsIGFkZHJlc3Nlcy4gRnJvbSByZWFkaW5nIHRoZSBmb3J1bXMsIEkgdW5kZXJzdGFuZCBTdGFuZGFyZEFuYWx5emVyIHdhcyByZW5hbWVkIHRvIENsYXNzaWNBbmFseXplciAtIGlzIHRoaXMgdGhlIGNhc2UBMAEBAQE-
X-Mailer: YahooMailWebService/0.8.123.460
Message-ID: <1351075331.86820.YahooMailNeo@web120703.mail.ne1.yahoo.com>
Date: Wed, 24 Oct 2012 03:42:11 -0700 (PDT)
From: kiwi clive <kiwi_clive@yahoo.com>
Reply-To: kiwi clive <kiwi_clive@yahoo.com>
Subject: StandardAnalyzer functionality change
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="-1480336445-740274456-1351075331=:86820"
X-Virus-Checked: Checked by ClamAV on apache.org

---1480336445-740274456-1351075331=:86820
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hi all,=0A=0ASorry if I'm asking an age old question but we have migrated t=
o lucene 3.6.0 and I see StandardAnalyzer has changed its behaviour, partic=
ularly when tokenizing email addresses. From reading the forums, I understa=
nd StandardAnalyzer was renamed to ClassicAnalyzer - is this the case ?=0A=
=0A=0AIf I pass the string 'user@domain.com' through these analyzers, I get=
 the following tokens:=0A=0AUsing StandardAnalyzer(Version.LUCENE_23):=A0 -=
->=A0 user@domain.com (one token)=0A=0AUsing StandardAnalyzer(Version.LUCEN=
E_36):=A0 -->=A0 user domain.com =A0=A0 (two tokens)=0AUsing ClassicAnalyze=
r(Version.LUCENE_36): =A0 =A0 -->=A0 user@domain.com=A0 (one token)=0A=0ASt=
andardAnalyzer is normally a good compromise as a default analyzer but the =
failure to keep an email address intact makes it less fit for purpose than =
it used to be. Is this a bug or is it by design ?=A0 If by design, what is =
the reason for the change and is ClassicAnalyzer now the defacto-analyzer t=
o use ?=0A=0AThanks,=0AClive=0A
---1480336445-740274456-1351075331=:86820--

From java-user-return-53896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 24 14:57:15 2012
Return-Path: <java-user-return-53896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C5A6BD6BD
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 24 Oct 2012 14:57:15 +0000 (UTC)
Received: (qmail 23498 invoked by uid 500); 24 Oct 2012 14:57:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23255 invoked by uid 500); 24 Oct 2012 14:57:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23227 invoked by uid 99); 24 Oct 2012 14:57:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Oct 2012 14:57:08 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of SRS0=JJ8sAb=IV=basetechnology.com=jack@yourhostingaccount.com designates 65.254.254.75 as permitted sender)
Received: from [65.254.254.75] (HELO mailout08.yourhostingaccount.com) (65.254.254.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Oct 2012 14:56:59 +0000
Received: from mailscan20.yourhostingaccount.com ([10.1.15.20] helo=mailscan20.yourhostingaccount.com)
	by mailout08.yourhostingaccount.com with esmtp (Exim)
	id 1TR2Nq-0000kJ-K9
	for java-user@lucene.apache.org; Wed, 24 Oct 2012 10:56:38 -0400
Received: from impout01.yourhostingaccount.com ([10.1.55.1] helo=impout01.yourhostingaccount.com)
	by mailscan20.yourhostingaccount.com with esmtp (Exim)
	id 1TR2Nq-0001ty-0O
	for java-user@lucene.apache.org; Wed, 24 Oct 2012 10:56:38 -0400
Received: from authsmtp05.yourhostingaccount.com ([10.1.18.5])
	by impout01.yourhostingaccount.com with NO UCE
	id F2wd1k00R06ZpSa012wdgx; Wed, 24 Oct 2012 10:56:37 -0400
X-Authority-Analysis: v=2.0 cv=IICA+3TG c=1 sm=1
 a=PHQHB1QSaEYgcU2qnZkzMw==:17 a=aQzbgH187woA:10 a=qMdIY7CGSzwA:10
 a=3jZET7lWBKwA:10 a=8nJEP1OIZ-IA:10 a=jvYhGVW7AAAA:8 a=t2VDU1TAFrAA:10
 a=mV9VRH-2AAAA:8 a=eAAL1In8AAAA:8 a=47kcZiK9beDibzrGbeoA:9 a=wPNLvfGTeEIA:10
 a=YjYW3QSkt2gA:10 a=h76urjnKWNAA:10 a=pPeV6em2N6YA:10 a=62trOLSKjwoA:10
 a=9O1N9SI/4ZbXZMy1Cl+5fA==:117
X-EN-OrigOutIP: 10.1.18.5
X-EN-IMPSID: F2wd1k00R06ZpSa012wdgx
Received: from 207-237-102-116.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com ([207.237.102.116] helo=JackKrupansky)
	by authsmtp05.yourhostingaccount.com with esmtpa (Exim)
	id 1TR2Nm-0006iT-Sr
	for java-user@lucene.apache.org; Wed, 24 Oct 2012 10:56:35 -0400
Message-ID: <8C658A2E402F4D95972D2764F9D12E77@JackKrupansky>
From: "Jack Krupansky" <jack@basetechnology.com>
To: <java-user@lucene.apache.org>
References: <1351075331.86820.YahooMailNeo@web120703.mail.ne1.yahoo.com>
In-Reply-To: <1351075331.86820.YahooMailNeo@web120703.mail.ne1.yahoo.com>
Subject: Re: StandardAnalyzer functionality change
Date: Wed, 24 Oct 2012 10:56:31 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3555.308
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3555.308
X-EN-UserInfo: e0a4b55451ed9f27313ebf02e3d4348d:fc4a93e1349e680c52bdd723c0ab3ef6
X-EN-AuthUser: jack@basetechnology.com
Sender:  "Jack Krupansky" <jack@basetechnology.com>
X-EN-OrigIP: 207.237.102.116
X-EN-OrigHost: 207-237-102-116.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, by design. StandardAnalyzer implements "simple word boundaries" (the 
technical term is "Unicode text segmentation"), period. As the javadoc says, 
"As of Lucene version 3.1, this class implements the Word Break rules from 
the Unicode Text Segmentation algorithm, as specified in Unicode Standard 
Annex #29." That is a "standard".

See:
http://lucene.apache.org/core/4_0_0-ALPHA/analyzers-common/org/apache/lucene/analysis/standard/StandardTokenizer.html
http://lucene.apache.org/core/4_0_0-BETA/analyzers-common/org/apache/lucene/analysis/standard/ClassicTokenizer.html

-- Jack Krupansky

-----Original Message----- 
From: kiwi clive
Sent: Wednesday, October 24, 2012 6:42 AM
To: java-user@lucene.apache.org
Subject: StandardAnalyzer functionality change

Hi all,

Sorry if I'm asking an age old question but we have migrated to lucene 3.6.0 
and I see StandardAnalyzer has changed its behaviour, particularly when 
tokenizing email addresses. From reading the forums, I understand 
StandardAnalyzer was renamed to ClassicAnalyzer - is this the case ?


If I pass the string 'user@domain.com' through these analyzers, I get the 
following tokens:

Using StandardAnalyzer(Version.LUCENE_23):  -->  user@domain.com (one token)

Using StandardAnalyzer(Version.LUCENE_36):  -->  user domain.com    (two 
tokens)
Using ClassicAnalyzer(Version.LUCENE_36):     -->  user@domain.com  (one 
token)

StandardAnalyzer is normally a good compromise as a default analyzer but the 
failure to keep an email address intact makes it less fit for purpose than 
it used to be. Is this a bug or is it by design ?  If by design, what is the 
reason for the change and is ClassicAnalyzer now the defacto-analyzer to use 
?

Thanks,
Clive 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 24 15:20:14 2012
Return-Path: <java-user-return-53897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 42A07D7A2
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 24 Oct 2012 15:20:14 +0000 (UTC)
Received: (qmail 6617 invoked by uid 500); 24 Oct 2012 15:20:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6541 invoked by uid 500); 24 Oct 2012 15:20:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6513 invoked by uid 99); 24 Oct 2012 15:20:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Oct 2012 15:20:10 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.212.170 as permitted sender)
Received: from [209.85.212.170] (HELO mail-wi0-f170.google.com) (209.85.212.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Oct 2012 15:20:03 +0000
Received: by mail-wi0-f170.google.com with SMTP id hm2so4153427wib.5
        for <java-user@lucene.apache.org>; Wed, 24 Oct 2012 08:19:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=Hznw/kWoH5Zb0XDmIwQqGtNtMEKnGU7G/KLnr4Xh0KQ=;
        b=TT3d/LW4OQssCKR5kMGnXLRSRz8Gqn97pX9YjTQ+MGY+UiHSs+glWVNAp1Jlvjllfe
         Hi2fUBO3agJ3XFiTlfALwNa2Y4OVcVHIw+MjnyWWyCK5l5SvOAyw/sfTtfcQsImeb0lZ
         0cuDaTThcDcbOVZ/rwgJtjvofS643P5HcXDdqUid4h/36tr//OTWGwta8AjJ1aT3mISg
         ib1J806gVMmF8HA45ttot5K4HXQwWJs3Na/HMSMC7LEiFKJ5isGz0YDSIW6gQEwGi+MZ
         +ikduSzRO0uhCJQDiS6EX0b0vEcmMf1FqaOek1ou74jhYeMtHlmTfPB+ccxJLtZrVkA6
         BVQQ==
Received: by 10.180.100.136 with SMTP id ey8mr6740916wib.1.1351091982824; Wed,
 24 Oct 2012 08:19:42 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.194.57.20 with HTTP; Wed, 24 Oct 2012 08:19:22 -0700 (PDT)
In-Reply-To: <8C658A2E402F4D95972D2764F9D12E77@JackKrupansky>
References: <1351075331.86820.YahooMailNeo@web120703.mail.ne1.yahoo.com> <8C658A2E402F4D95972D2764F9D12E77@JackKrupansky>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 24 Oct 2012 16:19:22 +0100
Message-ID: <CAEY5pxUX8oWQ4tcK8J4yTjXXtuBaZn2gS0zLfc3qpL9y+ya9fA@mail.gmail.com>
Subject: Re: StandardAnalyzer functionality change
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

If you want email addresses, UAX29URLEmailAnalyzer is another alternative.


--
Ian.


On Wed, Oct 24, 2012 at 3:56 PM, Jack Krupansky <jack@basetechnology.com> wrote:
> Yes, by design. StandardAnalyzer implements "simple word boundaries" (the
> technical term is "Unicode text segmentation"), period. As the javadoc says,
> "As of Lucene version 3.1, this class implements the Word Break rules from
> the Unicode Text Segmentation algorithm, as specified in Unicode Standard
> Annex #29." That is a "standard".
>
> See:
> http://lucene.apache.org/core/4_0_0-ALPHA/analyzers-common/org/apache/lucene/analysis/standard/StandardTokenizer.html
> http://lucene.apache.org/core/4_0_0-BETA/analyzers-common/org/apache/lucene/analysis/standard/ClassicTokenizer.html
>
> -- Jack Krupansky
>
> -----Original Message----- From: kiwi clive
> Sent: Wednesday, October 24, 2012 6:42 AM
> To: java-user@lucene.apache.org
> Subject: StandardAnalyzer functionality change
>
>
> Hi all,
>
> Sorry if I'm asking an age old question but we have migrated to lucene 3.6.0
> and I see StandardAnalyzer has changed its behaviour, particularly when
> tokenizing email addresses. From reading the forums, I understand
> StandardAnalyzer was renamed to ClassicAnalyzer - is this the case ?
>
>
> If I pass the string 'user@domain.com' through these analyzers, I get the
> following tokens:
>
> Using StandardAnalyzer(Version.LUCENE_23):  -->  user@domain.com (one token)
>
> Using StandardAnalyzer(Version.LUCENE_36):  -->  user domain.com    (two
> tokens)
> Using ClassicAnalyzer(Version.LUCENE_36):     -->  user@domain.com  (one
> token)
>
> StandardAnalyzer is normally a good compromise as a default analyzer but the
> failure to keep an email address intact makes it less fit for purpose than
> it used to be. Is this a bug or is it by design ?  If by design, what is the
> reason for the change and is ClassicAnalyzer now the defacto-analyzer to use
> ?
>
> Thanks,
> Clive
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 24 17:28:01 2012
Return-Path: <java-user-return-53898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 909B9D520
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 24 Oct 2012 17:28:01 +0000 (UTC)
Received: (qmail 21606 invoked by uid 500); 24 Oct 2012 17:27:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21423 invoked by uid 500); 24 Oct 2012 17:27:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21393 invoked by uid 99); 24 Oct 2012 17:27:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Oct 2012 17:27:58 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [98.138.91.177] (HELO nm17-vm4.bullet.mail.ne1.yahoo.com) (98.138.91.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Oct 2012 17:27:48 +0000
Received: from [98.138.90.50] by nm17.bullet.mail.ne1.yahoo.com with NNFMP; 24 Oct 2012 17:27:26 -0000
Received: from [98.138.88.239] by tm3.bullet.mail.ne1.yahoo.com with NNFMP; 24 Oct 2012 17:27:26 -0000
Received: from [127.0.0.1] by omp1039.mail.ne1.yahoo.com with NNFMP; 24 Oct 2012 17:27:26 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 636261.18422.bm@omp1039.mail.ne1.yahoo.com
Received: (qmail 22871 invoked by uid 60001); 24 Oct 2012 17:27:26 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1351099646; bh=QOZiNNaFY4VnOneSpKJoWlEdek4Bm45IzT5qQNVrpWM=; h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=SWlug3YDbBmhoBPi74eFjwwvbKhga4IJRHFPNfB7Yi68n/q26VOglQS/hKMw1iBGKHmvnx8Tudqx8LL7C6oLtwq7V9DR47/i8F4tarWKei88Tf2NJvgldMeCBwyrGZ5/GahJ5j9dDM0PFppBCxBKi9B/X8WJycv13X4aIZICVnQ=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=yMhiMgD07Cz/KDtKdf+LmXdJMeHZeasEN/0/l8SyZSsZ9BwhrJUfCKhRcRZrrCXpBNlP8aG5buRKGcYABrdQa3EwUqEeUX+9hVrAfmGXHq090pJ4MjPg8GeeezJCUtM7/hDMovqhHe2WwazSo7cTi6hvVor1WHrb+Ya6Wz5pC4s=;
X-YMail-OSG: xmza2EwVM1l3EfrWteMv2Qjyyu3gpoqZkO.XH2Iyq.HzssI
 TtIGAbIjq8dkiIugaE_x.j1PV0aasTnAza5p.60iym7SiFep44eC9wQukiiu
 ZNJVVA0mV8wfwgDTAVtQCW5HnJ9gp3aQNv4VDp1ZSNEwNrHP5mR78DWryv5k
 YkZNh2P8Lw.xYDArIU5mICyk3Z2da2ISGKs6ArZxegk3s2D4oZzEcEeMTpmQ
 .NL_pbSPEEZKJ0ci3f4bRiReeV24Sco.MXgbzH4ljvgLsW7TshW_6305c.oX
 NXVH6qFhTej5w.SDo69szTI32..kC.3LkfW94uOVl.tcge5gWxTkWXAoShco
 MbqZlLwyda1z7lbY7OmPcUbKX.zHEw88npc9wzE_EO5lRGE0vpMEsh7z_58X
 Fi2MlGqrZn1bwIpDqt6.FtLH_pEBQ1QD_qqy0G1Ar7XMXqaL7kd2mLWbBtKU
 NPDCIAEcHpQGkKkK9DV2AVSK9_ZdbU4CFtLCeBhRrMU7Pzw_y3VN3OGj8XNJ
 mlVKMXer59vNjVDod4yWVA5tjSUzo84QW4eHT3fistxgIqGH_geEDzGErUT9
 .ZXf40a4shYn8RACn
Received: from [146.101.57.209] by web120702.mail.ne1.yahoo.com via HTTP; Wed, 24 Oct 2012 10:27:26 PDT
X-Rocket-MIMEInfo: 001.001,VGhhbmtzIGZvciB0aGUgcmVzcG9uc2VzIGNoYXBzLCB2ZXJ5IGluZm9ybWF0aXZlLCBhbmQgbW9zdCBhcHByZWNpYXRlZCA6LSkKCgoKCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwogRnJvbTogSWFuIExlYSA8aWFuLmxlYUBnbWFpbC5jb20.ClRvOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcgClNlbnQ6IFdlZG5lc2RheSwgT2N0b2JlciAyNCwgMjAxMiA0OjE5IFBNClN1YmplY3Q6IFJlOiBTdGFuZGFyZEFuYWx5emVyIGZ1bmN0aW9uYWxpdHkgY2hhbmdlCiAKSWYgeW91IHdhbnQgZW0BMAEBAQE-
X-Mailer: YahooMailWebService/0.8.123.460
References: <1351075331.86820.YahooMailNeo@web120703.mail.ne1.yahoo.com> <8C658A2E402F4D95972D2764F9D12E77@JackKrupansky> <CAEY5pxUX8oWQ4tcK8J4yTjXXtuBaZn2gS0zLfc3qpL9y+ya9fA@mail.gmail.com>
Message-ID: <1351099646.20446.YahooMailNeo@web120702.mail.ne1.yahoo.com>
Date: Wed, 24 Oct 2012 10:27:26 -0700 (PDT)
From: kiwi clive <kiwi_clive@yahoo.com>
Reply-To: kiwi clive <kiwi_clive@yahoo.com>
Subject: Re: StandardAnalyzer functionality change
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <CAEY5pxUX8oWQ4tcK8J4yTjXXtuBaZn2gS0zLfc3qpL9y+ya9fA@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="-985778932-1965130965-1351099646=:20446"
X-Virus-Checked: Checked by ClamAV on apache.org

---985778932-1965130965-1351099646=:20446
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Thanks for the responses chaps, very informative, and most appreciated :-)=
=0A=0A=0A=0A=0A=0A________________________________=0A From: Ian Lea <ian.le=
a@gmail.com>=0ATo: java-user@lucene.apache.org =0ASent: Wednesday, October =
24, 2012 4:19 PM=0ASubject: Re: StandardAnalyzer functionality change=0A =
=0AIf you want email addresses, UAX29URLEmailAnalyzer is another alternativ=
e.=0A=0A=0A--=0AIan.=0A=0A=0AOn Wed, Oct 24, 2012 at 3:56 PM, Jack Krupansk=
y <jack@basetechnology.com> wrote:=0A> Yes, by design. StandardAnalyzer imp=
lements "simple word boundaries" (the=0A> technical term is "Unicode text s=
egmentation"), period. As the javadoc says,=0A> "As of Lucene version 3.1, =
this class implements the Word Break rules from=0A> the Unicode Text Segmen=
tation algorithm, as specified in Unicode Standard=0A> Annex #29." That is =
a "standard".=0A>=0A> See:=0A> http://lucene.apache.org/core/4_0_0-ALPHA/an=
alyzers-common/org/apache/lucene/analysis/standard/StandardTokenizer.html=
=0A> http://lucene.apache.org/core/4_0_0-BETA/analyzers-common/org/apache/l=
ucene/analysis/standard/ClassicTokenizer.html=0A>=0A> -- Jack Krupansky=0A>=
=0A> -----Original Message----- From: kiwi clive=0A> Sent: Wednesday, Octob=
er 24, 2012 6:42 AM=0A> To: java-user@lucene.apache.org=0A> Subject: Standa=
rdAnalyzer functionality change=0A>=0A>=0A> Hi all,=0A>=0A> Sorry if I'm as=
king an age old question but we have migrated to lucene 3.6.0=0A> and I see=
 StandardAnalyzer has changed its behaviour, particularly when=0A> tokenizi=
ng email addresses. From reading the forums, I understand=0A> StandardAnaly=
zer was renamed to ClassicAnalyzer - is this the case ?=0A>=0A>=0A> If I pa=
ss the string 'user@domain.com' through these analyzers, I get the=0A> foll=
owing tokens:=0A>=0A> Using StandardAnalyzer(Version.LUCENE_23):=A0 -->=A0 =
user@domain.com (one token)=0A>=0A> Using StandardAnalyzer(Version.LUCENE_3=
6):=A0 -->=A0 user domain.com=A0 =A0 (two=0A> tokens)=0A> Using ClassicAnal=
yzer(Version.LUCENE_36):=A0 =A0  -->=A0 user@domain.com=A0 (one=0A> token)=
=0A>=0A> StandardAnalyzer is normally a good compromise as a default analyz=
er but the=0A> failure to keep an email address intact makes it less fit fo=
r purpose than=0A> it used to be. Is this a bug or is it by design ?=A0 If =
by design, what is the=0A> reason for the change and is ClassicAnalyzer now=
 the defacto-analyzer to use=0A> ?=0A>=0A> Thanks,=0A> Clive=0A>=0A> ------=
---------------------------------------------------------------=0A> To unsu=
bscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> For additional=
 commands, e-mail: java-user-help@lucene.apache.org=0A>=0A=0A--------------=
-------------------------------------------------------=0ATo unsubscribe, e=
-mail: java-user-unsubscribe@lucene.apache.org=0AFor additional commands, e=
-mail: java-user-help@lucene.apache.org
---985778932-1965130965-1351099646=:20446--

From java-user-return-53899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 24 17:56:30 2012
Return-Path: <java-user-return-53899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B7F40DC5C
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 24 Oct 2012 17:56:30 +0000 (UTC)
Received: (qmail 95565 invoked by uid 500); 24 Oct 2012 17:56:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95515 invoked by uid 500); 24 Oct 2012 17:56:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95497 invoked by uid 99); 24 Oct 2012 17:56:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Oct 2012 17:56:28 +0000
X-ASF-Spam-Status: No, hits=2.9 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [98.139.91.78] (HELO nm8.bullet.mail.sp2.yahoo.com) (98.139.91.78)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Oct 2012 17:56:19 +0000
Received: from [72.30.22.93] by nm8.bullet.mail.sp2.yahoo.com with NNFMP; 24 Oct 2012 17:55:56 -0000
Received: from [98.139.91.25] by tm15.bullet.mail.sp2.yahoo.com with NNFMP; 24 Oct 2012 17:55:56 -0000
Received: from [127.0.0.1] by omp1025.mail.sp2.yahoo.com with NNFMP; 24 Oct 2012 17:55:56 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 798994.53149.bm@omp1025.mail.sp2.yahoo.com
Received: (qmail 26080 invoked by uid 60001); 24 Oct 2012 17:55:56 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com.mx; s=s1024; t=1351101356; bh=FxHG5IVvAsxSE/Jz5rGmTHZ/LYYexbKDpx12eA76atE=; h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=orcBNdMnH49XL8Yc9gD1i6oXi/XEQfPvg9mOZpyHANiY2W8b/gsCSsdM10gsM9rysPc3DfTTGy71iCTanI8Becm4/tup+2H5ZpjMZG+tR6s7eil9JKUPUwq+4KR2FpQx1KCKdHZfwQI0fxVGGaYSjVO4DNyLFctto92NpG9lKD0=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com.mx;
  h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=H1mPDefy9sXX8ie6cRc2GEmiK69mItxOL5RVaaxADxHQ8kRL4bChTAjFyC5aOySsqmykd9vhNFhB3iwIuFpdg+gGYSg99A2Ofu3EfQxZKLhsauWOxczKBb94lx0wNjQuIgv+yTpoFCe47kwWkrMhyZo0hUsr2YFZ9xoP1rDJ4Jo=;
X-YMail-OSG: CyyoK2UVM1nBTRJAHPgJKEuUbU.DJxGHzXUROka2i05zKIu
 pigHDoReteOnnKHhQm5bH.kfBoQrj90xV53bkfwEJ7.HerFmYbr0Rbe_NPI8
 xIMzDwQ9UZ3s2_PMkLNEfP85hWjLT0Vo02o5gswd0aQGTV8aBICw3Zj.Wfvh
 nQYge5iZ5ds_0lnR08zkKfpKliPvwSVdS3tvQM6p0abqZ4P8p1a2rVNoKxwc
 ozmjkOhMZZ_BGm1wv1L992DDxTo8i5irOEZBnwuh.fFXJiB_07jMYApMZ6Gm
 34I5txkneCJJhVSf1BMWYgAQWK8QszRJeXqr6DFVI_Pps8KrM79z6JRfaBvw
 4hMGgbrutbbvF67xXs41R67VE0h4atOpu9NVKluCjENrIW9DEMZHnaZPc0Ln
 BQCNTQwS_GVjykKfdKguR.CcMakOr0zZB0m1IpCQmHA7qpqv1dzBFGwHtxJE
 m9CNjh9LDKwTDBWL8hc_XubRIkW0GlYKnPvemUbVYSu9.Pl0R9QpPsa_30VW
 W5oncTHMC3P38Gy4-
Received: from [201.116.131.102] by web45216.mail.sp1.yahoo.com via HTTP; Wed, 24 Oct 2012 10:55:56 PDT
X-Rocket-MIMEInfo: 001.001,SSBhbSBtaWdyYXRpbmcgY29kZSBmcm9tIEx1Y2VuZSAzIHRvIEx1Y2VuZSA0Li4uIGFuZCBpIGhhdmUgdGhlIGZvbGxvd2luZyBjb2RlIHRoYXQgaSBkb24ndCBrbm93IGhvdyB0byBjaGFuZ2U6CsKgCmhpdHMgPSBzZWFyY2hlci5zZWFyY2gocXVlcnlHbG9iYWwsIHNlYXJjaGVyLm1heERvYygpLArCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoCBuZXcgU29ydChuZXcgU29ydEZpZWxkKG9yZGVuYXJQb3IsIFNvcnRGaWVsZC5TVFJJTkcpKSk7CsKgCkkgYWxyZWFkeSBjaGFuZ2UgdGhlIHMBMAEBAQE-
X-Mailer: YahooMailWebService/0.8.123.460
References: <1351075331.86820.YahooMailNeo@web120703.mail.ne1.yahoo.com> <8C658A2E402F4D95972D2764F9D12E77@JackKrupansky> <CAEY5pxUX8oWQ4tcK8J4yTjXXtuBaZn2gS0zLfc3qpL9y+ya9fA@mail.gmail.com> <1351099646.20446.YahooMailNeo@web120702.mail.ne1.yahoo.com>
Message-ID: <1351101356.10752.YahooMailNeo@web45216.mail.sp1.yahoo.com>
Date: Wed, 24 Oct 2012 10:55:56 -0700 (PDT)
From: Carlos de Luna Saenz <cdelunasaenz@yahoo.com.mx>
Reply-To: Carlos de Luna Saenz <cdelunasaenz@yahoo.com.mx>
Subject: SortField.STRING
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <1351099646.20446.YahooMailNeo@web120702.mail.ne1.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="1006926929-1253008032-1351101356=:10752"
X-Virus-Checked: Checked by ClamAV on apache.org

--1006926929-1253008032-1351101356=:10752
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

I am migrating code from Lucene 3 to Lucene 4... and i have the following c=
ode that i don't know how to change:=0A=A0=0Ahits =3D searcher.search(query=
Global, searcher.maxDoc(),=0A=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0 new Sort(new SortField(ordenarPor, SortField.STRING)));=0A=A0=
=0AI already change the searcher.maxDoc() to indxr.maxDoc() but SortField.S=
TRING does not exist anymore... what do i have to do?=0AIn the same code i =
have a class called SpanishAnalyzer:=0Apublic class SpanishAnalyzer=A0 exte=
nds Analyzer {=0A=A0=A0=A0=A0 public static final String[] SPANISH_STOP_WOR=
DS =3D { "." };=A0 =0A=A0=A0=A0=A0 =0A=A0=A0=A0=A0 private Set<Object> stop=
Table =3D new HashSet<Object>();=A0 =0A=A0=A0=A0=A0 =0A=A0=A0=A0=A0 private=
 Set<Object> exclTable =3D new HashSet<Object>();=A0 =0A=A0=A0=A0 =0A=A0=A0=
=A0=A0 public SpanishAnalyzer() {=A0 =0A=A0=A0=A0=A0=A0=A0=A0 stopTable =3D=
 StopFilter.makeStopSet(Version.LUCENE_40,SPANISH_STOP_WORDS);=A0 =0A=A0=A0=
=A0=A0=A0=A0=A0 =0A=A0=A0=A0 }=A0 =0A=A0=A0=A0=A0 public SpanishAnalyzer(Ve=
rsion version){=0A=A0=A0=A0=A0=A0=A0=A0=A0 stopTable =3D StopFilter.makeSto=
pSet(version,SPANISH_STOP_WORDS);=0A=A0=A0=A0=A0 }=0A=A0=A0=A0=A0 =0A=A0=A0=
=A0=A0 public SpanishAnalyzer(String[] stopWords) {=A0 =0A=A0=A0=A0=A0=A0=
=A0=A0 stopTable =3D StopFilter.makeStopSet(Version.LUCENE_40,stopWords);=
=A0 =0A=A0=A0=A0 }=0A=A0=A0=A0=A0 public SpanishAnalyzer(File stopWords) th=
rows IOException {=A0 =0A=A0=A0=A0=A0=A0=A0=A0 stopTable =3D new HashSet(Wo=
rdlistLoader.getWordSet(new FileReader(stopWords), Version.LUCENE_40));=A0 =
=0A=A0=A0=A0 }=0A=A0=A0=A0 =0A//=A0=A0=A0 @Override=0A//=A0=A0=A0 public To=
kenStream tokenStream(String fieldName, Reader reader) {=0A//=A0=A0=A0=A0=
=A0=A0=A0 return new LowerCaseFilter(Version.LUCENE_40,new ASCIIFoldingFilt=
er(=0A//=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 new StopFilter(Versio=
n.LUCENE_40,=0A//=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 new StandardTokenizer(Version.LUCENE_4=
0,=0A//=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0 reader), =0A//=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 stopTable)));=0A//=A0=
=A0=A0 }=0A=A0=A0=A0 @Override=0A=A0=A0=A0 protected TokenStreamComponents =
createComponents(String string, Reader reader) {=0A=A0=A0=A0=A0=A0=A0=A0 th=
row new UnsupportedOperationException("Not supported yet.");=0A=A0=A0=A0 }=
=0A=A0=A0=A0 =0A}=0A=0AThe problem is that i can't override TokenStream any=
more and now i have to implement the createComponents method and i am not s=
ure what do i supposed to do there... thanks in advance for both troubles.
--1006926929-1253008032-1351101356=:10752--

From java-user-return-53900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 24 18:56:45 2012
Return-Path: <java-user-return-53900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EF01ADE67
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 24 Oct 2012 18:56:44 +0000 (UTC)
Received: (qmail 90651 invoked by uid 500); 24 Oct 2012 18:56:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90583 invoked by uid 500); 24 Oct 2012 18:56:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90572 invoked by uid 99); 24 Oct 2012 18:56:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Oct 2012 18:56:42 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-we0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Oct 2012 18:56:37 +0000
Received: by mail-we0-f176.google.com with SMTP id z53so493912wey.35
        for <java-user@lucene.apache.org>; Wed, 24 Oct 2012 11:56:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=VTqt5QWHOY6LbLEwFPdrTh70VksmnlGtd1dOtcDA5H8=;
        b=IEkK8Fp4seHpPLFzBDgjnEXN+jCjoVUF7QuuCtvPyjoQLxNe94AaeSoCbB9Yj1njfm
         UKwT78Y1MSCh0vMNkLsiKv5wtzu4zQiCO9EZGXe0GTgARfahJBwogRJknnfQo7vuQRlJ
         fdj5fQa1jK7hLqIlatSa6IEipsrkrtiEkKfhx4vLIEbbCs5u0fnXjebWTwAJIP3Tpv9e
         XdVSOakhB75W1pUoIO6VAt6zLZbivgyFO2P35Fobwa0qKBZE1Q6naXdNwE67bLrWw5mG
         13bCzYKMG+DhBG97LSj1r/d9dqQa1JZTTCVNQaiD0HZS6WVqebgf2sY3l/TYY/aaqKXh
         Nuhg==
Received: by 10.180.90.201 with SMTP id by9mr4573080wib.5.1351104976694; Wed,
 24 Oct 2012 11:56:16 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.194.57.20 with HTTP; Wed, 24 Oct 2012 11:55:56 -0700 (PDT)
In-Reply-To: <1351101356.10752.YahooMailNeo@web45216.mail.sp1.yahoo.com>
References: <1351075331.86820.YahooMailNeo@web120703.mail.ne1.yahoo.com>
 <8C658A2E402F4D95972D2764F9D12E77@JackKrupansky> <CAEY5pxUX8oWQ4tcK8J4yTjXXtuBaZn2gS0zLfc3qpL9y+ya9fA@mail.gmail.com>
 <1351099646.20446.YahooMailNeo@web120702.mail.ne1.yahoo.com> <1351101356.10752.YahooMailNeo@web45216.mail.sp1.yahoo.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 24 Oct 2012 19:55:56 +0100
Message-ID: <CAEY5pxW0yhNZd3=Lh7o-OKzUxwQBo0TfG6aUH+05N0fX0XN0Fw@mail.gmail.com>
Subject: Re: SortField.STRING
To: java-user@lucene.apache.org, 
	Carlos de Luna Saenz <cdelunasaenz@yahoo.com.mx>
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

SortField.Type.STRING maybe?

Can't help with the other question.  It's generally best to send one
question per message.  Looking at the source code might help.


--
Ian.


On Wed, Oct 24, 2012 at 6:55 PM, Carlos de Luna Saenz
<cdelunasaenz@yahoo.com.mx> wrote:
> I am migrating code from Lucene 3 to Lucene 4... and i have the following code that i don't know how to change:
>
> hits = searcher.search(queryGlobal, searcher.maxDoc(),
>                     new Sort(new SortField(ordenarPor, SortField.STRING)));
>
> I already change the searcher.maxDoc() to indxr.maxDoc() but SortField.STRING does not exist anymore... what do i have to do?
> In the same code i have a class called SpanishAnalyzer:
> public class SpanishAnalyzer  extends Analyzer {
>      public static final String[] SPANISH_STOP_WORDS = { "." };
>
>      private Set<Object> stopTable = new HashSet<Object>();
>
>      private Set<Object> exclTable = new HashSet<Object>();
>
>      public SpanishAnalyzer() {
>         stopTable = StopFilter.makeStopSet(Version.LUCENE_40,SPANISH_STOP_WORDS);
>
>     }
>      public SpanishAnalyzer(Version version){
>          stopTable = StopFilter.makeStopSet(version,SPANISH_STOP_WORDS);
>      }
>
>      public SpanishAnalyzer(String[] stopWords) {
>         stopTable = StopFilter.makeStopSet(Version.LUCENE_40,stopWords);
>     }
>      public SpanishAnalyzer(File stopWords) throws IOException {
>         stopTable = new HashSet(WordlistLoader.getWordSet(new FileReader(stopWords), Version.LUCENE_40));
>     }
>
> //    @Override
> //    public TokenStream tokenStream(String fieldName, Reader reader) {
> //        return new LowerCaseFilter(Version.LUCENE_40,new ASCIIFoldingFilter(
> //                new StopFilter(Version.LUCENE_40,
> //                                new StandardTokenizer(Version.LUCENE_40,
> //                                                      reader),
> //                                stopTable)));
> //    }
>     @Override
>     protected TokenStreamComponents createComponents(String string, Reader reader) {
>         throw new UnsupportedOperationException("Not supported yet.");
>     }
>
> }
>
> The problem is that i can't override TokenStream anymore and now i have to implement the createComponents method and i am not sure what do i supposed to do there... thanks in advance for both troubles.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 24 19:49:00 2012
Return-Path: <java-user-return-53901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 55261915E
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 24 Oct 2012 19:49:00 +0000 (UTC)
Received: (qmail 57502 invoked by uid 500); 24 Oct 2012 19:48:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57451 invoked by uid 500); 24 Oct 2012 19:48:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57443 invoked by uid 99); 24 Oct 2012 19:48:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Oct 2012 19:48:58 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of siraj@jobdiva.com designates 64.147.106.2 as permitted sender)
Received: from [64.147.106.2] (HELO mail.jobdiva.com) (64.147.106.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Oct 2012 19:48:51 +0000
Received: from JOBDIVAEXMB1.jobdiva.local ([::1]) by jobdivaexf.jobdiva.local
 ([::1]) with mapi; Wed, 24 Oct 2012 15:48:29 -0400
From: Siraj Haider <siraj@jobdiva.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 24 Oct 2012 15:48:28 -0400
Subject: RE: Scoring based on document
Thread-Topic: Scoring based on document
Thread-Index: Ac2xR/JjdaioY7z6QnO8LZ+ocUQ5qAAIlQXAAC2OzlA=
Message-ID: <7276923E6E5AA04C97876BF29FF86716E071A939@jobdivaexmb1.jobdiva.local>
References: <7276923E6E5AA04C97876BF29FF86716E071A7C4@jobdivaexmb1.jobdiva.local>
	<CAAHmpkgOsAbCkXYc+vY5WXVtuPexn_X0HD_E4SUtD372a4txfA@mail.gmail.com>
	<7276923E6E5AA04C97876BF29FF86716E071A7F4@jobdivaexmb1.jobdiva.local>
 <CAMbOsnpp9QYBaM7VwktQhKXz1K7P=zp_uiE8GG97YtUe9Q7d4g@mail.gmail.com>
 <7276923E6E5AA04C97876BF29FF86716E071A894@jobdivaexmb1.jobdiva.local>
In-Reply-To: <7276923E6E5AA04C97876BF29FF86716E071A894@jobdivaexmb1.jobdiva.local>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Any other suggestions?

regards
-Siraj
(212) 306-0154

-----Original Message-----
From: Siraj Haider [mailto:siraj@jobdiva.com]
Sent: Tuesday, October 23, 2012 6:06 PM
To: java-user@lucene.apache.org
Cc: simon.willnauer@gmail.com
Subject: RE: Scoring based on document

Thanks for the suggestion, but in that scenario, I would lose the ability t=
o search on individual fields, i.e. I would not be able to search on title =
field only, and would end up with results where the searched term might be =
in the description field.

regards
-Siraj
(212) 306-0154

-----Original Message-----
From: selvakumar netaji [mailto:vvekselva.gm@gmail.com]
Sent: Tuesday, October 23, 2012 1:58 PM
To: java-user@lucene.apache.org
Cc: simon.willnauer@gmail.com
Subject: Re: Scoring based on document

Hi All,

Just wanted to make sure that will approach would fails for this case.

Having a copy field for each of the document, having the concatenated value=
s  of all the fields in that document and searching on the copy field would=
 just produce the result. The resulting docs would  be based on the frequen=
cy of the query terms in the whole document.

On Tue, Oct 23, 2012 at 7:48 PM, Siraj Haider <siraj@jobdiva.com> wrote:

> So, just to confirm, using Lucene 4.0, we would be able to issue a
> search on one or more fields and would be able to get the results
> sorted by a custom field and also would be able to get the score of
> each document based on the frequency of the terms searched in all the
> indexed fields of that document (rather than getting it scored just by
> the fields in the query, which is the case now).
>
> If this is true, could be please guide me into the direction on how to
> implement it?
>
> Thanks a lot for your help.
>
> -Siraj
> (212) 306-0154
>
> -----Original Message-----
> From: Simon Willnauer [mailto:simon.willnauer@gmail.com]
> Sent: Tuesday, October 23, 2012 3:51 AM
> To: java-user@lucene.apache.org
> Subject: Re: Scoring based on document
>
> hey there,
>
>
> in Lucene 4 you can override the termStatistics / CollectionStatistics
> used for scoring in the IndexSearcher. You can take multiple fields
> into account here in order use it for scoring. Here is the javadoc
> link:
>
>
> http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/Inde
> xSearcher.html#termStatistics(org.apache.lucene.index.Term
> ,
> org.apache.lucene.index.TermContext)
>
> http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/Inde
> xSearcher.html#collectionStatistics(java.lang.String)
>
>
> simon
> On Mon, Oct 22, 2012 at 11:25 PM, Siraj Haider <siraj@jobdiva.com> wrote:
> > I am using DefaultSimilarity and did not boost any field while indexing=
.
> My index is comprised of the following fields:
> >
> > -          Title
> >
> > -          Author
> >
> > -          Bookname
> >
> > -          Description
> >
> > All of the 4 fields are indexed and can be searched on by the user.
> > Now
> let's say the user searches for "oracle" in Title field, the score is
> computed based on the Title field only, and its disregarding the
> frequency of the term "oracle" in other fields. It might be like that
> by design but I need to change it so that the documents are ranked
> based on the frequency in the whole document and not based on the field s=
earches. Please help!
> >
> > Thanks in advance
> > -Siraj
> >
> >
> > ________________________________
> > This electronic mail message and any attachments may contain
> > information
> which is privileged, sensitive and/or otherwise exempt from disclosure
> under applicable law. The information is intended only for the use of
> the individual or entity named as the addressee above. If you are not
> the intended recipient, you are hereby notified that any disclosure,
> copying, distribution (electronic or otherwise) or forwarding of, or
> the taking of any action in reliance on, the contents of this
> transmission is strictly prohibited. If you have received this
> electronic transmission in error, please notify us by telephone,
> facsimile, or e-mail as noted above to arrange for the return of any elec=
tronic mail or attachments. Thank You.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> This electronic mail message and any attachments may contain
> information which is privileged, sensitive and/or otherwise exempt
> from disclosure under applicable law. The information is intended only
> for the use of the individual or entity named as the addressee above.
> If you are not the intended recipient, you are hereby notified that
> any disclosure, copying, distribution (electronic or otherwise) or
> forwarding of, or the taking of any action in reliance on, the
> contents of this transmission is strictly prohibited. If you have
> received this electronic transmission in error, please notify us by
> telephone, facsimile, or e-mail as noted above to arrange for the return =
of any electronic mail or attachments. Thank You.
>

This electronic mail message and any attachments may contain information wh=
ich is privileged, sensitive and/or otherwise exempt from disclosure under =
applicable law. The information is intended only for the use of the individ=
ual or entity named as the addressee above. If you are not the intended rec=
ipient, you are hereby notified that any disclosure, copying, distribution =
(electronic or otherwise) or forwarding of, or the taking of any action in =
reliance on, the contents of this transmission is strictly prohibited. If y=
ou have received this electronic transmission in error, please notify us by=
 telephone, facsimile, or e-mail as noted above to arrange for the return o=
f any electronic mail or attachments. Thank You.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


This electronic mail message and any attachments may contain information wh=
ich is privileged, sensitive and/or otherwise exempt from disclosure under =
applicable law. The information is intended only for the use of the individ=
ual or entity named as the addressee above. If you are not the intended rec=
ipient, you are hereby notified that any disclosure, copying, distribution =
(electronic or otherwise) or forwarding of, or the taking of any action in =
reliance on, the contents of this transmission is strictly prohibited. If y=
ou have received this electronic transmission in error, please notify us by=
 telephone, facsimile, or e-mail as noted above to arrange for the return o=
f any electronic mail or attachments. Thank You.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 24 19:52:42 2012
Return-Path: <java-user-return-53902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2839B9177
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 24 Oct 2012 19:52:42 +0000 (UTC)
Received: (qmail 69350 invoked by uid 500); 24 Oct 2012 19:52:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69283 invoked by uid 500); 24 Oct 2012 19:52:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69274 invoked by uid 99); 24 Oct 2012 19:52:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Oct 2012 19:52:40 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of SRS0=JJ8sAb=IV=basetechnology.com=jack@yourhostingaccount.com designates 65.254.253.109 as permitted sender)
Received: from [65.254.253.109] (HELO mailout13.yourhostingaccount.com) (65.254.253.109)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Oct 2012 19:52:31 +0000
Received: from mailscan09.yourhostingaccount.com ([10.1.15.9] helo=mailscan09.yourhostingaccount.com)
	by mailout13.yourhostingaccount.com with esmtp (Exim)
	id 1TR6zr-0006z0-58
	for java-user@lucene.apache.org; Wed, 24 Oct 2012 15:52:11 -0400
Received: from impout01.yourhostingaccount.com ([10.1.55.1] helo=impout01.yourhostingaccount.com)
	by mailscan09.yourhostingaccount.com with esmtp (Exim)
	id 1TR6zq-0007xU-Nt; Wed, 24 Oct 2012 15:52:10 -0400
Received: from authsmtp04.yourhostingaccount.com ([10.1.18.4])
	by impout01.yourhostingaccount.com with NO UCE
	id F7sA1k00D05G96J017sAHM; Wed, 24 Oct 2012 15:52:10 -0400
X-Authority-Analysis: v=2.0 cv=IICA+3TG c=1 sm=1
 a=PHQHB1QSaEYgcU2qnZkzMw==:17 a=aQzbgH187woA:10 a=qMdIY7CGSzwA:10
 a=3jZET7lWBKwA:10 a=8nJEP1OIZ-IA:10 a=jvYhGVW7AAAA:8 a=t2VDU1TAFrAA:10
 a=mV9VRH-2AAAA:8 a=pGLkceISAAAA:8 a=eAAL1In8AAAA:8 a=GvYtIf9fKNNFJgrrjCcA:9
 a=wPNLvfGTeEIA:10 a=YjYW3QSkt2gA:10 a=h76urjnKWNAA:10 a=pPeV6em2N6YA:10
 a=MSl-tDqOz04A:10 a=EMlJoiak7gQA:10 a=62trOLSKjwoA:10
 a=ZyCNx9LFiA0kwLx3ZJIN5w==:117
X-EN-OrigOutIP: 10.1.18.4
X-EN-IMPSID: F7sA1k00D05G96J017sAHM
Received: from 207-237-102-116.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com ([207.237.102.116] helo=JackKrupansky)
	by authsmtp04.yourhostingaccount.com with esmtpa (Exim)
	id 1TR6zp-0004MZ-Uc; Wed, 24 Oct 2012 15:52:10 -0400
Message-ID: <909D52ADDF344816BAD75261002E3378@JackKrupansky>
From: "Jack Krupansky" <jack@basetechnology.com>
To: <java-user@lucene.apache.org>,
	"kiwi clive" <kiwi_clive@yahoo.com>
References: <1351075331.86820.YahooMailNeo@web120703.mail.ne1.yahoo.com> <8C658A2E402F4D95972D2764F9D12E77@JackKrupansky> <CAEY5pxUX8oWQ4tcK8J4yTjXXtuBaZn2gS0zLfc3qpL9y+ya9fA@mail.gmail.com> <1351099646.20446.YahooMailNeo@web120702.mail.ne1.yahoo.com>
In-Reply-To: <1351099646.20446.YahooMailNeo@web120702.mail.ne1.yahoo.com>
Subject: Re: StandardAnalyzer functionality change
Date: Wed, 24 Oct 2012 15:52:05 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3555.308
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3555.308
X-EN-UserInfo: e0a4b55451ed9f27313ebf02e3d4348d:fc4a93e1349e680c52bdd723c0ab3ef6
X-EN-AuthUser: jack@basetechnology.com
Sender:  "Jack Krupansky" <jack@basetechnology.com>
X-EN-OrigIP: 207.237.102.116
X-EN-OrigHost: 207-237-102-116.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com
X-Virus-Checked: Checked by ClamAV on apache.org

I didn't explicitly say it, but ClassicAnalyzer does do exactly what you 
want it to do - work break plus email and URL, or StandardAnalyzer plus 
email and URL.

-- Jack Krupansky

-----Original Message----- 
From: kiwi clive
Sent: Wednesday, October 24, 2012 1:27 PM
To: java-user@lucene.apache.org
Subject: Re: StandardAnalyzer functionality change

Thanks for the responses chaps, very informative, and most appreciated :-)





________________________________
From: Ian Lea <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Sent: Wednesday, October 24, 2012 4:19 PM
Subject: Re: StandardAnalyzer functionality change

If you want email addresses, UAX29URLEmailAnalyzer is another alternative.


--
Ian.


On Wed, Oct 24, 2012 at 3:56 PM, Jack Krupansky <jack@basetechnology.com> 
wrote:
> Yes, by design. StandardAnalyzer implements "simple word boundaries" (the
> technical term is "Unicode text segmentation"), period. As the javadoc 
> says,
> "As of Lucene version 3.1, this class implements the Word Break rules from
> the Unicode Text Segmentation algorithm, as specified in Unicode Standard
> Annex #29." That is a "standard".
>
> See:
> http://lucene.apache.org/core/4_0_0-ALPHA/analyzers-common/org/apache/lucene/analysis/standard/StandardTokenizer.html
> http://lucene.apache.org/core/4_0_0-BETA/analyzers-common/org/apache/lucene/analysis/standard/ClassicTokenizer.html
>
> -- Jack Krupansky
>
> -----Original Message----- From: kiwi clive
> Sent: Wednesday, October 24, 2012 6:42 AM
> To: java-user@lucene.apache.org
> Subject: StandardAnalyzer functionality change
>
>
> Hi all,
>
> Sorry if I'm asking an age old question but we have migrated to lucene 
> 3.6.0
> and I see StandardAnalyzer has changed its behaviour, particularly when
> tokenizing email addresses. From reading the forums, I understand
> StandardAnalyzer was renamed to ClassicAnalyzer - is this the case ?
>
>
> If I pass the string 'user@domain.com' through these analyzers, I get the
> following tokens:
>
> Using StandardAnalyzer(Version.LUCENE_23):  -->  user@domain.com (one 
> token)
>
> Using StandardAnalyzer(Version.LUCENE_36):  -->  user domain.com    (two
> tokens)
> Using ClassicAnalyzer(Version.LUCENE_36):     -->  user@domain.com  (one
> token)
>
> StandardAnalyzer is normally a good compromise as a default analyzer but 
> the
> failure to keep an email address intact makes it less fit for purpose than
> it used to be. Is this a bug or is it by design ?  If by design, what is 
> the
> reason for the change and is ClassicAnalyzer now the defacto-analyzer to 
> use
> ?
>
> Thanks,
> Clive
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 24 20:06:37 2012
Return-Path: <java-user-return-53903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B6C3A9235
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 24 Oct 2012 20:06:37 +0000 (UTC)
Received: (qmail 18346 invoked by uid 500); 24 Oct 2012 20:06:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18282 invoked by uid 500); 24 Oct 2012 20:06:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18241 invoked by uid 99); 24 Oct 2012 20:06:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Oct 2012 20:06:37 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of SRS0=JJ8sAb=IV=basetechnology.com=jack@yourhostingaccount.com designates 65.254.253.46 as permitted sender)
Received: from [65.254.253.46] (HELO mailout05.yourhostingaccount.com) (65.254.253.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Oct 2012 20:06:28 +0000
Received: from mailscan08.yourhostingaccount.com ([10.1.15.8] helo=mailscan08.yourhostingaccount.com)
	by mailout05.yourhostingaccount.com with esmtp (Exim)
	id 1TR7DL-0001cs-JG
	for java-user@lucene.apache.org; Wed, 24 Oct 2012 16:06:07 -0400
Received: from impout01.yourhostingaccount.com ([10.1.55.1] helo=impout01.yourhostingaccount.com)
	by mailscan08.yourhostingaccount.com with esmtp (Exim)
	id 1TR7DL-0007Zc-Ep
	for java-user@lucene.apache.org; Wed, 24 Oct 2012 16:06:07 -0400
Received: from authsmtp16.yourhostingaccount.com ([10.1.18.16])
	by impout01.yourhostingaccount.com with NO UCE
	id F8671k00A0LoD9W018674z; Wed, 24 Oct 2012 16:06:07 -0400
X-Authority-Analysis: v=2.0 cv=IICA+3TG c=1 sm=1
 a=PHQHB1QSaEYgcU2qnZkzMw==:17 a=aQzbgH187woA:10 a=qMdIY7CGSzwA:10
 a=3jZET7lWBKwA:10 a=8nJEP1OIZ-IA:10 a=jvYhGVW7AAAA:8 a=t2VDU1TAFrAA:10
 a=mV9VRH-2AAAA:8 a=pGLkceISAAAA:8 a=eAAL1In8AAAA:8 a=GvYtIf9fKNNFJgrrjCcA:9
 a=wPNLvfGTeEIA:10 a=YjYW3QSkt2gA:10 a=h76urjnKWNAA:10 a=pPeV6em2N6YA:10
 a=MSl-tDqOz04A:10 a=EMlJoiak7gQA:10 a=62trOLSKjwoA:10
 a=ltXMujfcukYoTVgNOHxvog==:117
X-EN-OrigOutIP: 10.1.18.16
X-EN-IMPSID: F8671k00A0LoD9W018674z
Received: from 207-237-102-116.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com ([207.237.102.116] helo=JackKrupansky)
	by authsmtp16.yourhostingaccount.com with esmtpa (Exim)
	id 1TR7DL-0002tQ-0Z
	for java-user@lucene.apache.org; Wed, 24 Oct 2012 16:06:07 -0400
Message-ID: <066BA592E7864C1388661B6DE4019421@JackKrupansky>
From: "Jack Krupansky" <jack@basetechnology.com>
To: <java-user@lucene.apache.org>
References: <1351075331.86820.YahooMailNeo@web120703.mail.ne1.yahoo.com> <8C658A2E402F4D95972D2764F9D12E77@JackKrupansky> <CAEY5pxUX8oWQ4tcK8J4yTjXXtuBaZn2gS0zLfc3qpL9y+ya9fA@mail.gmail.com> <1351099646.20446.YahooMailNeo@web120702.mail.ne1.yahoo.com> <909D52ADDF344816BAD75261002E3378@JackKrupansky>
In-Reply-To: <909D52ADDF344816BAD75261002E3378@JackKrupansky>
Subject: Re: StandardAnalyzer functionality change
Date: Wed, 24 Oct 2012 16:06:03 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3555.308
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3555.308
X-EN-UserInfo: e0a4b55451ed9f27313ebf02e3d4348d:fc4a93e1349e680c52bdd723c0ab3ef6
X-EN-AuthUser: jack@basetechnology.com
Sender:  "Jack Krupansky" <jack@basetechnology.com>
X-EN-OrigIP: 207.237.102.116
X-EN-OrigHost: 207-237-102-116.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com
X-Virus-Checked: Checked by ClamAV on apache.org

s/work break/word break/

-- Jack Krupansky

-----Original Message----- 
From: Jack Krupansky
Sent: Wednesday, October 24, 2012 3:52 PM
To: java-user@lucene.apache.org ; kiwi clive
Subject: Re: StandardAnalyzer functionality change

I didn't explicitly say it, but ClassicAnalyzer does do exactly what you
want it to do - work break plus email and URL, or StandardAnalyzer plus
email and URL.

-- Jack Krupansky

-----Original Message----- 
From: kiwi clive
Sent: Wednesday, October 24, 2012 1:27 PM
To: java-user@lucene.apache.org
Subject: Re: StandardAnalyzer functionality change

Thanks for the responses chaps, very informative, and most appreciated :-)





________________________________
From: Ian Lea <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Sent: Wednesday, October 24, 2012 4:19 PM
Subject: Re: StandardAnalyzer functionality change

If you want email addresses, UAX29URLEmailAnalyzer is another alternative.


--
Ian.


On Wed, Oct 24, 2012 at 3:56 PM, Jack Krupansky <jack@basetechnology.com>
wrote:
> Yes, by design. StandardAnalyzer implements "simple word boundaries" (the
> technical term is "Unicode text segmentation"), period. As the javadoc 
> says,
> "As of Lucene version 3.1, this class implements the Word Break rules from
> the Unicode Text Segmentation algorithm, as specified in Unicode Standard
> Annex #29." That is a "standard".
>
> See:
> http://lucene.apache.org/core/4_0_0-ALPHA/analyzers-common/org/apache/lucene/analysis/standard/StandardTokenizer.html
> http://lucene.apache.org/core/4_0_0-BETA/analyzers-common/org/apache/lucene/analysis/standard/ClassicTokenizer.html
>
> -- Jack Krupansky
>
> -----Original Message----- From: kiwi clive
> Sent: Wednesday, October 24, 2012 6:42 AM
> To: java-user@lucene.apache.org
> Subject: StandardAnalyzer functionality change
>
>
> Hi all,
>
> Sorry if I'm asking an age old question but we have migrated to lucene 
> 3.6.0
> and I see StandardAnalyzer has changed its behaviour, particularly when
> tokenizing email addresses. From reading the forums, I understand
> StandardAnalyzer was renamed to ClassicAnalyzer - is this the case ?
>
>
> If I pass the string 'user@domain.com' through these analyzers, I get the
> following tokens:
>
> Using StandardAnalyzer(Version.LUCENE_23):  -->  user@domain.com (one 
> token)
>
> Using StandardAnalyzer(Version.LUCENE_36):  -->  user domain.com    (two
> tokens)
> Using ClassicAnalyzer(Version.LUCENE_36):     -->  user@domain.com  (one
> token)
>
> StandardAnalyzer is normally a good compromise as a default analyzer but 
> the
> failure to keep an email address intact makes it less fit for purpose than
> it used to be. Is this a bug or is it by design ?  If by design, what is 
> the
> reason for the change and is ClassicAnalyzer now the defacto-analyzer to 
> use
> ?
>
> Thanks,
> Clive
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 24 20:50:26 2012
Return-Path: <java-user-return-53904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 093EDD41C
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 24 Oct 2012 20:50:26 +0000 (UTC)
Received: (qmail 53444 invoked by uid 500); 24 Oct 2012 20:50:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53393 invoked by uid 500); 24 Oct 2012 20:50:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53385 invoked by uid 99); 24 Oct 2012 20:50:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Oct 2012 20:50:23 +0000
X-ASF-Spam-Status: No, hits=2.9 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [98.139.91.86] (HELO nm16.bullet.mail.sp2.yahoo.com) (98.139.91.86)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Oct 2012 20:50:14 +0000
Received: from [98.139.91.69] by nm16.bullet.mail.sp2.yahoo.com with NNFMP; 24 Oct 2012 20:49:52 -0000
Received: from [98.139.91.5] by tm9.bullet.mail.sp2.yahoo.com with NNFMP; 24 Oct 2012 20:49:52 -0000
Received: from [127.0.0.1] by omp1005.mail.sp2.yahoo.com with NNFMP; 24 Oct 2012 20:49:52 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 242084.39238.bm@omp1005.mail.sp2.yahoo.com
Received: (qmail 2329 invoked by uid 60001); 24 Oct 2012 20:49:52 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com.mx; s=s1024; t=1351111792; bh=XD3m4lMOAvjnHykUaJW/p4ce2JE/T5kCS8HEHlt8FHE=; h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=dWx4sVYkxIf6s3nCguBhbMsa04FSTYC+Cff9u1hdKiktUKrZYWzn+uCnyycnCgLM9gFyoRVMBOQD0echvo/ORwUqIrXuBXzx4GzhoaPBEURzTfzOmMDnn8YNCA4n65o4kSutSyuiYceS+PH5YdJz6c9LhLuOTYIM5GexndCMuc4=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com.mx;
  h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=nnsL0qXheBF6o3y1jP2LNWM60MLk4bca6uNbrpbB3QJGswqoMLUxJOQEXlUJYg+tMFyxE6/WKm2cs8TJqF+gUvSsoVew9qXl9atR4lwGWtMCLxQBXV71j3KOkIBJKK/kocI5ysHnKWp25A0wlRefT1w1TJIXcbb5gCzvEcZUDBM=;
X-YMail-OSG: WCK86S8VM1lmJ8S5I.GtQPu76T01wwovVbRRs_lD1Yw4Zd5
 z12oNFY3.RYBD4a1bRU4kKxEiMktVEZ5IY7dKksa18sbLh2oooD.5ZHhNRhY
 Kc8pEroC7vabvSo2fLGHyHbZQfUN.0_KTL2nJtRHBQHoQpxbdGOYV3eluUks
 OlKCNhYjQYDcTGTN_ClGGdpjUwE3VfXUrOjv8E2BNdtbSA5nf6YDEewVV2aU
 0lWCYcnN5kV_IYFlvnC4lkYW73F__qfIqO49igAuyDjPh2RGGcazeWW7vlFW
 eMV66qGfvaOsQ9NaooZ1XEBOY4s_6gqd_SMR5PSu21o1xbCbs0kQUHhttXdv
 1zFKtPk6_231tnWzEgTLaumELopRR3pcHUuN4sK5UUq0qHIG8XRnaAvcgx4U
 O6z2FU5kRVu54U..BFEj3qhdoI5zo9P_9kIxi5rvK_v0AyIx8GRAuRByE8nd
 5RR9IrCvAtWrAL86EKhtRxFv3WuqUk7XNZtNYOA.sOXAGqSkhftrmy9BiI40
 CJQruMoBmwQBXxBgfvGzutKxRwBbnAQ--
Received: from [201.116.131.102] by web45201.mail.sp1.yahoo.com via HTTP; Wed, 24 Oct 2012 13:49:51 PDT
X-Rocket-MIMEInfo: 001.001,VGhhbmtzLi4uIHRoYXQncyBpdC4uLiBzb3JyeSB0byBzaXR1cmIgd2l0aCBzb21ldGhpbmcgdGhhdCBzaW1wbGUuCgoKCgoKPl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCj4gRGU6IElhbiBMZWEgPGlhbi5sZWFAZ21haWwuY29tPgo.UGFyYTogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnOyBDYXJsb3MgZGUgTHVuYSBTYWVueiA8Y2RlbHVuYXNhZW56QHlhaG9vLmNvbS5teD4gCj5FbnZpYWRvOiBNacOpcmNvbGVzLCAyNCBkZSBvY3R1YnJlLCAyMDEyIDE6NTUgUC5NLgo.QXN1bnRvOiBSZToBMAEBAQE-
X-Mailer: YahooMailWebService/0.8.123.460
References: <1351075331.86820.YahooMailNeo@web120703.mail.ne1.yahoo.com> <8C658A2E402F4D95972D2764F9D12E77@JackKrupansky> <CAEY5pxUX8oWQ4tcK8J4yTjXXtuBaZn2gS0zLfc3qpL9y+ya9fA@mail.gmail.com> <1351099646.20446.YahooMailNeo@web120702.mail.ne1.yahoo.com> <1351101356.10752.YahooMailNeo@web45216.mail.sp1.yahoo.com> <CAEY5pxW0yhNZd3=Lh7o-OKzUxwQBo0TfG6aUH+05N0fX0XN0Fw@mail.gmail.com>
Message-ID: <1351111791.157.YahooMailNeo@web45201.mail.sp1.yahoo.com>
Date: Wed, 24 Oct 2012 13:49:51 -0700 (PDT)
From: Carlos de Luna Saenz <cdelunasaenz@yahoo.com.mx>
Reply-To: Carlos de Luna Saenz <cdelunasaenz@yahoo.com.mx>
Subject: Re: SortField.STRING
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <CAEY5pxW0yhNZd3=Lh7o-OKzUxwQBo0TfG6aUH+05N0fX0XN0Fw@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="1899292218-856890676-1351111791=:157"
X-Virus-Checked: Checked by ClamAV on apache.org

--1899292218-856890676-1351111791=:157
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Thanks... that's it... sorry to siturb with something that simple.=0A=0A=0A=
=0A=0A=0A>________________________________=0A> De: Ian Lea <ian.lea@gmail.c=
om>=0A>Para: java-user@lucene.apache.org; Carlos de Luna Saenz <cdelunasaen=
z@yahoo.com.mx> =0A>Enviado: Mi=E9rcoles, 24 de octubre, 2012 1:55 P.M.=0A>=
Asunto: Re: SortField.STRING=0A> =0A>SortField.Type.STRING maybe?=0A>=0A>Ca=
n't help with the other question.=A0 It's generally best to send one=0A>que=
stion per message.=A0 Looking at the source code might help.=0A>=0A>=0A>--=
=0A>Ian.=0A>=0A>=0A>On Wed, Oct 24, 2012 at 6:55 PM, Carlos de Luna Saenz=
=0A><cdelunasaenz@yahoo.com.mx> wrote:=0A>> I am migrating code from Lucene=
 3 to Lucene 4... and i have the following code that i don't know how to ch=
ange:=0A>>=0A>> hits =3D searcher.search(queryGlobal, searcher.maxDoc(),=0A=
>>=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0  new Sort(new SortField(ordenarPo=
r, SortField.STRING)));=0A>>=0A>> I already change the searcher.maxDoc() to=
 indxr.maxDoc() but SortField.STRING does not exist anymore... what do i ha=
ve to do?=0A>> In the same code i have a class called SpanishAnalyzer:=0A>>=
 public class SpanishAnalyzer=A0 extends Analyzer {=0A>>=A0 =A0 =A0 public =
static final String[] SPANISH_STOP_WORDS =3D { "." };=0A>>=0A>>=A0 =A0 =A0 =
private Set<Object> stopTable =3D new HashSet<Object>();=0A>>=0A>>=A0 =A0 =
=A0 private Set<Object> exclTable =3D new HashSet<Object>();=0A>>=0A>>=A0 =
=A0 =A0 public SpanishAnalyzer() {=0A>>=A0 =A0 =A0 =A0  stopTable =3D StopF=
ilter.makeStopSet(Version.LUCENE_40,SPANISH_STOP_WORDS);=0A>>=0A>>=A0 =A0  =
}=0A>>=A0 =A0 =A0 public SpanishAnalyzer(Version version){=0A>>=A0 =A0 =A0 =
=A0 =A0 stopTable =3D StopFilter.makeStopSet(version,SPANISH_STOP_WORDS);=
=0A>>=A0 =A0 =A0 }=0A>>=0A>>=A0 =A0 =A0 public SpanishAnalyzer(String[] sto=
pWords) {=0A>>=A0 =A0 =A0 =A0  stopTable =3D StopFilter.makeStopSet(Version=
.LUCENE_40,stopWords);=0A>>=A0 =A0  }=0A>>=A0 =A0 =A0 public SpanishAnalyze=
r(File stopWords) throws IOException {=0A>>=A0 =A0 =A0 =A0  stopTable =3D n=
ew HashSet(WordlistLoader.getWordSet(new FileReader(stopWords), Version.LUC=
ENE_40));=0A>>=A0 =A0  }=0A>>=0A>> //=A0 =A0 @Override=0A>> //=A0 =A0 publi=
c TokenStream tokenStream(String fieldName, Reader reader) {=0A>> //=A0 =A0=
 =A0 =A0 return new LowerCaseFilter(Version.LUCENE_40,new ASCIIFoldingFilte=
r(=0A>> //=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 new StopFilter(Version.LUCENE_40,=
=0A>> //=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 new=
 StandardTokenizer(Version.LUCENE_40,=0A>> //=A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0=
 =A0 reader),=0A>> //=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 stopTable)));=0A>> //=A0 =A0 }=0A>>=A0 =A0  @Override=0A>>=A0 =
=A0  protected TokenStreamComponents createComponents(String string, Reader=
 reader) {=0A>>=A0 =A0 =A0 =A0  throw new UnsupportedOperationException("No=
t supported yet.");=0A>>=A0 =A0  }=0A>>=0A>> }=0A>>=0A>> The problem is tha=
t i can't override TokenStream anymore and now i have to implement the crea=
teComponents method and i am not sure what do i supposed to do there... tha=
nks in advance for both troubles.=0A>=0A>----------------------------------=
-----------------------------------=0A>To unsubscribe, e-mail: java-user-un=
subscribe@lucene.apache.org=0A>For additional commands, e-mail: java-user-h=
elp@lucene.apache.org=0A>=0A>=0A>=0A>
--1899292218-856890676-1351111791=:157--

From java-user-return-53905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 24 21:27:04 2012
Return-Path: <java-user-return-53905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A9745D695
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 24 Oct 2012 21:27:04 +0000 (UTC)
Received: (qmail 40935 invoked by uid 500); 24 Oct 2012 21:27:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40843 invoked by uid 500); 24 Oct 2012 21:27:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40835 invoked by uid 99); 24 Oct 2012 21:27:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Oct 2012 21:27:02 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sarowe@gmail.com designates 209.85.220.176 as permitted sender)
Received: from [209.85.220.176] (HELO mail-vc0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Oct 2012 21:26:54 +0000
Received: by mail-vc0-f176.google.com with SMTP id gb22so421385vcb.35
        for <java-user@lucene.apache.org>; Wed, 24 Oct 2012 14:26:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=content-type:mime-version:subject:from:x-priority:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=Re2Q3GfhbfYh4pjXiByt2gpNapp/MBfRwaL2+GfivlM=;
        b=wGPNFP1BmbMX/16jwPRYPSkzopKtFwRdS+tHEl04RnNfY68NqJCir7j13pLPmTInNs
         abchpYGMCDrkAGGjEVmHnUbO7PR32IjyixptYH8NcwVsLxIlLPAepxftUMW5C4ZAPpMr
         bMjs7GrF+xN9dCKf+KJSH3QAVYmnco0DOkLvRYQ2eRNL7Ty5jIeoMS06yPhJXe6UX+7F
         fNg8LJIgRT+bsnDx2vfkyjDRiulm1OJelLjz9GWvqRy3BY8RPJW39LUqkklGNljbqbn4
         18NwaZHZk7PORSFdfSEoWwMN7hidm7SWjftPQoN/MsVYvgjEWxyGx08png0Je2zKtIQ/
         N9mQ==
Received: by 10.52.90.2 with SMTP id bs2mr22937626vdb.23.1351113992515;
        Wed, 24 Oct 2012 14:26:32 -0700 (PDT)
Received: from [192.168.1.201] (cpe-67-249-104-72.twcny.res.rr.com. [67.249.104.72])
        by mx.google.com with ESMTPS id dg6sm17176972vdc.3.2012.10.24.14.26.31
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 24 Oct 2012 14:26:31 -0700 (PDT)
Content-Type: text/plain; charset=iso-8859-1
Mime-Version: 1.0 (Mac OS X Mail 6.2 \(1499\))
Subject: Re: StandardAnalyzer functionality change
From: Steve Rowe <sarowe@gmail.com>
X-Priority: 3
In-Reply-To: <909D52ADDF344816BAD75261002E3378@JackKrupansky>
Date: Wed, 24 Oct 2012 17:26:30 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <6DDD10FB-B25B-4605-9D8D-D176F93F6B9E@gmail.com>
References: <1351075331.86820.YahooMailNeo@web120703.mail.ne1.yahoo.com> <8C658A2E402F4D95972D2764F9D12E77@JackKrupansky> <CAEY5pxUX8oWQ4tcK8J4yTjXXtuBaZn2gS0zLfc3qpL9y+ya9fA@mail.gmail.com> <1351099646.20446.YahooMailNeo@web120702.mail.ne1.yahoo.com> <909D52ADDF344816BAD75261002E3378@JackKrupansky>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1499)
X-Virus-Checked: Checked by ClamAV on apache.org

Small correction: UAX29URLEmailAnalyzer =3D StandardAnalyzer + URL + =
Email. (Full support for URLs with the file:, ftp:, and http/s: =
protocols; full email support.)

ClassicAnalyzer is a different beast altogether.  First of all, it =
doesn't implement Unicode segmentation - it has a non-standard tokenizer =
that works okay for some English text.  It does recognize some (maybe =
most?) email addresses, but not all of them (e.g. the '+' character, a =
valid username char in email addresses, is not supported).  It does not =
recognize URLs, but rather domain names, aka hostnames.

Steve

On Oct 24, 2012, at 3:52 PM, Jack Krupansky <jack@basetechnology.com> =
wrote:

> I didn't explicitly say it, but ClassicAnalyzer does do exactly what =
you want it to do - work break plus email and URL, or StandardAnalyzer =
plus email and URL.
>=20
> -- Jack Krupansky
>=20
> -----Original Message----- From: kiwi clive
> Sent: Wednesday, October 24, 2012 1:27 PM
> To: java-user@lucene.apache.org
> Subject: Re: StandardAnalyzer functionality change
>=20
> Thanks for the responses chaps, very informative, and most appreciated =
:-)
>=20
>=20
>=20
>=20
>=20
> ________________________________
> From: Ian Lea <ian.lea@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Wednesday, October 24, 2012 4:19 PM
> Subject: Re: StandardAnalyzer functionality change
>=20
> If you want email addresses, UAX29URLEmailAnalyzer is another =
alternative.
>=20
>=20
> --
> Ian.
>=20
>=20
> On Wed, Oct 24, 2012 at 3:56 PM, Jack Krupansky =
<jack@basetechnology.com> wrote:
>> Yes, by design. StandardAnalyzer implements "simple word boundaries" =
(the
>> technical term is "Unicode text segmentation"), period. As the =
javadoc says,
>> "As of Lucene version 3.1, this class implements the Word Break rules =
from
>> the Unicode Text Segmentation algorithm, as specified in Unicode =
Standard
>> Annex #29." That is a "standard".
>>=20
>> See:
>> =
http://lucene.apache.org/core/4_0_0-ALPHA/analyzers-common/org/apache/luce=
ne/analysis/standard/StandardTokenizer.html
>> =
http://lucene.apache.org/core/4_0_0-BETA/analyzers-common/org/apache/lucen=
e/analysis/standard/ClassicTokenizer.html
>>=20
>> -- Jack Krupansky
>>=20
>> -----Original Message----- From: kiwi clive
>> Sent: Wednesday, October 24, 2012 6:42 AM
>> To: java-user@lucene.apache.org
>> Subject: StandardAnalyzer functionality change
>>=20
>>=20
>> Hi all,
>>=20
>> Sorry if I'm asking an age old question but we have migrated to =
lucene 3.6.0
>> and I see StandardAnalyzer has changed its behaviour, particularly =
when
>> tokenizing email addresses. =46rom reading the forums, I understand
>> StandardAnalyzer was renamed to ClassicAnalyzer - is this the case ?
>>=20
>>=20
>> If I pass the string 'user@domain.com' through these analyzers, I get =
the
>> following tokens:
>>=20
>> Using StandardAnalyzer(Version.LUCENE_23):  -->  user@domain.com (one =
token)
>>=20
>> Using StandardAnalyzer(Version.LUCENE_36):  -->  user domain.com    =
(two
>> tokens)
>> Using ClassicAnalyzer(Version.LUCENE_36):     -->  user@domain.com  =
(one
>> token)
>>=20
>> StandardAnalyzer is normally a good compromise as a default analyzer =
but the
>> failure to keep an email address intact makes it less fit for purpose =
than
>> it used to be. Is this a bug or is it by design ?  If by design, what =
is the
>> reason for the change and is ClassicAnalyzer now the defacto-analyzer =
to use
>> ?
>>=20
>> Thanks,
>> Clive
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 24 22:10:03 2012
Return-Path: <java-user-return-53906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A52EED69A
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 24 Oct 2012 22:10:03 +0000 (UTC)
Received: (qmail 58158 invoked by uid 500); 24 Oct 2012 22:10:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58105 invoked by uid 500); 24 Oct 2012 22:10:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58094 invoked by uid 99); 24 Oct 2012 22:10:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Oct 2012 22:10:01 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of vfunstein@gmail.com designates 209.85.215.48 as permitted sender)
Received: from [209.85.215.48] (HELO mail-la0-f48.google.com) (209.85.215.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Oct 2012 22:09:53 +0000
Received: by mail-la0-f48.google.com with SMTP id u2so763954lag.35
        for <java-user@lucene.apache.org>; Wed, 24 Oct 2012 15:09:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=ZtSBAzae0tJy6XmEm6D5UX7e40MKEJauQCrpGT6LeqE=;
        b=A8g0cAZsu7TqL9Undrv4f6/N2FC+wnwEVflEaNJQKYsjqwxesjhSNiVJrnrZhc2DGN
         45syF9XOBBUUUqdy06r0PuCVyyfDqchs7H9lkd6+hx7m9zSMh2fP20Eipn1wWRK2pkTq
         4AOlcNTLKjDg8Y7KRIH0PD2s2MSufUn/ex1KNCsj/P/gWjArYFiG2ZkUDqn4ECwWjcTx
         9JUSh8dDcUgSuLUkJAOMiJ+35xGgT1mLZBSs47dw8IE7KbsjiR9jtxXLEBHvpMTaoqc0
         Qq1pBXklPibgKZGfp/hkyH/0PWeV7xOpAqJ7Ow/vHrl/V/vrdP6Gp7SlU1w92MOvIBSf
         S0wQ==
MIME-Version: 1.0
Received: by 10.152.104.50 with SMTP id gb18mr16070074lab.9.1351116572824;
 Wed, 24 Oct 2012 15:09:32 -0700 (PDT)
Received: by 10.114.13.161 with HTTP; Wed, 24 Oct 2012 15:09:32 -0700 (PDT)
In-Reply-To: <CANTbCX+4h5Md_HJ=s7=NcZ_fP3yb_RmqU4EB=8P3P9BMAHzcCQ@mail.gmail.com>
References: <CANTbCXKwfz1_vqg_dJ8i7RNOo7SS3_jD=TOA22+VDU8BMvhLnA@mail.gmail.com>
	<CANTbCX+4h5Md_HJ=s7=NcZ_fP3yb_RmqU4EB=8P3P9BMAHzcCQ@mail.gmail.com>
Date: Wed, 24 Oct 2012 15:09:32 -0700
Message-ID: <CALr4HzrjwUWtn-Ez=iZOVT_ayYng70eK4PrfsuNW+LTP8hDnvQ@mail.gmail.com>
Subject: Re: Multiple Blocking Threads with search during an Index reload
From: Vitaly Funstein <vfunstein@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=f46d04083df75f949f04ccd55718
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d04083df75f949f04ccd55718
Content-Type: text/plain; charset=ISO-8859-1

Just curious - why not take your search feature offline during the
reindexing? That would seem sensible from an operational perspective, I
think.

On Tue, Oct 23, 2012 at 2:03 PM, Raghavan Parthasarathy <
raghavan8585@gmail.com> wrote:

> Hi,
>
> We are using Lucene-core and we reindex once a day and plan to do it more
> often in a day sooner.
>
> During re loading of the lucene indexes, some of the slave servers don't
> recover and we have to restart them to get them working again.
>
> Here is the stacktrace:
>
> Here is the Full stack trace of BLOCKED search class:
>
> "daemon prio=5 state=BLOCKED
>         at
>
> org.apache.lucene.index.SegmentReader$CoreReaders.getTermsReader(SegmentReader.java:169)
>         at
> org.apache.lucene.index.SegmentTermDocs.seek(SegmentTermDocs.java:57)
>         at
>
> org.apache.lucene.search.MultiTermQueryWrapperFilter.getDocIdSet(MultiTermQueryWrapperFilter.java:120)
>         at
> org.apache.lucene.search.ChainedFilter.getDocIdSet(ChainedFilter.java:176)
>         at
> org.apache.lucene.search.ChainedFilter.getDocIdSet(ChainedFilter.java:104)
>         at
> org.apache.lucene.search.ChainedFilter.getDocIdSet(ChainedFilter.java:176)
>         at
> org.apache.lucene.search.ChainedFilter.getDocIdSet(ChainedFilter.java:104)
>         at
>
> org.apache.lucene.search.CachingWrapperFilter.getDocIdSet(CachingWrapperFilter.java:203)
>         at
> org.apache.lucene.search.ChainedFilter.getDocIdSet(ChainedFilter.java:176)
>         at
> org.apache.lucene.search.ChainedFilter.getDocIdSet(ChainedFilter.java:104)
>         at
>
> org.apache.lucene.search.CachingWrapperFilter.getDocIdSet(CachingWrapperFilter.java:203)
>         at
>
> org.apache.lucene.search.IndexSearcher.searchWithFilter(IndexSearcher.java:544)
>         at
> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:525)
>         at
> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:384)
>         at
> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:291)
>         at
> com.atypon.publish.search.SearchWorker.search(SearchWorker.java:98)
>         at
> com.atypon.publish.search.SearchWorker.search(SearchWorker.java:41)
> .....
> ....
>
>
> We are using lucene-core version 3.1. Please tell us what we need to do to
> resolve this issue.
>
> Thanks,
> Raghavan
>

--f46d04083df75f949f04ccd55718--

From java-user-return-53907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Oct 25 01:32:45 2012
Return-Path: <java-user-return-53907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B3778DBF3
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 25 Oct 2012 01:32:45 +0000 (UTC)
Received: (qmail 97382 invoked by uid 500); 25 Oct 2012 01:32:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97302 invoked by uid 500); 25 Oct 2012 01:32:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97291 invoked by uid 99); 25 Oct 2012 01:32:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Oct 2012 01:32:43 +0000
X-ASF-Spam-Status: No, hits=-0.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of raghavan8585@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vb0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Oct 2012 01:32:35 +0000
Received: by mail-vb0-f48.google.com with SMTP id e21so1484581vbm.35
        for <java-user@lucene.apache.org>; Wed, 24 Oct 2012 18:32:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=references:from:in-reply-to:mime-version:date:message-id:subject:to
         :content-type;
        bh=dN1WRvd0I+JYY75/ze+ujUIZLIjnS/kc+gDbB6+ldWI=;
        b=D1I3zTAYdCNXiQQcS4mY72PsHZqhL0OexM2uPXHuCmV43NFh+/gl+mhZBNd8R175y9
         v2hQjK+00VozmpgJimgRM14kN93MtZQ1NQhZaNGiEF290UusvnSHaWwXsotN67kwKU9q
         EAatw7jy88QEBMn1Vm92sYurVCqGIwL6MWiz+Sb3qqBdg6UmTdkt5ZZJebq0pfFpUSMI
         o7VKAqJQgatIqmAxwQe9CIsFk7SSjJL9LHlOib7LZpUnX/XTyMImeNGa9GTvllSV1W41
         HxyigW9yT/E7IBJrMHWhwRvX0+kypMRBSaUsZ8vs0RxAzP1s2ymnECahteuJEnADhy2i
         2T/g==
Received: by 10.52.173.74 with SMTP id bi10mr24604673vdc.81.1351128734324;
 Wed, 24 Oct 2012 18:32:14 -0700 (PDT)
References: <CANTbCXKwfz1_vqg_dJ8i7RNOo7SS3_jD=TOA22+VDU8BMvhLnA@mail.gmail.com>
 <CANTbCX+4h5Md_HJ=s7=NcZ_fP3yb_RmqU4EB=8P3P9BMAHzcCQ@mail.gmail.com> <CALr4HzrjwUWtn-Ez=iZOVT_ayYng70eK4PrfsuNW+LTP8hDnvQ@mail.gmail.com>
From: Raghavan Parthasarathy <raghavan8585@gmail.com>
In-Reply-To: <CALr4HzrjwUWtn-Ez=iZOVT_ayYng70eK4PrfsuNW+LTP8hDnvQ@mail.gmail.com>
Mime-Version: 1.0 (1.0)
Date: Wed, 24 Oct 2012 21:32:11 -0400
Message-ID: <8015125392664725743@unknownmsgid>
Subject: Re: Multiple Blocking Threads with search during an Index reload
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

>From what I heard, taking search offline  is solution that the
organization had said they wouldn't want. We plan to increase the
frequency of index reload every day and hence taking offline so many
times a day wouldn't be pragmatic.

Here is the current implementation: We use a store that has the
indexes details. During the index reload, existing searches go through
the old store. The reset store creates a new store with the updated
index details, warms up the search by performing the search, closing
the store resources, and setting the store with the new store.

The search with the new store is then being hit by a barrage of users.
The search results are based out of the bit set filter that the user
has access to. I believe the Reader is invalidating the filter after
the store reset. So when multiple searches are being hit, the filter
is struggling in making its initial updates based on the user types
and the access they have.

With so many threads in blocked state, most of the servers recover
without much of a struggle but there a handful of servers each time
that don't recover. For these sad servers, heap memory jumps from 30%
to almost 60-80%, request pools goes up from 5-10 to almost 150 - 200.
Request pool of less than about 80-90 usually tend to recover on its
own.

Your suggestions would be appreciated.

Thanks,
Raghavan





On Oct 24, 2012, at 6:10 PM, Vitaly Funstein <vfunstein@gmail.com> wrote:

> Just curious - why not take your search feature offline during the
> reindexing? That would seem sensible from an operational perspective, I
> think.
>
> On Tue, Oct 23, 2012 at 2:03 PM, Raghavan Parthasarathy <
> raghavan8585@gmail.com> wrote:
>
>> Hi,
>>
>> We are using Lucene-core and we reindex once a day and plan to do it more
>> often in a day sooner.
>>
>> During re loading of the lucene indexes, some of the slave servers don't
>> recover and we have to restart them to get them working again.
>>
>> Here is the stacktrace:
>>
>> Here is the Full stack trace of BLOCKED search class:
>>
>> "daemon prio=5 state=BLOCKED
>>        at
>>
>> org.apache.lucene.index.SegmentReader$CoreReaders.getTermsReader(SegmentReader.java:169)
>>        at
>> org.apache.lucene.index.SegmentTermDocs.seek(SegmentTermDocs.java:57)
>>        at
>>
>> org.apache.lucene.search.MultiTermQueryWrapperFilter.getDocIdSet(MultiTermQueryWrapperFilter.java:120)
>>        at
>> org.apache.lucene.search.ChainedFilter.getDocIdSet(ChainedFilter.java:176)
>>        at
>> org.apache.lucene.search.ChainedFilter.getDocIdSet(ChainedFilter.java:104)
>>        at
>> org.apache.lucene.search.ChainedFilter.getDocIdSet(ChainedFilter.java:176)
>>        at
>> org.apache.lucene.search.ChainedFilter.getDocIdSet(ChainedFilter.java:104)
>>        at
>>
>> org.apache.lucene.search.CachingWrapperFilter.getDocIdSet(CachingWrapperFilter.java:203)
>>        at
>> org.apache.lucene.search.ChainedFilter.getDocIdSet(ChainedFilter.java:176)
>>        at
>> org.apache.lucene.search.ChainedFilter.getDocIdSet(ChainedFilter.java:104)
>>        at
>>
>> org.apache.lucene.search.CachingWrapperFilter.getDocIdSet(CachingWrapperFilter.java:203)
>>        at
>>
>> org.apache.lucene.search.IndexSearcher.searchWithFilter(IndexSearcher.java:544)
>>        at
>> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:525)
>>        at
>> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:384)
>>        at
>> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:291)
>>        at
>> com.atypon.publish.search.SearchWorker.search(SearchWorker.java:98)
>>        at
>> com.atypon.publish.search.SearchWorker.search(SearchWorker.java:41)
>> .....
>> ....
>>
>>
>> We are using lucene-core version 3.1. Please tell us what we need to do to
>> resolve this issue.
>>
>> Thanks,
>> Raghavan
>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Oct 25 02:00:40 2012
Return-Path: <java-user-return-53908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E1A3CDC87
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 25 Oct 2012 02:00:39 +0000 (UTC)
Received: (qmail 65578 invoked by uid 500); 25 Oct 2012 02:00:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65547 invoked by uid 500); 25 Oct 2012 02:00:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65536 invoked by uid 99); 25 Oct 2012 02:00:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Oct 2012 02:00:37 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.219.48 as permitted sender)
Received: from [209.85.219.48] (HELO mail-oa0-f48.google.com) (209.85.219.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Oct 2012 02:00:29 +0000
Received: by mail-oa0-f48.google.com with SMTP id h2so1333945oag.35
        for <java-user@lucene.apache.org>; Wed, 24 Oct 2012 19:00:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=nSXFPcAeBrT1ZPX8PFOGgMFPA4LQ73qSZmtbHURHFco=;
        b=MK91u4Cfj+W3/aicDKGSxkm3QmGIuMsNHKkFGILKn7TMz4E6qWldxE4DG6AI8+kGDb
         sEtbSjffuQmqJs8/gxSGqhdKqYCqDK4lWMAfCH5uKUrmhzye9FW5oi4WkRrx0i/qVdXu
         tG3MkBasKGymUMSalWy3dUl1+fC2AVFM/Il8zEcy6c18b5m4tLYN2YHBf1MXcFFUhHQo
         G0KEU+2nylMJ+Hv55VMKN/T7F5Qn/0Vaz8lkpTeeCh197kVjrqob0LtZSUJTPDqOunWF
         48qlf499FLl+c4z2Z+ZrKsLADENWMlsmjpQ6kNwGS1XbwXZTw22uuBtYZVrpEG9IjClf
         n8yQ==
MIME-Version: 1.0
Received: by 10.60.9.5 with SMTP id v5mr14804233oea.81.1351130408736; Wed, 24
 Oct 2012 19:00:08 -0700 (PDT)
Received: by 10.60.32.84 with HTTP; Wed, 24 Oct 2012 19:00:08 -0700 (PDT)
In-Reply-To: <CANTbCX+4h5Md_HJ=s7=NcZ_fP3yb_RmqU4EB=8P3P9BMAHzcCQ@mail.gmail.com>
References: <CANTbCXKwfz1_vqg_dJ8i7RNOo7SS3_jD=TOA22+VDU8BMvhLnA@mail.gmail.com>
	<CANTbCX+4h5Md_HJ=s7=NcZ_fP3yb_RmqU4EB=8P3P9BMAHzcCQ@mail.gmail.com>
Date: Wed, 24 Oct 2012 22:00:08 -0400
Message-ID: <CAN4YXvdQzcEFaD6ZAVBZ_2FpqUD=Useok2dJ=FDNjr8kOpAfEw@mail.gmail.com>
Subject: Re: Multiple Blocking Threads with search during an Index reload
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

You haven't given us much to go on here, you might review:

http://wiki.apache.org/solr/UsingMailingLists

But one can imagine that this must be something you're doing that's
unusual, or more people would have reported something similar.

At a guess (since you haven't really told us _anything_ about
your setup), you're committing on the master very frequently, perhaps
optimizing (and you shouldn't do this latter) and your polling interval on the
slaves is very short..  Try committing every 5 minutes and make your polling
interval 5 minutes also as an experiment perhaps?

But unless you tell us more about your configuration, it's all just a guess...

Best
Erick

On Tue, Oct 23, 2012 at 5:03 PM, Raghavan Parthasarathy
<raghavan8585@gmail.com> wrote:
> Hi,
>
> We are using Lucene-core and we reindex once a day and plan to do it more
> often in a day sooner.
>
> During re loading of the lucene indexes, some of the slave servers don't
> recover and we have to restart them to get them working again.
>
> Here is the stacktrace:
>
> Here is the Full stack trace of BLOCKED search class:
>
> "daemon prio=5 state=BLOCKED
>         at
> org.apache.lucene.index.SegmentReader$CoreReaders.getTermsReader(SegmentReader.java:169)
>         at
> org.apache.lucene.index.SegmentTermDocs.seek(SegmentTermDocs.java:57)
>         at
> org.apache.lucene.search.MultiTermQueryWrapperFilter.getDocIdSet(MultiTermQueryWrapperFilter.java:120)
>         at
> org.apache.lucene.search.ChainedFilter.getDocIdSet(ChainedFilter.java:176)
>         at
> org.apache.lucene.search.ChainedFilter.getDocIdSet(ChainedFilter.java:104)
>         at
> org.apache.lucene.search.ChainedFilter.getDocIdSet(ChainedFilter.java:176)
>         at
> org.apache.lucene.search.ChainedFilter.getDocIdSet(ChainedFilter.java:104)
>         at
> org.apache.lucene.search.CachingWrapperFilter.getDocIdSet(CachingWrapperFilter.java:203)
>         at
> org.apache.lucene.search.ChainedFilter.getDocIdSet(ChainedFilter.java:176)
>         at
> org.apache.lucene.search.ChainedFilter.getDocIdSet(ChainedFilter.java:104)
>         at
> org.apache.lucene.search.CachingWrapperFilter.getDocIdSet(CachingWrapperFilter.java:203)
>         at
> org.apache.lucene.search.IndexSearcher.searchWithFilter(IndexSearcher.java:544)
>         at
> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:525)
>         at
> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:384)
>         at
> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:291)
>         at
> com.atypon.publish.search.SearchWorker.search(SearchWorker.java:98)
>         at
> com.atypon.publish.search.SearchWorker.search(SearchWorker.java:41)
> .....
> ....
>
>
> We are using lucene-core version 3.1. Please tell us what we need to do to
> resolve this issue.
>
> Thanks,
> Raghavan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Oct 25 03:54:03 2012
Return-Path: <java-user-return-53909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 64E39DF92
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 25 Oct 2012 03:54:03 +0000 (UTC)
Received: (qmail 89004 invoked by uid 500); 25 Oct 2012 03:54:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88920 invoked by uid 500); 25 Oct 2012 03:53:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88884 invoked by uid 99); 25 Oct 2012 03:53:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Oct 2012 03:53:57 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of vvekselva.gm@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-we0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Oct 2012 03:53:50 +0000
Received: by mail-we0-f176.google.com with SMTP id z53so725997wey.35
        for <java-user@lucene.apache.org>; Wed, 24 Oct 2012 20:53:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=YAYCvxJbpYHq6J517Ir8UcquelPO26ORv/xs/9PLKxw=;
        b=LSJkZgDLKD+lfuUbEg6NUiJFcqKxjDM722kI8ugP2qO7bTFqGATRjsBN7+8sQ+Me9j
         gNKlG6v+BSUhIMfbcUsq4PLeQOATUqfl53kmhvcUrn7pMNnJ6//agyPZFCMLax8AZyoV
         pM9VWes/hAe60ty3psbC7+7AwUEfw1v8nZ3bTe656W44KkxCL1KLa2VgfZL43Xn8xjVP
         z0Xqfd+yXU3gOeRfHGNA0mUnwFWU6wnt2BaqCRMEjcqWZHk5N2wlZoBpfDj8dOVK6yA+
         wCEqljhbsXegEH52uinSWUT2nAqKcsYpgCgrsQC4YXywFFCRSeixVRQhhsRlBVKY9CQb
         ePBw==
MIME-Version: 1.0
Received: by 10.180.104.97 with SMTP id gd1mr10562479wib.4.1351137210267; Wed,
 24 Oct 2012 20:53:30 -0700 (PDT)
Received: by 10.217.0.3 with HTTP; Wed, 24 Oct 2012 20:53:30 -0700 (PDT)
In-Reply-To: <7276923E6E5AA04C97876BF29FF86716E071A939@jobdivaexmb1.jobdiva.local>
References: <7276923E6E5AA04C97876BF29FF86716E071A7C4@jobdivaexmb1.jobdiva.local>
	<CAAHmpkgOsAbCkXYc+vY5WXVtuPexn_X0HD_E4SUtD372a4txfA@mail.gmail.com>
	<7276923E6E5AA04C97876BF29FF86716E071A7F4@jobdivaexmb1.jobdiva.local>
	<CAMbOsnpp9QYBaM7VwktQhKXz1K7P=zp_uiE8GG97YtUe9Q7d4g@mail.gmail.com>
	<7276923E6E5AA04C97876BF29FF86716E071A894@jobdivaexmb1.jobdiva.local>
	<7276923E6E5AA04C97876BF29FF86716E071A939@jobdivaexmb1.jobdiva.local>
Date: Thu, 25 Oct 2012 09:23:30 +0530
Message-ID: <CAMbOsnrD=UXzA+J-nmOTS0zq=SP=Hhuk0h-38q4tgXBsNiajLQ@mail.gmail.com>
Subject: Re: Scoring based on document
From: selvakumar netaji <vvekselva.gm@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=f46d044280e675f94e04ccda25ba
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d044280e675f94e04ccda25ba
Content-Type: text/plain; charset=ISO-8859-1

Hi Siraj,

Even in the approach presented earlier we can have search capabilities for
the individual field by making the document with the individual fields and
the copy fields.

Let me know if I'm wrong.



On Thu, Oct 25, 2012 at 1:18 AM, Siraj Haider <siraj@jobdiva.com> wrote:

> Any other suggestions?
>
> regards
> -Siraj
> (212) 306-0154
>
> -----Original Message-----
> From: Siraj Haider [mailto:siraj@jobdiva.com]
> Sent: Tuesday, October 23, 2012 6:06 PM
> To: java-user@lucene.apache.org
> Cc: simon.willnauer@gmail.com
> Subject: RE: Scoring based on document
>
> Thanks for the suggestion, but in that scenario, I would lose the ability
> to search on individual fields, i.e. I would not be able to search on title
> field only, and would end up with results where the searched term might be
> in the description field.
>
> regards
> -Siraj
> (212) 306-0154
>
> -----Original Message-----
> From: selvakumar netaji [mailto:vvekselva.gm@gmail.com]
> Sent: Tuesday, October 23, 2012 1:58 PM
> To: java-user@lucene.apache.org
> Cc: simon.willnauer@gmail.com
> Subject: Re: Scoring based on document
>
> Hi All,
>
> Just wanted to make sure that will approach would fails for this case.
>
> Having a copy field for each of the document, having the concatenated
> values  of all the fields in that document and searching on the copy field
> would just produce the result. The resulting docs would  be based on the
> frequency of the query terms in the whole document.
>
> On Tue, Oct 23, 2012 at 7:48 PM, Siraj Haider <siraj@jobdiva.com> wrote:
>
> > So, just to confirm, using Lucene 4.0, we would be able to issue a
> > search on one or more fields and would be able to get the results
> > sorted by a custom field and also would be able to get the score of
> > each document based on the frequency of the terms searched in all the
> > indexed fields of that document (rather than getting it scored just by
> > the fields in the query, which is the case now).
> >
> > If this is true, could be please guide me into the direction on how to
> > implement it?
> >
> > Thanks a lot for your help.
> >
> > -Siraj
> > (212) 306-0154
> >
> > -----Original Message-----
> > From: Simon Willnauer [mailto:simon.willnauer@gmail.com]
> > Sent: Tuesday, October 23, 2012 3:51 AM
> > To: java-user@lucene.apache.org
> > Subject: Re: Scoring based on document
> >
> > hey there,
> >
> >
> > in Lucene 4 you can override the termStatistics / CollectionStatistics
> > used for scoring in the IndexSearcher. You can take multiple fields
> > into account here in order use it for scoring. Here is the javadoc
> > link:
> >
> >
> > http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/Inde
> > xSearcher.html#termStatistics(org.apache.lucene.index.Term
> > ,
> > org.apache.lucene.index.TermContext)
> >
> > http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/Inde
> > xSearcher.html#collectionStatistics(java.lang.String)
> >
> >
> > simon
> > On Mon, Oct 22, 2012 at 11:25 PM, Siraj Haider <siraj@jobdiva.com>
> wrote:
> > > I am using DefaultSimilarity and did not boost any field while
> indexing.
> > My index is comprised of the following fields:
> > >
> > > -          Title
> > >
> > > -          Author
> > >
> > > -          Bookname
> > >
> > > -          Description
> > >
> > > All of the 4 fields are indexed and can be searched on by the user.
> > > Now
> > let's say the user searches for "oracle" in Title field, the score is
> > computed based on the Title field only, and its disregarding the
> > frequency of the term "oracle" in other fields. It might be like that
> > by design but I need to change it so that the documents are ranked
> > based on the frequency in the whole document and not based on the field
> searches. Please help!
> > >
> > > Thanks in advance
> > > -Siraj
> > >
> > >
> > > ________________________________
> > > This electronic mail message and any attachments may contain
> > > information
> > which is privileged, sensitive and/or otherwise exempt from disclosure
> > under applicable law. The information is intended only for the use of
> > the individual or entity named as the addressee above. If you are not
> > the intended recipient, you are hereby notified that any disclosure,
> > copying, distribution (electronic or otherwise) or forwarding of, or
> > the taking of any action in reliance on, the contents of this
> > transmission is strictly prohibited. If you have received this
> > electronic transmission in error, please notify us by telephone,
> > facsimile, or e-mail as noted above to arrange for the return of any
> electronic mail or attachments. Thank You.
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > This electronic mail message and any attachments may contain
> > information which is privileged, sensitive and/or otherwise exempt
> > from disclosure under applicable law. The information is intended only
> > for the use of the individual or entity named as the addressee above.
> > If you are not the intended recipient, you are hereby notified that
> > any disclosure, copying, distribution (electronic or otherwise) or
> > forwarding of, or the taking of any action in reliance on, the
> > contents of this transmission is strictly prohibited. If you have
> > received this electronic transmission in error, please notify us by
> > telephone, facsimile, or e-mail as noted above to arrange for the return
> of any electronic mail or attachments. Thank You.
> >
>
> This electronic mail message and any attachments may contain information
> which is privileged, sensitive and/or otherwise exempt from disclosure
> under applicable law. The information is intended only for the use of the
> individual or entity named as the addressee above. If you are not the
> intended recipient, you are hereby notified that any disclosure, copying,
> distribution (electronic or otherwise) or forwarding of, or the taking of
> any action in reliance on, the contents of this transmission is strictly
> prohibited. If you have received this electronic transmission in error,
> please notify us by telephone, facsimile, or e-mail as noted above to
> arrange for the return of any electronic mail or attachments. Thank You.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> This electronic mail message and any attachments may contain information
> which is privileged, sensitive and/or otherwise exempt from disclosure
> under applicable law. The information is intended only for the use of the
> individual or entity named as the addressee above. If you are not the
> intended recipient, you are hereby notified that any disclosure, copying,
> distribution (electronic or otherwise) or forwarding of, or the taking of
> any action in reliance on, the contents of this transmission is strictly
> prohibited. If you have received this electronic transmission in error,
> please notify us by telephone, facsimile, or e-mail as noted above to
> arrange for the return of any electronic mail or attachments. Thank You.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--f46d044280e675f94e04ccda25ba--

From java-user-return-53910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Oct 25 09:11:41 2012
Return-Path: <java-user-return-53910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 72672D82F
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 25 Oct 2012 09:11:41 +0000 (UTC)
Received: (qmail 89228 invoked by uid 500); 25 Oct 2012 09:11:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88624 invoked by uid 500); 25 Oct 2012 09:11:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88605 invoked by uid 99); 25 Oct 2012 09:11:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Oct 2012 09:11:37 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.138.229.96] (HELO nm35-vm0.bullet.mail.ne1.yahoo.com) (98.138.229.96)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Oct 2012 09:11:27 +0000
Received: from [98.138.226.180] by nm35.bullet.mail.ne1.yahoo.com with NNFMP; 25 Oct 2012 09:11:06 -0000
Received: from [98.138.89.168] by tm15.bullet.mail.ne1.yahoo.com with NNFMP; 25 Oct 2012 09:11:06 -0000
Received: from [127.0.0.1] by omp1024.mail.ne1.yahoo.com with NNFMP; 25 Oct 2012 09:11:06 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 338969.72946.bm@omp1024.mail.ne1.yahoo.com
Received: (qmail 41707 invoked by uid 60001); 25 Oct 2012 09:11:06 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1351156266; bh=OCGNlBtVv01m58I27x3zaREE6evsjtAd79lsslUBtvw=; h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=2tZyQImZ0hB9t30RaPDw8PFiFbiO3g/fDxRYRNcqitIwp7DKtUrtVyCpSRgiY+p3NfYE2238B1yeLWZpGU9FlPPEzCKQKw30wxgCNbqWm5rVYUaZEYDYdkQvaGaRk8mwm/99lgmpFzUlBKIKaw+FvwFLZ5/3qTQA8JiUdqsAsZA=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=i9mo/r8qsSQ8IdgEQnPYvLiZmK9Mb2ymKLBh6IH9lEUW3OfJS3xXkaYnH3QuT5ymvw3sm3PT5qa2/6ztPwYbpRyxwha9gMTnIHHL3RaBlktvEBNQoqT8aXKFl6B6FDPY4QwVCRY5LcQRAAjJBlU3h7bRBOuIAgFCjhfYqEWqZag=;
X-YMail-OSG: 2p9e7n0VM1mkNxik.605W0FoNeZiR6Kg7yzefbz8xOU3ASV
 HQ0oCXhf7HT_vifdx08DVyY9ICfpICpHrbh0A1eKzwQtgNDKna4kfka6H1mi
 miRozKAvZAZWaHjXZg.lL_jACcizXuCC6pUJ4HOrxl9lAb2T.vNFzpeCorR7
 x54uLBOrHuJNc2ss4NIxg7E.NeKb_jbLF52NvcXI8ejfsBDHE3pT.0ZY_AOj
 jxM_MGEQ.8u.KJW6SdLA9aX9unb7rVbrxZLrS35e0XnUaL4NPQf1GU2XIceS
 N3ygcBj6kAo3wgB4dn413XFYiQNrR9RPVD1LX3HH0ufdtFY1cBQcA0aXPIRT
 PietMiBYH.9Sn4fwtE6SA_kYFG9T8UTbGuuoY4OJR1m.Sy_t9dBOc5DclvBj
 7MuNbGuVhF9sO7shEv2v2o_Ba.myoddJHy3dD2UjH6SwaxYX2r3zJmEQ2tVa
 dnVpMmqmh.Kse81CY2kcDW.zKV5iXMVaaM6AxnpqC7zpuaZ.So898quasSBT
 AjI2JlLfDkmy1DD8-
Received: from [195.153.194.242] by web120705.mail.ne1.yahoo.com via HTTP; Thu, 25 Oct 2012 02:11:05 PDT
X-Rocket-MIMEInfo: 001.001,SSBkaWQgc29tZSB0ZXN0cyBhbmQgZm91bmQgZm9yIG91ciBuZWVkLCBDbGFzc2ljQW5hbHl6ZXIgd2FzIGJldHRlciAoYmFja3dhcmRzIGNvbXBhdGlibGUpLiBPdXIgYW5hbHl6ZXIgdXNlcyBkaWZmZXJlbnQgdG9rZW5pemVycyBvbiBjZXJ0YWluIGZpZWxkcyBidXQgKHVzZWQgdG8pIGZhbGwgYmFjayB0byBTdGFuZGFyZEFuYWx5emVyIGJ5IGRlZmF1bHQuIENsYXNzaWNBbmFseXplciB3aWxsIG1lZXQgb3VyIG5lZWRzIGJ1dCBJIHNlZSB3ZSBzaG91bGQgbW92ZSBvbnRvIGEgbmV3ZXIgaW1wbGVtZW50YXQBMAEBAQE-
X-Mailer: YahooMailWebService/0.8.123.450
References: <1351075331.86820.YahooMailNeo@web120703.mail.ne1.yahoo.com> <8C658A2E402F4D95972D2764F9D12E77@JackKrupansky> <CAEY5pxUX8oWQ4tcK8J4yTjXXtuBaZn2gS0zLfc3qpL9y+ya9fA@mail.gmail.com> <1351099646.20446.YahooMailNeo@web120702.mail.ne1.yahoo.com> <909D52ADDF344816BAD75261002E3378@JackKrupansky> <6DDD10FB-B25B-4605-9D8D-D176F93F6B9E@gmail.com>
Message-ID: <1351156265.41698.YahooMailNeo@web120705.mail.ne1.yahoo.com>
Date: Thu, 25 Oct 2012 02:11:05 -0700 (PDT)
From: kiwi clive <kiwi_clive@yahoo.com>
Reply-To: kiwi clive <kiwi_clive@yahoo.com>
Subject: Re: StandardAnalyzer functionality change
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <6DDD10FB-B25B-4605-9D8D-D176F93F6B9E@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="1929490892-1340554201-1351156265=:41698"
X-Virus-Checked: Checked by ClamAV on apache.org

--1929490892-1340554201-1351156265=:41698
Content-Type: text/plain; charset=us-ascii

I did some tests and found for our need, ClassicAnalyzer was better (backwards compatible). Our analyzer uses different tokenizers on certain fields but (used to) fall back to StandardAnalyzer by default. ClassicAnalyzer will meet our needs but I see we should move onto a newer implementation such as the email-specific analyzer going forward.

Thanks for the clarification.
--1929490892-1340554201-1351156265=:41698--

From java-user-return-53911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Oct 25 10:10:37 2012
Return-Path: <java-user-return-53911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D8983DA0E
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 25 Oct 2012 10:10:37 +0000 (UTC)
Received: (qmail 38181 invoked by uid 500); 25 Oct 2012 10:10:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37973 invoked by uid 500); 25 Oct 2012 10:10:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37926 invoked by uid 99); 25 Oct 2012 10:10:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Oct 2012 10:10:31 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ravikumar.govindarajan@gmail.com designates 209.85.219.48 as permitted sender)
Received: from [209.85.219.48] (HELO mail-oa0-f48.google.com) (209.85.219.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Oct 2012 10:10:24 +0000
Received: by mail-oa0-f48.google.com with SMTP id h2so1638755oag.35
        for <java-user@lucene.apache.org>; Thu, 25 Oct 2012 03:10:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=mYR7cdKCSTHY9jdmCE6K8cQJF1bRU/rYPf3/gZN4XRA=;
        b=yaplZSWTT4Ge9KZ6yBhpIbTtLHKfb0+5wMAiMzeRzQlkValFws6pLUMWInFYrg7H45
         NNC8JtSByQc6r4N4r3r5Klpg3RzoMEO8w7O4JS6wzI/K6N6TZYRw3jERF7xAOOaZAuPA
         OMp8HPzYDLLXYn+G2yCXAZV3C8Imbv0GmT5sSCZFSbjzxda519wT99y/3i9K40z/5jNS
         Ec5vOV+zJvD7AWgBAOyDqPrB81NlT3CkMYH0/2pMlJnAmJLjYGDAD84wrlbPiGY3TR+g
         xPVYCBfl7sVaGvOTA3/dMclZTHYfGtXG+Iumev6CSDxPms69WZ++T/q3jlenww7sIkSg
         8YZQ==
MIME-Version: 1.0
Received: by 10.182.10.6 with SMTP id e6mr15098147obb.16.1351159803923; Thu,
 25 Oct 2012 03:10:03 -0700 (PDT)
Received: by 10.182.97.106 with HTTP; Thu, 25 Oct 2012 03:10:03 -0700 (PDT)
Date: Thu, 25 Oct 2012 15:40:03 +0530
Message-ID: <CAGW2whTWDDhwgVxcXXSfJps4vr6OWCSYWmfFLKHxLFyL32cqew@mail.gmail.com>
Subject: App supplied docID in lucene possible?
From: Ravikumar Govindarajan <ravikumar.govindarajan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=f46d0444691125cc4e04ccdf6869
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d0444691125cc4e04ccdf6869
Content-Type: text/plain; charset=ISO-8859-1

We have the need to re-index some fields in our application frequently.

Our typical document consists of

a) Many single-valued {long/int} re-indexable fields
b) Few large-valued {text/string} static fields

We have to re-index an entire document if a single smallish field changes
and it is turning out to be a problem for us. I have gone through the
https://issues.apache.org/jira/browse/LUCENE-3837 proposal where it tries
to work-around this limitation using a secondary mapping of new-old docids.

As I understand, lucene strictly maintains internal doc-id order so that
many queries that depend on it, will work correctly. Segment merges will
also maintain order as well as reclaim deleted doc-ids

There should be many applications like us, which manage index shards
limiting a given shard based on doc-id limits or size. So reclaiming
deleted doc-ids is mostly a non-issue for us.

That leaves us with changing doc-ids. How about leaving open the doc-ids
themselves to the applications, at-least as an option to the needy? Taking
such an approach might inter-leave doc-ids across segments, but within a
segment, the docIds are always in increasing order. There are possibilities
of ghost-deletes, duplicate docIds etc..., but all should be solvable, I
believe.

Fronting these doc-ids during search from all segment readers and returning
the correct value from one of them should be easy. Will it incur a heavy
penalty during search? Another advantage gained, is the triviality of
cross-joining indexes when docIDs are fixed.

There must be many other places where an app supplied docId might make
lucene behave funny. Need some help in identifying those areas at least for
understanding this problem correctly, if not solving it all together.

--
Ravi

--f46d0444691125cc4e04ccdf6869--

From java-user-return-53912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Oct 25 11:11:44 2012
Return-Path: <java-user-return-53912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0D592DB8C
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 25 Oct 2012 11:11:44 +0000 (UTC)
Received: (qmail 65468 invoked by uid 500); 25 Oct 2012 11:11:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65295 invoked by uid 500); 25 Oct 2012 11:11:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65265 invoked by uid 99); 25 Oct 2012 11:11:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Oct 2012 11:11:40 +0000
X-ASF-Spam-Status: No, hits=-0.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_REPLYTO_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.28 as permitted sender)
Received: from [66.111.4.28] (HELO out4-smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Oct 2012 11:11:34 +0000
Received: from compute6.internal (compute6.nyi.mail.srv.osa [10.202.2.46])
	by gateway1.nyi.mail.srv.osa (Postfix) with ESMTP id 1DFC620B36
	for <java-user@lucene.apache.org>; Thu, 25 Oct 2012 07:11:13 -0400 (EDT)
Received: from frontend2.nyi.mail.srv.osa ([10.202.2.161])
  by compute6.internal (MEProxy); Thu, 25 Oct 2012 07:11:13 -0400
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=fastmail.fm; h=
	message-id:date:from:reply-to:mime-version:to:subject
	:content-type:content-transfer-encoding; s=mesmtp; bh=z2iacQ29fA
	pdMjFFSvpZc3Ins+k=; b=hZ0Dr9xXy/vFhMlEVVdabOeg0U5lWhiORsWm9Y2FO9
	nMa7ZAVmijF1FcbYe71pTUTxzkjHCz/Nr+7HSumwvwzPZoZUrAvmY8osXc3V+x4v
	yniW4/hNT2cgW2WiU7H97KX0KhWLiLq489wylvY07gaMV709VSyxE+iIrc3vaQnR
	A=
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=
	messagingengine.com; h=message-id:date:from:reply-to
	:mime-version:to:subject:content-type:content-transfer-encoding;
	 s=smtpout; bh=z2iacQ29fApdMjFFSvpZc3Ins+k=; b=GL3+KqNBZnfCID0Vy
	Eb6W9qSOecAMi5X5LiBrGX3+c0G6vBGcthvywFji2gKlqvmh3sv6EQQrl6Z7B7yJ
	nS4AWvgxC1U1RuBGootKWtL7Q7tsDumrUo/tZxeUXPH1USWxdUbEo88xu15JYBzY
	BF2+bpCdkl9z37JOx505ofFx3k=
X-Sasl-enc: V3Ftxo8wrpDaZkfWet0R4YkobfcD4RGZQUo63WESCIeU 1351163472
Received: from macbook-3.local (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPA id AEDD148262E
	for <java-user@lucene.apache.org>; Thu, 25 Oct 2012 07:11:12 -0400 (EDT)
Message-ID: <50891E4F.6070007@fastmail.fm>
Date: Thu, 25 Oct 2012 12:11:11 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:16.0) Gecko/20121010 Thunderbird/16.0.1
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Is there anything in Lucene 4.0 that provides 'absolute' scoring
 so that i can compare the scoring results of different searches ?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Is there anything in Lucene 4.0 that provides 'absolute' scoring so that 
i can compare the scoring results of different searches ?

To explain if I do a search for two values fred OR jane and there is a 
document that contains both those words exaclty then that document will 
score 100, documents that contain only one word will score less. But if 
there is no document contain both words but there is one document that 
contains fred then that document will score 100 even though it didnt 
match jane at all. (Im clearly ignoring all the complexties but you get 
my gist)

So all documents returned from a search are scored relative to each 
other, but I cannot perform a second score and sensibly compare the 
score of the first search with the second whihc is what I would like to do.

Why would I want to this ?

In a music database  have an index of releases and a separate indexes of 
artists, usually the user just searches artists or releases. But 
sometimes they want to search all and interleave the results from the 
two indexes, but its not sensible for me to interleave them based on 
their score at the moment.

thanks Paul



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Oct 25 12:08:54 2012
Return-Path: <java-user-return-53913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D1133DC89
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 25 Oct 2012 12:08:54 +0000 (UTC)
Received: (qmail 6747 invoked by uid 500); 25 Oct 2012 12:08:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6515 invoked by uid 500); 25 Oct 2012 12:08:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6485 invoked by uid 99); 25 Oct 2012 12:08:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Oct 2012 12:08:50 +0000
X-ASF-Spam-Status: No, hits=2.0 required=5.0
	tests=SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.26 is neither permitted nor denied by domain of rajputadesh@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Oct 2012 12:08:44 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <rajputadesh@gmail.com>)
	id 1TRMEZ-0006hL-QS
	for java-user@lucene.apache.org; Thu, 25 Oct 2012 05:08:23 -0700
Date: Thu, 25 Oct 2012 05:08:23 -0700 (PDT)
From: rajputadesh <rajputadesh@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1351166903811-4015807.post@n3.nabble.com>
In-Reply-To: <1349866021428-4012877.post@n3.nabble.com>
References: <1349866021428-4012877.post@n3.nabble.com>
Subject: Re: Storing html files in lucene index and get back them
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Can you suggest me the method  to store the html files and to access back the
html files .
to get back fields from lucene document , i know only the method 
get() 
how can i retrieve the html file contents back from lucene index and i have
to browse the html file back in java swing form




--
View this message in context: http://lucene.472066.n3.nabble.com/Storing-html-files-in-lucene-index-and-get-back-them-tp4012877p4015807.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Oct 25 12:39:44 2012
Return-Path: <java-user-return-53914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4C98EDD08
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 25 Oct 2012 12:39:44 +0000 (UTC)
Received: (qmail 91803 invoked by uid 500); 25 Oct 2012 12:39:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91445 invoked by uid 500); 25 Oct 2012 12:39:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91411 invoked by uid 99); 25 Oct 2012 12:39:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Oct 2012 12:39:40 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.223.176 as permitted sender)
Received: from [209.85.223.176] (HELO mail-ie0-f176.google.com) (209.85.223.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Oct 2012 12:39:35 +0000
Received: by mail-ie0-f176.google.com with SMTP id k11so2422231iea.35
        for <java-user@lucene.apache.org>; Thu, 25 Oct 2012 05:39:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        bh=yUzqQiMIXWDHuLJbyMUvMXq1eFaLrlBqLjxU1kZiO28=;
        b=iQmOQhLHOBQ+dbcoOiyTjKJ/YcGKC/HvZO7IATF211CTi3OnSJ1XTeH1PQfc2lQqk9
         7DKmoGP5PGHwH6ORkfF9iXqUgUrkEjODtp07wjT55Koeh+qjRoQ2QBm5gmtjOOZZErJO
         CZ2GGSrvMjPSZRCanFBBVTKnRNNqCEyuikjY2KiQXbN/iX+3uXdNCjrVjoD8cpEAmYz9
         1C1nFOwvb1bxf/azU7PfYCIDZFgA6nlJA7nMeiVGgE8LEhsSHnevqZ4MkTGy2slj++ND
         03PfPdjzOmMnKfcLSiCG3+Sxo8Aj22tJfo/F/8cVdQTi8rQFXEhpjbEl/DI/Qp4QIEcH
         qIew==
Received: by 10.50.36.201 with SMTP id s9mr4226171igj.17.1351168754787; Thu,
 25 Oct 2012 05:39:14 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.50.184.232 with HTTP; Thu, 25 Oct 2012 05:38:54 -0700 (PDT)
In-Reply-To: <1351166903811-4015807.post@n3.nabble.com>
References: <1349866021428-4012877.post@n3.nabble.com> <1351166903811-4015807.post@n3.nabble.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 25 Oct 2012 13:38:54 +0100
Message-ID: <CAEY5pxUe6qTg=BzD+6x4irMbmBg3ZhZrF3mv-BQPHdryJ7C8kg@mail.gmail.com>
Subject: Re: Storing html files in lucene index and get back them
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

A couple of weeks ago Rafa=C5=82 Ku=C4=87 told you how to store fields, and
Document.get(name) is very straightforward,  What's the problem?

http://lucene.472066.n3.nabble.com/Storing-html-files-in-lucene-index-and-g=
et-back-them-td4012877.html

--
Ian.


On Thu, Oct 25, 2012 at 1:08 PM, rajputadesh <rajputadesh@gmail.com> wrote:
> Can you suggest me the method  to store the html files and to access back=
 the
> html files .
> to get back fields from lucene document , i know only the method
> get()
> how can i retrieve the html file contents back from lucene index and i ha=
ve
> to browse the html file back in java swing form
>
>
>
>
> --
> View this message in context: http://lucene.472066.n3.nabble.com/Storing-=
html-files-in-lucene-index-and-get-back-them-tp4012877p4015807.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Oct 25 13:30:02 2012
Return-Path: <java-user-return-53915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8EB2FDE6D
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 25 Oct 2012 13:30:02 +0000 (UTC)
Received: (qmail 30918 invoked by uid 500); 25 Oct 2012 13:30:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30782 invoked by uid 500); 25 Oct 2012 13:29:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 23975 invoked by uid 99); 25 Oct 2012 13:27:09 -0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 243509.64224.bm@omp1012.mail.ird.yahoo.com
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1351171597; bh=XhEayJbcHcPc6ndhC9rHL+MLZphT0BwxNEsCZzOyvyM=; h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type; b=s25+XjCBY6B+g1eUJKeHDTbD5W33nRYPr8mIiO8X/p7OEYwidBUbdYn0gpfmcNoaQBT7eESaIkqdIJ+O8wQClWTGSbZoAY4UBfwblF8OxL7W7qs/tQm5hK2PwNlkBw756uaNaxc+KWW7qZJz22rgWmohpTUTVErem3Rr0xtQdPY=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type;
  b=W0GBpzry7HmM77CDBpSTA46kl7aag5Ti1oILUexN52BPkL9ektro5rQtyF+Mwhh+o6q9vUov66l5jBhpi9HUgjdudemc3GtThXmZlxBhiBhMM6giZekdb411PYS/1ZoqrEIXE8rofshyx41zyCMFN6/FvHklELYGuHuRZWNi8NY=;
X-YMail-OSG: YNGPeNAVM1lwvkS0IMkCkTmrC_RGHx_THN4umgL2KeAVY4Z
 3q68-
X-Rocket-MIMEInfo: 001.001,SGVsbG8KCkkgYW0gdXNpbmcgTHVjZW5lIDMuNCBhbmQgSSBoYXZlIG5lYXJseSB0aGUgc2FtZSBxdWVzdGlvbiBsaWtlIEphbiBpbiBoaXMgcG9zdDoKaHR0cDovL21haWwtYXJjaGl2ZXMuYXBhY2hlLm9yZy9tb2RfbWJveC9sdWNlbmUtamF2YS11c2VyLzIwMDgwMS5tYm94LyUzQzQ3OTFFNDgyLjYwOTAwJTQwZ214LmRlJTNFCgoKSSBjb3VsZCBmb3VuZCBzb21ldGhpbmcgaGVscGZ1bCBpbiAiTHVjZW5lIGluIEFjdGlvbiIgb3IgaW4gdGhlIHdlYi4KV2hhdCBpcyB0aGUgcmVjb21tZW5kZWQgd2F5IHRvIGMBMAEBAQE-
X-Mailer: YahooMailWebService/0.8.123.450
Message-ID: <1351171597.74173.YahooMailNeo@web29404.mail.ird.yahoo.com>
Date: Thu, 25 Oct 2012 14:26:37 +0100 (BST)
From: Willi Haase <willi_haase@yahoo.com>
Reply-To: Willi Haase <willi_haase@yahoo.com>
Subject: How to use/create an alias to a field?
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="1512420742-443725140-1351171597=:74173"
X-Virus-Checked: Checked by ClamAV on apache.org

--1512420742-443725140-1351171597=:74173
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hello=0A=0AI am using Lucene 3.4 and I have nearly the same question like J=
an in his post:=0Ahttp://mail-archives.apache.org/mod_mbox/lucene-java-user=
/200801.mbox/%3C4791E482.60900%40gmx.de%3E=0A=0A=0AI could found something =
helpful in "Lucene in Action" or in the web.=0AWhat is the recommended way =
to create an alias to a field?=0AI want be able to use in the searchquery "=
au:some_name" or "auth:some_name" or "author:some_name", all using the fiel=
d "author".=0A=0AMany thanks in advance for any help or recommendations=0A=
=A0 Willi : )
--1512420742-443725140-1351171597=:74173--

From java-user-return-53916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Oct 25 13:51:11 2012
Return-Path: <java-user-return-53916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C8F53DF1B
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 25 Oct 2012 13:51:11 +0000 (UTC)
Received: (qmail 97171 invoked by uid 500); 25 Oct 2012 13:51:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97073 invoked by uid 500); 25 Oct 2012 13:51:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97027 invoked by uid 99); 25 Oct 2012 13:51:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Oct 2012 13:51:07 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [62.213.161.134] (HELO pmx.sirma.bg) (62.213.161.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Oct 2012 13:51:00 +0000
X-Virus-Scanned: Sirma Antivirus System
Received: from [192.168.128.140] (ivasilev.sirma.int [192.168.128.140])
	by pmx.sirma.bg (Sirma mail system) with ESMTP id 3569924006
	for <java-user@lucene.apache.org>; Thu, 25 Oct 2012 16:50:39 +0300 (EEST)
Message-ID: <508943AA.2030103@sirma.bg>
Date: Thu, 25 Oct 2012 16:50:34 +0300
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Mozilla/5.0 (Windows NT 5.2; rv:16.0) Gecko/20121010 Thunderbird/16.0.1
MIME-Version: 1.0
To: LUCENE MAIL LIST <java-user@lucene.apache.org>
Subject: Is there some class to iterate on document's term positions in Lucene
 4.0.0?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hy Guys,

In previous versions of Lucene there was a class TermPositions that 
could be obtained form IndexReader.
Is there something that replaces it in Lucene 4.0.0?

Also is there some documentation that describes how to use Lucene 4.0.0 
until next release of Lucene in Action book would be available?

Cheers,
Ivan Vasilev

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Oct 25 13:51:14 2012
Return-Path: <java-user-return-53917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 83F31DF1D
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 25 Oct 2012 13:51:14 +0000 (UTC)
Received: (qmail 97536 invoked by uid 500); 25 Oct 2012 13:51:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97100 invoked by uid 500); 25 Oct 2012 13:51:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97084 invoked by uid 99); 25 Oct 2012 13:51:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Oct 2012 13:51:09 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-wg0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Oct 2012 13:51:02 +0000
Received: by mail-wg0-f48.google.com with SMTP id ds1so848013wgb.5
        for <java-user@lucene.apache.org>; Thu, 25 Oct 2012 06:50:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=+CXouqftWJ3LiW+uaSOVuLckBuMEVLRvJzrjwikTqPk=;
        b=eNOSSd4Qs6LJRyZMDp8e4tm/9NY1m8J09rDZ3m/wsQQzyjNkeGhB9dMJ3h35OJ94Vo
         SKNtaFHG04P8GOUrY4nnS7BrUI98mXYEUIrhwYebPkPZDDTdq8XQggkWiJfn3g45WKwW
         cZ5q1aboFf+MF7it1/g4x8rZTVHpq5GM/5n/NUQgrAmwCnH+ZfkZOsGfm/5jozTSV49o
         lBB+lEzAbFRDgnIDvVBlJ6RgSF3VrqbPBpFBdwZFhztwQyN0W9eIa+qzHMVUw9YU58oZ
         /ItCnFtdaE5B0coSiMaDZKE1RV6UY0k23mEIfIlcSBf+fDZMNJm0geBVESZaQEgOQeCf
         jQvw==
Received: by 10.216.200.163 with SMTP id z35mr11169644wen.53.1351173041959;
 Thu, 25 Oct 2012 06:50:41 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.194.57.20 with HTTP; Thu, 25 Oct 2012 06:50:21 -0700 (PDT)
In-Reply-To: <1351171597.74173.YahooMailNeo@web29404.mail.ird.yahoo.com>
References: <1351171597.74173.YahooMailNeo@web29404.mail.ird.yahoo.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 25 Oct 2012 14:50:21 +0100
Message-ID: <CAEY5pxV7dGao2-Fb1DVAenqtH4o4tYDXDsSHNYCtnjKpOG3UXg@mail.gmail.com>
Subject: Re: How to use/create an alias to a field?
To: java-user@lucene.apache.org, Willi Haase <willi_haase@yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Did you also find the response to that question?
http://mail-archives.apache.org/mod_mbox/lucene-java-user/200801.mbox/%3C81162.81463.qm@web50303.mail.re2.yahoo.com%3E

Hard to think of any other ways than those mentioned there.


--
Ian.


On Thu, Oct 25, 2012 at 2:26 PM, Willi Haase <willi_haase@yahoo.com> wrote:
> Hello
>
> I am using Lucene 3.4 and I have nearly the same question like Jan in his post:
> http://mail-archives.apache.org/mod_mbox/lucene-java-user/200801.mbox/%3C4791E482.60900%40gmx.de%3E
>
>
> I could found something helpful in "Lucene in Action" or in the web.
> What is the recommended way to create an alias to a field?
> I want be able to use in the searchquery "au:some_name" or "auth:some_name" or "author:some_name", all using the field "author".
>
> Many thanks in advance for any help or recommendations
>   Willi : )

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Oct 25 13:57:01 2012
Return-Path: <java-user-return-53918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 13469DF46
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 25 Oct 2012 13:57:01 +0000 (UTC)
Received: (qmail 16134 invoked by uid 500); 25 Oct 2012 13:56:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15970 invoked by uid 500); 25 Oct 2012 13:56:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15947 invoked by uid 99); 25 Oct 2012 13:56:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Oct 2012 13:56:58 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qc0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Oct 2012 13:56:53 +0000
Received: by mail-qc0-f176.google.com with SMTP id n41so807309qco.35
        for <java-user@lucene.apache.org>; Thu, 25 Oct 2012 06:56:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=Y7Kaj2qS2hgtDG56OTTgt+NVZHXdEQMATp5rSIGiRwc=;
        b=WMcy9D3ORY9FJVQAwU5rMSCtDAKN2aAfjWU45TKpm7Env3sLBsR7VGXeM/2MgoL9g8
         xv46FA8Kd6mWvtCAF/QpMjc46BpnKXXg0sGJ4VijfRIhazxJSW6Gruo7MzXOpQwgjWKi
         YxftcbTXqp6jdjKMardZMrW3Zy4OA4/NdSHxMfu4s0kqrkeoJPlN5VzNdtoKVCVQiREN
         +zX7e+FaPvwk/DO/3P+AOd/yqQil2j84h4XJmMgQCpmEVyotxldTFXHWnj+TEyCdYpP1
         0Secd6VxY9ToIaMl7mtadtXFqi7Ab6aqUTwoExOYnug0twcfmztmIOWpWiIGiDRRuerf
         wKtQ==
Received: by 10.229.196.131 with SMTP id eg3mr2122859qcb.117.1351173392118;
 Thu, 25 Oct 2012 06:56:32 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.49.26.37 with HTTP; Thu, 25 Oct 2012 06:56:11 -0700 (PDT)
In-Reply-To: <508943AA.2030103@sirma.bg>
References: <508943AA.2030103@sirma.bg>
From: Robert Muir <rcmuir@gmail.com>
Date: Thu, 25 Oct 2012 09:56:11 -0400
Message-ID: <CAOdYfZVb=+ZfPn0UG+7J8QX4_JiG64sMm=tGSBogUbGJCejx0Q@mail.gmail.com>
Subject: Re: Is there some class to iterate on document's term positions in
 Lucene 4.0.0?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Oct 25, 2012 at 9:50 AM, Ivan Vasilev <ivasilev@sirma.bg> wrote:
> Hy Guys,
>
> In previous versions of Lucene there was a class TermPositions that could be
> obtained form IndexReader.
> Is there something that replaces it in Lucene 4.0.0?
>
> Also is there some documentation that describes how to use Lucene 4.0.0
> until next release of Lucene in Action book would be available?

The javadocs. the package javadocs tell you how to do exactly what you
are asking.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Oct 25 13:58:32 2012
Return-Path: <java-user-return-53919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E201EDF4E
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 25 Oct 2012 13:58:31 +0000 (UTC)
Received: (qmail 20646 invoked by uid 500); 25 Oct 2012 13:58:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20591 invoked by uid 500); 25 Oct 2012 13:58:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20569 invoked by uid 99); 25 Oct 2012 13:58:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Oct 2012 13:58:29 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-wg0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Oct 2012 13:58:23 +0000
Received: by mail-wg0-f48.google.com with SMTP id ds1so851585wgb.5
        for <java-user@lucene.apache.org>; Thu, 25 Oct 2012 06:58:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=1C0a2Str/VZvLOVi77Bvt/QzCnw7xVvs/zSlPdT3TfM=;
        b=F2bISHF5tu8Xz3vyU21DQWXPwTs+JyHiwoAKOD2jGqTFFELKyQDhFP2sp0yjmSVkVB
         k6cadNEEFSAqvS2oniMP6QoKpulzJNdV/xBz/4ZGYnaYdCbMSWrUk3YrD+wl3iI8uOgn
         nvtH7io0WZaLpoT4s1jCTXvBbaYvQjJBtwW6JQwtI2mBpwmTogN/qq+PhiWrl4i4E+fi
         Mp7l9sKwttW8Byw+SXQYboMX6dNaGM+36KAKCDEAPc0jRSDeIKeYigd/9wCZ9pE6ho2D
         tEGVnpybyfak1P6kCQepWrR2cQYEtP+Vm64Le5VmCudiTgwX6SCs37qkZ0Wn0OnMfYXA
         R6/A==
Received: by 10.180.90.201 with SMTP id by9mr10697178wib.5.1351173482238; Thu,
 25 Oct 2012 06:58:02 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.194.57.20 with HTTP; Thu, 25 Oct 2012 06:57:41 -0700 (PDT)
In-Reply-To: <508943AA.2030103@sirma.bg>
References: <508943AA.2030103@sirma.bg>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 25 Oct 2012 14:57:41 +0100
Message-ID: <CAEY5pxWXQn9Fd+YC4nR37g2G8BFjWVuxnbpRenG3M_uedU8mPw@mail.gmail.com>
Subject: Re: Is there some class to iterate on document's term positions in
 Lucene 4.0.0?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

>From http://lucene.apache.org/core/4_0_0/MIGRATE.html

TermPositions is renamed to DocsAndPositionsEnum, and no longer
extends the docs only enumerator (DocsEnum).

And the link is probably the answer to your second question.


--
Ian.


On Thu, Oct 25, 2012 at 2:50 PM, Ivan Vasilev <ivasilev@sirma.bg> wrote:
> Hy Guys,
>
> In previous versions of Lucene there was a class TermPositions that could be
> obtained form IndexReader.
> Is there something that replaces it in Lucene 4.0.0?
>
> Also is there some documentation that describes how to use Lucene 4.0.0
> until next release of Lucene in Action book would be available?
>
> Cheers,
> Ivan Vasilev
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Oct 25 14:22:43 2012
Return-Path: <java-user-return-53920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DC067D051
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 25 Oct 2012 14:22:42 +0000 (UTC)
Received: (qmail 4665 invoked by uid 500); 25 Oct 2012 14:22:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4549 invoked by uid 500); 25 Oct 2012 14:22:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4520 invoked by uid 99); 25 Oct 2012 14:22:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Oct 2012 14:22:39 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of SRS0=Idc4Y7=IW=basetechnology.com=jack@yourhostingaccount.com designates 65.254.253.78 as permitted sender)
Received: from [65.254.253.78] (HELO mailout09.yourhostingaccount.com) (65.254.253.78)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Oct 2012 14:22:29 +0000
Received: from mailscan15.yourhostingaccount.com ([10.1.15.15] helo=mailscan15.yourhostingaccount.com)
	by mailout09.yourhostingaccount.com with esmtp (Exim)
	id 1TROJz-0001tU-Jj
	for java-user@lucene.apache.org; Thu, 25 Oct 2012 10:22:07 -0400
Received: from impout01.yourhostingaccount.com ([10.1.55.1] helo=impout01.yourhostingaccount.com)
	by mailscan15.yourhostingaccount.com with esmtp (Exim)
	id 1TROJz-0007J9-3d; Thu, 25 Oct 2012 10:22:07 -0400
Received: from authsmtp02.yourhostingaccount.com ([10.1.18.2])
	by impout01.yourhostingaccount.com with NO UCE
	id FSN71k00402goRm01SN7Aj; Thu, 25 Oct 2012 10:22:07 -0400
X-Authority-Analysis: v=2.0 cv=IICA+3TG c=1 sm=1
 a=PHQHB1QSaEYgcU2qnZkzMw==:17 a=aQzbgH187woA:10 a=DkJ_xYrTrjkA:10
 a=3jZET7lWBKwA:10 a=8nJEP1OIZ-IA:10 a=jvYhGVW7AAAA:8 a=Vtdxlvf3uTcA:10
 a=mV9VRH-2AAAA:8 a=gyWE-OR0utddln81GSoA:9 a=wPNLvfGTeEIA:10
 a=x/Hyyyp0PjmVEO0KwK8auA==:117
X-EN-OrigOutIP: 10.1.18.2
X-EN-IMPSID: FSN71k00402goRm01SN7Aj
Received: from 207-237-102-116.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com ([207.237.102.116] helo=JackKrupansky)
	by authsmtp02.yourhostingaccount.com with esmtpa (Exim)
	id 1TROJy-0006PI-4X; Thu, 25 Oct 2012 10:22:06 -0400
Message-ID: <07405DCFAB5449E2B11F6F915AD09E23@JackKrupansky>
From: "Jack Krupansky" <jack@basetechnology.com>
To: <java-user@lucene.apache.org>,
	<paul_t100@fastmail.fm>
References: <50891E4F.6070007@fastmail.fm>
In-Reply-To: <50891E4F.6070007@fastmail.fm>
Subject: Re: Is there anything in Lucene 4.0 that provides 'absolute' scoring so that i can compare the scoring results of different searches ?
Date: Thu, 25 Oct 2012 10:22:01 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3555.308
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3555.308
X-EN-UserInfo: e0a4b55451ed9f27313ebf02e3d4348d:fc4a93e1349e680c52bdd723c0ab3ef6
X-EN-AuthUser: jack@basetechnology.com
Sender:  "Jack Krupansky" <jack@basetechnology.com>
X-EN-OrigIP: 207.237.102.116
X-EN-OrigHost: 207-237-102-116.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com
X-Virus-Checked: Checked by ClamAV on apache.org

Could you provide a more concrete definition of what you mean by "absolute 
scoring"? I mean, you can implement your own scoring or "similarity", so 
what exact criteria are you proposing?

Try providing a concise example of a couple of documents and a couple of 
searches and how your propose to score them.

-- Jack Krupansky

-----Original Message----- 
From: Paul Taylor
Sent: Thursday, October 25, 2012 7:11 AM
To: java-user@lucene.apache.org
Subject: Is there anything in Lucene 4.0 that provides 'absolute' scoring so 
that i can compare the scoring results of different searches ?

Is there anything in Lucene 4.0 that provides 'absolute' scoring so that
i can compare the scoring results of different searches ?

To explain if I do a search for two values fred OR jane and there is a
document that contains both those words exaclty then that document will
score 100, documents that contain only one word will score less. But if
there is no document contain both words but there is one document that
contains fred then that document will score 100 even though it didnt
match jane at all. (Im clearly ignoring all the complexties but you get
my gist)

So all documents returned from a search are scored relative to each
other, but I cannot perform a second score and sensibly compare the
score of the first search with the second whihc is what I would like to do.

Why would I want to this ?

In a music database  have an index of releases and a separate indexes of
artists, usually the user just searches artists or releases. But
sometimes they want to search all and interleave the results from the
two indexes, but its not sensible for me to interleave them based on
their score at the moment.

thanks Paul



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Oct 25 14:50:43 2012
Return-Path: <java-user-return-53921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5E63FD122
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 25 Oct 2012 14:50:43 +0000 (UTC)
Received: (qmail 390 invoked by uid 500); 25 Oct 2012 14:50:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 243 invoked by uid 500); 25 Oct 2012 14:50:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 228 invoked by uid 99); 25 Oct 2012 14:50:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Oct 2012 14:50:40 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of SRS0=Idc4Y7=IW=basetechnology.com=jack@yourhostingaccount.com designates 65.254.253.92 as permitted sender)
Received: from [65.254.253.92] (HELO mailout11.yourhostingaccount.com) (65.254.253.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Oct 2012 14:50:32 +0000
Received: from mailscan06.yourhostingaccount.com ([10.1.15.6] helo=mailscan06.yourhostingaccount.com)
	by mailout11.yourhostingaccount.com with esmtp (Exim)
	id 1TROl9-00065s-7O
	for java-user@lucene.apache.org; Thu, 25 Oct 2012 10:50:11 -0400
Received: from impout01.yourhostingaccount.com ([10.1.55.1] helo=impout01.yourhostingaccount.com)
	by mailscan06.yourhostingaccount.com with esmtp (Exim)
	id 1TROl8-00042A-NJ
	for java-user@lucene.apache.org; Thu, 25 Oct 2012 10:50:10 -0400
Received: from authsmtp02.yourhostingaccount.com ([10.1.18.2])
	by impout01.yourhostingaccount.com with NO UCE
	id FSqA1k00A02goRm01SqAl0; Thu, 25 Oct 2012 10:50:10 -0400
X-Authority-Analysis: v=2.0 cv=IICA+3TG c=1 sm=1
 a=PHQHB1QSaEYgcU2qnZkzMw==:17 a=aQzbgH187woA:10 a=-CSesFpBx6gA:10
 a=3jZET7lWBKwA:10 a=8nJEP1OIZ-IA:10 a=jvYhGVW7AAAA:8 a=hM4BsYQTZkAA:10
 a=mV9VRH-2AAAA:8 a=QNyxkf7-SZ_N3-t_9SUA:9 a=wPNLvfGTeEIA:10 a=aCZfdi8qajYA:10
 a=x/Hyyyp0PjmVEO0KwK8auA==:117
X-EN-OrigOutIP: 10.1.18.2
X-EN-IMPSID: FSqA1k00A02goRm01SqAl0
Received: from 207-237-102-116.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com ([207.237.102.116] helo=JackKrupansky)
	by authsmtp02.yourhostingaccount.com with esmtpa (Exim)
	id 1TROl8-0002rU-Bx
	for java-user@lucene.apache.org; Thu, 25 Oct 2012 10:50:10 -0400
Message-ID: <E0159ADF72A54D34AF8881E642A42C24@JackKrupansky>
From: "Jack Krupansky" <jack@basetechnology.com>
To: <java-user@lucene.apache.org>
References: <CAGW2whTWDDhwgVxcXXSfJps4vr6OWCSYWmfFLKHxLFyL32cqew@mail.gmail.com>
In-Reply-To: <CAGW2whTWDDhwgVxcXXSfJps4vr6OWCSYWmfFLKHxLFyL32cqew@mail.gmail.com>
Subject: Re: App supplied docID in lucene possible?
Date: Thu, 25 Oct 2012 10:50:07 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3555.308
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3555.308
X-EN-UserInfo: e0a4b55451ed9f27313ebf02e3d4348d:fc4a93e1349e680c52bdd723c0ab3ef6
X-EN-AuthUser: jack@basetechnology.com
Sender:  "Jack Krupansky" <jack@basetechnology.com>
X-EN-OrigIP: 207.237.102.116
X-EN-OrigHost: 207-237-102-116.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com
X-Virus-Checked: Checked by ClamAV on apache.org

Have you looked at or decided against an approach like Solr's 
ExternalFileField?

See:
http://lucene.apache.org/solr/4_0_0/solr-core/org/apache/solr/schema/ExternalFileField.html

Is that at least the kind of issue you are trying to deal with?

One final question: How much of a document's field values are stable vs. 
frequently changing? What are the numbers here - total field count, count of 
frequently changed fields, and percentage of documents being updated in some 
period of time?

And, I don't quite follow why you can't just use a unique key for a document 
rather than the low-level Lucene document id.

-- Jack Krupansky

-----Original Message----- 
From: Ravikumar Govindarajan
Sent: Thursday, October 25, 2012 6:10 AM
To: java-user@lucene.apache.org
Subject: App supplied docID in lucene possible?

We have the need to re-index some fields in our application frequently.

Our typical document consists of

a) Many single-valued {long/int} re-indexable fields
b) Few large-valued {text/string} static fields

We have to re-index an entire document if a single smallish field changes
and it is turning out to be a problem for us. I have gone through the
https://issues.apache.org/jira/browse/LUCENE-3837 proposal where it tries
to work-around this limitation using a secondary mapping of new-old docids.

As I understand, lucene strictly maintains internal doc-id order so that
many queries that depend on it, will work correctly. Segment merges will
also maintain order as well as reclaim deleted doc-ids

There should be many applications like us, which manage index shards
limiting a given shard based on doc-id limits or size. So reclaiming
deleted doc-ids is mostly a non-issue for us.

That leaves us with changing doc-ids. How about leaving open the doc-ids
themselves to the applications, at-least as an option to the needy? Taking
such an approach might inter-leave doc-ids across segments, but within a
segment, the docIds are always in increasing order. There are possibilities
of ghost-deletes, duplicate docIds etc..., but all should be solvable, I
believe.

Fronting these doc-ids during search from all segment readers and returning
the correct value from one of them should be easy. Will it incur a heavy
penalty during search? Another advantage gained, is the triviality of
cross-joining indexes when docIDs are fixed.

There must be many other places where an app supplied docId might make
lucene behave funny. Need some help in identifying those areas at least for
understanding this problem correctly, if not solving it all together.

--
Ravi 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Oct 25 14:58:28 2012
Return-Path: <java-user-return-53922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 731AAD184
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 25 Oct 2012 14:58:28 +0000 (UTC)
Received: (qmail 42570 invoked by uid 500); 25 Oct 2012 14:58:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42511 invoked by uid 500); 25 Oct 2012 14:58:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42496 invoked by uid 99); 25 Oct 2012 14:58:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Oct 2012 14:58:25 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of SRS0=Idc4Y7=IW=basetechnology.com=jack@yourhostingaccount.com designates 65.254.254.75 as permitted sender)
Received: from [65.254.254.75] (HELO mailout08.yourhostingaccount.com) (65.254.254.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Oct 2012 14:58:16 +0000
Received: from mailscan14.yourhostingaccount.com ([10.1.15.14] helo=mailscan14.yourhostingaccount.com)
	by mailout08.yourhostingaccount.com with esmtp (Exim)
	id 1TROsd-0002E7-Bd
	for java-user@lucene.apache.org; Thu, 25 Oct 2012 10:57:55 -0400
Received: from impout02.yourhostingaccount.com ([10.1.55.2] helo=impout02.yourhostingaccount.com)
	by mailscan14.yourhostingaccount.com with esmtp (Exim)
	id 1TROsc-0002Hx-W4
	for java-user@lucene.apache.org; Thu, 25 Oct 2012 10:57:55 -0400
Received: from authsmtp16.yourhostingaccount.com ([10.1.18.16])
	by impout02.yourhostingaccount.com with NO UCE
	id FSxu1k00M0LoD9W01Sxub3; Thu, 25 Oct 2012 10:57:54 -0400
X-Authority-Analysis: v=2.0 cv=HIVB5/Rv c=1 sm=1
 a=PHQHB1QSaEYgcU2qnZkzMw==:17 a=aQzbgH187woA:10 a=hXvWnlDUi6IA:10
 a=3jZET7lWBKwA:10 a=8nJEP1OIZ-IA:10 a=jvYhGVW7AAAA:8 a=C_Sc1jEDnbgA:10
 a=mV9VRH-2AAAA:8 a=ndYZ1Nx4niX4M4Oz1NwA:9 a=wPNLvfGTeEIA:10
 a=ltXMujfcukYoTVgNOHxvog==:117
X-EN-OrigOutIP: 10.1.18.16
X-EN-IMPSID: FSxu1k00M0LoD9W01Sxub3
Received: from 207-237-102-116.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com ([207.237.102.116] helo=JackKrupansky)
	by authsmtp16.yourhostingaccount.com with esmtpa (Exim)
	id 1TROsc-0002zI-NQ
	for java-user@lucene.apache.org; Thu, 25 Oct 2012 10:57:54 -0400
Message-ID: <141215F110434A21A6E43B80924C4B6C@JackKrupansky>
From: "Jack Krupansky" <jack@basetechnology.com>
To: <java-user@lucene.apache.org>
References: <1351171597.74173.YahooMailNeo@web29404.mail.ird.yahoo.com>
In-Reply-To: <1351171597.74173.YahooMailNeo@web29404.mail.ird.yahoo.com>
Subject: Re: How to use/create an alias to a field?
Date: Thu, 25 Oct 2012 10:57:51 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3555.308
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3555.308
X-EN-UserInfo: e0a4b55451ed9f27313ebf02e3d4348d:fc4a93e1349e680c52bdd723c0ab3ef6
X-EN-AuthUser: jack@basetechnology.com
Sender:  "Jack Krupansky" <jack@basetechnology.com>
X-EN-OrigIP: 207.237.102.116
X-EN-OrigHost: 207-237-102-116.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com
X-Virus-Checked: Checked by ClamAV on apache.org

With edismax in Solr 3.6/4.0 field aliases are supported:

"The syntax for aliasing is f.myalias.qf=realfield. A user query for 
myalias:foo will be queried as realfield:foo."

See:
http://wiki.apache.org/solr/ExtendedDisMax#Field_aliasing_.2BAC8_renaming

-- Jack Krupansky

-----Original Message----- 
From: Willi Haase
Sent: Thursday, October 25, 2012 9:26 AM
To: java-user@lucene.apache.org
Subject: How to use/create an alias to a field?

Hello

I am using Lucene 3.4 and I have nearly the same question like Jan in his 
post:
http://mail-archives.apache.org/mod_mbox/lucene-java-user/200801.mbox/%3C4791E482.60900%40gmx.de%3E


I could found something helpful in "Lucene in Action" or in the web.
What is the recommended way to create an alias to a field?
I want be able to use in the searchquery "au:some_name" or "auth:some_name" 
or "author:some_name", all using the field "author".

Many thanks in advance for any help or recommendations
  Willi : ) 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Oct 25 15:40:50 2012
Return-Path: <java-user-return-53923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D8EB7D29F
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 25 Oct 2012 15:40:50 +0000 (UTC)
Received: (qmail 88620 invoked by uid 500); 25 Oct 2012 15:40:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88586 invoked by uid 500); 25 Oct 2012 15:40:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88574 invoked by uid 99); 25 Oct 2012 15:40:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Oct 2012 15:40:48 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [62.213.161.134] (HELO pmx.sirma.bg) (62.213.161.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Oct 2012 15:40:43 +0000
X-Virus-Scanned: Sirma Antivirus System
Received: from [192.168.128.140] (ivasilev.sirma.int [192.168.128.140])
	by pmx.sirma.bg (Sirma mail system) with ESMTP id DF60F24006
	for <java-user@lucene.apache.org>; Thu, 25 Oct 2012 18:40:20 +0300 (EEST)
Message-ID: <50895D64.9030908@sirma.bg>
Date: Thu, 25 Oct 2012 18:40:20 +0300
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Mozilla/5.0 (Windows NT 5.2; rv:16.0) Gecko/20121010 Thunderbird/16.0.1
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Is there some class to iterate on document's term positions in
 Lucene 4.0.0?
References: <508943AA.2030103@sirma.bg> <CAEY5pxWXQn9Fd+YC4nR37g2G8BFjWVuxnbpRenG3M_uedU8mPw@mail.gmail.com>
In-Reply-To: <CAEY5pxWXQn9Fd+YC4nR37g2G8BFjWVuxnbpRenG3M_uedU8mPw@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Guys,

The resources seem to be through enough :)

On 25.10.2012 . 16:57, Ian Lea wrote:
> >From http://lucene.apache.org/core/4_0_0/MIGRATE.html
>
> TermPositions is renamed to DocsAndPositionsEnum, and no longer
> extends the docs only enumerator (DocsEnum).
>
> And the link is probably the answer to your second question.
>
>
> --
> Ian.
>
>
> On Thu, Oct 25, 2012 at 2:50 PM, Ivan Vasilev <ivasilev@sirma.bg> wrote:
>> Hy Guys,
>>
>> In previous versions of Lucene there was a class TermPositions that could be
>> obtained form IndexReader.
>> Is there something that replaces it in Lucene 4.0.0?
>>
>> Also is there some documentation that describes how to use Lucene 4.0.0
>> until next release of Lucene in Action book would be available?
>>
>> Cheers,
>> Ivan Vasilev
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Oct 25 15:59:46 2012
Return-Path: <java-user-return-53924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EA8C1D33C
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 25 Oct 2012 15:59:45 +0000 (UTC)
Received: (qmail 57682 invoked by uid 500); 25 Oct 2012 15:59:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57639 invoked by uid 500); 25 Oct 2012 15:59:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57631 invoked by uid 99); 25 Oct 2012 15:59:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Oct 2012 15:59:43 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [77.238.189.192] (HELO nm16-vm0.bullet.mail.ird.yahoo.com) (77.238.189.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Oct 2012 15:59:35 +0000
Received: from [77.238.189.56] by nm16.bullet.mail.ird.yahoo.com with NNFMP; 25 Oct 2012 15:59:13 -0000
Received: from [212.82.108.238] by tm9.bullet.mail.ird.yahoo.com with NNFMP; 25 Oct 2012 15:59:12 -0000
Received: from [127.0.0.1] by omp1003.mail.ird.yahoo.com with NNFMP; 25 Oct 2012 15:59:12 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 893851.88130.bm@omp1003.mail.ird.yahoo.com
Received: (qmail 37150 invoked by uid 60001); 25 Oct 2012 15:59:12 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1351180752; bh=goLwj+vC67X8gO9tSp9ENm8ZFkTV88brR/zvb86T4vk=; h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=hlGDxs6tk/g3UruZjAq+oTYnALWqyTGW8RrFC/9oZo9alGZN50iQNSAe/gWCpbpdCJycKWWV5kVzYH0AFCEw0LnEf5v0ga1dY3hwfQEy5suBvjLt80Fob1jmCg4g2qclJ5TYuvjPQU6rKYNS5FadlydQ7XP70r46FT9hPC/2PvI=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=6qogS4hLlelgVgWYc0mvLoouPASZB4EG3q94y329Q8ubFmI3ieqvv9S2pPUnYgz3Kp+zYyNOvBHoD96IR/6wbzWI6iULnSOpkt8kpuwmV0zh7Wl33GCS6Ww8BdOUwqNBkhr6yzJfcNNX4WDTTo8/pSsNsun7sWJzLNLByLYNnO8=;
X-YMail-OSG: lYunsIYVM1mMSzE5cJqv9elcshmG_kzBCbDZsgjm_lQa9IA
 TfPe.afhC
Received: from [193.62.194.244] by web29405.mail.ird.yahoo.com via HTTP; Thu, 25 Oct 2012 16:59:12 BST
X-Rocket-MIMEInfo: 001.001,SGkgSmFjawoKVGhhbmsgeW91IGZvciB5b3VyIGhlbHAuCk15IHByb2JsZW0gaXMsIEkgaGF2ZSBvbmx5IGEgTHVjZW5lIHNldHVwIGFuZCBjYW4gbm90IHN3aXRjaCB0byBTb2xyIDogKAoKQ2hlZXJzCsKgIFdpbGxpwqAKCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwogVm9uOiBKYWNrIEtydXBhbnNreSA8amFja0BiYXNldGVjaG5vbG9neS5jb20.CkFuOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcgCkdlc2VuZGV0OiAxNTo1NyBEb25uZXJzdGFnLCAyNS5Pa3RvYmVyIDIwMTIKQmV0cmUBMAEBAQE-
X-Mailer: YahooMailWebService/0.8.123.450
References: <1351171597.74173.YahooMailNeo@web29404.mail.ird.yahoo.com> <141215F110434A21A6E43B80924C4B6C@JackKrupansky>
Message-ID: <1351180752.27673.YahooMailNeo@web29405.mail.ird.yahoo.com>
Date: Thu, 25 Oct 2012 16:59:12 +0100 (BST)
From: Willi Haase <willi_haase@yahoo.com>
Reply-To: Willi Haase <willi_haase@yahoo.com>
Subject: Re: How to use/create an alias to a field?
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <141215F110434A21A6E43B80924C4B6C@JackKrupansky>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="1426553645-983698266-1351180752=:27673"
X-Virus-Checked: Checked by ClamAV on apache.org

--1426553645-983698266-1351180752=:27673
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hi Jack=0A=0AThank you for your help.=0AMy problem is, I have only a Lucene=
 setup and can not switch to Solr : (=0A=0ACheers=0A=A0 Willi=A0=0A=0A=0A__=
______________________________=0A Von: Jack Krupansky <jack@basetechnology.=
com>=0AAn: java-user@lucene.apache.org =0AGesendet: 15:57 Donnerstag, 25.Ok=
tober 2012=0ABetreff: Re: How to use/create an alias to a field?=0A =0AWith=
 edismax in Solr 3.6/4.0 field aliases are supported:=0A=0A"The syntax for =
aliasing is f.myalias.qf=3Drealfield. A user query for myalias:foo will be =
queried as realfield:foo."=0A=0ASee:=0Ahttp://wiki.apache.org/solr/Extended=
DisMax#Field_aliasing_.2BAC8_renaming=0A=0A-- Jack Krupansky=0A=0A-----Orig=
inal Message----- From: Willi Haase=0ASent: Thursday, October 25, 2012 9:26=
 AM=0ATo: java-user@lucene.apache.org=0ASubject: How to use/create an alias=
 to a field?=0A=0AHello=0A=0AI am using Lucene 3.4 and I have nearly the sa=
me question like Jan in his post:=0Ahttp://mail-archives.apache.org/mod_mbo=
x/lucene-java-user/200801.mbox/%3C4791E482.60900%40gmx.de%3E=0A=0A=0AI coul=
d found something helpful in "Lucene in Action" or in the web.=0AWhat is th=
e recommended way to create an alias to a field?=0AI want be able to use in=
 the searchquery "au:some_name" or "auth:some_name" or "author:some_name", =
all using the field "author".=0A=0AMany thanks in advance for any help or r=
ecommendations=0AWilli : ) =0A=0A------------------------------------------=
---------------------------=0ATo unsubscribe, e-mail: java-user-unsubscribe=
@lucene.apache.org=0AFor additional commands, e-mail: java-user-help@lucene=
.apache.org
--1426553645-983698266-1351180752=:27673--

From java-user-return-53925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Oct 25 16:43:41 2012
Return-Path: <java-user-return-53925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4E317D517
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 25 Oct 2012 16:43:41 +0000 (UTC)
Received: (qmail 43905 invoked by uid 500); 25 Oct 2012 16:43:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43855 invoked by uid 500); 25 Oct 2012 16:43:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43847 invoked by uid 99); 25 Oct 2012 16:43:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Oct 2012 16:43:39 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of SRS0=Idc4Y7=IW=basetechnology.com=jack@yourhostingaccount.com designates 65.254.253.50 as permitted sender)
Received: from [65.254.253.50] (HELO mailout06.yourhostingaccount.com) (65.254.253.50)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Oct 2012 16:43:30 +0000
Received: from mailscan13.yourhostingaccount.com ([10.1.15.13] helo=mailscan13.yourhostingaccount.com)
	by mailout06.yourhostingaccount.com with esmtp (Exim)
	id 1TRQWU-00021V-9F
	for java-user@lucene.apache.org; Thu, 25 Oct 2012 12:43:10 -0400
Received: from impout01.yourhostingaccount.com ([10.1.55.1] helo=impout01.yourhostingaccount.com)
	by mailscan13.yourhostingaccount.com with esmtp (Exim)
	id 1TRQWT-0006Wa-6Q; Thu, 25 Oct 2012 12:43:09 -0400
Received: from authsmtp16.yourhostingaccount.com ([10.1.18.16])
	by impout01.yourhostingaccount.com with NO UCE
	id FUj91k0080LoD9W01Uj9L6; Thu, 25 Oct 2012 12:43:09 -0400
X-Authority-Analysis: v=2.0 cv=IICA+3TG c=1 sm=1
 a=PHQHB1QSaEYgcU2qnZkzMw==:17 a=aQzbgH187woA:10 a=hXvWnlDUi6IA:10
 a=3jZET7lWBKwA:10 a=8nJEP1OIZ-IA:10 a=jvYhGVW7AAAA:8 a=C_Sc1jEDnbgA:10
 a=mV9VRH-2AAAA:8 a=nQY5udRvNi2FYY9B7ukA:9 a=wPNLvfGTeEIA:10 a=EMlJoiak7gQA:10
 a=ltXMujfcukYoTVgNOHxvog==:117
X-EN-OrigOutIP: 10.1.18.16
X-EN-IMPSID: FUj91k0080LoD9W01Uj9L6
Received: from 207-237-102-116.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com ([207.237.102.116] helo=JackKrupansky)
	by authsmtp16.yourhostingaccount.com with esmtpa (Exim)
	id 1TRQWT-00054b-3R; Thu, 25 Oct 2012 12:43:09 -0400
Message-ID: <87652EB0105140AD9CF8E048047D92BE@JackKrupansky>
From: "Jack Krupansky" <jack@basetechnology.com>
To: <java-user@lucene.apache.org>,
	"Willi Haase" <willi_haase@yahoo.com>
References: <1351171597.74173.YahooMailNeo@web29404.mail.ird.yahoo.com> <141215F110434A21A6E43B80924C4B6C@JackKrupansky> <1351180752.27673.YahooMailNeo@web29405.mail.ird.yahoo.com>
In-Reply-To: <1351180752.27673.YahooMailNeo@web29405.mail.ird.yahoo.com>
Subject: Re: How to use/create an alias to a field?
Date: Thu, 25 Oct 2012 12:43:04 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3555.308
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3555.308
X-EN-UserInfo: e0a4b55451ed9f27313ebf02e3d4348d:fc4a93e1349e680c52bdd723c0ab3ef6
X-EN-AuthUser: jack@basetechnology.com
Sender:  "Jack Krupansky" <jack@basetechnology.com>
X-EN-OrigIP: 207.237.102.116
X-EN-OrigHost: 207-237-102-116.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com
X-Virus-Checked: Checked by ClamAV on apache.org

I almost added that you could create a subclass of the Lucene query parser, 
as Solr does, and add the aliasing that way. There might/should be field 
aliasing code in Solr that you could easily apply in Solr. There really 
isn't a great reason why aliasing is only available in Solr and not in 
Lucene.

But unless you are prepared to hack on the query parser, alias support isn't 
available in Lucene right now.

-- Jack Krupansky
-----Original Message----- 
From: Willi Haase
Sent: Thursday, October 25, 2012 11:59 AM
To: java-user@lucene.apache.org
Subject: Re: How to use/create an alias to a field?

Hi Jack

Thank you for your help.
My problem is, I have only a Lucene setup and can not switch to Solr : (

Cheers
  Willi


________________________________
Von: Jack Krupansky <jack@basetechnology.com>
An: java-user@lucene.apache.org
Gesendet: 15:57 Donnerstag, 25.Oktober 2012
Betreff: Re: How to use/create an alias to a field?

With edismax in Solr 3.6/4.0 field aliases are supported:

"The syntax for aliasing is f.myalias.qf=realfield. A user query for 
myalias:foo will be queried as realfield:foo."

See:
http://wiki.apache.org/solr/ExtendedDisMax#Field_aliasing_.2BAC8_renaming

-- Jack Krupansky

-----Original Message----- From: Willi Haase
Sent: Thursday, October 25, 2012 9:26 AM
To: java-user@lucene.apache.org
Subject: How to use/create an alias to a field?

Hello

I am using Lucene 3.4 and I have nearly the same question like Jan in his 
post:
http://mail-archives.apache.org/mod_mbox/lucene-java-user/200801.mbox/%3C4791E482.60900%40gmx.de%3E


I could found something helpful in "Lucene in Action" or in the web.
What is the recommended way to create an alias to a field?
I want be able to use in the searchquery "au:some_name" or "auth:some_name" 
or "author:some_name", all using the field "author".

Many thanks in advance for any help or recommendations
Willi : )

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Oct 25 17:52:21 2012
Return-Path: <java-user-return-53926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8E7D4D766
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 25 Oct 2012 17:52:21 +0000 (UTC)
Received: (qmail 63015 invoked by uid 500); 25 Oct 2012 17:52:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62966 invoked by uid 500); 25 Oct 2012 17:52:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62958 invoked by uid 99); 25 Oct 2012 17:52:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Oct 2012 17:52:19 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.220.48] (HELO mail-pa0-f48.google.com) (209.85.220.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Oct 2012 17:52:09 +0000
Received: by mail-pa0-f48.google.com with SMTP id kp12so1365402pab.35
        for <java-user@lucene.apache.org>; Thu, 25 Oct 2012 10:51:48 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=date:from:to:subject:in-reply-to:message-id:references:user-agent
         :mime-version:content-type:x-gm-message-state;
        bh=QMI309P4wFBNJFkbS0TeSHqeB8tva8eNnTf3OTGtpCY=;
        b=RJCV9kOKIdk2ZiHiV6J4R+VDFmv5HHDq4yLUM6Bl74KbaIWbuT4uoDiov2TgJUZXOy
         ggUt8fbT3f+TiH0hdcxnvOQoysZCiPW4NyI4kXDLDKjpalsiwkkl2Hw/IzDIjraKagA6
         zfXXJVRoV7sORm1PSwPmDIWc2Wp+al77rgQU9ir3Zadd9sAAtcjW86SIkAoyMsH58Iqf
         R/GFxiFNnJEnpDF2rYMVRcL1ZXasyTxAaqjIZPFdm5yAXQzXBLNFsoW5Ko26SlcFiKVd
         EBT8Yo/MhBkcxH+32I3coEi0NH9Up5imaVSBl8HPLR+3NGjI4rlWPoRfRiF0tyTaR/nZ
         uT3A==
Received: by 10.68.230.234 with SMTP id tb10mr61832678pbc.71.1351187507898;
        Thu, 25 Oct 2012 10:51:47 -0700 (PDT)
Received: from frisbee.local (250.185-62-69.ftth.swbr.surewest.net. [69.62.185.250])
        by mx.google.com with ESMTPS id wo9sm11527640pbc.53.2012.10.25.10.51.46
        (version=SSLv3 cipher=OTHER);
        Thu, 25 Oct 2012 10:51:47 -0700 (PDT)
Date: Thu, 25 Oct 2012 10:51:47 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org, paul_t100@fastmail.fm
Subject: Re: Is there anything in Lucene 4.0 that provides 'absolute' scoring
 so that i can compare the scoring results of different searches ?
In-Reply-To: <50891E4F.6070007@fastmail.fm>
Message-ID: <alpine.DEB.2.02.1210251045590.11890@frisbee>
References: <50891E4F.6070007@fastmail.fm>
User-Agent: Alpine 2.02 (DEB 1266 2009-07-14)
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Gm-Message-State: ALoCoQlslOAwHEVHsL9059bX4AY3MaT/lH30WRvVdM2/TMUJYpD/8uAgBqfXlHCmE0el/OIAPIL4
X-Virus-Checked: Checked by ClamAV on apache.org


https://wiki.apache.org/lucene-java/LuceneFAQ#Can_I_filter_by_score.3F
https://wiki.apache.org/lucene-java/ScoresAsPercentages

The fundemental problem of attempting to compare scores for different 
searches is the same in your situation as in the goal of trying to 
"normalize" scores to a fixed range, But the subtle difference between 
your question and that FAQ is that if i'm understanding your goal 
correctly, you could modify your similarity to eliminate the "queryNorm" 
factor and get a ... i'm not sure what to call it ... "more raw" score 
back, which *might* be suitable for your purposes. (i'm not sure)


: Is there anything in Lucene 4.0 that provides 'absolute' scoring so that i can
: compare the scoring results of different searches ?
: 
: To explain if I do a search for two values fred OR jane and there is a
: document that contains both those words exaclty then that document will score
: 100, documents that contain only one word will score less. But if there is no
: document contain both words but there is one document that contains fred then
: that document will score 100 even though it didnt match jane at all. (Im
: clearly ignoring all the complexties but you get my gist)
: 
: So all documents returned from a search are scored relative to each other, but
: I cannot perform a second score and sensibly compare the score of the first
: search with the second whihc is what I would like to do.
: 
: Why would I want to this ?
: 
: In a music database  have an index of releases and a separate indexes of
: artists, usually the user just searches artists or releases. But sometimes
: they want to search all and interleave the results from the two indexes, but
: its not sensible for me to interleave them based on their score at the moment.
: 
: thanks Paul
: 
: 
: 
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
: 
: 

-Hoss

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Oct 25 18:06:10 2012
Return-Path: <java-user-return-53927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 49D32D7EF
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 25 Oct 2012 18:06:10 +0000 (UTC)
Received: (qmail 8011 invoked by uid 500); 25 Oct 2012 18:06:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7946 invoked by uid 500); 25 Oct 2012 18:06:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7937 invoked by uid 99); 25 Oct 2012 18:06:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Oct 2012 18:06:08 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qa0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Oct 2012 18:06:02 +0000
Received: by mail-qa0-f48.google.com with SMTP id c11so2463941qad.14
        for <java-user@lucene.apache.org>; Thu, 25 Oct 2012 11:05:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=FHeRplneifof+hM/olpSTps7pFNwynV8Qrl+XU+onSc=;
        b=YR9t6yS4cOIiRNECk59HIr9P/YtQHvaUVp7fRR11Hy/9+8G2XKiChpCrdfEKKxw15K
         h6IvLRJF6y9I1ejs6UpHr3JpUJsAj+zHSQog2JP6D3vrmNDLLKXyO6DwrAzZ/RGBpaKX
         Rd0BujC7Tn2f8GVW/56qw3DKXfy/UGi76yW9TCx6mJPUvUyQyVtBfmHd3p/jvZS0ICop
         LTXYjW2GYVcVRiJSiwb05BRhF21o3r3ER0Ez6k6n+FdNoPBTYZV4HkHTWW4hwXWvIkEm
         DuqfvVMAn7jo96QNQe6fuWD1JalhYyDzpCiOs2qWFwBUKfv80z4yNAlZ0/ANt2iCddoL
         i+Wg==
Received: by 10.224.201.136 with SMTP id fa8mr9544344qab.28.1351188342142;
 Thu, 25 Oct 2012 11:05:42 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.49.26.37 with HTTP; Thu, 25 Oct 2012 11:05:21 -0700 (PDT)
In-Reply-To: <50891E4F.6070007@fastmail.fm>
References: <50891E4F.6070007@fastmail.fm>
From: Robert Muir <rcmuir@gmail.com>
Date: Thu, 25 Oct 2012 14:05:21 -0400
Message-ID: <CAOdYfZUQV7S=9VSRqpQohHy8=X4nrGf-D8xRT-Syibi-zhvkJQ@mail.gmail.com>
Subject: Re: Is there anything in Lucene 4.0 that provides 'absolute' scoring
 so that i can compare the scoring results of different searches ?
To: java-user@lucene.apache.org, paul_t100@fastmail.fm
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Oct 25, 2012 at 7:11 AM, Paul Taylor <paul_t100@fastmail.fm> wrote:

> In a music database  have an index of releases and a separate indexes of
> artists, usually the user just searches artists or releases. But sometimes
> they want to search all and interleave the results from the two indexes, but
> its not sensible for me to interleave them based on their score at the
> moment.
>

I'm confused if you are talking about comparing two unrelated
searches, or if you are asking about a "federated search" of the same
query across 2 indexes (treat them as one collection)?

If its the latter, you can use a MultiReader if the indexes are on the
same box, or if they are not, you can implement a distributed
statistics interchange by subclassing IndexSearcher's termStatistics()
and collectionStatistics() methods (e.g. distributed IDF).

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Oct 26 00:25:41 2012
Return-Path: <java-user-return-53928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A48D5DC7C
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 26 Oct 2012 00:25:41 +0000 (UTC)
Received: (qmail 11264 invoked by uid 500); 26 Oct 2012 00:25:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11221 invoked by uid 500); 26 Oct 2012 00:25:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11210 invoked by uid 99); 26 Oct 2012 00:25:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Oct 2012 00:25:39 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vfunstein@gmail.com designates 209.85.223.176 as permitted sender)
Received: from [209.85.223.176] (HELO mail-ie0-f176.google.com) (209.85.223.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Oct 2012 00:25:34 +0000
Received: by mail-ie0-f176.google.com with SMTP id k11so3567010iea.35
        for <java-user@lucene.apache.org>; Thu, 25 Oct 2012 17:25:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=MtihYq4vlXV/X0HvjVfUsODCQHLcr8P+4Q4xMOIu7YE=;
        b=HBlty8+PEXeh5CcH647iQgR/Vy01CWXD/ytyv3VpnpJ7+NrScqW9WmIQy5hsW8Nuyi
         vAZy+HC5JL891DK/jEfZhx+8utDf51I9GI9NcSu0eZ4MsqXl7jhCJ3Oa3mNnwkGdXo5K
         p+fyCDKhzA8IKFaxSLZybhwp3r4gTZAQC08N7RTuDoc48/YqY1OqIWMMBBSxT4geJeTE
         4GfnVUg70ZNNXZcHpoGsdEB7IqQte3FHmP9KFLOEkS36MfevNbRI1AUYQ0YKcO5Xpi4w
         4Z2ZRXh1nR9veL8/eiqb1+2rTO9YdFaeEwrBZSXtY/tnRLgyFgZnLmHDG+gHX1vBh/cN
         J5Mw==
MIME-Version: 1.0
Received: by 10.42.157.202 with SMTP id e10mr18044903icx.41.1351211114091;
 Thu, 25 Oct 2012 17:25:14 -0700 (PDT)
Received: by 10.64.136.169 with HTTP; Thu, 25 Oct 2012 17:25:13 -0700 (PDT)
In-Reply-To: <6fcd8b3f-31ef-40d1-98bd-ecf34ba10e1e@email.android.com>
References: <0c065427.000006a4.0000001c@kermit>
	<00bc01ccecee$e47c6170$ad752450$@thetaphi.de>
	<021601ccecef$ddb5a670$9920f350$@com>
	<00bd01ccecf3$c51a6070$4f4f2150$@thetaphi.de>
	<CAL3VrCd3-dVmy1d9C1tT-=rSfvFkuxNw6DeZiw3by+FvvfBOYg@mail.gmail.com>
	<6fcd8b3f-31ef-40d1-98bd-ecf34ba10e1e@email.android.com>
Date: Thu, 25 Oct 2012 17:25:13 -0700
Message-ID: <CALr4Hzpt1uUAViJBs7N_Oqsf1wo8ikCB+-Y1=D1Xok7R4Ue95A@mail.gmail.com>
Subject: Re: query for documents WITHOUT a field?
From: Vitaly Funstein <vfunstein@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=90e6ba6138d078d66104cceb5ac5
X-Virus-Checked: Checked by ClamAV on apache.org

--90e6ba6138d078d66104cceb5ac5
Content-Type: text/plain; charset=ISO-8859-1

Sorry for resurrecting an old thread, but how would one go about writing a
Lucene query similar to this?

SELECT * FROM patient WHERE first_name = 'Zed' OR allergies IS NULL

An AND case would be easy since one would just use a simple TermQuery with
a FieldValueFilter added, but what about other boolean cases? Admittedly,
this is a contrived example, but the point here is that it seems that since
filters are always applied to results after they are returned, how would
one go about making the null-ness of a field part of the query logic?

On Thu, Feb 16, 2012 at 1:45 PM, Uwe Schindler <uwe@thetaphi.de> wrote:

> I already mentioned that pseudo NULL term, but the user asked for another
> solution...
> --
> Uwe Schindler
> H.-H.-Meier-Allee 63, 28213 Bremen
> http://www.thetaphi.de
>
>
>
> Jamie Johnson <jej2003@gmail.com> schrieb:
>
> Another possible solution is while indexing insert a custom token
> which is impossible to show up in the index otherwise, then do the
> filter based on that token.
>
>
> On Thu, Feb 16, 2012 at 4:41 PM, Uwe Schindler <uwe@thetaphi.de> wrote:
> > As the documentation states:
> > Lucene is an inverted index that does not have per-document fields. It
> only
> > knows terms pointing to documents. The query you are searching is a query
> > that returns all documents which have no term. To execute this query, it
> > will get the term index and iterate all terms of a field, mark those in a
> > bitset and negates that. The filter/query I told you uses the FieldCache
> to
> > do this. Since 3.6 (also in 3.5, but there it is buggy/API different)
> there
> > is another fieldcache that returns exactly that bitset. The filter
> mentioned
> > only uses that bitset from this new fieldcache. Fieldcache is populated
> on
> > first access and keeps alive as long as the underlying index segment is
> open
> > (means as long as IndexReader is open and the parts of the index is not
> > refreshed). If you are also sorting against your fields or doing other
> > queries using FieldCache, there is no overhead, otherwise the bitset is
> > populated on first access to the filter.
> >
> > Lucene 3.5 has no easy way to implement that filter, a "NULL" pseudo
> term is
> > the only solution (and also much faster on the first access in Lucene
> 3.6).
> > Later accesses hitting the cache in 3.6 will be faster, of course.
> >
> > Another hacky way to achieve the same results is (works with almost any
> > Lucene version):
> > BooleanQuery consisting of: MatchAllDocsQuery() as MUST clause and
> > PrefixQuery(field, "") as MUST_NOT clause. But the PrefixQuery will do a
> > full term index scan without caching :-). You may use
> CachingWrapperFilter
> > with PrefixFilter instead.
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> >
> >
> >> -----Original Message-----
> >> From: Tim Eck [mailto:timeck@gmail.com]
> >> Sent: Thursday, February 16, 2012 10:14 PM
> >> To: java-user@lucene.apache.org
> >> Subject: RE: query for documents WITHOUT a field?
> >>
> >> Thanks for the fast response. I'll certainly have a look at the upcoming
> > 3.6.x
> >> release. What is the expected performance for using a negated filter?
> >> In particular does it defeat the index in any way and require a full
> index
> > scan?
> >> Is it different between regular fields and numeric fields?
> >>
> >> For 3.5 and earlier though, is there any suggestion other than magic
> > values?
> >>
> >> -----Original Message-----
> >> From: Uwe Schindler [mailto:uwe@thetaphi.de]
> >> Sent: Thursday, February 16, 2012 1:07 PM
> >> To: java-user@lucene.apache.org
> >> Subject: RE: query for documents WITHOUT a field?
> >>
> >> Lucene 3.6 will have a FieldValueFilter that can be negated:
> >>
> >> Query q = new ConstantScoreQuery(new FieldValueFilter("field", true));
> >>
> >> (see http://goo.gl/wyjxn)
> >>
> >> Lucen 3.5 does not yet have it, you can download 3.6 snapshots from
> > Jenkins:
> >> http://goo.gl/Ka0gr
> >>
> >> -----
> >> Uwe Schindler
> >> H.-H.-Meier-Allee 63, D-28213 Bremen
> >> http://www.thetaphi.de
> >> eMail: uwe@thetaphi.de
> >>
> >>
> >> > -----Original Message-----
> >> > From: Tim Eck [mailto:teck@terracottatech.com]
> >> > Sent: Thursday, February 16, 2012 9:59 PM
> >> > To: java-user@lucene.apache.org
> >> > Subject: query for documents WITHOUT a field?
> >> >
> >> > My apologies if this answer is readily available someplace, I've
> >> > searched around and not found a definitive answer.
> >> >
> >> >
> >> >
> >> > I'd like to run a query for documents that _do not_ contain particular
> >> indexed
> >> > fields to implement something like a SQL-like query where a column is
> >> null.
> >> >
> >> >
> >> >
> >> > I understand I could possibly use a magic value to represent "null",
> >> > but
> >> the data
> >> > I'm searching doesn't led itself to reserving a value for null. I also
> >> understand I
> >> > could add an extra field to hold this boolean isNull state but would
> >> > love
> >> a better
> >> > solution :-)
> >> >
> >> >
> >> >
> >> > TIA
> >> >
> >> >
> >>
> >>
> >>
> >>_____________________________________________
>
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >>_____________________________________________
>
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >_____________________________________________
>
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
> _____________________________________________
>
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--90e6ba6138d078d66104cceb5ac5--

From java-user-return-53929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Oct 26 00:29:59 2012
Return-Path: <java-user-return-53929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DFE1AD1B5
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 26 Oct 2012 00:29:59 +0000 (UTC)
Received: (qmail 21464 invoked by uid 500); 26 Oct 2012 00:29:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21413 invoked by uid 500); 26 Oct 2012 00:29:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21405 invoked by uid 99); 26 Oct 2012 00:29:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Oct 2012 00:29:57 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of SRS0=oQprO5=IX=basetechnology.com=jack@yourhostingaccount.com designates 65.254.253.120 as permitted sender)
Received: from [65.254.253.120] (HELO mailout15.yourhostingaccount.com) (65.254.253.120)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Oct 2012 00:29:52 +0000
Received: from mailscan03.yourhostingaccount.com ([10.1.15.3] helo=mailscan03.yourhostingaccount.com)
	by mailout15.yourhostingaccount.com with esmtp (Exim)
	id 1TRXnm-0007U4-W7
	for java-user@lucene.apache.org; Thu, 25 Oct 2012 20:29:31 -0400
Received: from impout01.yourhostingaccount.com ([10.1.55.1] helo=impout01.yourhostingaccount.com)
	by mailscan03.yourhostingaccount.com with esmtp (Exim)
	id 1TRXnm-0005NS-VK
	for java-user@lucene.apache.org; Thu, 25 Oct 2012 20:29:31 -0400
Received: from authsmtp12.yourhostingaccount.com ([10.1.18.12])
	by impout01.yourhostingaccount.com with NO UCE
	id FcVX1k0010FdXoS01cVXrh; Thu, 25 Oct 2012 20:29:31 -0400
X-Authority-Analysis: v=2.0 cv=IICA+3TG c=1 sm=1
 a=PHQHB1QSaEYgcU2qnZkzMw==:17 a=aQzbgH187woA:10 a=CA7Ueuzdfl0A:10
 a=3jZET7lWBKwA:10 a=8nJEP1OIZ-IA:10 a=jvYhGVW7AAAA:8 a=ySYZj2ru4SYA:10
 a=mV9VRH-2AAAA:8 a=qeREMo8yAAAA:8 a=pGLkceISAAAA:8 a=PY8hpQzXAAAA:20
 a=Q5FtWLc4AAAA:20 a=KWwAbSW5AAAA:8 a=oDYyux-twlwhp9DFCOwA:9 a=wPNLvfGTeEIA:10
 a=FERfFkWt-AwA:10 a=ktwn7wHdAaoA:10 a=mQjVnPqiBk0A:10 a=m4aRD8sWmd4A:10
 a=MSl-tDqOz04A:10 a=JG73wzPqCCMA:10 a=t1ijpx9AV50gTBtUFlM2vg==:117
X-EN-OrigOutIP: 10.1.18.12
X-EN-IMPSID: FcVX1k0010FdXoS01cVXrh
Received: from 207-237-102-116.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com ([207.237.102.116] helo=JackKrupansky)
	by authsmtp12.yourhostingaccount.com with esmtpa (Exim)
	id 1TRXnm-0005CH-Sg
	for java-user@lucene.apache.org; Thu, 25 Oct 2012 20:29:30 -0400
Message-ID: <3B5752E59A174ADBA2F805E22FA0110F@JackKrupansky>
From: "Jack Krupansky" <jack@basetechnology.com>
To: <java-user@lucene.apache.org>
References: <0c065427.000006a4.0000001c@kermit><00bc01ccecee$e47c6170$ad752450$@thetaphi.de><021601ccecef$ddb5a670$9920f350$@com><00bd01ccecf3$c51a6070$4f4f2150$@thetaphi.de><CAL3VrCd3-dVmy1d9C1tT-=rSfvFkuxNw6DeZiw3by+FvvfBOYg@mail.gmail.com><6fcd8b3f-31ef-40d1-98bd-ecf34ba10e1e@email.android.com> <CALr4Hzpt1uUAViJBs7N_Oqsf1wo8ikCB+-Y1=D1Xok7R4Ue95A@mail.gmail.com>
In-Reply-To: <CALr4Hzpt1uUAViJBs7N_Oqsf1wo8ikCB+-Y1=D1Xok7R4Ue95A@mail.gmail.com>
Subject: Re: query for documents WITHOUT a field?
Date: Thu, 25 Oct 2012 20:29:27 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3555.308
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3555.308
X-EN-UserInfo: e0a4b55451ed9f27313ebf02e3d4348d:fc4a93e1349e680c52bdd723c0ab3ef6
X-EN-AuthUser: jack@basetechnology.com
Sender:  "Jack Krupansky" <jack@basetechnology.com>
X-EN-OrigIP: 207.237.102.116
X-EN-OrigHost: 207-237-102-116.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com
X-Virus-Checked: Checked by ClamAV on apache.org

"OR allergies IS NULL" would be "OR (*:* -allergies:[* TO *])" in 
Lucene/Solr.

-- Jack Krupansky

-----Original Message----- 
From: Vitaly Funstein
Sent: Thursday, October 25, 2012 8:25 PM
To: java-user@lucene.apache.org
Subject: Re: query for documents WITHOUT a field?

Sorry for resurrecting an old thread, but how would one go about writing a
Lucene query similar to this?

SELECT * FROM patient WHERE first_name = 'Zed' OR allergies IS NULL

An AND case would be easy since one would just use a simple TermQuery with
a FieldValueFilter added, but what about other boolean cases? Admittedly,
this is a contrived example, but the point here is that it seems that since
filters are always applied to results after they are returned, how would
one go about making the null-ness of a field part of the query logic?

On Thu, Feb 16, 2012 at 1:45 PM, Uwe Schindler <uwe@thetaphi.de> wrote:

> I already mentioned that pseudo NULL term, but the user asked for another
> solution...
> --
> Uwe Schindler
> H.-H.-Meier-Allee 63, 28213 Bremen
> http://www.thetaphi.de
>
>
>
> Jamie Johnson <jej2003@gmail.com> schrieb:
>
> Another possible solution is while indexing insert a custom token
> which is impossible to show up in the index otherwise, then do the
> filter based on that token.
>
>
> On Thu, Feb 16, 2012 at 4:41 PM, Uwe Schindler <uwe@thetaphi.de> wrote:
> > As the documentation states:
> > Lucene is an inverted index that does not have per-document fields. It
> only
> > knows terms pointing to documents. The query you are searching is a 
> > query
> > that returns all documents which have no term. To execute this query, it
> > will get the term index and iterate all terms of a field, mark those in 
> > a
> > bitset and negates that. The filter/query I told you uses the FieldCache
> to
> > do this. Since 3.6 (also in 3.5, but there it is buggy/API different)
> there
> > is another fieldcache that returns exactly that bitset. The filter
> mentioned
> > only uses that bitset from this new fieldcache. Fieldcache is populated
> on
> > first access and keeps alive as long as the underlying index segment is
> open
> > (means as long as IndexReader is open and the parts of the index is not
> > refreshed). If you are also sorting against your fields or doing other
> > queries using FieldCache, there is no overhead, otherwise the bitset is
> > populated on first access to the filter.
> >
> > Lucene 3.5 has no easy way to implement that filter, a "NULL" pseudo
> term is
> > the only solution (and also much faster on the first access in Lucene
> 3.6).
> > Later accesses hitting the cache in 3.6 will be faster, of course.
> >
> > Another hacky way to achieve the same results is (works with almost any
> > Lucene version):
> > BooleanQuery consisting of: MatchAllDocsQuery() as MUST clause and
> > PrefixQuery(field, "") as MUST_NOT clause. But the PrefixQuery will do a
> > full term index scan without caching :-). You may use
> CachingWrapperFilter
> > with PrefixFilter instead.
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> >
> >
> >> -----Original Message-----
> >> From: Tim Eck [mailto:timeck@gmail.com]
> >> Sent: Thursday, February 16, 2012 10:14 PM
> >> To: java-user@lucene.apache.org
> >> Subject: RE: query for documents WITHOUT a field?
> >>
> >> Thanks for the fast response. I'll certainly have a look at the 
> >> upcoming
> > 3.6.x
> >> release. What is the expected performance for using a negated filter?
> >> In particular does it defeat the index in any way and require a full
> index
> > scan?
> >> Is it different between regular fields and numeric fields?
> >>
> >> For 3.5 and earlier though, is there any suggestion other than magic
> > values?
> >>
> >> -----Original Message-----
> >> From: Uwe Schindler [mailto:uwe@thetaphi.de]
> >> Sent: Thursday, February 16, 2012 1:07 PM
> >> To: java-user@lucene.apache.org
> >> Subject: RE: query for documents WITHOUT a field?
> >>
> >> Lucene 3.6 will have a FieldValueFilter that can be negated:
> >>
> >> Query q = new ConstantScoreQuery(new FieldValueFilter("field", true));
> >>
> >> (see http://goo.gl/wyjxn)
> >>
> >> Lucen 3.5 does not yet have it, you can download 3.6 snapshots from
> > Jenkins:
> >> http://goo.gl/Ka0gr
> >>
> >> -----
> >> Uwe Schindler
> >> H.-H.-Meier-Allee 63, D-28213 Bremen
> >> http://www.thetaphi.de
> >> eMail: uwe@thetaphi.de
> >>
> >>
> >> > -----Original Message-----
> >> > From: Tim Eck [mailto:teck@terracottatech.com]
> >> > Sent: Thursday, February 16, 2012 9:59 PM
> >> > To: java-user@lucene.apache.org
> >> > Subject: query for documents WITHOUT a field?
> >> >
> >> > My apologies if this answer is readily available someplace, I've
> >> > searched around and not found a definitive answer.
> >> >
> >> >
> >> >
> >> > I'd like to run a query for documents that _do not_ contain 
> >> > particular
> >> indexed
> >> > fields to implement something like a SQL-like query where a column is
> >> null.
> >> >
> >> >
> >> >
> >> > I understand I could possibly use a magic value to represent "null",
> >> > but
> >> the data
> >> > I'm searching doesn't led itself to reserving a value for null. I 
> >> > also
> >> understand I
> >> > could add an extra field to hold this boolean isNull state but would
> >> > love
> >> a better
> >> > solution :-)
> >> >
> >> >
> >> >
> >> > TIA
> >> >
> >> >
> >>
> >>
> >>
> >>_____________________________________________
>
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >>_____________________________________________
>
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >_____________________________________________
>
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
> _____________________________________________
>
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Oct 26 00:55:53 2012
Return-Path: <java-user-return-53930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EC6A0D24B
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 26 Oct 2012 00:55:53 +0000 (UTC)
Received: (qmail 73898 invoked by uid 500); 26 Oct 2012 00:55:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73825 invoked by uid 500); 26 Oct 2012 00:55:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73817 invoked by uid 99); 26 Oct 2012 00:55:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Oct 2012 00:55:51 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vfunstein@gmail.com designates 209.85.223.176 as permitted sender)
Received: from [209.85.223.176] (HELO mail-ie0-f176.google.com) (209.85.223.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Oct 2012 00:55:47 +0000
Received: by mail-ie0-f176.google.com with SMTP id k11so3600177iea.35
        for <java-user@lucene.apache.org>; Thu, 25 Oct 2012 17:55:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=Nz1NWZEAPejwL0cwvQUJmLQrZwdj6ZjD6X4/v5yzghg=;
        b=iVhQ/seYBmdtM9f5EueBHU8ywg1EqmKtYoFBIJmw2LM4sO0aklbgI5yW6woeCiQIkT
         jX6QLq5Hg6qNpQn0UJeCGXtr1Jx9AKKAtIRSdGlRfrY342Bzl/joBXIMrf+a5l1/D0Ld
         gROOFihurtn6wqnyasIg9kN8Ull+R3OGRt5/sPrxDv/3zTVc0Aaxg06OA/Ff2tMndEWL
         jDd+sFh76OeFsO7qyZYEPibknuHq2rZ4B+Sv+TsQBV90/2vS8xvoHppnoT2gYHQ5mLgc
         4MdR11qDAlmvNQFAEUc1nZNL7RL5hi1d9bMoI7BHN3W7ZV9a8gQsfqcURYrf++gKuk5Q
         OZfA==
MIME-Version: 1.0
Received: by 10.50.149.163 with SMTP id ub3mr420622igb.67.1351212927095; Thu,
 25 Oct 2012 17:55:27 -0700 (PDT)
Received: by 10.64.136.169 with HTTP; Thu, 25 Oct 2012 17:55:27 -0700 (PDT)
In-Reply-To: <3B5752E59A174ADBA2F805E22FA0110F@JackKrupansky>
References: <0c065427.000006a4.0000001c@kermit>
	<00bc01ccecee$e47c6170$ad752450$@thetaphi.de>
	<021601ccecef$ddb5a670$9920f350$@com>
	<00bd01ccecf3$c51a6070$4f4f2150$@thetaphi.de>
	<CAL3VrCd3-dVmy1d9C1tT-=rSfvFkuxNw6DeZiw3by+FvvfBOYg@mail.gmail.com>
	<6fcd8b3f-31ef-40d1-98bd-ecf34ba10e1e@email.android.com>
	<CALr4Hzpt1uUAViJBs7N_Oqsf1wo8ikCB+-Y1=D1Xok7R4Ue95A@mail.gmail.com>
	<3B5752E59A174ADBA2F805E22FA0110F@JackKrupansky>
Date: Thu, 25 Oct 2012 17:55:27 -0700
Message-ID: <CALr4Hzq9P9PFe+Tk6WGQ7Vmqcw1ABRgNHBkwWz_VBe+o1HNPDQ@mail.gmail.com>
Subject: Re: query for documents WITHOUT a field?
From: Vitaly Funstein <vfunstein@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=e89a8f3ba31989130404ccebc6d5
X-Virus-Checked: Checked by ClamAV on apache.org

--e89a8f3ba31989130404ccebc6d5
Content-Type: text/plain; charset=ISO-8859-1

This is the QueryParser syntax, right? So an API equivalent for the not
null case would be something like this?

BooleanQuery q = new BooleanQuery();
q.add(new BooleanClause(new TermQuery(new Term("first_name", "Zed")),
Occur.SHOULD));
q.add(new BooleanClause(new TermRangeQuery("allergies", null, null, true,
true), Occur.SHOULD));

Whereas, for "IS NULL" the TermRangeQuery above would need to be wrapped in
another BooleanClause with Occur.MUST_NOT?

On Thu, Oct 25, 2012 at 5:29 PM, Jack Krupansky <jack@basetechnology.com>wrote:

> "OR allergies IS NULL" would be "OR (*:* -allergies:[* TO *])" in
> Lucene/Solr.
>
> -- Jack Krupansky
>
> -----Original Message----- From: Vitaly Funstein
> Sent: Thursday, October 25, 2012 8:25 PM
> To: java-user@lucene.apache.org
> Subject: Re: query for documents WITHOUT a field?
>
>
> Sorry for resurrecting an old thread, but how would one go about writing a
> Lucene query similar to this?
>
> SELECT * FROM patient WHERE first_name = 'Zed' OR allergies IS NULL
>
> An AND case would be easy since one would just use a simple TermQuery with
> a FieldValueFilter added, but what about other boolean cases? Admittedly,
> this is a contrived example, but the point here is that it seems that since
> filters are always applied to results after they are returned, how would
> one go about making the null-ness of a field part of the query logic?
>
> On Thu, Feb 16, 2012 at 1:45 PM, Uwe Schindler <uwe@thetaphi.de> wrote:
>
>  I already mentioned that pseudo NULL term, but the user asked for another
>> solution...
>> --
>> Uwe Schindler
>> H.-H.-Meier-Allee 63, 28213 Bremen
>> http://www.thetaphi.de
>>
>>
>>
>> Jamie Johnson <jej2003@gmail.com> schrieb:
>>
>> Another possible solution is while indexing insert a custom token
>> which is impossible to show up in the index otherwise, then do the
>> filter based on that token.
>>
>>
>> On Thu, Feb 16, 2012 at 4:41 PM, Uwe Schindler <uwe@thetaphi.de> wrote:
>> > As the documentation states:
>> > Lucene is an inverted index that does not have per-document fields. It
>> only
>> > knows terms pointing to documents. The query you are searching is a >
>> query
>> > that returns all documents which have no term. To execute this query, it
>> > will get the term index and iterate all terms of a field, mark those in
>> > a
>> > bitset and negates that. The filter/query I told you uses the FieldCache
>> to
>> > do this. Since 3.6 (also in 3.5, but there it is buggy/API different)
>> there
>> > is another fieldcache that returns exactly that bitset. The filter
>> mentioned
>> > only uses that bitset from this new fieldcache. Fieldcache is populated
>> on
>> > first access and keeps alive as long as the underlying index segment is
>> open
>> > (means as long as IndexReader is open and the parts of the index is not
>> > refreshed). If you are also sorting against your fields or doing other
>> > queries using FieldCache, there is no overhead, otherwise the bitset is
>> > populated on first access to the filter.
>> >
>> > Lucene 3.5 has no easy way to implement that filter, a "NULL" pseudo
>> term is
>> > the only solution (and also much faster on the first access in Lucene
>> 3.6).
>> > Later accesses hitting the cache in 3.6 will be faster, of course.
>> >
>> > Another hacky way to achieve the same results is (works with almost any
>> > Lucene version):
>> > BooleanQuery consisting of: MatchAllDocsQuery() as MUST clause and
>> > PrefixQuery(field, "") as MUST_NOT clause. But the PrefixQuery will do a
>> > full term index scan without caching :-). You may use
>> CachingWrapperFilter
>> > with PrefixFilter instead.
>> >
>> > -----
>> > Uwe Schindler
>> > H.-H.-Meier-Allee 63, D-28213 Bremen
>> > http://www.thetaphi.de
>> > eMail: uwe@thetaphi.de
>> >
>> >
>> >> -----Original Message-----
>> >> From: Tim Eck [mailto:timeck@gmail.com]
>> >> Sent: Thursday, February 16, 2012 10:14 PM
>> >> To: java-user@lucene.apache.org
>> >> Subject: RE: query for documents WITHOUT a field?
>> >>
>> >> Thanks for the fast response. I'll certainly have a look at the >>
>> upcoming
>> > 3.6.x
>> >> release. What is the expected performance for using a negated filter?
>> >> In particular does it defeat the index in any way and require a full
>> index
>> > scan?
>> >> Is it different between regular fields and numeric fields?
>> >>
>> >> For 3.5 and earlier though, is there any suggestion other than magic
>> > values?
>> >>
>> >> -----Original Message-----
>> >> From: Uwe Schindler [mailto:uwe@thetaphi.de]
>> >> Sent: Thursday, February 16, 2012 1:07 PM
>> >> To: java-user@lucene.apache.org
>> >> Subject: RE: query for documents WITHOUT a field?
>> >>
>> >> Lucene 3.6 will have a FieldValueFilter that can be negated:
>> >>
>> >> Query q = new ConstantScoreQuery(new FieldValueFilter("field", true));
>> >>
>> >> (see http://goo.gl/wyjxn)
>> >>
>> >> Lucen 3.5 does not yet have it, you can download 3.6 snapshots from
>> > Jenkins:
>> >> http://goo.gl/Ka0gr
>> >>
>> >> -----
>> >> Uwe Schindler
>> >> H.-H.-Meier-Allee 63, D-28213 Bremen
>> >> http://www.thetaphi.de
>> >> eMail: uwe@thetaphi.de
>> >>
>> >>
>> >> > -----Original Message-----
>> >> > From: Tim Eck [mailto:teck@terracottatech.**com<teck@terracottatech.com>
>> ]
>> >> > Sent: Thursday, February 16, 2012 9:59 PM
>> >> > To: java-user@lucene.apache.org
>> >> > Subject: query for documents WITHOUT a field?
>> >> >
>> >> > My apologies if this answer is readily available someplace, I've
>> >> > searched around and not found a definitive answer.
>> >> >
>> >> >
>> >> >
>> >> > I'd like to run a query for documents that _do not_ contain >> >
>> particular
>> >> indexed
>> >> > fields to implement something like a SQL-like query where a column is
>> >> null.
>> >> >
>> >> >
>> >> >
>> >> > I understand I could possibly use a magic value to represent "null",
>> >> > but
>> >> the data
>> >> > I'm searching doesn't led itself to reserving a value for null. I >>
>> > also
>> >> understand I
>> >> > could add an extra field to hold this boolean isNull state but would
>> >> > love
>> >> a better
>> >> > solution :-)
>> >> >
>> >> >
>> >> >
>> >> > TIA
>> >> >
>> >> >
>> >>
>> >>
>> >>
>> >>____________________________**_________________
>>
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.**apache.org<java-user-unsubscribe@lucene.apache.org>
>> >> For additional commands, e-mail: java-user-help@lucene.apache.**org<java-user-help@lucene.apache.org>
>> >>
>> >>
>> >>
>> >>____________________________**_________________
>>
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.**apache.org<java-user-unsubscribe@lucene.apache.org>
>> >> For additional commands, e-mail: java-user-help@lucene.apache.**org<java-user-help@lucene.apache.org>
>> >
>> >
>> >_____________________________**________________
>>
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.**apache.org<java-user-unsubscribe@lucene.apache.org>
>> > For additional commands, e-mail: java-user-help@lucene.apache.**org<java-user-help@lucene.apache.org>
>> >
>>
>> ______________________________**_______________
>>
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.**apache.org<java-user-unsubscribe@lucene.apache.org>
>> For additional commands, e-mail: java-user-help@lucene.apache.**org<java-user-help@lucene.apache.org>
>>
>>
>>
>
> ------------------------------**------------------------------**---------
>
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.**apache.org<java-user-unsubscribe@lucene.apache.org>
> For additional commands, e-mail: java-user-help@lucene.apache.**org<java-user-help@lucene.apache.org>
>
>

--e89a8f3ba31989130404ccebc6d5--

From java-user-return-53931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Oct 26 01:18:39 2012
Return-Path: <java-user-return-53931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B0A35D2F2
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 26 Oct 2012 01:18:39 +0000 (UTC)
Received: (qmail 36365 invoked by uid 500); 26 Oct 2012 01:18:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36315 invoked by uid 500); 26 Oct 2012 01:18:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36307 invoked by uid 99); 26 Oct 2012 01:18:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Oct 2012 01:18:37 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of SRS0=oQprO5=IX=basetechnology.com=jack@yourhostingaccount.com designates 65.254.253.141 as permitted sender)
Received: from [65.254.253.141] (HELO mailout17.yourhostingaccount.com) (65.254.253.141)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Oct 2012 01:18:30 +0000
Received: from mailscan20.yourhostingaccount.com ([10.1.15.20] helo=mailscan20.yourhostingaccount.com)
	by mailout17.yourhostingaccount.com with esmtp (Exim)
	id 1TRYYr-0007Su-Hm
	for java-user@lucene.apache.org; Thu, 25 Oct 2012 21:18:09 -0400
Received: from impout02.yourhostingaccount.com ([10.1.55.2] helo=impout02.yourhostingaccount.com)
	by mailscan20.yourhostingaccount.com with esmtp (Exim)
	id 1TRYYr-0002Dq-FS
	for java-user@lucene.apache.org; Thu, 25 Oct 2012 21:18:09 -0400
Received: from authsmtp16.yourhostingaccount.com ([10.1.18.16])
	by impout02.yourhostingaccount.com with NO UCE
	id FdJ91k0050LoD9W01dJ93A; Thu, 25 Oct 2012 21:18:09 -0400
X-Authority-Analysis: v=2.0 cv=HIVB5/Rv c=1 sm=1
 a=PHQHB1QSaEYgcU2qnZkzMw==:17 a=aQzbgH187woA:10 a=CA7Ueuzdfl0A:10
 a=3jZET7lWBKwA:10 a=8nJEP1OIZ-IA:10 a=jvYhGVW7AAAA:8 a=ySYZj2ru4SYA:10
 a=mV9VRH-2AAAA:8 a=qeREMo8yAAAA:8 a=pGLkceISAAAA:8 a=PY8hpQzXAAAA:20
 a=Q5FtWLc4AAAA:20 a=KWwAbSW5AAAA:8 a=h7BHmRTBECPYJCJqSdAA:9 a=wPNLvfGTeEIA:10
 a=FERfFkWt-AwA:10 a=ktwn7wHdAaoA:10 a=mQjVnPqiBk0A:10 a=EMlJoiak7gQA:10
 a=m4aRD8sWmd4A:10 a=MSl-tDqOz04A:10 a=JG73wzPqCCMA:10 a=88iI8knYSJUA:10
 a=ltXMujfcukYoTVgNOHxvog==:117
X-EN-OrigOutIP: 10.1.18.16
X-EN-IMPSID: FdJ91k0050LoD9W01dJ93A
Received: from 207-237-102-116.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com ([207.237.102.116] helo=JackKrupansky)
	by authsmtp16.yourhostingaccount.com with esmtpa (Exim)
	id 1TRYYr-0004u3-7T
	for java-user@lucene.apache.org; Thu, 25 Oct 2012 21:18:09 -0400
Message-ID: <C1B91EF6707F44E8AA917C100C04F333@JackKrupansky>
From: "Jack Krupansky" <jack@basetechnology.com>
To: <java-user@lucene.apache.org>
References: <0c065427.000006a4.0000001c@kermit><00bc01ccecee$e47c6170$ad752450$@thetaphi.de><021601ccecef$ddb5a670$9920f350$@com><00bd01ccecf3$c51a6070$4f4f2150$@thetaphi.de><CAL3VrCd3-dVmy1d9C1tT-=rSfvFkuxNw6DeZiw3by+FvvfBOYg@mail.gmail.com><6fcd8b3f-31ef-40d1-98bd-ecf34ba10e1e@email.android.com><CALr4Hzpt1uUAViJBs7N_Oqsf1wo8ikCB+-Y1=D1Xok7R4Ue95A@mail.gmail.com><3B5752E59A174ADBA2F805E22FA0110F@JackKrupansky> <CALr4Hzq9P9PFe+Tk6WGQ7Vmqcw1ABRgNHBkwWz_VBe+o1HNPDQ@mail.gmail.com>
In-Reply-To: <CALr4Hzq9P9PFe+Tk6WGQ7Vmqcw1ABRgNHBkwWz_VBe+o1HNPDQ@mail.gmail.com>
Subject: Re: query for documents WITHOUT a field?
Date: Thu, 25 Oct 2012 21:18:05 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3555.308
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3555.308
X-EN-UserInfo: e0a4b55451ed9f27313ebf02e3d4348d:fc4a93e1349e680c52bdd723c0ab3ef6
X-EN-AuthUser: jack@basetechnology.com
Sender:  "Jack Krupansky" <jack@basetechnology.com>
X-EN-OrigIP: 207.237.102.116
X-EN-OrigHost: 207-237-102-116.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com
X-Virus-Checked: Checked by ClamAV on apache.org

Right another level of BooleanQuery that is a SHOULD clause, with TWO terms: 
a MUST of MatchAllDocsQuery and a MUST_NOT of the TermRangeQuery for 
"allergies" with null for both start and end.

Actually, there is a new filter that you can use to detect empty fields down 
at that level. See
https://issues.apache.org/jira/browse/LUCENE-4386

I think it is:

new ConstantScoreQuery(new FieldValueFilter(fieldname, false))

Use a SHOULD of that rather than a second level of BooleanQuery. Let us know 
if it actually works!

-- Jack Krupansky

-----Original Message----- 
From: Vitaly Funstein
Sent: Thursday, October 25, 2012 8:55 PM
To: java-user@lucene.apache.org
Subject: Re: query for documents WITHOUT a field?

This is the QueryParser syntax, right? So an API equivalent for the not
null case would be something like this?

BooleanQuery q = new BooleanQuery();
q.add(new BooleanClause(new TermQuery(new Term("first_name", "Zed")),
Occur.SHOULD));
q.add(new BooleanClause(new TermRangeQuery("allergies", null, null, true,
true), Occur.SHOULD));

Whereas, for "IS NULL" the TermRangeQuery above would need to be wrapped in
another BooleanClause with Occur.MUST_NOT?

On Thu, Oct 25, 2012 at 5:29 PM, Jack Krupansky 
<jack@basetechnology.com>wrote:

> "OR allergies IS NULL" would be "OR (*:* -allergies:[* TO *])" in
> Lucene/Solr.
>
> -- Jack Krupansky
>
> -----Original Message----- From: Vitaly Funstein
> Sent: Thursday, October 25, 2012 8:25 PM
> To: java-user@lucene.apache.org
> Subject: Re: query for documents WITHOUT a field?
>
>
> Sorry for resurrecting an old thread, but how would one go about writing a
> Lucene query similar to this?
>
> SELECT * FROM patient WHERE first_name = 'Zed' OR allergies IS NULL
>
> An AND case would be easy since one would just use a simple TermQuery with
> a FieldValueFilter added, but what about other boolean cases? Admittedly,
> this is a contrived example, but the point here is that it seems that 
> since
> filters are always applied to results after they are returned, how would
> one go about making the null-ness of a field part of the query logic?
>
> On Thu, Feb 16, 2012 at 1:45 PM, Uwe Schindler <uwe@thetaphi.de> wrote:
>
>  I already mentioned that pseudo NULL term, but the user asked for another
>> solution...
>> --
>> Uwe Schindler
>> H.-H.-Meier-Allee 63, 28213 Bremen
>> http://www.thetaphi.de
>>
>>
>>
>> Jamie Johnson <jej2003@gmail.com> schrieb:
>>
>> Another possible solution is while indexing insert a custom token
>> which is impossible to show up in the index otherwise, then do the
>> filter based on that token.
>>
>>
>> On Thu, Feb 16, 2012 at 4:41 PM, Uwe Schindler <uwe@thetaphi.de> wrote:
>> > As the documentation states:
>> > Lucene is an inverted index that does not have per-document fields. It
>> only
>> > knows terms pointing to documents. The query you are searching is a >
>> query
>> > that returns all documents which have no term. To execute this query, 
>> > it
>> > will get the term index and iterate all terms of a field, mark those in
>> > a
>> > bitset and negates that. The filter/query I told you uses the 
>> > FieldCache
>> to
>> > do this. Since 3.6 (also in 3.5, but there it is buggy/API different)
>> there
>> > is another fieldcache that returns exactly that bitset. The filter
>> mentioned
>> > only uses that bitset from this new fieldcache. Fieldcache is populated
>> on
>> > first access and keeps alive as long as the underlying index segment is
>> open
>> > (means as long as IndexReader is open and the parts of the index is not
>> > refreshed). If you are also sorting against your fields or doing other
>> > queries using FieldCache, there is no overhead, otherwise the bitset is
>> > populated on first access to the filter.
>> >
>> > Lucene 3.5 has no easy way to implement that filter, a "NULL" pseudo
>> term is
>> > the only solution (and also much faster on the first access in Lucene
>> 3.6).
>> > Later accesses hitting the cache in 3.6 will be faster, of course.
>> >
>> > Another hacky way to achieve the same results is (works with almost any
>> > Lucene version):
>> > BooleanQuery consisting of: MatchAllDocsQuery() as MUST clause and
>> > PrefixQuery(field, "") as MUST_NOT clause. But the PrefixQuery will do 
>> > a
>> > full term index scan without caching :-). You may use
>> CachingWrapperFilter
>> > with PrefixFilter instead.
>> >
>> > -----
>> > Uwe Schindler
>> > H.-H.-Meier-Allee 63, D-28213 Bremen
>> > http://www.thetaphi.de
>> > eMail: uwe@thetaphi.de
>> >
>> >
>> >> -----Original Message-----
>> >> From: Tim Eck [mailto:timeck@gmail.com]
>> >> Sent: Thursday, February 16, 2012 10:14 PM
>> >> To: java-user@lucene.apache.org
>> >> Subject: RE: query for documents WITHOUT a field?
>> >>
>> >> Thanks for the fast response. I'll certainly have a look at the >>
>> upcoming
>> > 3.6.x
>> >> release. What is the expected performance for using a negated filter?
>> >> In particular does it defeat the index in any way and require a full
>> index
>> > scan?
>> >> Is it different between regular fields and numeric fields?
>> >>
>> >> For 3.5 and earlier though, is there any suggestion other than magic
>> > values?
>> >>
>> >> -----Original Message-----
>> >> From: Uwe Schindler [mailto:uwe@thetaphi.de]
>> >> Sent: Thursday, February 16, 2012 1:07 PM
>> >> To: java-user@lucene.apache.org
>> >> Subject: RE: query for documents WITHOUT a field?
>> >>
>> >> Lucene 3.6 will have a FieldValueFilter that can be negated:
>> >>
>> >> Query q = new ConstantScoreQuery(new FieldValueFilter("field", true));
>> >>
>> >> (see http://goo.gl/wyjxn)
>> >>
>> >> Lucen 3.5 does not yet have it, you can download 3.6 snapshots from
>> > Jenkins:
>> >> http://goo.gl/Ka0gr
>> >>
>> >> -----
>> >> Uwe Schindler
>> >> H.-H.-Meier-Allee 63, D-28213 Bremen
>> >> http://www.thetaphi.de
>> >> eMail: uwe@thetaphi.de
>> >>
>> >>
>> >> > -----Original Message-----
>> >> > From: Tim Eck 
>> >> > [mailto:teck@terracottatech.**com<teck@terracottatech.com>
>> ]
>> >> > Sent: Thursday, February 16, 2012 9:59 PM
>> >> > To: java-user@lucene.apache.org
>> >> > Subject: query for documents WITHOUT a field?
>> >> >
>> >> > My apologies if this answer is readily available someplace, I've
>> >> > searched around and not found a definitive answer.
>> >> >
>> >> >
>> >> >
>> >> > I'd like to run a query for documents that _do not_ contain >> >
>> particular
>> >> indexed
>> >> > fields to implement something like a SQL-like query where a column 
>> >> > is
>> >> null.
>> >> >
>> >> >
>> >> >
>> >> > I understand I could possibly use a magic value to represent "null",
>> >> > but
>> >> the data
>> >> > I'm searching doesn't led itself to reserving a value for null. I >>
>> > also
>> >> understand I
>> >> > could add an extra field to hold this boolean isNull state but would
>> >> > love
>> >> a better
>> >> > solution :-)
>> >> >
>> >> >
>> >> >
>> >> > TIA
>> >> >
>> >> >
>> >>
>> >>
>> >>
>> >>____________________________**_________________
>>
>> >> To unsubscribe, e-mail: 
>> >> java-user-unsubscribe@lucene.**apache.org<java-user-unsubscribe@lucene.apache.org>
>> >> For additional commands, e-mail: 
>> >> java-user-help@lucene.apache.**org<java-user-help@lucene.apache.org>
>> >>
>> >>
>> >>
>> >>____________________________**_________________
>>
>> >> To unsubscribe, e-mail: 
>> >> java-user-unsubscribe@lucene.**apache.org<java-user-unsubscribe@lucene.apache.org>
>> >> For additional commands, e-mail: 
>> >> java-user-help@lucene.apache.**org<java-user-help@lucene.apache.org>
>> >
>> >
>> >_____________________________**________________
>>
>> > To unsubscribe, e-mail: 
>> > java-user-unsubscribe@lucene.**apache.org<java-user-unsubscribe@lucene.apache.org>
>> > For additional commands, e-mail: 
>> > java-user-help@lucene.apache.**org<java-user-help@lucene.apache.org>
>> >
>>
>> ______________________________**_______________
>>
>> To unsubscribe, e-mail: 
>> java-user-unsubscribe@lucene.**apache.org<java-user-unsubscribe@lucene.apache.org>
>> For additional commands, e-mail: 
>> java-user-help@lucene.apache.**org<java-user-help@lucene.apache.org>
>>
>>
>>
>
> ------------------------------**------------------------------**---------
>
> To unsubscribe, e-mail: 
> java-user-unsubscribe@lucene.**apache.org<java-user-unsubscribe@lucene.apache.org>
> For additional commands, e-mail: 
> java-user-help@lucene.apache.**org<java-user-help@lucene.apache.org>
>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Oct 26 09:30:20 2012
Return-Path: <java-user-return-53932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C5F72DBD4
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 26 Oct 2012 09:30:20 +0000 (UTC)
Received: (qmail 60661 invoked by uid 500); 26 Oct 2012 09:30:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60511 invoked by uid 500); 26 Oct 2012 09:30:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60482 invoked by uid 99); 26 Oct 2012 09:30:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Oct 2012 09:30:17 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [77.238.189.67] (HELO nm14.bullet.mail.ird.yahoo.com) (77.238.189.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Oct 2012 09:30:07 +0000
Received: from [212.82.105.246] by nm14.bullet.mail.ird.yahoo.com with NNFMP; 26 Oct 2012 09:29:44 -0000
Received: from [212.82.108.242] by tm18.bullet.mail.ird.yahoo.com with NNFMP; 26 Oct 2012 09:29:44 -0000
Received: from [127.0.0.1] by omp1007.mail.ird.yahoo.com with NNFMP; 26 Oct 2012 09:29:44 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 797161.73392.bm@omp1007.mail.ird.yahoo.com
Received: (qmail 94509 invoked by uid 60001); 26 Oct 2012 09:29:44 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1351243784; bh=YPv8Wmll8pvKhrAXWxxoDD0BEspXaYtAywmsDt8mYtQ=; h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=0oeBCi+oR+M/Vup/aOsLxhtmzF+m6ZOY6D02FQWrhRKWNSOvboUqpLw5GxIg0EzG2pF79LRBO0uKisVUtaOskKm4PoM0LVzrXxjIhrhvPhuImI/5ZS9mKuSrT81uh+mQta2JL2byBl8VQbzR+yTC1422WFW/hdbNlG9M2ZENTh8=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=RWVgvCSd5i9V1Pka3OMmXMUTYIKxNl8oL/NXvXtiBxnqOtLLsfIsTQ5/8AMlt6qIwnWpny+U03SrtzFKh2gPmoyxmRmo5khJIIAsEO5GpmJK6SIuZVAhDRsKQI58Mi00wuWyZ+xhmRchw9HGpuvO7wDbltsqS8S+oFsUTQuSfqM=;
X-YMail-OSG: n2as3cwVM1nPG0PeEMjgFsfD4tUCQWwRpH2kXv1HEB28z4E
 lRrBm31tB.EI2QgZynj2Oc4gjg8Rz4rbt3IhSqkvMZAKhtmQgDYAd.1EAhCl
 V4rahHA28wVGyOLvQuod4MoUXSKCvfXCGQ7kUX0JyGM0iydr3WEUhm.X1Czi
 LQWpNtTTLgw0WLIp04G2PNy9NomSKaQqAY5fvpigv08X7eXe0rxfI8Oxap98
 vrnrabgTAc9FaMK6ZRncM3YhUa4kkbcL6YpDT1tQJSBCRBYFMaNuTYQyAzlK
 dtVEpCWXI_dk2b8KI0DpNnArTcaW8LHECN2F1U43Wk3KlQnQ.YuRlN1HoIC9
 pNg_GWmHr80fyKriCzGEKtFC2Dvj43jXn46zZ5cH_Masll041eidI4FgnKOH
 kB.xmd8Rj0xfpgHJJTZ6E
Received: from [193.62.194.244] by web29402.mail.ird.yahoo.com via HTTP; Fri, 26 Oct 2012 10:29:43 BST
X-Rocket-MIMEInfo: 001.001,aGkgaWFuCgp5ZXMsIGkgcmVhZCB0aGlzLgppIG9ubHkgd29uZGVyLCBpZiB0aGVyZSBhcmUgbWF5YmUgbmV3IHRob3VnaHRzIG9ywqBwb3NzaWJpbGl0aWVzwqBhdmFpbGFibGUgc2luY2UgSmFudWFyeSAyMDA4IDstKQoKdGhhbmsgeW91IGZvciB5b3VyIGVtYWlsIDogKQoKY2hlZXJzCsKgIMKgd2lsbGkKCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwogVm9uOiBJYW4gTGVhIDxpYW4ubGVhQGdtYWlsLmNvbT4KQW46IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZzsgV2lsbGkgSGFhc2UgPHcBMAEBAQE-
X-Mailer: YahooMailWebService/0.8.123.450
References: <1351171597.74173.YahooMailNeo@web29404.mail.ird.yahoo.com> <CAEY5pxV7dGao2-Fb1DVAenqtH4o4tYDXDsSHNYCtnjKpOG3UXg@mail.gmail.com>
Message-ID: <1351243783.94498.YahooMailNeo@web29402.mail.ird.yahoo.com>
Date: Fri, 26 Oct 2012 10:29:43 +0100 (BST)
From: Willi Haase <willi_haase@yahoo.com>
Reply-To: Willi Haase <willi_haase@yahoo.com>
Subject: Re: How to use/create an alias to a field?
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <CAEY5pxV7dGao2-Fb1DVAenqtH4o4tYDXDsSHNYCtnjKpOG3UXg@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="921974003-2133070033-1351243783=:94498"
X-Virus-Checked: Checked by ClamAV on apache.org

--921974003-2133070033-1351243783=:94498
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

hi ian=0A=0Ayes, i read this.=0Ai only wonder, if there are maybe new thoug=
hts or=A0possibilities=A0available since January 2008 ;-)=0A=0Athank you fo=
r your email : )=0A=0Acheers=0A=A0 =A0willi=0A=0A=0A_______________________=
_________=0A Von: Ian Lea <ian.lea@gmail.com>=0AAn: java-user@lucene.apache=
.org; Willi Haase <willi_haase@yahoo.com> =0AGesendet: 14:50 Donnerstag, 25=
.Oktober 2012=0ABetreff: Re: How to use/create an alias to a field?=0A =0AD=
id you also find the response to that question?=0Ahttp://mail-archives.apac=
he.org/mod_mbox/lucene-java-user/200801.mbox/%3C81162.81463.qm@web50303.mai=
l.re2.yahoo.com%3E=0A=0AHard to think of any other ways than those mentione=
d there.=0A=0A=0A--=0AIan.=0A=0A=0AOn Thu, Oct 25, 2012 at 2:26 PM, Willi H=
aase <willi_haase@yahoo.com> wrote:=0A> Hello=0A>=0A> I am using Lucene 3.4=
 and I have nearly the same question like Jan in his post:=0A> http://mail-=
archives.apache.org/mod_mbox/lucene-java-user/200801.mbox/%3C4791E482.60900=
%40gmx.de%3E=0A>=0A>=0A> I could found something helpful in "Lucene in Acti=
on" or in the web.=0A> What is the recommended way to create an alias to a =
field?=0A> I want be able to use in the searchquery "au:some_name" or "auth=
:some_name" or "author:some_name", all using the field "author".=0A>=0A> Ma=
ny thanks in advance for any help or recommendations=0A>=A0  Willi : )=0A=
=0A---------------------------------------------------------------------=0A=
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor addit=
ional commands, e-mail: java-user-help@lucene.apache.org
--921974003-2133070033-1351243783=:94498--

From java-user-return-53933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Oct 26 10:42:55 2012
Return-Path: <java-user-return-53933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5A5D6DCD4
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 26 Oct 2012 10:42:55 +0000 (UTC)
Received: (qmail 7057 invoked by uid 500); 26 Oct 2012 10:42:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6839 invoked by uid 500); 26 Oct 2012 10:42:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6812 invoked by uid 99); 26 Oct 2012 10:42:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Oct 2012 10:42:51 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [77.238.189.195] (HELO nm13-vm0.bullet.mail.ird.yahoo.com) (77.238.189.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Oct 2012 10:42:43 +0000
Received: from [212.82.105.247] by nm13.bullet.mail.ird.yahoo.com with NNFMP; 26 Oct 2012 10:42:21 -0000
Received: from [212.82.108.245] by tm19.bullet.mail.ird.yahoo.com with NNFMP; 26 Oct 2012 10:42:20 -0000
Received: from [127.0.0.1] by omp1010.mail.ird.yahoo.com with NNFMP; 26 Oct 2012 10:42:20 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 964293.39770.bm@omp1010.mail.ird.yahoo.com
Received: (qmail 49599 invoked by uid 60001); 26 Oct 2012 10:42:20 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1351248140; bh=pTyvXnHEPasKulRGPUA3k8OiDM8Px3uecgavD/i/hEY=; h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=Jfvlbnvwb5mUDHYb8O83anYrLqPJ+0e59lek4AC5bQczXVWtuEDzKe5AEkAWe7WZpG3s7EbntXDczAS6efzQJiMDm8Zu41v59XFgtQiQobVgAnT4dyXuvjVvYkkI6nRjoz9X/6th3f2TrES3AxJMo+b8gUAkL19CYcZsn/V/iiE=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=cZfWWEQEnUbwS5jv/ggCgkc31r62IAgqqFRWq7tasYmM6NYdSZ8m1wP8jMzldJCFhNSgNziXq3brH6qnikh9NPAEeA4r7hYXVXDsy6Q92VhGVHPwER68S2cu//bfRoUnWu2r98eoXTvSaxUMRltpEvXRgXxGtEz9Jc+MIEVDQvc=;
X-YMail-OSG: XfqV_BEVM1mNrEkdiFV8C4vo.ZlYpClMdXRDaSNNTf3IcCy
 L2BzVvt0BI2maZ.s3BFnvVS9q7k3neM.YiVAgP4x6IOm9rZJJy.niEWv3MGc
 My41L3xktmWlyHXzczhROHlHifXUdY02BPweDX1a5n1SFFFy_8f7ThPwkKkw
 WbDgT7DgCsU3C8ZrCTmb4YubYbRQ_XNpLS.kW_OJVZZFrB6udr83AelbbmYt
 MRUE68AKph1294Hq3OmjEzninrZYBZSjEpm62KvX4H8GH2zJY4Aoy5nzMMEI
 uSua7hSWjMBq4WHljWogUJjORk55530jrNwQiIwGl80fAp_VK_TFzJIcRuY8
 xfKZYJBZ57jAVTQv6yl_9KIrAQ3zTXqWy4GBViRbQ_VFfF.baQpn35OjWRlz
 voveuzxjWfwBIqoEvbwO8YyJmwvEmDyF9FY11ky9YBJaNJPpY_RpSedE2
Received: from [193.62.194.244] by web29402.mail.ird.yahoo.com via HTTP; Fri, 26 Oct 2012 11:42:20 BST
X-Rocket-MIMEInfo: 001.001,SGVsbG8gSmFjaywKCnlvdSBhcmUgcmlnaHQsIHRoZXJlIGlzIG5vIHJlYXNvbiB0aGF0IHRoaXPCoHBvc3NpYmlsaXR5wqBpcyBvbmx5IGluIFNvbHIsIHdoYXQgY291bGQgdXNlIGl0IGZyb20gdGhlIEx1Y2VuZS1BUEkuCkkganVzdCBnb3QgdGhlIG9sZCBzb3VyY2UgY29kZSBmcm9tIEphbiwgdGhlIGF1dGhvciBvZiB0aGUgb2xkIHBvc3QuCldoZW4gb3VyIGN1cnJlbnQgY2hhbmdlIGlzIHJlbGVhc2UgSSB3aWxsIGhhdmUgYSBsb29rIHRvIHRoZSBTb2xyIHNvbHV0aW9uIGFuZCBJIHdpbGwgdHJ5IHRvIGIBMAEBAQE-
X-Mailer: YahooMailWebService/0.8.123.450
References: <1351171597.74173.YahooMailNeo@web29404.mail.ird.yahoo.com> <141215F110434A21A6E43B80924C4B6C@JackKrupansky> <1351180752.27673.YahooMailNeo@web29405.mail.ird.yahoo.com> <87652EB0105140AD9CF8E048047D92BE@JackKrupansky>
Message-ID: <1351248140.31634.YahooMailNeo@web29402.mail.ird.yahoo.com>
Date: Fri, 26 Oct 2012 11:42:20 +0100 (BST)
From: Willi Haase <willi_haase@yahoo.com>
Reply-To: Willi Haase <willi_haase@yahoo.com>
Subject: Re: How to use/create an alias to a field?
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <87652EB0105140AD9CF8E048047D92BE@JackKrupansky>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="921974003-278780656-1351248140=:31634"
X-Virus-Checked: Checked by ClamAV on apache.org

--921974003-278780656-1351248140=:31634
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hello Jack,=0A=0Ayou are right, there is no reason that this=A0possibility=
=A0is only in Solr, what could use it from the Lucene-API.=0AI just got the=
 old source code from Jan, the author of the old post.=0AWhen our current c=
hange is release I will have a look to the Solr solution and I will try to =
bring this in some way to the Lucene API as well.=0A=0AThank you=0A=A0 Will=
i=0A=0A=0A________________________________=0A Von: Jack Krupansky <jack@bas=
etechnology.com>=0AAn: java-user@lucene.apache.org; Willi Haase <willi_haas=
e@yahoo.com> =0AGesendet: 17:43 Donnerstag, 25.Oktober 2012=0ABetreff: Re: =
How to use/create an alias to a field?=0A =0AI almost added that you could =
create a subclass of the Lucene query parser, as Solr does, and add the ali=
asing that way. There might/should be field aliasing code in Solr that you =
could easily apply in Solr. There really isn't a great reason why aliasing =
is only available in Solr and not in Lucene.=0A=0ABut unless you are prepar=
ed to hack on the query parser, alias support isn't available in Lucene rig=
ht now.=0A=0A-- Jack Krupansky=0A-----Original Message----- From: Willi Haa=
se=0ASent: Thursday, October 25, 2012 11:59 AM=0ATo: java-user@lucene.apach=
e.org=0ASubject: Re: How to use/create an alias to a field?=0A=0AHi Jack=0A=
=0AThank you for your help.=0AMy problem is, I have only a Lucene setup and=
 can not switch to Solr : (=0A=0ACheers=0AWilli=0A=0A=0A___________________=
_____________=0AVon: Jack Krupansky <jack@basetechnology.com>=0AAn: java-us=
er@lucene.apache.org=0AGesendet: 15:57 Donnerstag, 25.Oktober 2012=0ABetref=
f: Re: How to use/create an alias to a field?=0A=0AWith edismax in Solr 3.6=
/4.0 field aliases are supported:=0A=0A"The syntax for aliasing is f.myalia=
s.qf=3Drealfield. A user query for myalias:foo will be queried as realfield=
:foo."=0A=0ASee:=0Ahttp://wiki.apache.org/solr/ExtendedDisMax#Field_aliasin=
g_.2BAC8_renaming=0A=0A-- Jack Krupansky=0A=0A-----Original Message----- Fr=
om: Willi Haase=0ASent: Thursday, October 25, 2012 9:26 AM=0ATo: java-user@=
lucene.apache.org=0ASubject: How to use/create an alias to a field?=0A=0AHe=
llo=0A=0AI am using Lucene 3.4 and I have nearly the same question like Jan=
 in his post:=0Ahttp://mail-archives.apache.org/mod_mbox/lucene-java-user/2=
00801.mbox/%3C4791E482.60900%40gmx.de%3E=0A=0A=0AI could found something he=
lpful in "Lucene in Action" or in the web.=0AWhat is the recommended way to=
 create an alias to a field?=0AI want be able to use in the searchquery "au=
:some_name" or "auth:some_name" or "author:some_name", all using the field =
"author".=0A=0AMany thanks in advance for any help or recommendations=0AWil=
li : )=0A=0A---------------------------------------------------------------=
------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A=
For additional commands, e-mail: java-user-help@lucene.apache.org =0A=0A---=
------------------------------------------------------------------=0ATo uns=
ubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor additional =
commands, e-mail: java-user-help@lucene.apache.org
--921974003-278780656-1351248140=:31634--

From java-user-return-53934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Oct 26 15:47:42 2012
Return-Path: <java-user-return-53934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1B16AD4FB
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 26 Oct 2012 15:47:42 +0000 (UTC)
Received: (qmail 51120 invoked by uid 500); 26 Oct 2012 15:47:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51013 invoked by uid 500); 26 Oct 2012 15:47:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50984 invoked by uid 99); 26 Oct 2012 15:47:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Oct 2012 15:47:36 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [62.213.161.134] (HELO pmx.sirma.bg) (62.213.161.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Oct 2012 15:47:30 +0000
X-Virus-Scanned: Sirma Antivirus System
Received: from [192.168.128.140] (ivasilev.sirma.int [192.168.128.140])
	by pmx.sirma.bg (Sirma mail system) with ESMTP id B6B2E2400C
	for <java-user@lucene.apache.org>; Fri, 26 Oct 2012 18:47:07 +0300 (EEST)
Message-ID: <508AB079.6040205@sirma.bg>
Date: Fri, 26 Oct 2012 18:47:05 +0300
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Mozilla/5.0 (Windows NT 5.2; rv:16.0) Gecko/20121010 Thunderbird/16.0.1
MIME-Version: 1.0
To: LUCENE MAIL LIST <java-user@lucene.apache.org>
Subject: Exception on creation IndexWriterConfig with Version.LUCENE_40
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Guys,

When executing:

ndexWriterConfig iwc = new IndexWriterConfig(Version.LUCENE_40, new 
MyAnalyzer());

I have the following exception:

Exception in thread "main" java.lang.ExceptionInInitializerError
     at 
org.apache.lucene.index.LiveIndexWriterConfig.<init>(LiveIndexWriterConfig.java:118)
     at 
org.apache.lucene.index.IndexWriterConfig.<init>(IndexWriterConfig.java:145)
     at test.payloads.TestPayloads.main(TestPayloads.java:49)
Caused by: java.lang.IllegalArgumentException: A SPI class of type 
org.apache.lucene.codecs.Codec with name 'Lucene40' does not exist. You 
need to add the corresponding JAR file supporting this SPI to your 
classpath.The current classpath supports the following names: []
     at 
org.apache.lucene.util.NamedSPILoader.lookup(NamedSPILoader.java:104)
     at org.apache.lucene.codecs.Codec.forName(Codec.java:95)
     at org.apache.lucene.codecs.Codec.<clinit>(Codec.java:122)
     ... 3 more


My project includes as dependent the Lucene project including the 
following packages:

org.apache.lucene.codecs
org.apache.lucene.codecs.lucene3x
org.apache.lucene.codecs.lucene40
org.apache.lucene.codecs.lucene40.values
org.apache.lucene.codecs.perfield

What other Lucene packages I need to include to avid the Exception?
I prefer adding source code instead of jar(s).

Cheers,
Ivan Vasilev

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Oct 26 15:50:03 2012
Return-Path: <java-user-return-53935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 36BDFD502
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 26 Oct 2012 15:50:03 +0000 (UTC)
Received: (qmail 62035 invoked by uid 500); 26 Oct 2012 15:50:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61980 invoked by uid 500); 26 Oct 2012 15:50:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61972 invoked by uid 99); 26 Oct 2012 15:50:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Oct 2012 15:50:00 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qc0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Oct 2012 15:49:55 +0000
Received: by mail-qc0-f176.google.com with SMTP id n41so1541896qco.35
        for <java-user@lucene.apache.org>; Fri, 26 Oct 2012 08:49:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=LiC+7Bhu+kjqcSUWDimxtqvQUWtd4pfJyTn+EWqsMhU=;
        b=0Aivatpj+8/dvDraYQMXCW5T/qFkDoaIXMf6dv3PGtrQciOW2Lc6cIhlXOm2vVqog3
         1nWYjkwyWTe20GEplpzkyqxYLWhToAd83ltbV7xiDvRSEiN0Ad6NCl+bIDr4N6Z0r0H8
         BbV0EWtllvnjz0xL+bDMQVAMMaEr7+otczTaUp2t+sBH9W5nTPP7DGUKpbv4F+gU3wt8
         U7qG6tOy8GstVzmvUOs/l4caXTQs8XyNubscVAc9QN9eUQQiWrhsdfASnUWs4S+sc3B0
         5aiT6yblwDIlrFAodQlzSK8W/ktFKVvKSiaK1TZLp9uD/EGz9axqJC0ytaF04mp/E3TJ
         JJkg==
Received: by 10.224.70.140 with SMTP id d12mr6467992qaj.53.1351266574424; Fri,
 26 Oct 2012 08:49:34 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.49.26.37 with HTTP; Fri, 26 Oct 2012 08:49:14 -0700 (PDT)
In-Reply-To: <508AB079.6040205@sirma.bg>
References: <508AB079.6040205@sirma.bg>
From: Robert Muir <rcmuir@gmail.com>
Date: Fri, 26 Oct 2012 11:49:14 -0400
Message-ID: <CAOdYfZWVSV3BhBfoh17Q6thN08jeauQi3Q_dVfDnmwif9VLY_Q@mail.gmail.com>
Subject: Re: Exception on creation IndexWriterConfig with Version.LUCENE_40
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, Oct 26, 2012 at 11:47 AM, Ivan Vasilev <ivasilev@sirma.bg> wrote:

if you want to not use jars, then its not enough to add the
<module>/src/java directories. you also need <module>/src/resources
directories in the classpath

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Oct 26 15:58:48 2012
Return-Path: <java-user-return-53936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 373E8D540
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 26 Oct 2012 15:58:48 +0000 (UTC)
Received: (qmail 84034 invoked by uid 500); 26 Oct 2012 15:58:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83849 invoked by uid 500); 26 Oct 2012 15:58:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83831 invoked by uid 99); 26 Oct 2012 15:58:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Oct 2012 15:58:45 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [62.213.161.134] (HELO pmx.sirma.bg) (62.213.161.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Oct 2012 15:58:40 +0000
X-Virus-Scanned: Sirma Antivirus System
Received: from [192.168.128.140] (ivasilev.sirma.int [192.168.128.140])
	by pmx.sirma.bg (Sirma mail system) with ESMTP id E60C42400C
	for <java-user@lucene.apache.org>; Fri, 26 Oct 2012 18:58:17 +0300 (EEST)
Message-ID: <508AB319.4010302@sirma.bg>
Date: Fri, 26 Oct 2012 18:58:17 +0300
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Mozilla/5.0 (Windows NT 5.2; rv:16.0) Gecko/20121010 Thunderbird/16.0.1
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Exception on creation IndexWriterConfig with Version.LUCENE_40
References: <508AB079.6040205@sirma.bg> <CAOdYfZWVSV3BhBfoh17Q6thN08jeauQi3Q_dVfDnmwif9VLY_Q@mail.gmail.com>
In-Reply-To: <CAOdYfZWVSV3BhBfoh17Q6thN08jeauQi3Q_dVfDnmwif9VLY_Q@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Robert

On 26.10.2012 . 18:49, Robert Muir wrote:
> On Fri, Oct 26, 2012 at 11:47 AM, Ivan Vasilev <ivasilev@sirma.bg> wrote:
>
> if you want to not use jars, then its not enough to add the
> <module>/src/java directories. you also need <module>/src/resources
> directories in the classpath
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Oct 26 17:50:38 2012
Return-Path: <java-user-return-53937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3C7D0D121
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 26 Oct 2012 17:50:38 +0000 (UTC)
Received: (qmail 96125 invoked by uid 500); 26 Oct 2012 17:50:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96076 invoked by uid 500); 26 Oct 2012 17:50:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96066 invoked by uid 99); 26 Oct 2012 17:50:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Oct 2012 17:50:36 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.138.91.23] (HELO nm8-vm0.bullet.mail.ne1.yahoo.com) (98.138.91.23)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Oct 2012 17:50:26 +0000
Received: from [98.138.226.176] by nm8.bullet.mail.ne1.yahoo.com with NNFMP; 26 Oct 2012 17:50:05 -0000
Received: from [98.138.89.169] by tm11.bullet.mail.ne1.yahoo.com with NNFMP; 26 Oct 2012 17:50:05 -0000
Received: from [127.0.0.1] by omp1025.mail.ne1.yahoo.com with NNFMP; 26 Oct 2012 17:50:05 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 448033.41717.bm@omp1025.mail.ne1.yahoo.com
Received: (qmail 54031 invoked by uid 60001); 26 Oct 2012 17:50:05 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1351273805; bh=gLvbhzGQJMkZpCAXI50vE9AvyFECUxQLP3ujC8Mnsck=; h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type; b=A4ZxX5sYBYLDF3IxeI2aXEXN3goOst6PZGfqzrxVP7otxhI3wot/N6ncLjdjcbeQ4yYJ5SXFEhQvbhl0nVJw5wpyMoSd6lWbr6MkhRMJ7yMo8zS3R1T2oFfsqIb6u+19Hde+SBMve8WY6Oxq9E2SfM+LHWa1gz6h53O4jE1WHXQ=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type;
  b=UB9MYM4BlX43xRFsB5EVP4qLoLodtGTVO0BQsnnEPlCkuOc278PwE4kQQihWyQ/ZAEHLASJkzr+G3zHPhKu6QpHXKt2RNF1lUs9ehu9uqZv4Hxw6XzOs/mm/n7Gw6CK1kxgi3UOwIc+VlD50dWJy6sR/q8deMXG26Nl0YPNk4bk=;
X-YMail-OSG: 9.xGfsQVM1l4YDsQ0BFNefE1KicYLGNZ2vMoudM18RLxJtT
 R601UF5ORRLr85nq._477mcp2jZWGjMY.t2tnXqRGE.Mh8Qw_ogLeV3KDxSr
 YuCxPQacEC05c0MlenfjBY_XNkdxFKm_3qdg9vFe_77n97mFRKeCEWnTIphe
 3kRQdMKfonyAMHLpjOSAR6RZPhmt61rJAKv2Ik5jw9EUDkx7H2vqwPN5CEwE
 SLTRttuK0FS0Gc.TWHxKc..VnuBZyf8IcMnfXTjkKzsiwGG.0Di2OuP2Kk3E
 Q6tDo7LL3VXSXfB6WdhWcoCWEfyX9fNFuzGj9562pzNBQTZCvWygt6o1PEgU
 ETQiYOrNTjWlmt7tzrHUKQ4jCWdOZS3GQAJeUgwV8WeoODWXTPasLLHqJn.L
 wEGR8_9sY6K7XWB8eZAIohHsAZlRLWbZv4nK7THyWHpwuGMr1Hxpr4J3AJxL
 7N9lpA0BE1v3ZD9l91UnQlhd2LWuktFdw1MeZJE55cnlFQUKRP60-
Received: from [146.101.57.209] by web120702.mail.ne1.yahoo.com via HTTP; Fri, 26 Oct 2012 10:50:04 PDT
X-Rocket-MIMEInfo: 001.001,SGVsbG8uCgpXZSBoYXZlIGFuIGluZGV4IHRoYXQgd2hlbiBjcmV0ZWQgdXNpbmcgbHVjZW5lMi4zLjIsIGhhcyBhIHNpemUgb2YgYWJvdXQgNEcuCgpDcmVhdGluZyB0aGUgc2FtZSBpbmRleCAod2l0aCB0aGUgc2FtZSBwYXJhbWV0ZXJzKSB3aXRoIGx1Y2VuZSAzLjYuMCByZXN1bHRzIGluIGFuIDExRyBpbmRleC4KCkNvdWxkIHNvbWVvbmUgc2hlZCBzb21lIGxpZ2h0IGludG8gd2h5IHRoZSBpbmRleCBpcyBzbyBtdWNoIGxhcmdlciwgZ2l2ZW4gdGhlIHNhbWUgZGF0YSBhbmQgdGhlIHNhbWUgcGFyYW1ldGUBMAEBAQE-
X-Mailer: YahooMailWebService/0.8.123.450
Message-ID: <1351273804.28138.YahooMailNeo@web120702.mail.ne1.yahoo.com>
Date: Fri, 26 Oct 2012 10:50:04 -0700 (PDT)
From: kiwi clive <kiwi_clive@yahoo.com>
Reply-To: kiwi clive <kiwi_clive@yahoo.com>
Subject: Lucene 3.6.0 Index Size
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="-985778932-233123219-1351273804=:28138"
X-Virus-Checked: Checked by ClamAV on apache.org

---985778932-233123219-1351273804=:28138
Content-Type: text/plain; charset=us-ascii

Hello.

We have an index that when creted using lucene2.3.2, has a size of about 4G.

Creating the same index (with the same parameters) with lucene 3.6.0 results in an 11G index.

Could someone shed some light into why the index is so much larger, given the same data and the same parameters?

I realize this is a large version jump but a doubling in index size does not seem a step in the right direction to me ;-)

I am using cfs format.

Thanks,
Clive

---985778932-233123219-1351273804=:28138--

From java-user-return-53938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Oct 26 19:14:00 2012
Return-Path: <java-user-return-53938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 49776D37F
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 26 Oct 2012 19:14:00 +0000 (UTC)
Received: (qmail 21094 invoked by uid 500); 26 Oct 2012 19:13:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21047 invoked by uid 500); 26 Oct 2012 19:13:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21039 invoked by uid 99); 26 Oct 2012 19:13:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Oct 2012 19:13:58 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vfunstein@gmail.com designates 209.85.215.48 as permitted sender)
Received: from [209.85.215.48] (HELO mail-la0-f48.google.com) (209.85.215.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Oct 2012 19:13:51 +0000
Received: by mail-la0-f48.google.com with SMTP id u2so2931322lag.35
        for <java-user@lucene.apache.org>; Fri, 26 Oct 2012 12:13:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=I9yNAyo9zUdXHROo3n2B1PWIAayw3jIeFUsT7L2hLuY=;
        b=GRxP+BVXPiNknWeNOnXR6bfjt1QGmDvuoUtftVWI3duV0q10s58a5w1WDINkx88x8L
         VRe955N0y+JvkpKwvNgQJqRYQXNPSzf4UeG01xGGJ3GrV+pOtJktPTBpYwZnilcznyvY
         +QaGiWfZZgqzPweXpI72QcrWBApdMO5VCHu6VpS3e7GNfB1IMn1xskcI7P/Nex62V7kg
         GV1tVFjRv4/1u9X1QY7KlCZDVKacTm0G0tQob+tAyhluEs4djA3sf3nA2Ar8eJ5iqfdK
         3y899f7nP1wDiXVGMQyF7uUtj3RHm6kt+LZ6bj207JH6QBprD9lpEaXnBVyKNYmrxgWe
         QA8Q==
MIME-Version: 1.0
Received: by 10.112.36.200 with SMTP id s8mr9431191lbj.92.1351278809962; Fri,
 26 Oct 2012 12:13:29 -0700 (PDT)
Received: by 10.114.13.161 with HTTP; Fri, 26 Oct 2012 12:13:29 -0700 (PDT)
In-Reply-To: <1351273804.28138.YahooMailNeo@web120702.mail.ne1.yahoo.com>
References: <1351273804.28138.YahooMailNeo@web120702.mail.ne1.yahoo.com>
Date: Fri, 26 Oct 2012 12:13:29 -0700
Message-ID: <CALr4HzqRewfbyjmD=Ma=odvvS0xpUasSGNQdiEEpnX6kn4JpoA@mail.gmail.com>
Subject: Re: Lucene 3.6.0 Index Size
From: Vitaly Funstein <vfunstein@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=e0cb4efe2dcc75d98504ccfb1d57
X-Virus-Checked: Checked by ClamAV on apache.org

--e0cb4efe2dcc75d98504ccfb1d57
Content-Type: text/plain; charset=ISO-8859-1

One thing to keep in mind is that the default merge policy has changed in
3.6 from 2.3.2 (I'm almost certain of that). So it's just a hunch but you
may have some unmerged segments left over at the end. Try calling
IndexWriter.close(true) after you're done indexing.

On Fri, Oct 26, 2012 at 10:50 AM, kiwi clive <kiwi_clive@yahoo.com> wrote:

> Hello.
>
> We have an index that when creted using lucene2.3.2, has a size of about
> 4G.
>
> Creating the same index (with the same parameters) with lucene 3.6.0
> results in an 11G index.
>
> Could someone shed some light into why the index is so much larger, given
> the same data and the same parameters?
>
> I realize this is a large version jump but a doubling in index size does
> not seem a step in the right direction to me ;-)
>
> I am using cfs format.
>
> Thanks,
> Clive
>

--e0cb4efe2dcc75d98504ccfb1d57--

From java-user-return-53939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Oct 26 20:28:16 2012
Return-Path: <java-user-return-53939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4DCD6901F
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 26 Oct 2012 20:28:16 +0000 (UTC)
Received: (qmail 42987 invoked by uid 500); 26 Oct 2012 20:28:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42943 invoked by uid 500); 26 Oct 2012 20:28:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42935 invoked by uid 99); 26 Oct 2012 20:28:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Oct 2012 20:28:14 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [98.138.229.144] (HELO nm38-vm0.bullet.mail.ne1.yahoo.com) (98.138.229.144)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Oct 2012 20:28:02 +0000
Received: from [98.138.90.55] by nm38.bullet.mail.ne1.yahoo.com with NNFMP; 26 Oct 2012 20:27:40 -0000
Received: from [98.138.226.163] by tm8.bullet.mail.ne1.yahoo.com with NNFMP; 26 Oct 2012 20:27:40 -0000
Received: from [127.0.0.1] by omp1064.mail.ne1.yahoo.com with NNFMP; 26 Oct 2012 20:27:40 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 606824.36050.bm@omp1064.mail.ne1.yahoo.com
Received: (qmail 30351 invoked by uid 60001); 26 Oct 2012 20:27:40 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1351283260; bh=u34rqMA6nK4HjHgfFI5Wfr2sxGK33tUNCjaFb8npF5U=; h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=nCzJQS/GS4s6HKaeki7ydyoPh2iHUJ2go03J/RvEGL4FTY1eCWBLw1lu5xPvnFwNZOpv5nBvm2LeREE7UiNVm1l4Vkg8l2HmJgDdISTLFD+FdJOpT/e0m3y9OY6OjNBvoWU1FCXvoxeLTJ3wmOGxQib0qYQIsdRjoGsoE6xeCSg=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=WetAGwu6FuqDELWqZLrQBoGbih6rlgyJghFFNa1ZiuqNqLKy5X7U/Z9DBCP+RUyooq2pt4CDmN/prYKQ73ArnqToaD9BUTC0AhWZc/MxSkYeOvulmxyRpgcrFo06gjVpj6QvLDVONZPJkhFWOKqnkzw/evj3wUtuwrSoAAS3iL8=;
X-YMail-OSG: kenHoykVM1mTloQeRVYuR0BC3cSwtwHwGKUQow3_p1eOINu
 rPOeFLToCCLsl7qpL_gdJX3AI5vAv.CccmlTKiUwK4k72hmhVnBAzbT22ERn
 aPkoxr65bpuu9bw1kq5_g4A3NeftWq1Ufgo5VkmtWsMecrIDfwielMstcbdP
 gJ0FwB3uwUamqjHy8jNq7CNzut_1O6.AgW.SRehunr6HU_8KpD.exzU1pp0R
 iEnnCSdm1h0mv.cgdOSAe3PLNjafk6FaCa1RJXaLY4qaGiXtHc_c4wVdCgcX
 qj4OxkTVlhlhf2NQrWGdVG0PnzZYMTVopLLu2H6n2_JBxkRYpAuaW3Knx5PU
 vZcmFOmXmVi.DULl5hxI3.knEhPer4rrwpg0Vl_osCNxmDRaksOzE69dyYnF
 heKydW5M3wTF6LCtgvlcJoNiAepyYfHPtTvreWW0aICK3fip443tLCyGWea0
 _a.FpX8HVgLXXfG9ezxNYlZAEU4mr5l1y.BpXttMfKRrqZw.0cKV6Wgy09kt
 6EQhjMr3rGKbG
Received: from [90.199.63.232] by web120702.mail.ne1.yahoo.com via HTTP; Fri, 26 Oct 2012 13:27:40 PDT
X-Rocket-MIMEInfo: 001.001,SGkgVml0YWx5LAoKWW91ciBodW5jaCBpcyBjb3JyZWN0LCB5ZXMgdGhlcmUgYXJlIHVubWVyZ2VkIHNlZ21lbnRzIGxlZnRvdmVyLiBIb3dldmVyIHRvIGdldCBpbmRleGluZyB0aHJvdWdocHV0LCB3ZSB1c2UgbXVsdGlwbGUgdGhyZWFkcyBvbiB0aGUgd3JpdGVyIGZsdXNoaW5nIHRvIGRpc2sgcGVyaW9kaWNhbGx5LCBidXQgdGhlIHdyaXRlciBjYW4gc3RheSBvcGVuIGZvciBzb21lIHRpbWUgKHVudGlsIHRoZSBsYXN0IHRocmVhZCB0ZXJtaW5hdGVzKS4gSG93ZXZlciwgYWZ0ZXIgYW4gb3B0aW1pemUsIHQBMAEBAQE-
X-Mailer: YahooMailWebService/0.8.123.450
References: <1351273804.28138.YahooMailNeo@web120702.mail.ne1.yahoo.com> <CALr4HzqRewfbyjmD=Ma=odvvS0xpUasSGNQdiEEpnX6kn4JpoA@mail.gmail.com>
Message-ID: <1351283260.19689.YahooMailNeo@web120702.mail.ne1.yahoo.com>
Date: Fri, 26 Oct 2012 13:27:40 -0700 (PDT)
From: kiwi clive <kiwi_clive@yahoo.com>
Reply-To: kiwi clive <kiwi_clive@yahoo.com>
Subject: Re: Lucene 3.6.0 Index Size
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <CALr4HzqRewfbyjmD=Ma=odvvS0xpUasSGNQdiEEpnX6kn4JpoA@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="-985778932-1728046002-1351283260=:19689"
X-Virus-Checked: Checked by ClamAV on apache.org

---985778932-1728046002-1351283260=:19689
Content-Type: text/plain; charset=us-ascii

Hi Vitaly,

Your hunch is correct, yes there are unmerged segments leftover. However to get indexing throughput, we use multiple threads on the writer flushing to disk periodically, but the writer can stay open for some time (until the last thread terminates). However, after an optimize, the index is closed. Thanks for the advice, I need to revisit the merging section of the application.

Clive




________________________________
 From: Vitaly Funstein <vfunstein@gmail.com>
To: java-user@lucene.apache.org 
Sent: Friday, October 26, 2012 8:13 PM
Subject: Re: Lucene 3.6.0 Index Size
 
One thing to keep in mind is that the default merge policy has changed in
3.6 from 2.3.2 (I'm almost certain of that). So it's just a hunch but you
may have some unmerged segments left over at the end. Try calling
IndexWriter.close(true) after you're done indexing.

On Fri, Oct 26, 2012 at 10:50 AM, kiwi clive <kiwi_clive@yahoo.com> wrote:

> Hello.
>
> We have an index that when creted using lucene2.3.2, has a size of about
> 4G.
>
> Creating the same index (with the same parameters) with lucene 3.6.0
> results in an 11G index.
>
> Could someone shed some light into why the index is so much larger, given
> the same data and the same parameters?
>
> I realize this is a large version jump but a doubling in index size does
> not seem a step in the right direction to me ;-)
>
> I am using cfs format.
>
> Thanks,
> Clive
>
---985778932-1728046002-1351283260=:19689--

From java-user-return-53940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Oct 26 22:37:54 2012
Return-Path: <java-user-return-53940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B7426DAE1
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 26 Oct 2012 22:37:54 +0000 (UTC)
Received: (qmail 94905 invoked by uid 500); 26 Oct 2012 22:37:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94818 invoked by uid 500); 26 Oct 2012 22:37:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94810 invoked by uid 99); 26 Oct 2012 22:37:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Oct 2012 22:37:52 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.219.48] (HELO mail-oa0-f48.google.com) (209.85.219.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Oct 2012 22:37:43 +0000
Received: by mail-oa0-f48.google.com with SMTP id h2so3719387oag.35
        for <java-user@lucene.apache.org>; Fri, 26 Oct 2012 15:37:22 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:x-originating-ip:date:message-id:subject:from:to
         :content-type:x-gm-message-state;
        bh=Ec6g87EvuhWgffa2jUfof1KdSg2xBEnZLqVdc2n7sdc=;
        b=QdixEJsDm64OlIxvNzZ6UJ4TojY2oWq0H6A9VG8gde9SKEW/YO+Isq27B7PDfmvYB+
         U9eKVFY52Bd6rxtJTMMFqvwmD4xVszygaD0uCWEcGC4jxyyUYEYEBFTZfpnKrQXAxE4h
         EGfglfq5/UYmXzZ60UTwWm+Lwmd7u7J2rAkEQZ2jkUEYMK2LcLkvZF5UP/8MaTt4hqYf
         kv/QC40v9fDZnbgz4pbqktvc/SzeVUUMeEYBTx9gbJAfCpM7gY5MBV66XOymp03xsdsQ
         8OMhvaQ6AmeKidXvlYq29j+PfE2QWnUEnc7xeMejbbHe+iqESkrenu0eVCCG//tJlyyX
         1JVg==
MIME-Version: 1.0
Received: by 10.182.245.20 with SMTP id xk20mr19736501obc.89.1351291042353;
 Fri, 26 Oct 2012 15:37:22 -0700 (PDT)
Received: by 10.76.112.16 with HTTP; Fri, 26 Oct 2012 15:37:22 -0700 (PDT)
X-Originating-IP: [76.103.244.140]
Date: Fri, 26 Oct 2012 15:37:22 -0700
Message-ID: <CAJW1onjHXnpu4u-7znUCuimoVUBqTE4SsZpr=SWMOpHJF_PK1A@mail.gmail.com>
Subject: ComplexPhraseQueryParser and stop words
From: Brandon Mintern <mintern@easyesi.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQkwjbfd6GvfkoDZsEiZwg6KTSUANDczagTh630qVX3eG9n0RToksOOsXX65JyAKPqlFT1Y1
X-Virus-Checked: Checked by ClamAV on apache.org

We recently switched from QueryParser to ComplexPhraseQueryParser
(from lucene-queryparser-3.6.0.jar), and we've come across two
separate problems.

The first is that because it parses quoted expressions twice, it is
necessary to double-escape any escaped characters. So if I do not want
to allow users to include : in their search, I have to escape it as
\:, but when it is in quotes, I have to escape it as \\:, because the
first parse will turn \\ into \ and then the second time around will
do the proper escape. Likewise, I need to escape \ because it shows up
frequently in paths. When not in quotes, this is simply \\. In quotes,
it must be \\\\.

So that was a minor issue, but we were able to work around it without
too much trouble. This next problem, though, does not seem to have an
easy answer.

Our searches for quoted phrases which include stop words no longer
match. If a document contained the phrase "time to leave", only "time"
and "leave" get indexed, but their positions are maintained so that a
later search for "time to leave" works correctly. With the standard
QueryParser, this worked just fine. With the ComplexPhraseQueryParser,
it no longer works at all. Searching for time AND leave works, but
"time to leave" simply fails.

Does anyone know where I should start in solving this issue?

Thanks,
Brandon

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Oct 26 23:35:33 2012
Return-Path: <java-user-return-53941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CD41EDBC1
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 26 Oct 2012 23:35:33 +0000 (UTC)
Received: (qmail 37709 invoked by uid 500); 26 Oct 2012 23:35:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37665 invoked by uid 500); 26 Oct 2012 23:35:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37657 invoked by uid 99); 26 Oct 2012 23:35:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Oct 2012 23:35:31 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ssmith@mainstreamdata.com designates 209.63.42.202 as permitted sender)
Received: from [209.63.42.202] (HELO nexus2.mainstreamdata.com) (209.63.42.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Oct 2012 23:35:26 +0000
Received: from localhost (localhost [127.0.0.1])
	by nexus2.mainstreamdata.com (Postfix) with ESMTP id A75A040089
	for <java-user@lucene.apache.org>; Fri, 26 Oct 2012 17:35:05 -0600 (MDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=
	mainstreamdata.com; h=mime-version:content-type:content-type
	:content-language:accept-language:message-id:date:date:subject
	:subject:from:from:received:received:received; s=key1; t=
	1351294504; bh=dLGOqSrOI/oREAy2T0WEmWGdwUk8cFUUtMT0KLLZSWk=; b=c
	N+FlRJbyoTmJD0joiuiCWtHWhmQ2ZFfugEFG9ONjiUb6ycErK8YmSYpOVHrodck9
	NIE4qTIVPjoN2IdXL9gv8/jx/SODBty7SFNMyB5biWvcMVGA0XT2YtHdYhOhCsOw
	YODAHfv0v1+ndqO2LHV6wfyE2QrygUyGRDj0o4oHiAFWaodb/aS1LFcqiwWtfqUI
	8EGe2TQWDTs+GS8KvObZOUTcn5FZ7qeb9HGZQUSwwskJQMyLeqBNJuFVGpKFtY6K
	7r+kZdB2nzrDWa3UjkEnP14yAP5GVdiJuHgd9yq5uCxzybijz9d4i5DOwnIzAp32
	kc5y4inBVFJcSnnr0wF0Q==
X-Virus-Scanned: Debian amavisd-new at nexus2.mainstreamdata.com
Received: from nexus2.mainstreamdata.com ([127.0.0.1])
	by localhost (nexus2.mainstreamdata.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id k7TFMtcvcMI4 for <java-user@lucene.apache.org>;
	Fri, 26 Oct 2012 17:35:04 -0600 (MDT)
Received: from webmail.mainstreamdata.com (hedwig.slc.mainstreamdata.com [10.2.1.133])
	by nexus2.mainstreamdata.com (Postfix) with ESMTPS id 5283B40087
	for <java-user@lucene.apache.org>; Fri, 26 Oct 2012 17:35:04 -0600 (MDT)
Received: from hedwig.slc.mainstreamdata.com ([10.2.1.133]) by
 hedwig.slc.mainstreamdata.com ([10.2.1.133]) with mapi id 14.01.0355.002;
 Fri, 26 Oct 2012 17:35:04 -0600
From: Scott Smith <ssmith@mainstreamdata.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Lucene 4.0 delete by ID
Thread-Topic: Lucene 4.0 delete by ID
Thread-Index: Ac2z0oTIyghISckUQdifmINDeImMXQ==
Date: Fri, 26 Oct 2012 23:35:02 +0000
Message-ID: <B29111A755EFB5419E6C7BC998C6E86796EE6C@hedwig.slc.mainstreamdata.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-originating-ip: [10.7.11.146]
Content-Type: multipart/alternative;
	boundary="_000_B29111A755EFB5419E6C7BC998C6E86796EE6Chedwigslcmainstre_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_B29111A755EFB5419E6C7BC998C6E86796EE6Chedwigslcmainstre_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I'm currently converting some lucene code to 4.0.  It appears that you are =
no longer allowed to delete a document by its ID.  Is that correct?  Is my =
only option to figure some kind of query (which obviously isn't based on ID=
) and do the delete from there?

--_000_B29111A755EFB5419E6C7BC998C6E86796EE6Chedwigslcmainstre_--

From java-user-return-53942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Oct 26 23:48:09 2012
Return-Path: <java-user-return-53942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 11639DBF0
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 26 Oct 2012 23:48:09 +0000 (UTC)
Received: (qmail 73111 invoked by uid 500); 26 Oct 2012 23:48:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73064 invoked by uid 500); 26 Oct 2012 23:48:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73054 invoked by uid 99); 26 Oct 2012 23:48:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Oct 2012 23:48:06 +0000
X-ASF-Spam-Status: No, hits=2.9 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [217.146.183.224] (HELO nm1-vm0.bullet.mail.ukl.yahoo.com) (217.146.183.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Oct 2012 23:48:00 +0000
Received: from [217.146.183.210] by nm1.bullet.mail.ukl.yahoo.com with NNFMP; 26 Oct 2012 23:47:38 -0000
Received: from [217.146.182.186] by tm3.bullet.mail.ukl.yahoo.com with NNFMP; 26 Oct 2012 23:47:38 -0000
Received: from [127.0.0.1] by smtp152.mail.ukl.yahoo.com with NNFMP; 26 Oct 2012 23:47:38 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.fr; s=s1024; t=1351295258; bh=eP7r9PuHbqs6VD1fYiTMIjlCasZCvTO8TKxZ/i7LolA=; h=X-Yahoo-Newman-Id:X-Yahoo-Newman-Property:X-YMail-OSG:X-Yahoo-SMTP:Received:Received:X-Google-DKIM-Signature:Received:MIME-Version:Received:In-Reply-To:References:From:Date:Message-ID:Subject:To:Content-Type:X-Gm-Message-State; b=x4lABURNBW6KpLm+QUKkmUfkMN1/fqqgHAjUarEH23ezrnnrjhrFWhl5rvjHwFXvUX+oFsS2OyFFNGnH9nf0Mm2x5tNOUZ/KydyBjrR3ptI4Lru5ned39yjE64Ekf6uzAAcUqO7b+56oBXHMzXAJ1u4PgJt6cPee2wlbML/zWL4=
X-Yahoo-Newman-Id: 691413.87378.bm@smtp152.mail.ukl.yahoo.com
X-Yahoo-Newman-Property: ymail-3
X-YMail-OSG: x6ROsuUVM1mx3OyTQMnTeC86FztAX4LCq65gmW951eP_vsG
 O3u6H6_aidne7oIR9P.gwTaEIcmsr0zcSshbOSIfOnRVHb7yn6mFohs9MNNs
 9rgDIaXdqZfMlMxtCm1ryMRPqsOqDbh6j117YvuZhZw5m33ZISC6SAQuDPJu
 Sjxkeeen8iKqemDLBw0Tq4uVsQyEJRUodLh.xSBOslx00sjKhYlBoPf5S07b
 MkCn9gFFk913lNKSVBpystWEhrW08IFokZz6qF4SSbdCH9KWKdxOrl7YWh8P
 W3WOan_3YgNIgNOAvsgv7K8D3qT9gHlmolU62s1ylg39vRlvBGdyvGk46ISk
 H1ISxpJke2HLfCCoWej0FVgM47eiZR7HfJwu5ucPFmvLajSnAU3W5UtDheZC
 DzIMNMIEjY_1YBFdA86ybUGyEe6d4qZmz_yLe3Krpru6D4LD2reFY3Q5Rhet
 kdFQCnQ--
X-Yahoo-SMTP: LJ40A_yswBDibQZxHlcIjn4jmWmZLZZGNar0Txg-
Received: from mail-ea0-f176.google.com (bagdouri_mossaab@209.85.215.176 with plain)
        by smtp152.mail.ukl.yahoo.com with SMTP; 26 Oct 2012 16:47:38 -0700 PDT
Received: by mail-ea0-f176.google.com with SMTP id n12so1168580eaa.35
        for <java-user@lucene.apache.org>; Fri, 26 Oct 2012 16:47:38 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:x-gm-message-state;
        bh=eP7r9PuHbqs6VD1fYiTMIjlCasZCvTO8TKxZ/i7LolA=;
        b=SlOphqEH4z/kEWCf/pecRlqwoTxxmgUm1MqAIn9f7Hny5rZeAlzUMsNuyh6P4LI9XD
         W2hErln7a7GR+2wVWArSWtkfBIl+NojQJsuFRwYFVY8r8DXoivZ9IfWrfVulL+BLkOdg
         ElI0XaWDUB7PU7Ysgo946J81xGWwKSExrQdAknJV7uczorjhZ4OtLPTbD4nuQtg4kp9x
         tUrPUnBBLzkzxWL/msrkHetKFTeuUOTN/MVOZ/gDB82NeTXzxtxm3OxOMqz/kgY/6Lio
         XNK21K2WuSrNf54CP9DzyLoeq8Ht2Tc1vJ2TnY35+WfsN6JPgsTlr+DJlgB+5euQOv+1
         LWJw==
Received: by 10.14.184.1 with SMTP id r1mr37280302eem.4.1351295258382; Fri, 26
 Oct 2012 16:47:38 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.223.152.196 with HTTP; Fri, 26 Oct 2012 16:47:18 -0700 (PDT)
In-Reply-To: <B29111A755EFB5419E6C7BC998C6E86796EE6C@hedwig.slc.mainstreamdata.com>
References: <B29111A755EFB5419E6C7BC998C6E86796EE6C@hedwig.slc.mainstreamdata.com>
From: Mossaab Bagdouri <bagdouri_mossaab@yahoo.fr>
Date: Fri, 26 Oct 2012 19:47:18 -0400
Message-ID: <CAG0hk_8SzJ69-xdnx+WqsrsAZrAVi4jEpKOX+Dy6pTJTrC9rbA@mail.gmail.com>
Subject: Re: Lucene 4.0 delete by ID
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=047d7b343ce6dccfee04ccfef119
X-Gm-Message-State: ALoCoQmPzh7UV0zADMBWhim/S//0Y1Sq82WHo1j8nNI9pngkRUooQj5atW74jD8oHJz9hxi+/8Ik
X-Virus-Checked: Checked by ClamAV on apache.org

--047d7b343ce6dccfee04ccfef119
Content-Type: text/plain; charset=UTF-8

Lucene document IDs are not stable. You could add a field with an ID that
you maintain. Your query would then be just a TermQuery on the ID.

Regards,
Mossaab


2012/10/26 Scott Smith <ssmith@mainstreamdata.com>

> I'm currently converting some lucene code to 4.0.  It appears that you are
> no longer allowed to delete a document by its ID.  Is that correct?  Is my
> only option to figure some kind of query (which obviously isn't based on
> ID) and do the delete from there?
>

--047d7b343ce6dccfee04ccfef119--

From java-user-return-53943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Oct 26 23:55:18 2012
Return-Path: <java-user-return-53943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E20DEDC19
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 26 Oct 2012 23:55:17 +0000 (UTC)
Received: (qmail 90777 invoked by uid 500); 26 Oct 2012 23:55:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90604 invoked by uid 500); 26 Oct 2012 23:55:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90596 invoked by uid 99); 26 Oct 2012 23:55:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Oct 2012 23:55:15 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ssmith@mainstreamdata.com designates 209.63.42.202 as permitted sender)
Received: from [209.63.42.202] (HELO nexus2.mainstreamdata.com) (209.63.42.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Oct 2012 23:55:09 +0000
Received: from localhost (localhost [127.0.0.1])
	by nexus2.mainstreamdata.com (Postfix) with ESMTP id 8E5E74008C
	for <java-user@lucene.apache.org>; Fri, 26 Oct 2012 17:54:47 -0600 (MDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=
	mainstreamdata.com; h=mime-version:content-type:content-type
	:content-language:accept-language:message-id:date:date:subject
	:subject:from:from:received:received:received; s=key1; t=
	1351295685; bh=rhvlH6TiMtkDec27jBIxS+k20dyFueqP9lS4w6aVEug=; b=h
	jOq6byD5St7nZTUFoVGVZEjNqF4x5ewl5zO2tiBcYAxcV0Zj/FEbiJVnqGwmVDBL
	d60fhAi3R9eOQYm3e1h8JVhHoBiLi0NvMKr56TF2azt3EtVbL8XcZaYi9HHEIeG8
	pUUKYkkYCfWFjCIHS2E9wksZdOCJJ0yekismnogxY22kjIUli9umzPuKi1CDwbpW
	B9F9fqG2CQKUB8KvBeyiB3/9t+9NZGOVQ/UetAfe8j145dpXN4NWgOBtQUds5Kqy
	U3EFPh+ORxXMCNiwFUnrs+G8R+7x90pAym9lDOr4kVriqLBIbOxeRa+QBZlDkXLZ
	SrYjq/8+YCrs/4TYN9NGA==
X-Virus-Scanned: Debian amavisd-new at nexus2.mainstreamdata.com
Received: from nexus2.mainstreamdata.com ([127.0.0.1])
	by localhost (nexus2.mainstreamdata.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id z45InTxM+YY4 for <java-user@lucene.apache.org>;
	Fri, 26 Oct 2012 17:54:45 -0600 (MDT)
Received: from webmail.mainstreamdata.com (hedwig.slc.mainstreamdata.com [10.2.1.133])
	by nexus2.mainstreamdata.com (Postfix) with ESMTPS id 418C740099
	for <java-user@lucene.apache.org>; Fri, 26 Oct 2012 17:54:15 -0600 (MDT)
Received: from hedwig.slc.mainstreamdata.com ([10.2.1.133]) by
 hedwig.slc.mainstreamdata.com ([10.2.1.133]) with mapi id 14.01.0355.002;
 Fri, 26 Oct 2012 17:54:15 -0600
From: Scott Smith <ssmith@mainstreamdata.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: lucene 4.0 indexReader is changed
Thread-Topic: lucene 4.0 indexReader is changed
Thread-Index: Ac2z1TKk0Q/hIP63S/KjfxiNs0tTxg==
Date: Fri, 26 Oct 2012 23:54:13 +0000
Message-ID: <B29111A755EFB5419E6C7BC998C6E86796EF70@hedwig.slc.mainstreamdata.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-originating-ip: [10.7.11.146]
Content-Type: multipart/alternative;
	boundary="_000_B29111A755EFB5419E6C7BC998C6E86796EF70hedwigslcmainstre_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_B29111A755EFB5419E6C7BC998C6E86796EF70hedwigslcmainstre_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

How do I determine if the index has been modified in 4.0? The ifchanged() a=
nd isChanged() appear to have been removed.

--_000_B29111A755EFB5419E6C7BC998C6E86796EF70hedwigslcmainstre_--

From java-user-return-53944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Oct 27 00:07:16 2012
Return-Path: <java-user-return-53944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2ED0FDC81
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat, 27 Oct 2012 00:07:16 +0000 (UTC)
Received: (qmail 13693 invoked by uid 500); 27 Oct 2012 00:07:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13651 invoked by uid 500); 27 Oct 2012 00:07:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13643 invoked by uid 99); 27 Oct 2012 00:07:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Oct 2012 00:07:14 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of SRS0=N5V4M3=IY=basetechnology.com=jack@yourhostingaccount.com designates 65.254.253.92 as permitted sender)
Received: from [65.254.253.92] (HELO mailout11.yourhostingaccount.com) (65.254.253.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Oct 2012 00:07:06 +0000
Received: from mailscan11.yourhostingaccount.com ([10.1.15.11] helo=mailscan11.yourhostingaccount.com)
	by mailout11.yourhostingaccount.com with esmtp (Exim)
	id 1TRtvJ-0004jg-DS
	for java-user@lucene.apache.org; Fri, 26 Oct 2012 20:06:45 -0400
Received: from impout01.yourhostingaccount.com ([10.1.55.1] helo=impout01.yourhostingaccount.com)
	by mailscan11.yourhostingaccount.com with esmtp (Exim)
	id 1TRtvJ-0005UM-5L
	for java-user@lucene.apache.org; Fri, 26 Oct 2012 20:06:45 -0400
Received: from authsmtp17.yourhostingaccount.com ([10.1.18.17])
	by impout01.yourhostingaccount.com with NO UCE
	id G06l1k0010N5tVm0106lVj; Fri, 26 Oct 2012 20:06:45 -0400
X-Authority-Analysis: v=2.0 cv=IICA+3TG c=1 sm=1
 a=PHQHB1QSaEYgcU2qnZkzMw==:17 a=aQzbgH187woA:10 a=-Tl-jN1BLv0A:10
 a=3jZET7lWBKwA:10 a=8nJEP1OIZ-IA:10 a=jvYhGVW7AAAA:8 a=x5uczWJPxGEA:10
 a=mV9VRH-2AAAA:8 a=FLRTJz8U0sFEPapLi0EA:9 a=wPNLvfGTeEIA:10 a=MZDBp7IvvTYA:10
 a=ayZJSlMgWVhgG3n+ZwULew==:117
X-EN-OrigOutIP: 10.1.18.17
X-EN-IMPSID: G06l1k0010N5tVm0106lVj
Received: from 207-237-102-116.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com ([207.237.102.116] helo=JackKrupansky)
	by authsmtp17.yourhostingaccount.com with esmtpa (Exim)
	id 1TRtvI-0005kR-RY
	for java-user@lucene.apache.org; Fri, 26 Oct 2012 20:06:45 -0400
Message-ID: <25F0783C4E284129AC2C432771BEF6BC@JackKrupansky>
From: "Jack Krupansky" <jack@basetechnology.com>
To: <java-user@lucene.apache.org>
References: <B29111A755EFB5419E6C7BC998C6E86796EF70@hedwig.slc.mainstreamdata.com>
In-Reply-To: <B29111A755EFB5419E6C7BC998C6E86796EF70@hedwig.slc.mainstreamdata.com>
Subject: Re: lucene 4.0 indexReader is changed
Date: Fri, 26 Oct 2012 20:06:40 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3555.308
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3555.308
X-EN-UserInfo: e0a4b55451ed9f27313ebf02e3d4348d:fc4a93e1349e680c52bdd723c0ab3ef6
X-EN-AuthUser: jack@basetechnology.com
Sender:  "Jack Krupansky" <jack@basetechnology.com>
X-EN-OrigIP: 207.237.102.116
X-EN-OrigHost: 207-237-102-116.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com
X-Virus-Checked: Checked by ClamAV on apache.org

How about DirectoryReader.html#openIfChanged?

See:
http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/index/DirectoryReader.html#openIfChanged(org.apache.lucene.index.DirectoryReader)

-- Jack Krupansky

-----Original Message----- 
From: Scott Smith
Sent: Friday, October 26, 2012 7:54 PM
To: java-user@lucene.apache.org
Subject: lucene 4.0 indexReader is changed

How do I determine if the index has been modified in 4.0? The ifchanged() 
and isChanged() appear to have been removed. 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Oct 27 02:53:38 2012
Return-Path: <java-user-return-53945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 14FE6DEEF
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat, 27 Oct 2012 02:53:38 +0000 (UTC)
Received: (qmail 47398 invoked by uid 500); 27 Oct 2012 02:53:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47134 invoked by uid 500); 27 Oct 2012 02:53:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47114 invoked by uid 99); 27 Oct 2012 02:53:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Oct 2012 02:53:35 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of fivemiletom@gmail.com designates 209.85.223.176 as permitted sender)
Received: from [209.85.223.176] (HELO mail-ie0-f176.google.com) (209.85.223.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Oct 2012 02:53:25 +0000
Received: by mail-ie0-f176.google.com with SMTP id k11so5351281iea.35
        for <java-user@lucene.apache.org>; Fri, 26 Oct 2012 19:53:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=QWEbhuC6TsMEvnzlZPT9ZrsRy0gAa6S27oBy9Yhzqkk=;
        b=Kz/+iQ3EejGlbVxBgdP3nCrsOvCSqr7oOvGF+OudLugKBMtckgXxYRwm5XPNQIOK08
         dalmRHoFBpkv2+u8qltxGexF8DXZTnMy/acrT9iexbIu78ebltmlTCs5t+FkE/tngVq4
         Zb/URpdR0vLAlG7Dy49cWFLYfbEnBKkD+AkGTcP8vzNx0BkcPWJ0VpwXA+jicX9NfMoH
         YWNeBXfk8wb1KO6hv6td2ZjvsAU/xkEixwPf77/xpsAqFOM0P2BhrFeoKOjyQn4TteWj
         pWaT9b65sUO9Z5YH3X2k9BjRig881mkU9AI16AJU1rRL/f95vcU/IKPaG1xZiU2MId/I
         FyfQ==
MIME-Version: 1.0
Received: by 10.50.57.234 with SMTP id l10mr4088185igq.18.1351306384700; Fri,
 26 Oct 2012 19:53:04 -0700 (PDT)
Received: by 10.42.163.195 with HTTP; Fri, 26 Oct 2012 19:53:04 -0700 (PDT)
Date: Fri, 26 Oct 2012 19:53:04 -0700
Message-ID: <CABGu7YsRe61m_xn_i8U6eLgTHbWL5GUHzdJsxUfBiMVKf3dt9A@mail.gmail.com>
Subject: international stop set?
From: Tom <fivemiletom@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=14dae93411170af6c604cd018967
X-Virus-Checked: Checked by ClamAV on apache.org

--14dae93411170af6c604cd018967
Content-Type: text/plain; charset=ISO-8859-1

Hello,

using Lucene 4.0.0b, I am trying to get a superset of all stop words (for
an international app).
I have looked around, and not found anything specific. Is this the way to
go?

CharArraySet internationalSet = new CharArraySet(Version.LUCENE_40, 10000,
false);
internationalSet.addAll(ArabicAnalyzer.getDefaultStopSet());
internationalSet.addAll(BulgarianAnalyzer.getDefaultStopSet());
...


Cheers
Tom

--14dae93411170af6c604cd018967--

From java-user-return-53946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Oct 27 03:35:32 2012
Return-Path: <java-user-return-53946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 08D09DF76
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat, 27 Oct 2012 03:35:32 +0000 (UTC)
Received: (qmail 10832 invoked by uid 500); 27 Oct 2012 03:35:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10644 invoked by uid 500); 27 Oct 2012 03:35:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10620 invoked by uid 99); 27 Oct 2012 03:35:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Oct 2012 03:35:28 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of trejkaz@trypticon.org designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vb0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Oct 2012 03:35:18 +0000
Received: by mail-vb0-f48.google.com with SMTP id e21so4262941vbm.35
        for <java-user@lucene.apache.org>; Fri, 26 Oct 2012 20:34:57 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:x-gm-message-state;
        bh=00SUUjKH7nOYp09rB3o1EVYVbzWpoJ7D9GX8DK+Bt1o=;
        b=F48SFP8SrBUSrutufL2A8QGdm42W9QldJltUr25jDCJYvZbCEHn3M3BGpWmnhoLFbO
         e0AlDs6gpYqdYqO6TRrko4XljhRPOFYXUnv0fo5PMB6J8bghLV6JFG5tDAUpWP2gFf/w
         fw9g8Jt35plSDKrjAMae8Lhpb3RUW6Wmu6+SEF//rSQq8cvGTrv94TdnXkw5VsdZV664
         QniUiJcTkyzEhlurp37U7odsc2qwAl1waQD/mRspOw2EepLmg1f3tSSJDccOaSQdHbvy
         rvhPUBNztsy0Nu/zcfNDDEqINYe8jjxF0bNFyXUhGo4GeOkpI88tlg/xfkY5L5TQbe6T
         XJgA==
Received: by 10.52.98.196 with SMTP id ek4mr32570549vdb.38.1351308897834;
        Fri, 26 Oct 2012 20:34:57 -0700 (PDT)
Received: from mail-vc0-f176.google.com (mail-vc0-f176.google.com [209.85.220.176])
        by mx.google.com with ESMTPS id x4sm1927722vdh.13.2012.10.26.20.34.56
        (version=SSLv3 cipher=OTHER);
        Fri, 26 Oct 2012 20:34:57 -0700 (PDT)
Received: by mail-vc0-f176.google.com with SMTP id gb22so1911038vcb.35
        for <java-user@lucene.apache.org>; Fri, 26 Oct 2012 20:34:56 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.52.179.2 with SMTP id dc2mr32183781vdc.50.1351308896739; Fri,
 26 Oct 2012 20:34:56 -0700 (PDT)
Received: by 10.58.249.198 with HTTP; Fri, 26 Oct 2012 20:34:56 -0700 (PDT)
In-Reply-To: <CABGu7YsRe61m_xn_i8U6eLgTHbWL5GUHzdJsxUfBiMVKf3dt9A@mail.gmail.com>
References: <CABGu7YsRe61m_xn_i8U6eLgTHbWL5GUHzdJsxUfBiMVKf3dt9A@mail.gmail.com>
Date: Sat, 27 Oct 2012 14:34:56 +1100
Message-ID: <CADuAvzd14SFtBMHMe6_p_7SpVqP_PxbcwWGY5V2c2dXrsMR3Jg@mail.gmail.com>
Subject: Re: international stop set?
From: Trejkaz <trejkaz@trypticon.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Gm-Message-State: ALoCoQkzenlCiPA2nWhYA/zuZ+p8M5p4YMZvJxawIcZ87OptAYg9lsuBuymmGmMUPiPGeyq0d2+p
X-Virus-Checked: Checked by ClamAV on apache.org

On Sat, Oct 27, 2012 at 1:53 PM, Tom <fivemiletom@gmail.com> wrote:
> Hello,
>
> using Lucene 4.0.0b, I am trying to get a superset of all stop words (for
> an international app).
> I have looked around, and not found anything specific. Is this the way to go?
>
> CharArraySet internationalSet = new CharArraySet(Version.LUCENE_40, 10000, false);
> internationalSet.addAll(ArabicAnalyzer.getDefaultStopSet());
> internationalSet.addAll(BulgarianAnalyzer.getDefaultStopSet());

This seems like a bad idea because you're going to eventually hit a
word which is a stop word in one language which is important for
someone in another. Even working solely in English, it didn't take us
long to find a stop word which one user actually wanted to search
for...

For international purposes, I would just avoid using stop words.
You're going to have more than enough pain just coming up with a
sensible analysis path (advance warning: in any given language people
will complain about some feature in StandardAnalyzer.)

I assume people still recommend one field per language with a
different analyser on each, which pushes the problem to query
generation time (how the user specifies which language they're
searching for.)

TX

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Oct 27 08:43:59 2012
Return-Path: <java-user-return-53947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7436AD45F
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat, 27 Oct 2012 08:43:59 +0000 (UTC)
Received: (qmail 36478 invoked by uid 500); 27 Oct 2012 08:43:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36411 invoked by uid 500); 27 Oct 2012 08:43:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36393 invoked by uid 99); 27 Oct 2012 08:43:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Oct 2012 08:43:56 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of fivemiletom@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qc0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Oct 2012 08:43:49 +0000
Received: by mail-qc0-f176.google.com with SMTP id n41so1991190qco.35
        for <java-user@lucene.apache.org>; Sat, 27 Oct 2012 01:43:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=B+fbeBNycfPkhAFmk6BQV3Pe+ar7PTyTJnVy4Up+8nQ=;
        b=pThAVfj2q2Q9EXBrBR/KMmtd4x7WmRpqkXO6amiD+9xrWaOI6Y2Nsrey6KYqQf36Zl
         mOMuRR5Od/Robt/QkgihJUn4XB4nZ6P8MwDsDKHoD6XqhGSzXfTKhNpcm/wxuCpf7uiQ
         XfLfiQN1OZk0w223IpF2Wz187VITnDdISxrqU9G4z8nZ3jLjb+VHksPW3L6o93Nq/cqn
         Z0ffuRXhKFdyx10FN66yuk4ooJUujcnIYhM6LpOtq4SQb3D7eYNNGLfumagheQYyg7r/
         LNR06L8MynpgnD0fl0PboOmjUvVoBfpSb/JFGqWUalKR7Il1zdTFDALLxLrR1Mn0SfkA
         AKeg==
MIME-Version: 1.0
Received: by 10.49.71.77 with SMTP id s13mr16566862qeu.17.1351327408826; Sat,
 27 Oct 2012 01:43:28 -0700 (PDT)
Received: by 10.49.110.70 with HTTP; Sat, 27 Oct 2012 01:43:28 -0700 (PDT)
In-Reply-To: <CADuAvzd14SFtBMHMe6_p_7SpVqP_PxbcwWGY5V2c2dXrsMR3Jg@mail.gmail.com>
References: <CABGu7YsRe61m_xn_i8U6eLgTHbWL5GUHzdJsxUfBiMVKf3dt9A@mail.gmail.com>
	<CADuAvzd14SFtBMHMe6_p_7SpVqP_PxbcwWGY5V2c2dXrsMR3Jg@mail.gmail.com>
Date: Sat, 27 Oct 2012 01:43:28 -0700
Message-ID: <CABGu7YtGBfyOxGi1xBRVH9EPvBVZqUmyyqPncu7oQz3+UapsNg@mail.gmail.com>
Subject: Re: international stop set?
From: Tom <fivemiletom@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=047d7b6da4cc2da7fc04cd066ebb
X-Virus-Checked: Checked by ClamAV on apache.org

--047d7b6da4cc2da7fc04cd066ebb
Content-Type: text/plain; charset=ISO-8859-1

On Fri, Oct 26, 2012 at 8:34 PM, Trejkaz <trejkaz@trypticon.org> wrote:

> On Sat, Oct 27, 2012 at 1:53 PM, Tom <fivemiletom@gmail.com> wrote:
> > Hello,
> >
> > using Lucene 4.0.0b, I am trying to get a superset of all stop words (for
> > an international app).
> > I have looked around, and not found anything specific. Is this the way
> to go?
> >
> > CharArraySet internationalSet = new CharArraySet(Version.LUCENE_40,
> 10000, false);
> > internationalSet.addAll(ArabicAnalyzer.getDefaultStopSet());
> > internationalSet.addAll(BulgarianAnalyzer.getDefaultStopSet());
>
> This seems like a bad idea because you're going to eventually hit a
> word which is a stop word in one language which is important for
> someone in another. Even working solely in English, it didn't take us
> long to find a stop word which one user actually wanted to search
> for...
>
> For international purposes, I would just avoid using stop words.
> You're going to have more than enough pain just coming up with a
> sensible analysis path (advance warning: in any given language people
> will complain about some feature in StandardAnalyzer.)
>
> I assume people still recommend one field per language with a
> different analyser on each, which pushes the problem to query
> generation time (how the user specifies which language they're
> searching for.)
>

Thanks TX.
Aha! Exactly the problem! And only because the user-agent is one language,
doesn't mean all search terms will be!
For example, someone might type in the name of an English event (such as
Halloween) first, and then type in the name of their home town second. See
if there are any matches of how this event is celebrated there. Very likely
that the home town will be in the native language, even if the user-agent
or the first search term isn't.



> TX
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--047d7b6da4cc2da7fc04cd066ebb--

From java-user-return-53948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Oct 27 19:45:08 2012
Return-Path: <java-user-return-53948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6ADD4DC4D
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat, 27 Oct 2012 19:45:08 +0000 (UTC)
Received: (qmail 48131 invoked by uid 500); 27 Oct 2012 19:45:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48065 invoked by uid 500); 27 Oct 2012 19:45:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48057 invoked by uid 99); 27 Oct 2012 19:45:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Oct 2012 19:45:05 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.138.229.135] (HELO nm37-vm7.bullet.mail.ne1.yahoo.com) (98.138.229.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Oct 2012 19:44:55 +0000
Received: from [98.138.90.55] by nm37.bullet.mail.ne1.yahoo.com with NNFMP; 27 Oct 2012 19:44:34 -0000
Received: from [98.138.89.166] by tm8.bullet.mail.ne1.yahoo.com with NNFMP; 27 Oct 2012 19:44:34 -0000
Received: from [127.0.0.1] by omp1022.mail.ne1.yahoo.com with NNFMP; 27 Oct 2012 19:44:34 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 612703.69771.bm@omp1022.mail.ne1.yahoo.com
Received: (qmail 83644 invoked by uid 60001); 27 Oct 2012 19:44:34 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1351367074; bh=1mmwGTXCKp1O183BbDg/d+saWS/ti9tXaNnhOfjzUDw=; h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type; b=sm7pSxHKPhCtyoiafbzVcRf+F0RoWOkQc33ajLmsyN5QYQ3Ywqc/vM7I2hl7Zeh/N/caDOxeaU6ca1nqHqJXob/3BKOpGdeorjgjnQktE9ufmuSWML1wHNrxmBEu9C4yyk50r+iCtiO0EoMh7h/1jtnv3sxNFfAINpnuDo7K9Yg=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type;
  b=vwHAbNbc3BVK0EGyn0ZSNMqKujwd/bucgaVEXxfseCbrCdvRFGHzqZptj6Kp3JMgxzIP+sgvgzaY5jE6u/kSuzPE2kVM7KB1efrU2tMtd3jf1pR1o7TeoGjibPe+JDcjNdbcnQNkymnTTKxV/OGQiL9KSyJJOeWsSHnFW1EWutg=;
X-YMail-OSG: yVgyANUVM1m.7EwhnhNg5Dgj_pTrL57wEPnBnmBUGv8P3n3
 .0DIqbA6aG2sK.GBX1_adMoa5nOpgTZUTe2XdME8dv0nR9y2KBJ3dZylNSPr
 OJopfUHfKxa63MjMdtNW3qTk2vhpNxYe9mOLqjREn4KcvHdoaqMVx4_mDY4t
 L7LhRS5_E_f67CewkYnl0561jcD14ZkwwIMpO5W63lYe9acNXnaVYnRuvknD
 CDEhoVTBoFFUxZh9COeYpf_Qop.wrRXdcgsu4HK8JVj1SUE74WImuApuUmJz
 sGEmgTeJI8DbRzJPVdYdaSrXj4Kkq6muOhX9EVftfjdP4eyDEQVpiTOkqHOC
 cJq0pxSRtShBu_BN3FFc5wqtpk2LNMOvIrZxhNkfwiLiwvcARKnDgTg0WJRY
 YDh1if45_hOE3IOZVfFuRzcAKqw9Nq8Yu5QqJpEmc4iKI9XdUpSfZ0eS5brg
 eBJ0ZGafWcNzL2.XR72j4ULpDufSE7J67vzpsWXgZ8SWZMbmJfLk-
Received: from [90.193.174.140] by web120703.mail.ne1.yahoo.com via HTTP; Sat, 27 Oct 2012 12:44:34 PDT
X-Rocket-MIMEInfo: 001.001,SGkgZ3V5cywKCkkndmUgcmVjZW50bHkgbW92ZWQgZnJvbSBsdWNlbmUgMi4zIHRvIDMuNi4gVGhlIGFwcGxpY2F0aW9uIHVzZXMgQ0YgZm9ybWF0LiBXaXRoIGx1Y2VuZSAyLjMsIEkgdW5kZXJzdG9vZCB0aGUgaW50ZXJhY3Rpb24gb2YgbWVyZ2UgZmFjdG9yIGV0YyB3aXRoIHJlcGVjdCB0byBob3cgbWFueSBmaWxlcyB3ZXJlIGNyZWF0ZWQgaW4gdGhlIGluZGV4IGRpcmVjdG9yeS4gV2l0aCBhIG1lcmdlIGZhY3RvciBvZiAxMCwgdGhlIG51bWJlciBvZiBmaWxlcyBpbiB0aGUgaW5kZXggZGlyZWN0b3J5IGMBMAEBAQE-
X-Mailer: YahooMailWebService/0.8.123.450
Message-ID: <1351367074.65440.YahooMailNeo@web120703.mail.ne1.yahoo.com>
Date: Sat, 27 Oct 2012 12:44:34 -0700 (PDT)
From: kiwi clive <kiwi_clive@yahoo.com>
Reply-To: kiwi clive <kiwi_clive@yahoo.com>
Subject: A large number of files in an index (3.6)
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="-1480336445-1126107172-1351367074=:65440"
X-Virus-Checked: Checked by ClamAV on apache.org

---1480336445-1126107172-1351367074=:65440
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hi guys,=0A=0AI've recently moved from lucene 2.3 to 3.6. The application u=
ses CF format. With lucene 2.3, I understood the interaction of merge facto=
r etc with repect to how many files were created in the index directory. Wi=
th a merge factor of 10, the number of files in the index directory could s=
ometimes get up to 30, but you can see the merging happen and=A0 the numebe=
r of files would roll up after a while and settle around 10-15. =0A=0A=0AWi=
th lucene 3.6, this is not the case. Firstly, even with MergePolicy set to =
useCFS, the index appears to be a hybrid of cfs and raw index format. I can=
 understand that may have been done for performance reasons, but it does in=
crease the file count considerably. Also the rollup of the merged segments =
is not occurring as it did on the previous version.=A0 Originally I set the=
 CFSRatio to 1.0 and found the behaviour similar to lucene2.3 (file number =
wise) but this came at a i/o cost and the machines ran with a higher load a=
verage. The higher i/o starts to affect query performance.=A0 Reducing cfsR=
atio to 0.1 (default), helped reduce i/o load but I=A0 am running several t=
housand concurrent indexes across many disks on the=A0 servers and the larg=
er number of files per index means a large number of files are being opened=
 when a query hits the index, in addition to the indexing load.=0A=0AI'm su=
re this is probably down to Merge policies and schedules, but there are qui=
te a few knobs to tweak here so some guidance as to the the most beneficial=
 parameters to tweak would be very helpful.=0A=0AI'm using the LogByteSizeM=
ergePolicy with 3 background merge threads. I'm considering using TieredMer=
gePolicy and even reducing the number of merge threads, but there is not mu=
ch point if it does not roll up the segments as expected. I can tweak with =
the cfsRatio but this strikes me a large hammer and there may be more subtl=
e ways to do this !=0A=0ASo tell me I'm being stupid, just say 'derr- why d=
ont you do this....' and I'll be a happy man!!=0A=0AThanks,=0AClive
---1480336445-1126107172-1351367074=:65440--

From java-user-return-53949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Oct 28 05:42:01 2012
Return-Path: <java-user-return-53949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 332ECD31F
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 28 Oct 2012 05:42:01 +0000 (UTC)
Received: (qmail 51238 invoked by uid 500); 28 Oct 2012 05:41:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50264 invoked by uid 500); 28 Oct 2012 05:41:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50211 invoked by uid 99); 28 Oct 2012 05:41:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Oct 2012 05:41:50 +0000
X-ASF-Spam-Status: No, hits=4.0 required=5.0
	tests=DATE_IN_PAST_06_12,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_HELO_PASS,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.227.126.187] (HELO moutng.kundenserver.de) (212.227.126.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Oct 2012 05:41:41 +0000
Received: from [192.168.1.128] (87-151-146.netrun.cytanet.com.cy [87.228.151.146])
	by mrelayeu.kundenserver.de (node=mrbap1) with ESMTP (Nemesis)
	id 0MNO13-1TUqaQ0S2j-006vtD; Sun, 28 Oct 2012 06:41:20 +0100
From: Paul Libbrecht <paul@hoplahup.net>
Mime-Version: 1.0 (Apple Message framework v1085)
Content-Type: multipart/alternative; boundary=Apple-Mail-29--603517621
Subject: Re: international stop set?
Date: Sat, 27 Oct 2012 22:23:56 +0300
In-Reply-To: <CABGu7YtGBfyOxGi1xBRVH9EPvBVZqUmyyqPncu7oQz3+UapsNg@mail.gmail.com>
To: java-user@lucene.apache.org
References: <CABGu7YsRe61m_xn_i8U6eLgTHbWL5GUHzdJsxUfBiMVKf3dt9A@mail.gmail.com> <CADuAvzd14SFtBMHMe6_p_7SpVqP_PxbcwWGY5V2c2dXrsMR3Jg@mail.gmail.com> <CABGu7YtGBfyOxGi1xBRVH9EPvBVZqUmyyqPncu7oQz3+UapsNg@mail.gmail.com>
Message-Id: <0464D3D0-A843-4160-99D3-13186F3C9C6C@hoplahup.net>
X-Mailer: Apple Mail (2.1085)
X-Provags-ID: V02:K0:DL0rW+gyOnzNB5DB8wLg4benw6RAmgTBJCaWDcYkoVc
 w75WUZ2mYCFZyc5BFP8+uCeSVwW1JjmxJ/yrLcMpXS9mcDkHQ0
 FjOTIVkmC/NBuzTmYI7LonjczVheo7ZTA0Sky4CyF6HtHUYtQ1
 HtcicSmnw5eoEods+AH7E4a095z2ZWqfJrgVerFUJzs0lZ8zC5
 hP6s0uV14LLczu7MUTxh4tlFDAkIdDbBdwVqjpQmBlVpEgdD06
 WGT9TGjtKaIjh0nMBH0b/5P0p7GT3i7jrI2BdZUCTb7vttlkgq
 0TI5iYN4UCuVcU9BzmeNUGawIWE8GMbDZ3UQbe3J/fzEgjFhJL
 dbss42IIdWY4bIGHzUzi/Tap6n4gLecOffa7ytUTsubmv1107Y
 xvc/pqL/a0YtQ==
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-29--603517621
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=iso-8859-1


Le 27 oct. 2012 =E0 11:43, Tom a =E9crit :

> Aha! Exactly the problem! And only because the user-agent is one =
language,
> doesn't mean all search terms will be!
> For example, someone might type in the name of an English event (such =
as
> Halloween) first, and then type in the name of their home town second. =
See
> if there are any matches of how this event is celebrated there. Very =
likely
> that the home town will be in the native language, even if the =
user-agent
> or the first search term isn't.

Tom,
the Accept-Language header is far richer than a single language.
Using this really powers you up quite much into expanding into a useful =
set of available languages.

Also, you could use the whitespace tokenizer as a simple analyzer for an =
"exact" field.

paul=

--Apple-Mail-29--603517621--

From java-user-return-53950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Oct 28 21:25:19 2012
Return-Path: <java-user-return-53950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C18F8D88D
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 28 Oct 2012 21:25:19 +0000 (UTC)
Received: (qmail 90618 invoked by uid 500); 28 Oct 2012 21:25:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90528 invoked by uid 500); 28 Oct 2012 21:25:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90520 invoked by uid 99); 28 Oct 2012 21:25:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Oct 2012 21:25:16 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of martijn.is.hier@gmail.com designates 209.85.219.48 as permitted sender)
Received: from [209.85.219.48] (HELO mail-oa0-f48.google.com) (209.85.219.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Oct 2012 21:25:11 +0000
Received: by mail-oa0-f48.google.com with SMTP id h2so4895091oag.35
        for <java-user@lucene.apache.org>; Sun, 28 Oct 2012 14:24:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:sender:in-reply-to:references:from:date
         :x-google-sender-auth:message-id:subject:to:content-type;
        bh=HFNfommeDo9V7vXEGoLDgy0Wh0ut4IsHllEySFh/mo4=;
        b=K4tABGDhs/OZEHSdx9fol2etMlI1TNBjzAB/cWeRrE+z8YpW41uzvYQtJHPRgaLQja
         Dqc+P8oe0rMJusk+vHh7AVDfP1V3OLL+0H42fmAOUqGh5BF4V4/nz7nac6HsI3i1OVkw
         INwwpavSPerZ9AOkIYX16OhEuNs2IgelkltoF8A+AxCJ/AERMMG5QcHoRKUbS31QhLMv
         om+xLEQ9YAe844QtF1EUEO6TRi6Ou4L9zHhX2K8m2j956PpP7rQaXpNiGH8TKJKagnDN
         nZA/8QG69RoVm9N8hu+OPejUYbvGsPUm9wD9EhV8gikwJbDmSkjBm7YbfEyzfgAen15P
         pJZg==
Received: by 10.60.170.43 with SMTP id aj11mr25219858oec.71.1351459490135;
 Sun, 28 Oct 2012 14:24:50 -0700 (PDT)
MIME-Version: 1.0
Sender: martijn.is.hier@gmail.com
Received: by 10.182.127.38 with HTTP; Sun, 28 Oct 2012 14:24:29 -0700 (PDT)
In-Reply-To: <CAG0hk_8SzJ69-xdnx+WqsrsAZrAVi4jEpKOX+Dy6pTJTrC9rbA@mail.gmail.com>
References: <B29111A755EFB5419E6C7BC998C6E86796EE6C@hedwig.slc.mainstreamdata.com>
 <CAG0hk_8SzJ69-xdnx+WqsrsAZrAVi4jEpKOX+Dy6pTJTrC9rbA@mail.gmail.com>
From: Martijn v Groningen <martijn.v.groningen@gmail.com>
Date: Sun, 28 Oct 2012 22:24:29 +0100
X-Google-Sender-Auth: 0kf4rXQGHkX3NlskUHgjjZ5qF6I
Message-ID: <CA+A76Txwdr1cYms86bEahtdR3nJEq3bFkpAFD8TdajPBvq4ysw@mail.gmail.com>
Subject: Re: Lucene 4.0 delete by ID
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

A top level document ID can change over time. For that reason you
shouldn't rely on it. However if you know your index is stable or you
keep track when a merge happes, you can use the
IndexWriter#tryDeleteDocument method to delete a document by Lucene
id. Deleting a document via a IndexReader is no longer possible.

Martijn

On 27 October 2012 01:47, Mossaab Bagdouri <bagdouri_mossaab@yahoo.fr> wrote:
> Lucene document IDs are not stable. You could add a field with an ID that
> you maintain. Your query would then be just a TermQuery on the ID.
>
> Regards,
> Mossaab
>
>
> 2012/10/26 Scott Smith <ssmith@mainstreamdata.com>
>
>> I'm currently converting some lucene code to 4.0.  It appears that you are
>> no longer allowed to delete a document by its ID.  Is that correct?  Is my
>> only option to figure some kind of query (which obviously isn't based on
>> ID) and do the delete from there?
>>



-- 
Met vriendelijke groet,

Martijn van Groningen

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Oct 28 23:09:41 2012
Return-Path: <java-user-return-53951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AB201D21D
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 28 Oct 2012 23:09:41 +0000 (UTC)
Received: (qmail 359 invoked by uid 500); 28 Oct 2012 23:09:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 286 invoked by uid 500); 28 Oct 2012 23:09:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 228 invoked by uid 99); 28 Oct 2012 23:09:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Oct 2012 23:09:35 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of goksron@gmail.com designates 209.85.210.48 as permitted sender)
Received: from [209.85.210.48] (HELO mail-da0-f48.google.com) (209.85.210.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Oct 2012 23:09:29 +0000
Received: by mail-da0-f48.google.com with SMTP id z8so2137864dad.35
        for <java-user@lucene.apache.org>; Sun, 28 Oct 2012 16:09:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=date:from:to:message-id:in-reply-to:subject:mime-version
         :content-type:content-transfer-encoding;
        bh=bMbIqDfXb272GYhFoFrzp++roK3WZfLn983IZdN9LgQ=;
        b=mz3B+aIuJdkbytF148N7K8MP3FzR/UR0y4FxJoP3hLOpdi95FWa1Ki/V615TMKTjaQ
         U19fYD7KQjTTbY2US92NW86WCW6lWj1psmFdD+gikTwX+I1EsBs8bi4rTZdn68agKkKy
         01t5f693A5ATbNIWXxze3/uJFHg8WT3O/Yy6SQ5QNWTg47zM5eYgFQraWqRPFRioSJPC
         H3hgS/pUdR96p7lwJ7NjdWNXA4r/r46mSpU7AvSP1Uf1GN6E5GLOb1wijVCtsyYJwrdO
         hxlxSKsYLHU7OWbdVfRTaM0gJZWOc7SRrwo3gDh7q5JPmxdhmnbuGgELL+w8p6k7ptEi
         zBVA==
Received: by 10.68.138.198 with SMTP id qs6mr88556919pbb.151.1351465747970;
        Sun, 28 Oct 2012 16:09:07 -0700 (PDT)
Received: from localhost (c-24-4-120-44.hsd1.ca.comcast.net. [24.4.120.44])
        by mx.google.com with ESMTPS id rw5sm4903405pbc.54.2012.10.28.16.09.06
        (version=SSLv3 cipher=OTHER);
        Sun, 28 Oct 2012 16:09:07 -0700 (PDT)
Date: Sun, 28 Oct 2012 16:09:05 -0700 (PDT)
From: Lance Norskog <goksron@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <7296586.59.1351462622560.JavaMail.lancenorskog@Lance-Norskogs-MacBook-Pro.local>
In-Reply-To: <CA+A76Txwdr1cYms86bEahtdR3nJEq3bFkpAFD8TdajPBvq4ysw@mail.gmail.com>
Subject: Re: Lucene 4.0 delete by ID
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Scott, did you mean the Lucene integer id, or the unique id field?

----- Original Message -----
| From: "Martijn v Groningen" <martijn.v.groningen@gmail.com>
| To: java-user@lucene.apache.org
| Sent: Sunday, October 28, 2012 2:24:29 PM
| Subject: Re: Lucene 4.0 delete by ID
| 
| A top level document ID can change over time. For that reason you
| shouldn't rely on it. However if you know your index is stable or you
| keep track when a merge happes, you can use the
| IndexWriter#tryDeleteDocument method to delete a document by Lucene
| id. Deleting a document via a IndexReader is no longer possible.
| 
| Martijn
| 
| On 27 October 2012 01:47, Mossaab Bagdouri
| <bagdouri_mossaab@yahoo.fr> wrote:
| > Lucene document IDs are not stable. You could add a field with an
| > ID that
| > you maintain. Your query would then be just a TermQuery on the ID.
| >
| > Regards,
| > Mossaab
| >
| >
| > 2012/10/26 Scott Smith <ssmith@mainstreamdata.com>
| >
| >> I'm currently converting some lucene code to 4.0.  It appears that
| >> you are
| >> no longer allowed to delete a document by its ID.  Is that
| >> correct?  Is my
| >> only option to figure some kind of query (which obviously isn't
| >> based on
| >> ID) and do the delete from there?
| >>
| 
| 
| 
| --
| Met vriendelijke groet,
| 
| Martijn van Groningen
| 
| ---------------------------------------------------------------------
| To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
| For additional commands, e-mail: java-user-help@lucene.apache.org
| 
| 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Oct 28 23:09:44 2012
Return-Path: <java-user-return-53952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 46253D21E
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 28 Oct 2012 23:09:44 +0000 (UTC)
Received: (qmail 2288 invoked by uid 500); 28 Oct 2012 23:09:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2220 invoked by uid 500); 28 Oct 2012 23:09:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2189 invoked by uid 99); 28 Oct 2012 23:09:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Oct 2012 23:09:38 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of goksron@gmail.com designates 209.85.210.48 as permitted sender)
Received: from [209.85.210.48] (HELO mail-da0-f48.google.com) (209.85.210.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Oct 2012 23:09:30 +0000
Received: by mail-da0-f48.google.com with SMTP id z8so2137870dad.35
        for <java-user@lucene.apache.org>; Sun, 28 Oct 2012 16:09:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=date:from:to:message-id:in-reply-to:subject:mime-version
         :content-type:content-transfer-encoding;
        bh=klpccqNQQnkt1y5S1z160v54MmK8SLAFUtOx7ttxnms=;
        b=VUnYhilzWigFshK/ri60jqht9lpHV4JrN1HU5Nysrn+n/ony10ar0aMaD/yVeH6+jo
         Y6IlmKIo9W0+TTpm7IsNuRuzaWZAPdXr5tNNyKnKUOLFMyLpUIL86csAACpB+pMNZ6k6
         Ook8OQJw4LYYsGTpZ0AAT8WhWjzrZ4NjVfYCCEkriGGo2vOobS0o/8UsGy8VftZqZlj/
         mLUHsHHoRcl6LIiBJ1KRlmEjEkuroWwKVpAM6puIIJtVJFRF7MfdkXm/CRZQr3eiGkjP
         2NPjzCQjQeIzNmT99RWZNm5agyopI3+hjAmtf8lY2JSVbIJNLWGv+ZRjrNUnKi0456nL
         HxaQ==
Received: by 10.66.81.199 with SMTP id c7mr78851594pay.19.1351465749788;
        Sun, 28 Oct 2012 16:09:09 -0700 (PDT)
Received: from localhost (c-24-4-120-44.hsd1.ca.comcast.net. [24.4.120.44])
        by mx.google.com with ESMTPS id tm8sm1860640pbc.48.2012.10.28.16.09.08
        (version=SSLv3 cipher=OTHER);
        Sun, 28 Oct 2012 16:09:09 -0700 (PDT)
Date: Sun, 28 Oct 2012 16:09:07 -0700 (PDT)
From: Lance Norskog <goksron@gmail.com>
To: java-user@lucene.apache.org, kiwi clive <kiwi_clive@yahoo.com>
Message-ID: <10373568.37.1351462292652.JavaMail.lancenorskog@Lance-Norskogs-MacBook-Pro.local>
In-Reply-To: <1351367074.65440.YahooMailNeo@web120703.mail.ne1.yahoo.com>
Subject: Re: A large number of files in an index (3.6)
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

An option: instead of merging continuously as you run, you can optimize wit=
h 'maxSegments=3D10'. This mean 'optimize but only until there are 10 segme=
nts'. If there are fewer than 10 segments, nothing happens. This lets you s=
chedule merging I/O.

Is the number of files a problem due to file space breakage?

----- Original Message -----
| From: "kiwi clive" <kiwi_clive@yahoo.com>
| To: java-user@lucene.apache.org
| Sent: Saturday, October 27, 2012 12:44:34 PM
| Subject: A large number of files in an index (3.6)
|=20
| Hi guys,
|=20
| I've recently moved from lucene 2.3 to 3.6. The application uses CF
| format. With lucene 2.3, I understood the interaction of merge
| factor etc with repect to how many files were created in the index
| directory. With a merge factor of 10, the number of files in the
| index directory could sometimes get up to 30, but you can see the
| merging happen and=C2=A0 the numeber of files would roll up after a while
| and settle around 10-15.
|=20
|=20
| With lucene 3.6, this is not the case. Firstly, even with MergePolicy
| set to useCFS, the index appears to be a hybrid of cfs and raw index
| format. I can understand that may have been done for performance
| reasons, but it does increase the file count considerably. Also the
| rollup of the merged segments is not occurring as it did on the
| previous version.=C2=A0 Originally I set the CFSRatio to 1.0 and found
| the behaviour similar to lucene2.3 (file number wise) but this came
| at a i/o cost and the machines ran with a higher load average. The
| higher i/o starts to affect query performance.=C2=A0 Reducing cfsRatio to
| 0.1 (default), helped reduce i/o load but I=C2=A0 am running several
| thousand concurrent indexes across many disks on the=C2=A0 servers and
| the larger number of files per index means a large number of files
| are being opened when a query hits the index, in addition to the
| indexing load.
|=20
| I'm sure this is probably down to Merge policies and schedules, but
| there are quite a few knobs to tweak here so some guidance as to the
| the most beneficial parameters to tweak would be very helpful.
|=20
| I'm using the LogByteSizeMergePolicy with 3 background merge threads.
| I'm considering using TieredMergePolicy and even reducing the number
| of merge threads, but there is not much point if it does not roll up
| the segments as expected. I can tweak with the cfsRatio but this
| strikes me a large hammer and there may be more subtle ways to do
| this !
|=20
| So tell me I'm being stupid, just say 'derr- why dont you do
| this....' and I'll be a happy man!!
|=20
| Thanks,
| Clive

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct 29 07:22:55 2012
Return-Path: <java-user-return-53953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B0A29DBE9
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 29 Oct 2012 07:22:55 +0000 (UTC)
Received: (qmail 85260 invoked by uid 500); 29 Oct 2012 07:22:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85020 invoked by uid 500); 29 Oct 2012 07:22:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84987 invoked by uid 99); 29 Oct 2012 07:22:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Oct 2012 07:22:51 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of alghoshal@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qa0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Oct 2012 07:22:44 +0000
Received: by mail-qa0-f48.google.com with SMTP id c11so1550336qad.14
        for <multiple recipients>; Mon, 29 Oct 2012 00:22:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=RsJQ0R9DYD1Oz5Dg90fu6OfofeiPPwb/R9y2QN/n5rw=;
        b=EfQOv38InZRPwO+qvcVd4x1KyDYVyVyxYsLNtxG7RrO1YvhzTM6M+vTagSnGAdcRdm
         Xf4W1CK6+8VRiKaeH1cqdk3hZCzc8xkArlqBZkEpLICxGAF3Pr4jQVYdIIaP6NfzQ4I1
         OswELuxJHPlsbVGskKpC5VgeweM/1Qye+EBOglzYvdrvtoMQKHgINYoHQNQzZbabnr7q
         B3c8eqpGlz50XrYQUofXNIkcaoab/DyoJ1NmoQIoyZJ+ysB/b2QYJ5BD0WsQhc+lkGVB
         m481f2v6VY0ploFh0FgM4JnWA6vln780NbvMZY9ZWigFmSFMFlCn9lnnneYHvTVBeiyj
         QL3w==
MIME-Version: 1.0
Received: by 10.49.4.65 with SMTP id i1mr21355802qei.51.1351495342998; Mon, 29
 Oct 2012 00:22:22 -0700 (PDT)
Received: by 10.49.97.164 with HTTP; Mon, 29 Oct 2012 00:22:22 -0700 (PDT)
Date: Mon, 29 Oct 2012 12:52:22 +0530
Message-ID: <CAHT6S2Yg=CsUFjUO9BafHLOwa-6x43k=W5PpaB-5DFt9ovHjNQ@mail.gmail.com>
Subject: Running Solr Core/ Tika on Azure
From: Aloke Ghoshal <alghoshal@gmail.com>
To: java-user@lucene.apache.org, general@lucene.apache.org
Content-Type: multipart/alternative; boundary=047d7bdc09eed5c4a604cd2d8776
X-Virus-Checked: Checked by ClamAV on apache.org

--047d7bdc09eed5c4a604cd2d8776
Content-Type: text/plain; charset=ISO-8859-1

Hi,

Looking for feedback on running Solr Core/ Tika parsing engine on Azure.
There's one offering for Solr within Azure from Lucid works. This offering
however doesn't mention Tika.

We are looking at options to make content from files (doc, excel, pdfs,
etc.) stored within Azure storage search-able. And whether the parser could
run against our Azure store directly to index the content. The other option
could be to write a separate connector that streams in the files. Let me
know if you have experience along these lines.

Regards,
Aloke

--047d7bdc09eed5c4a604cd2d8776--

From java-user-return-53954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct 29 12:41:22 2012
Return-Path: <java-user-return-53954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5BE9ED224
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 29 Oct 2012 12:41:22 +0000 (UTC)
Received: (qmail 72665 invoked by uid 500); 29 Oct 2012 12:41:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71843 invoked by uid 500); 29 Oct 2012 12:41:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71805 invoked by uid 99); 29 Oct 2012 12:41:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Oct 2012 12:41:15 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [193.196.8.10] (HELO linux3.ids-mannheim.de) (193.196.8.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Oct 2012 12:41:10 +0000
Received: from linux2.ids-mannheim.de ([10.0.1.1])
	by linux3.ids-mannheim.de with smtp (Exim 4.72)
	(envelope-from <schnober@ids-mannheim.de>)
	id 1TSoe8-0007iv-3m
	for java-user@lucene.apache.org; Mon, 29 Oct 2012 13:40:48 +0100
Received: (qmail 28055 invoked from network); 29 Oct 2012 12:40:47 -0000
Received: from unknown (HELO ?10.99.1.49?) (10.99.1.49)
  by linux2.ids-mannheim.de with SMTP; 29 Oct 2012 12:40:47 -0000
Message-ID: <508E794F.20101@ids-mannheim.de>
Date: Mon, 29 Oct 2012 13:40:47 +0100
From: Carsten Schnober <schnober@ids-mannheim.de>
Organization: Institut =?ISO-8859-15?Q?f=FCr_Deutsche_Sprache?=
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:16.0) Gecko/20121011 Thunderbird/16.0.1
MIME-Version: 1.0
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-15
Content-Transfer-Encoding: 8bit
X-SA-Do-Not-Run: Yes
X-SA-Exim-Connect-IP: 10.0.1.1
X-SA-Exim-Rcpt-To: java-user@lucene.apache.org
X-SA-Exim-Mail-From: schnober@ids-mannheim.de
X-Spam-Checker-Version: SpamAssassin 3.3.2 (2011-06-06) on
	linux3.ids-mannheim.de
X-Spam-Level: 
Subject: SpanQuery, Filter, BooleanQuery
X-SA-Exim-Version: 4.2.1 (built Mon, 03 Jul 2006 09:34:15 +0200)
X-SA-Exim-Scanned: Yes (on linux3.ids-mannheim.de)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-1.1 required=3.0 tests=BAYES_00,RDNS_NONE,
	TO_NO_BRKTS_NORDNS autolearn=no version=3.3.2

Hi,
I've got a setup in which I would like to perform an arbitrary query
over one field (typically realised through a WildcardQuery) and the
matches are returned as a SpanQuery because the result payloads are
further processed using Span.next() and Span.getPayload(). This works
fine with the following code (extract), using Lucene 4.0.0:

---------------------------------------------------------------------
// these fields are initialized externally through public methods:
private final MultiReader reader;
private final String termString;
private final String fieldname;
private final int maxHits;

private Map<Term, TermContext> termContexts = new HashMap<>();
WildcardQuery wildcard;
Term term = new Term(fieldname, termString);
SpanQuery query;	// Lucene query
Spans luceneSpans;

wildcard = new WildcardQuery(term);
query = (SpanQuery) new
SpanMultiTermQueryWrapper<>(wildcard).rewrite(reader);
spans = query.getSpans(atomic, matchingTitleIDs.bits(), termContexts);

for (AtomicReaderContext atomic : reader.getContext().leaves()) {
  spans = query.getSpans(atomic, matchingTitleIDs.bits(), termContexts);
  while (luceneSpans.next() && total <= maxHits) {
	...
  }
}
---------------------------------------------------------------------

Now, I'd like to add the option to filter the resulting Spans object by
another WildcardQuery on a different field that contains document
titles. My intuitive approach would have been to use a filter like this:

Filter filter = new QueryWrapperFilter(new WildcardQuery(new
Term(titlefield, titles)));

The filter is applied in a dedicated method with this line:

DocIdSet matchingTitleIDs = filter.getDocIdSet(context, new
Bits.MatchAllBits(0));

And subsequently, the getSpan() call from above is substituted by:

spans = query.getSpans(atomic, matchingTitleIDs.bits(), termContexts);

However, this yields either a NullPointerException when there are no
hits or does not affect the results at all in comparison to no filtering.

I've come across the thread "lucene-4.0: QueryWrapperFilter & docBase"
[1] in which Uwe suggests not to use QueryWrapperFilter, but to use
another Query and to combine it using a Boolean Query in such a
scenario, if I understand correctly. Does this still claim for Lucene 4.0?
However, I am not sure how to use a BooleanQuery here because I need the
SpanQuery result.

Any thoughts about what I'm doing wrong and how to fix this?
Thank you very much!
Carsten


[1]
http://mail-archives.apache.org/mod_mbox/lucene-java-user/201210.mbox/%3CCABY_-Z7r=Z0301yf1-1uVBQyW3jf48SRPUhe6syt1eH28vNEPQ@mail.gmail.com%3E

-- 
Institut fr Deutsche Sprache | http://www.ids-mannheim.de
Projekt KorAP                 | http://korap.ids-mannheim.de
Tel. +49-(0)621-43740789      | schnober@ids-mannheim.de
Korpusanalyseplattform der nchsten Generation
Next Generation Corpus Analysis Platform

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct 29 13:47:51 2012
Return-Path: <java-user-return-53955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 09407D42A
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 29 Oct 2012 13:47:51 +0000 (UTC)
Received: (qmail 66250 invoked by uid 500); 29 Oct 2012 13:47:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66055 invoked by uid 500); 29 Oct 2012 13:47:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66042 invoked by uid 99); 29 Oct 2012 13:47:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Oct 2012 13:47:48 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of SRS0=RkwRBp=I2=basetechnology.com=jack@yourhostingaccount.com designates 65.254.253.110 as permitted sender)
Received: from [65.254.253.110] (HELO mailout13.yourhostingaccount.com) (65.254.253.110)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Oct 2012 13:47:40 +0000
Received: from mailscan15.yourhostingaccount.com ([10.1.15.15] helo=mailscan15.yourhostingaccount.com)
	by mailout13.yourhostingaccount.com with esmtp (Exim)
	id 1TSpgV-0002Vg-EA
	for java-user@lucene.apache.org; Mon, 29 Oct 2012 09:47:19 -0400
Received: from impout01.yourhostingaccount.com ([10.1.55.1] helo=impout01.yourhostingaccount.com)
	by mailscan15.yourhostingaccount.com with esmtp (Exim)
	id 1TSpgU-0004Vp-JK
	for java-user@lucene.apache.org; Mon, 29 Oct 2012 09:47:18 -0400
Received: from authsmtp08.yourhostingaccount.com ([10.1.18.8])
	by impout01.yourhostingaccount.com with NO UCE
	id H1nJ1k00F0ASqTN011nJgB; Mon, 29 Oct 2012 09:47:18 -0400
X-Authority-Analysis: v=2.0 cv=IICA+3TG c=1 sm=1
 a=PHQHB1QSaEYgcU2qnZkzMw==:17 a=aQzbgH187woA:10 a=lDZ0umhWMdQA:10
 a=3jZET7lWBKwA:10 a=8nJEP1OIZ-IA:10 a=jvYhGVW7AAAA:8 a=scbZRomv_roA:10
 a=mV9VRH-2AAAA:8 a=H1igMPftmZP0uOY_RKMA:9 a=wPNLvfGTeEIA:10
 a=8amoANLqcXHyoDJd6jbCBw==:117
X-EN-OrigOutIP: 10.1.18.8
X-EN-IMPSID: H1nJ1k00F0ASqTN011nJgB
Received: from 207-237-102-116.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com ([207.237.102.116] helo=JackKrupansky)
	by authsmtp08.yourhostingaccount.com with esmtpa (Exim)
	id 1TSpgU-0006pq-E8
	for java-user@lucene.apache.org; Mon, 29 Oct 2012 09:47:18 -0400
Message-ID: <58CCA3CBEAE045F7828C0228E1DD0688@JackKrupansky>
From: "Jack Krupansky" <jack@basetechnology.com>
To: <java-user@lucene.apache.org>
References: <CAHT6S2Yg=CsUFjUO9BafHLOwa-6x43k=W5PpaB-5DFt9ovHjNQ@mail.gmail.com>
In-Reply-To: <CAHT6S2Yg=CsUFjUO9BafHLOwa-6x43k=W5PpaB-5DFt9ovHjNQ@mail.gmail.com>
Subject: Re: Running Solr Core/ Tika on Azure
Date: Mon, 29 Oct 2012 09:47:14 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3555.308
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3555.308
X-EN-UserInfo: e0a4b55451ed9f27313ebf02e3d4348d:fc4a93e1349e680c52bdd723c0ab3ef6
X-EN-AuthUser: jack@basetechnology.com
Sender:  "Jack Krupansky" <jack@basetechnology.com>
X-EN-OrigIP: 207.237.102.116
X-EN-OrigHost: 207-237-102-116.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com
X-Virus-Checked: Checked by ClamAV on apache.org

SolrCell includes Tika and SolrCell is included with Solr, at least the 
standard distribution of Solr. You can stream Office and PDF docs directly 
to the extracting request handler where Tika will process them. You can also 
ask SolrCell to "extract only" and return the extracted content.

See:
http://wiki.apache.org/solr/ExtractingRequestHandler

Whether the Azure distribution is "full" Solr including Solr Cell or not, I 
cannot answer.

Note: For future reference, "Solr" questions should be asked on the 
"solr-user" mailing list.

-- Jack Krupansky

-----Original Message----- 
From: Aloke Ghoshal
Sent: Monday, October 29, 2012 3:22 AM
To: java-user@lucene.apache.org ; general@lucene.apache.org
Subject: Running Solr Core/ Tika on Azure

Hi,

Looking for feedback on running Solr Core/ Tika parsing engine on Azure.
There's one offering for Solr within Azure from Lucid works. This offering
however doesn't mention Tika.

We are looking at options to make content from files (doc, excel, pdfs,
etc.) stored within Azure storage search-able. And whether the parser could
run against our Azure store directly to index the content. The other option
could be to write a separate connector that streams in the files. Let me
know if you have experience along these lines.

Regards,
Aloke 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct 29 14:14:22 2012
Return-Path: <java-user-return-53956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8D934D541
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 29 Oct 2012 14:14:22 +0000 (UTC)
Received: (qmail 62368 invoked by uid 500); 29 Oct 2012 14:14:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62144 invoked by uid 500); 29 Oct 2012 14:14:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62107 invoked by uid 99); 29 Oct 2012 14:14:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Oct 2012 14:14:18 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of siraj@jobdiva.com designates 64.147.106.2 as permitted sender)
Received: from [64.147.106.2] (HELO mail.jobdiva.com) (64.147.106.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Oct 2012 14:14:12 +0000
Received: from JOBDIVAEXMB1.jobdiva.local ([::1]) by jobdivaexf.jobdiva.local
 ([::1]) with mapi; Mon, 29 Oct 2012 10:13:50 -0400
From: Siraj Haider <siraj@jobdiva.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 29 Oct 2012 10:13:49 -0400
Subject: RE: Scoring based on document
Thread-Topic: Scoring based on document
Thread-Index: Ac2yZF9gdKDitehQSP6OjpcTVnggEQDew0sw
Message-ID: <7276923E6E5AA04C97876BF29FF86716E071AAAA@jobdivaexmb1.jobdiva.local>
References: <7276923E6E5AA04C97876BF29FF86716E071A7C4@jobdivaexmb1.jobdiva.local>
	<CAAHmpkgOsAbCkXYc+vY5WXVtuPexn_X0HD_E4SUtD372a4txfA@mail.gmail.com>
	<7276923E6E5AA04C97876BF29FF86716E071A7F4@jobdivaexmb1.jobdiva.local>
	<CAMbOsnpp9QYBaM7VwktQhKXz1K7P=zp_uiE8GG97YtUe9Q7d4g@mail.gmail.com>
	<7276923E6E5AA04C97876BF29FF86716E071A894@jobdivaexmb1.jobdiva.local>
	<7276923E6E5AA04C97876BF29FF86716E071A939@jobdivaexmb1.jobdiva.local>
 <CAMbOsnrD=UXzA+J-nmOTS0zq=SP=Hhuk0h-38q4tgXBsNiajLQ@mail.gmail.com>
In-Reply-To: <CAMbOsnrD=UXzA+J-nmOTS0zq=SP=Hhuk0h-38q4tgXBsNiajLQ@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Selvakumar, but I do not think it would work in our scenario.
Simon mentioned earlier that it is possible in Lucene 4.0. Does somebody ha=
ve more information on how to accomplish that?

regards
-Siraj

-----Original Message-----
From: selvakumar netaji [mailto:vvekselva.gm@gmail.com]
Sent: Wednesday, October 24, 2012 11:54 PM
To: java-user@lucene.apache.org
Subject: Re: Scoring based on document

Hi Siraj,

Even in the approach presented earlier we can have search capabilities for =
the individual field by making the document with the individual fields and =
the copy fields.

Let me know if I'm wrong.



On Thu, Oct 25, 2012 at 1:18 AM, Siraj Haider <siraj@jobdiva.com> wrote:

> Any other suggestions?
>
> regards
> -Siraj
> (212) 306-0154
>
> -----Original Message-----
> From: Siraj Haider [mailto:siraj@jobdiva.com]
> Sent: Tuesday, October 23, 2012 6:06 PM
> To: java-user@lucene.apache.org
> Cc: simon.willnauer@gmail.com
> Subject: RE: Scoring based on document
>
> Thanks for the suggestion, but in that scenario, I would lose the
> ability to search on individual fields, i.e. I would not be able to
> search on title field only, and would end up with results where the
> searched term might be in the description field.
>
> regards
> -Siraj
> (212) 306-0154
>
> -----Original Message-----
> From: selvakumar netaji [mailto:vvekselva.gm@gmail.com]
> Sent: Tuesday, October 23, 2012 1:58 PM
> To: java-user@lucene.apache.org
> Cc: simon.willnauer@gmail.com
> Subject: Re: Scoring based on document
>
> Hi All,
>
> Just wanted to make sure that will approach would fails for this case.
>
> Having a copy field for each of the document, having the concatenated
> values  of all the fields in that document and searching on the copy
> field would just produce the result. The resulting docs would  be
> based on the frequency of the query terms in the whole document.
>
> On Tue, Oct 23, 2012 at 7:48 PM, Siraj Haider <siraj@jobdiva.com> wrote:
>
> > So, just to confirm, using Lucene 4.0, we would be able to issue a
> > search on one or more fields and would be able to get the results
> > sorted by a custom field and also would be able to get the score of
> > each document based on the frequency of the terms searched in all
> > the indexed fields of that document (rather than getting it scored
> > just by the fields in the query, which is the case now).
> >
> > If this is true, could be please guide me into the direction on how
> > to implement it?
> >
> > Thanks a lot for your help.
> >
> > -Siraj
> > (212) 306-0154
> >
> > -----Original Message-----
> > From: Simon Willnauer [mailto:simon.willnauer@gmail.com]
> > Sent: Tuesday, October 23, 2012 3:51 AM
> > To: java-user@lucene.apache.org
> > Subject: Re: Scoring based on document
> >
> > hey there,
> >
> >
> > in Lucene 4 you can override the termStatistics /
> > CollectionStatistics used for scoring in the IndexSearcher. You can
> > take multiple fields into account here in order use it for scoring.
> > Here is the javadoc
> > link:
> >
> >
> > http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/In
> > de xSearcher.html#termStatistics(org.apache.lucene.index.Term
> > ,
> > org.apache.lucene.index.TermContext)
> >
> > http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/In
> > de
> > xSearcher.html#collectionStatistics(java.lang.String)
> >
> >
> > simon
> > On Mon, Oct 22, 2012 at 11:25 PM, Siraj Haider <siraj@jobdiva.com>
> wrote:
> > > I am using DefaultSimilarity and did not boost any field while
> indexing.
> > My index is comprised of the following fields:
> > >
> > > -          Title
> > >
> > > -          Author
> > >
> > > -          Bookname
> > >
> > > -          Description
> > >
> > > All of the 4 fields are indexed and can be searched on by the user.
> > > Now
> > let's say the user searches for "oracle" in Title field, the score
> > is computed based on the Title field only, and its disregarding the
> > frequency of the term "oracle" in other fields. It might be like
> > that by design but I need to change it so that the documents are
> > ranked based on the frequency in the whole document and not based on
> > the field
> searches. Please help!
> > >
> > > Thanks in advance
> > > -Siraj
> > >
> > >
> > > ________________________________
> > > This electronic mail message and any attachments may contain
> > > information
> > which is privileged, sensitive and/or otherwise exempt from
> > disclosure under applicable law. The information is intended only
> > for the use of the individual or entity named as the addressee
> > above. If you are not the intended recipient, you are hereby
> > notified that any disclosure, copying, distribution (electronic or
> > otherwise) or forwarding of, or the taking of any action in reliance
> > on, the contents of this transmission is strictly prohibited. If you
> > have received this electronic transmission in error, please notify
> > us by telephone, facsimile, or e-mail as noted above to arrange for
> > the return of any
> electronic mail or attachments. Thank You.
> >
> > --------------------------------------------------------------------
> > - To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > This electronic mail message and any attachments may contain
> > information which is privileged, sensitive and/or otherwise exempt
> > from disclosure under applicable law. The information is intended
> > only for the use of the individual or entity named as the addressee abo=
ve.
> > If you are not the intended recipient, you are hereby notified that
> > any disclosure, copying, distribution (electronic or otherwise) or
> > forwarding of, or the taking of any action in reliance on, the
> > contents of this transmission is strictly prohibited. If you have
> > received this electronic transmission in error, please notify us by
> > telephone, facsimile, or e-mail as noted above to arrange for the
> > return
> of any electronic mail or attachments. Thank You.
> >
>
> This electronic mail message and any attachments may contain
> information which is privileged, sensitive and/or otherwise exempt
> from disclosure under applicable law. The information is intended only
> for the use of the individual or entity named as the addressee above.
> If you are not the intended recipient, you are hereby notified that
> any disclosure, copying, distribution (electronic or otherwise) or
> forwarding of, or the taking of any action in reliance on, the
> contents of this transmission is strictly prohibited. If you have
> received this electronic transmission in error, please notify us by
> telephone, facsimile, or e-mail as noted above to arrange for the return =
of any electronic mail or attachments. Thank You.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> This electronic mail message and any attachments may contain
> information which is privileged, sensitive and/or otherwise exempt
> from disclosure under applicable law. The information is intended only
> for the use of the individual or entity named as the addressee above.
> If you are not the intended recipient, you are hereby notified that
> any disclosure, copying, distribution (electronic or otherwise) or
> forwarding of, or the taking of any action in reliance on, the
> contents of this transmission is strictly prohibited. If you have
> received this electronic transmission in error, please notify us by
> telephone, facsimile, or e-mail as noted above to arrange for the return =
of any electronic mail or attachments. Thank You.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

This electronic mail message and any attachments may contain information wh=
ich is privileged, sensitive and/or otherwise exempt from disclosure under =
applicable law. The information is intended only for the use of the individ=
ual or entity named as the addressee above. If you are not the intended rec=
ipient, you are hereby notified that any disclosure, copying, distribution =
(electronic or otherwise) or forwarding of, or the taking of any action in =
reliance on, the contents of this transmission is strictly prohibited. If y=
ou have received this electronic transmission in error, please notify us by=
 telephone, facsimile, or e-mail as noted above to arrange for the return o=
f any electronic mail or attachments. Thank You.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct 29 17:44:58 2012
Return-Path: <java-user-return-53957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C54C5DFD5
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 29 Oct 2012 17:44:58 +0000 (UTC)
Received: (qmail 13000 invoked by uid 500); 29 Oct 2012 17:44:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12961 invoked by uid 500); 29 Oct 2012 17:44:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12952 invoked by uid 99); 29 Oct 2012 17:44:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Oct 2012 17:44:56 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [62.213.161.134] (HELO pmx.sirma.bg) (62.213.161.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Oct 2012 17:44:48 +0000
X-Virus-Scanned: Sirma Antivirus System
Received: from [192.168.128.140] (ivasilev.sirma.int [192.168.128.140])
	by pmx.sirma.bg (Sirma mail system) with ESMTP id 56DCA24016
	for <java-user@lucene.apache.org>; Mon, 29 Oct 2012 19:44:27 +0200 (EET)
Message-ID: <508EC07A.30108@sirma.bg>
Date: Mon, 29 Oct 2012 19:44:26 +0200
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Mozilla/5.0 (Windows NT 5.2; rv:16.0) Gecko/20121010 Thunderbird/16.0.1
MIME-Version: 1.0
To: LUCENE MAIL LIST <java-user@lucene.apache.org>
Subject: Term Positions added to one document forward
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Guys,

I use the following code to index documents and set Payloads to term 
positions:

public class TestPayloads_ {
     private static final String INDEX_DIR =
             "E:/Temp/Index";

     public static void main(String[] args) throws Exception {
         IndexWriterConfig iwc = new 
IndexWriterConfig(Version.LUCENE_40, new MyAnalyzer_());
         iwc.setOpenMode(OpenMode.CREATE);
         IndexWriter writer = new IndexWriter(FSDirectory.open(new 
File(INDEX_DIR)), iwc);

         FieldType fieldType = new FieldType();
         IndexOptions indexOptions = 
IndexOptions.DOCS_AND_FREQS_AND_POSITIONS_AND_OFFSETS;
         fieldType.setIndexOptions(indexOptions);
         fieldType.setIndexed(true);
         fieldType.setOmitNorms(true);
         fieldType.setStored(true);
         fieldType.freeze();

         Document doc = new Document();
         doc.add(new Field("content", "one two three four.", fieldType));
         writer.addDocument(doc);

         writer.addDocument(doc);
         writer.addDocument(doc);

         writer.close();

         DirectoryReader dr = DirectoryReader.open(FSDirectory.open(new 
File(INDEX_DIR)));
         AtomicReader sr = dr.leaves().get(0).reader();

         Bits liveDocs = sr.getLiveDocs();
         Fields fields = sr.fields();
         for (String currFieldName : fields) {
             Terms currTerms = fields.terms(currFieldName);
             TermsEnum currTermEnum = currTerms.iterator(null);
             boolean currTermsHasPayloads = currTerms.hasPayloads();
             BytesRef currFieldValue;
             while ((currFieldValue = currTermEnum.next()) != null) {
                 String currVfieldValueStr = currFieldValue.utf8ToString();
//                    DocsEnum currDocsEnum = 
currTermEnum.docs(liveDocs, null);
                 DocsAndPositionsEnum currDocsAndPositions =
                     currTermEnum.docsAndPositions(liveDocs, null,
                         DocsAndPositionsEnum.FLAG_PAYLOADS
                         | DocsAndPositionsEnum.FLAG_OFFSETS);
                 int docID;
                 while ((docID = currDocsAndPositions.nextDoc()) != 
DocsEnum.NO_MORE_DOCS) {
                     int freq = currDocsAndPositions.freq();
                     for (int i = 0; i < freq; i++) {
                         byte payload;
                         if (currTermsHasPayloads && 
currDocsAndPositions.getPayload() != null) {
                             payload = 
currDocsAndPositions.getPayload().bytes[0];
                         } else {
                             payload = -1;
                         }
                         System.out.println("Term: (" + currFieldName + 
":" + currVfieldValueStr + "); doc: "
                             + docID + "; position: " + 
currDocsAndPositions.nextPosition()
                             + "; payload: " + payload);
                     }
                 }
             }
         }
         dr.close();
     }

}

class MyAnalyzer_ extends Analyzer {
     @Override
     protected TokenStreamComponents createComponents(String fieldName, 
Reader reader) {
         Tokenizer tokenizer = new StandardTokenizer(Version.LUCENE_40, 
reader);
         return new TokenStreamComponents(tokenizer, new 
MyFilter_(tokenizer));
     }

}

class MyFilter_ extends TokenFilter {
     private PayloadAttribute payloadAttr;
     private byte[] payloadVal;

     MyFilter_(TokenStream in) {
         super(in);
         payloadAttr = addAttribute(PayloadAttribute.class);
         payloadVal = new byte[1];
     }
     public final boolean incrementToken() throws IOException {
         if (input.incrementToken()) {
             payloadVal[0]++;
             payloadAttr.setPayload(new BytesRef(payloadVal));
             return true;
         } else {
             return false;
         }
     }
}




The output is the following:

Term: (content:four); doc: 0; position: 3; payload: -1
Term: (content:four); doc: 1; position: 3; payload: 4
Term: (content:four); doc: 2; position: 3; payload: 8
Term: (content:one); doc: 0; position: 0; payload: -1
Term: (content:one); doc: 1; position: 0; payload: 1
Term: (content:one); doc: 2; position: 0; payload: 5
Term: (content:three); doc: 0; position: 2; payload: -1
Term: (content:three); doc: 1; position: 2; payload: 3
Term: (content:three); doc: 2; position: 2; payload: 7
Term: (content:two); doc: 0; position: 1; payload: -1
Term: (content:two); doc: 1; position: 1; payload: 2
Term: (content:two); doc: 2; position: 1; payload: 6


The payloads of document with Lucene ID #0 were not added. Payloads that 
were intended to doc #0 were added to doc #1, those intended for doc #1 
were added to doc #2.
With the debugger I see that during adding doc #0 payloadVal is 
incremented form 1 to 4, and after each incrementation is invoked 
payloadAttr.setPayload(..), but strangely when reading 
DocsAndPositionsEnumwe see those payloads (1 to 4) belong actually to 
doc #1.

Do I make some mistake with invoking setPayload(..) method or it is a bug?

Cheers,
Ivan Vasilev

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct 29 19:39:02 2012
Return-Path: <java-user-return-53958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9B7CED34F
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 29 Oct 2012 19:39:02 +0000 (UTC)
Received: (qmail 63123 invoked by uid 500); 29 Oct 2012 19:39:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63035 invoked by uid 500); 29 Oct 2012 19:39:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63025 invoked by uid 99); 29 Oct 2012 19:39:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Oct 2012 19:39:00 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@gmail.com designates 209.85.219.48 as permitted sender)
Received: from [209.85.219.48] (HELO mail-oa0-f48.google.com) (209.85.219.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Oct 2012 19:38:53 +0000
Received: by mail-oa0-f48.google.com with SMTP id h2so5964664oag.35
        for <java-user@lucene.apache.org>; Mon, 29 Oct 2012 12:38:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        bh=SqomrosHLA6HKOOp2SbpPBv3VVobso0ACIV6aoexdhk=;
        b=noY1n294cNJoB5cwrbUd8xSQImyB/7O2rGg5/8lMY8+L8gyxEx3xnki5V0DmVkRz6g
         cU8kChBpgWzxM5Y9a9ydTIwh/6qCaNj3+mZ83GaEsOfDugSFZuQwRtrdy88MSTDyaR7a
         gSHJ6DLzZ59HfD2tE//1sxisBQOE1mmUljkl/v6DT31lAw/RL7VzmeaoPrxjpRlwmtgI
         W0onUSLPOAVRO5oWTieZsBk+g5uWch1gy/TXRs0FAmFRWknEceTaamG7R+MBOLRSsEUt
         7HEcR1uGw2qLVsi6LBY6ydLxsl09EZCxtPIdsxo2t70fan2HiYNJ/nbP7VaeA4iTo6Hh
         t3Ug==
MIME-Version: 1.0
Received: by 10.60.32.243 with SMTP id m19mr27764906oei.21.1351539512531; Mon,
 29 Oct 2012 12:38:32 -0700 (PDT)
Received: by 10.60.11.72 with HTTP; Mon, 29 Oct 2012 12:38:32 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <508EC07A.30108@sirma.bg>
References: <508EC07A.30108@sirma.bg>
Date: Mon, 29 Oct 2012 20:38:32 +0100
Message-ID: <CAAHmpkjYebvwgz2_Y65UKy30HV=hrQMAm17+6Yw_AL+Yk7EUgQ@mail.gmail.com>
Subject: Re: Term Positions added to one document forward
From: Simon Willnauer <simon.willnauer@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

you should call currDocsAndPositions.nextPosition() before you call
currDocsAndPositions.getPayload()  payloads are per positions so you
need to advance the pos first!

simon

On Mon, Oct 29, 2012 at 6:44 PM, Ivan Vasilev <ivasilev@sirma.bg> wrote:
> Hi Guys,
>
> I use the following code to index documents and set Payloads to term
> positions:
>
> public class TestPayloads_ {
>     private static final String INDEX_DIR =
>             "E:/Temp/Index";
>
>     public static void main(String[] args) throws Exception {
>         IndexWriterConfig iwc = new IndexWriterConfig(Version.LUCENE_40, new
> MyAnalyzer_());
>         iwc.setOpenMode(OpenMode.CREATE);
>         IndexWriter writer = new IndexWriter(FSDirectory.open(new
> File(INDEX_DIR)), iwc);
>
>         FieldType fieldType = new FieldType();
>         IndexOptions indexOptions =
> IndexOptions.DOCS_AND_FREQS_AND_POSITIONS_AND_OFFSETS;
>         fieldType.setIndexOptions(indexOptions);
>         fieldType.setIndexed(true);
>         fieldType.setOmitNorms(true);
>         fieldType.setStored(true);
>         fieldType.freeze();
>
>         Document doc = new Document();
>         doc.add(new Field("content", "one two three four.", fieldType));
>         writer.addDocument(doc);
>
>         writer.addDocument(doc);
>         writer.addDocument(doc);
>
>         writer.close();
>
>         DirectoryReader dr = DirectoryReader.open(FSDirectory.open(new
> File(INDEX_DIR)));
>         AtomicReader sr = dr.leaves().get(0).reader();
>
>         Bits liveDocs = sr.getLiveDocs();
>         Fields fields = sr.fields();
>         for (String currFieldName : fields) {
>             Terms currTerms = fields.terms(currFieldName);
>             TermsEnum currTermEnum = currTerms.iterator(null);
>             boolean currTermsHasPayloads = currTerms.hasPayloads();
>             BytesRef currFieldValue;
>             while ((currFieldValue = currTermEnum.next()) != null) {
>                 String currVfieldValueStr = currFieldValue.utf8ToString();
> //                    DocsEnum currDocsEnum = currTermEnum.docs(liveDocs,
> null);
>                 DocsAndPositionsEnum currDocsAndPositions =
>                     currTermEnum.docsAndPositions(liveDocs, null,
>                         DocsAndPositionsEnum.FLAG_PAYLOADS
>                         | DocsAndPositionsEnum.FLAG_OFFSETS);
>                 int docID;
>                 while ((docID = currDocsAndPositions.nextDoc()) !=
> DocsEnum.NO_MORE_DOCS) {
>                     int freq = currDocsAndPositions.freq();
>                     for (int i = 0; i < freq; i++) {
>                         byte payload;
>                         if (currTermsHasPayloads &&
> currDocsAndPositions.getPayload() != null) {
>                             payload =
> currDocsAndPositions.getPayload().bytes[0];
>                         } else {
>                             payload = -1;
>                         }
>                         System.out.println("Term: (" + currFieldName + ":" +
> currVfieldValueStr + "); doc: "
>                             + docID + "; position: " +
> currDocsAndPositions.nextPosition()
>                             + "; payload: " + payload);
>                     }
>                 }
>             }
>         }
>         dr.close();
>     }
>
> }
>
> class MyAnalyzer_ extends Analyzer {
>     @Override
>     protected TokenStreamComponents createComponents(String fieldName,
> Reader reader) {
>         Tokenizer tokenizer = new StandardTokenizer(Version.LUCENE_40,
> reader);
>         return new TokenStreamComponents(tokenizer, new
> MyFilter_(tokenizer));
>     }
>
> }
>
> class MyFilter_ extends TokenFilter {
>     private PayloadAttribute payloadAttr;
>     private byte[] payloadVal;
>
>     MyFilter_(TokenStream in) {
>         super(in);
>         payloadAttr = addAttribute(PayloadAttribute.class);
>         payloadVal = new byte[1];
>     }
>     public final boolean incrementToken() throws IOException {
>         if (input.incrementToken()) {
>             payloadVal[0]++;
>             payloadAttr.setPayload(new BytesRef(payloadVal));
>             return true;
>         } else {
>             return false;
>         }
>     }
> }
>
>
>
>
> The output is the following:
>
> Term: (content:four); doc: 0; position: 3; payload: -1
> Term: (content:four); doc: 1; position: 3; payload: 4
> Term: (content:four); doc: 2; position: 3; payload: 8
> Term: (content:one); doc: 0; position: 0; payload: -1
> Term: (content:one); doc: 1; position: 0; payload: 1
> Term: (content:one); doc: 2; position: 0; payload: 5
> Term: (content:three); doc: 0; position: 2; payload: -1
> Term: (content:three); doc: 1; position: 2; payload: 3
> Term: (content:three); doc: 2; position: 2; payload: 7
> Term: (content:two); doc: 0; position: 1; payload: -1
> Term: (content:two); doc: 1; position: 1; payload: 2
> Term: (content:two); doc: 2; position: 1; payload: 6
>
>
> The payloads of document with Lucene ID #0 were not added. Payloads that
> were intended to doc #0 were added to doc #1, those intended for doc #1 were
> added to doc #2.
> With the debugger I see that during adding doc #0 payloadVal is incremented
> form 1 to 4, and after each incrementation is invoked
> payloadAttr.setPayload(..), but strangely when reading
> DocsAndPositionsEnumwe see those payloads (1 to 4) belong actually to doc
> #1.
>
> Do I make some mistake with invoking setPayload(..) method or it is a bug?
>
> Cheers,
> Ivan Vasilev
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct 29 20:17:17 2012
Return-Path: <java-user-return-53959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 74FEAD4CA
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 29 Oct 2012 20:17:17 +0000 (UTC)
Received: (qmail 76155 invoked by uid 500); 29 Oct 2012 20:17:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76097 invoked by uid 500); 29 Oct 2012 20:17:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76085 invoked by uid 99); 29 Oct 2012 20:17:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Oct 2012 20:17:15 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ssmith@mainstreamdata.com designates 209.63.42.202 as permitted sender)
Received: from [209.63.42.202] (HELO nexus2.mainstreamdata.com) (209.63.42.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Oct 2012 20:17:08 +0000
Received: from localhost (localhost [127.0.0.1])
	by nexus2.mainstreamdata.com (Postfix) with ESMTP id 23D7B4007A
	for <java-user@lucene.apache.org>; Mon, 29 Oct 2012 14:16:47 -0600 (MDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=
	mainstreamdata.com; h=mime-version:content-transfer-encoding
	:content-type:content-type:content-language:accept-language
	:in-reply-to:references:message-id:date:date:subject:subject
	:from:from:received:received:received; s=key1; t=1351541805; bh=
	2SLj3qKirsQ8yFmNaRgqlybSfvvxyD5qxzSiLzJ1oRw=; b=kJWwwGrFYCuoYhtR
	5Wqo6gCYxCvoDJn30GK2lZ89MOSYCBSEWMx6ZFLGVYgtyGQVF3DDehswMUHahbqP
	ZwwhRSedEd+v9YvvIB5ysVa+vOzxe8pE2G8msWivvsR+cvGHbofcwQSvbvIfoEfD
	2VoHyZZVgSn726KLFzvvv17kK9Z2LhleS/GxaFYnlmJKSjrn/822rVDEco5GGkE0
	4oLOaaDPiLmDJde3KEMR95uH2gBwdR9yr95H94/vjpCZsBAfcu0pQtHl6KEU0p/U
	JNXRKvXSEArTyqY3xuXUPc68sXHDRpWKZFtkKJOzrs+YVloQ+5rG0/eAaTqMcG/H
	cAEGHA==
X-Virus-Scanned: Debian amavisd-new at nexus2.mainstreamdata.com
Received: from nexus2.mainstreamdata.com ([127.0.0.1])
	by localhost (nexus2.mainstreamdata.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id C1EkYcwRnj7s for <java-user@lucene.apache.org>;
	Mon, 29 Oct 2012 14:16:45 -0600 (MDT)
Received: from webmail.mainstreamdata.com (hedwig.slc.mainstreamdata.com [10.2.1.133])
	by nexus2.mainstreamdata.com (Postfix) with ESMTPS id 9D52C40063
	for <java-user@lucene.apache.org>; Mon, 29 Oct 2012 14:16:45 -0600 (MDT)
Received: from hedwig.slc.mainstreamdata.com ([10.2.1.133]) by
 hedwig.slc.mainstreamdata.com ([10.2.1.133]) with mapi id 14.01.0355.002;
 Mon, 29 Oct 2012 14:16:45 -0600
From: Scott Smith <ssmith@mainstreamdata.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: RE: Lucene 4.0 delete by ID
Thread-Topic: Lucene 4.0 delete by ID
Thread-Index: Ac2z0oTIyghISckUQdifmINDeImMXQANAGIAAF+YVIAAA6cygAAfsX1A
Date: Mon, 29 Oct 2012 20:16:45 +0000
Message-ID: <B29111A755EFB5419E6C7BC998C6E867973DBF@hedwig.slc.mainstreamdata.com>
References: <CA+A76Txwdr1cYms86bEahtdR3nJEq3bFkpAFD8TdajPBvq4ysw@mail.gmail.com>
 <7296586.59.1351462622560.JavaMail.lancenorskog@Lance-Norskogs-MacBook-Pro.local>
In-Reply-To: <7296586.59.1351462622560.JavaMail.lancenorskog@Lance-Norskogs-MacBook-Pro.local>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-originating-ip: [10.7.5.176]
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

VGhlIGx1Y2VuZSBpbnRlZ2VyIGRvYyBpZC4NCg0KLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0N
CkZyb206IExhbmNlIE5vcnNrb2cgW21haWx0bzpnb2tzcm9uQGdtYWlsLmNvbV0gDQpTZW50OiBT
dW5kYXksIE9jdG9iZXIgMjgsIDIwMTIgNTowOSBQTQ0KVG86IGphdmEtdXNlckBsdWNlbmUuYXBh
Y2hlLm9yZw0KU3ViamVjdDogUmU6IEx1Y2VuZSA0LjAgZGVsZXRlIGJ5IElEDQoNClNjb3R0LCBk
aWQgeW91IG1lYW4gdGhlIEx1Y2VuZSBpbnRlZ2VyIGlkLCBvciB0aGUgdW5pcXVlIGlkIGZpZWxk
Pw0KDQotLS0tLSBPcmlnaW5hbCBNZXNzYWdlIC0tLS0tDQp8IEZyb206ICJNYXJ0aWpuIHYgR3Jv
bmluZ2VuIiA8bWFydGlqbi52Lmdyb25pbmdlbkBnbWFpbC5jb20+DQp8IFRvOiBqYXZhLXVzZXJA
bHVjZW5lLmFwYWNoZS5vcmcNCnwgU2VudDogU3VuZGF5LCBPY3RvYmVyIDI4LCAyMDEyIDI6MjQ6
MjkgUE0NCnwgU3ViamVjdDogUmU6IEx1Y2VuZSA0LjAgZGVsZXRlIGJ5IElEDQp8IA0KfCBBIHRv
cCBsZXZlbCBkb2N1bWVudCBJRCBjYW4gY2hhbmdlIG92ZXIgdGltZS4gRm9yIHRoYXQgcmVhc29u
IHlvdSANCnwgc2hvdWxkbid0IHJlbHkgb24gaXQuIEhvd2V2ZXIgaWYgeW91IGtub3cgeW91ciBp
bmRleCBpcyBzdGFibGUgb3IgeW91IA0KfCBrZWVwIHRyYWNrIHdoZW4gYSBtZXJnZSBoYXBwZXMs
IHlvdSBjYW4gdXNlIHRoZSANCnwgSW5kZXhXcml0ZXIjdHJ5RGVsZXRlRG9jdW1lbnQgbWV0aG9k
IHRvIGRlbGV0ZSBhIGRvY3VtZW50IGJ5IEx1Y2VuZSANCnwgaWQuIERlbGV0aW5nIGEgZG9jdW1l
bnQgdmlhIGEgSW5kZXhSZWFkZXIgaXMgbm8gbG9uZ2VyIHBvc3NpYmxlLg0KfCANCnwgTWFydGlq
bg0KfCANCnwgT24gMjcgT2N0b2JlciAyMDEyIDAxOjQ3LCBNb3NzYWFiIEJhZ2RvdXJpIDxiYWdk
b3VyaV9tb3NzYWFiQHlhaG9vLmZyPiANCnwgd3JvdGU6DQp8ID4gTHVjZW5lIGRvY3VtZW50IElE
cyBhcmUgbm90IHN0YWJsZS4gWW91IGNvdWxkIGFkZCBhIGZpZWxkIHdpdGggYW4gSUQgDQp8ID4g
dGhhdCB5b3UgbWFpbnRhaW4uIFlvdXIgcXVlcnkgd291bGQgdGhlbiBiZSBqdXN0IGEgVGVybVF1
ZXJ5IG9uIHRoZSANCnwgPiBJRC4NCnwgPg0KfCA+IFJlZ2FyZHMsDQp8ID4gTW9zc2FhYg0KfCA+
DQp8ID4NCnwgPiAyMDEyLzEwLzI2IFNjb3R0IFNtaXRoIDxzc21pdGhAbWFpbnN0cmVhbWRhdGEu
Y29tPg0KfCA+DQp8ID4+IEknbSBjdXJyZW50bHkgY29udmVydGluZyBzb21lIGx1Y2VuZSBjb2Rl
IHRvIDQuMC4gIEl0IGFwcGVhcnMgdGhhdCANCnwgPj4geW91IGFyZSBubyBsb25nZXIgYWxsb3dl
ZCB0byBkZWxldGUgYSBkb2N1bWVudCBieSBpdHMgSUQuICBJcyB0aGF0IA0KfCA+PiBjb3JyZWN0
PyAgSXMgbXkgb25seSBvcHRpb24gdG8gZmlndXJlIHNvbWUga2luZCBvZiBxdWVyeSAod2hpY2gg
DQp8ID4+IG9idmlvdXNseSBpc24ndCBiYXNlZCBvbg0KfCA+PiBJRCkgYW5kIGRvIHRoZSBkZWxl
dGUgZnJvbSB0aGVyZT8NCnwgPj4NCnwgDQp8IA0KfCANCnwgLS0NCnwgTWV0IHZyaWVuZGVsaWpr
ZSBncm9ldCwNCnwgDQp8IE1hcnRpam4gdmFuIEdyb25pbmdlbg0KfCANCnwgLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
DQp8IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUu
YXBhY2hlLm9yZw0KfCBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXIt
aGVscEBsdWNlbmUuYXBhY2hlLm9yZw0KfCANCnwgDQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KVG8gdW5zdWJz
Y3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQpG
b3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBh
Y2hlLm9yZw0KDQo=
DQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11
bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMs
IGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcNCg0K

From java-user-return-53960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct 29 20:20:07 2012
Return-Path: <java-user-return-53960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CCB4BD4E6
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 29 Oct 2012 20:20:07 +0000 (UTC)
Received: (qmail 86720 invoked by uid 500); 29 Oct 2012 20:20:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86675 invoked by uid 500); 29 Oct 2012 20:20:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86667 invoked by uid 99); 29 Oct 2012 20:20:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Oct 2012 20:20:05 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ssmith@mainstreamdata.com designates 209.63.42.202 as permitted sender)
Received: from [209.63.42.202] (HELO nexus2.mainstreamdata.com) (209.63.42.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Oct 2012 20:20:00 +0000
Received: from localhost (localhost [127.0.0.1])
	by nexus2.mainstreamdata.com (Postfix) with ESMTP id 582974007A
	for <java-user@lucene.apache.org>; Mon, 29 Oct 2012 14:19:40 -0600 (MDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=
	mainstreamdata.com; h=mime-version:content-transfer-encoding
	:content-type:content-type:content-language:accept-language
	:in-reply-to:references:message-id:date:date:subject:subject
	:from:from:received:received:received; s=key1; t=1351541979; bh=
	kMHSK2qnlQCF3N6F3R7uTn2A6H/zXtwycgugqgmqa88=; b=Vvfa8lL4NTBpBe+p
	LIdlZC5yqkZe+Fs+UhRgnXTgwsCqelN3033EelYlxMWTeIaNeGMqp9RAt+/ECCJf
	phqjsRJnBRGZguDx8lLwnTLNWEsOITv5wn3jQdkXdyNkY1J9G7H3I5xP79ebvDQQ
	vtrX3CLJRG3Z0lcUTJKSYC9uaVosYjpbDka0O4pvl/4CAoj0vA5YAoMCNfHV82Jb
	2BkVqBk/F3fdJO8NC6KW6poyrmoUD6B+hazwwBjuDClQZJrkPsz3bRUYHcwuFE7r
	2GjUqeEF7TVqO5jzt36xnd4R6E6pcdB2SIbnWji+bXbNPJD/0M5wriM/5W7wCHsE
	KFeF8Q==
X-Virus-Scanned: Debian amavisd-new at nexus2.mainstreamdata.com
Received: from nexus2.mainstreamdata.com ([127.0.0.1])
	by localhost (nexus2.mainstreamdata.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id IuE3-BkzymWF for <java-user@lucene.apache.org>;
	Mon, 29 Oct 2012 14:19:39 -0600 (MDT)
Received: from webmail.mainstreamdata.com (hedwig.slc.mainstreamdata.com [10.2.1.133])
	by nexus2.mainstreamdata.com (Postfix) with ESMTPS id 06B2A40063
	for <java-user@lucene.apache.org>; Mon, 29 Oct 2012 14:19:39 -0600 (MDT)
Received: from hedwig.slc.mainstreamdata.com ([10.2.1.133]) by
 hedwig.slc.mainstreamdata.com ([10.2.1.133]) with mapi id 14.01.0355.002;
 Mon, 29 Oct 2012 14:19:38 -0600
From: Scott Smith <ssmith@mainstreamdata.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: RE: Lucene 4.0 delete by ID
Thread-Topic: Lucene 4.0 delete by ID
Thread-Index: Ac2z0oTIyghISckUQdifmINDeImMXQANAGIAAF+YVIAAI2O/sA==
Date: Mon, 29 Oct 2012 20:19:37 +0000
Message-ID: <B29111A755EFB5419E6C7BC998C6E867973DD7@hedwig.slc.mainstreamdata.com>
References: <B29111A755EFB5419E6C7BC998C6E86796EE6C@hedwig.slc.mainstreamdata.com>
 <CAG0hk_8SzJ69-xdnx+WqsrsAZrAVi4jEpKOX+Dy6pTJTrC9rbA@mail.gmail.com>
 <CA+A76Txwdr1cYms86bEahtdR3nJEq3bFkpAFD8TdajPBvq4ysw@mail.gmail.com>
In-Reply-To: <CA+A76Txwdr1cYms86bEahtdR3nJEq3bFkpAFD8TdajPBvq4ysw@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-originating-ip: [10.7.5.176]
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

SSB1bmRlcnN0YW5kIHRoZSBpc3N1ZSBvZiB0aGUgbHVjZW5lIGRvYyBpZCBjaGFuZ2luZy4gIEkn
bGwgcHJvYmFibHkgbG9vayB0byBzZWUgaWYgSSBjYW4gZGVsZXRlIHN0dWZmIGp1c3QgYmFzZWQg
b24gc29tZSBmaWVsZCB0aGF0IEkgaGF2ZSB0aGF0IEkga25vdyB3b24ndCBjaGFuZ2UuICBJJ3Zl
IHVzZWQgdGhlIGRvYyBpZCBmb3IgYSBsb25nIHRpbWUsIGJ1dCBtYXliZSBpdCdzIHRpbWUgZm9y
IGEgY2hhbmdlLiAgDQoNClRoYW5rcyBmb3IgYWxsIG9mIHRoZSBpbnB1dC4NCg0KU2NvdHQNCg0K
LS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCkZyb206IG1hcnRpam4uaXMuaGllckBnbWFpbC5j
b20gW21haWx0bzptYXJ0aWpuLmlzLmhpZXJAZ21haWwuY29tXSBPbiBCZWhhbGYgT2YgTWFydGlq
biB2IEdyb25pbmdlbg0KU2VudDogU3VuZGF5LCBPY3RvYmVyIDI4LCAyMDEyIDM6MjQgUE0NClRv
OiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcNClN1YmplY3Q6IFJlOiBMdWNlbmUgNC4wIGRl
bGV0ZSBieSBJRA0KDQpBIHRvcCBsZXZlbCBkb2N1bWVudCBJRCBjYW4gY2hhbmdlIG92ZXIgdGlt
ZS4gRm9yIHRoYXQgcmVhc29uIHlvdSBzaG91bGRuJ3QgcmVseSBvbiBpdC4gSG93ZXZlciBpZiB5
b3Uga25vdyB5b3VyIGluZGV4IGlzIHN0YWJsZSBvciB5b3Uga2VlcCB0cmFjayB3aGVuIGEgbWVy
Z2UgaGFwcGVzLCB5b3UgY2FuIHVzZSB0aGUgSW5kZXhXcml0ZXIjdHJ5RGVsZXRlRG9jdW1lbnQg
bWV0aG9kIHRvIGRlbGV0ZSBhIGRvY3VtZW50IGJ5IEx1Y2VuZSBpZC4gRGVsZXRpbmcgYSBkb2N1
bWVudCB2aWEgYSBJbmRleFJlYWRlciBpcyBubyBsb25nZXIgcG9zc2libGUuDQoNCk1hcnRpam4N
Cg0KT24gMjcgT2N0b2JlciAyMDEyIDAxOjQ3LCBNb3NzYWFiIEJhZ2RvdXJpIDxiYWdkb3VyaV9t
b3NzYWFiQHlhaG9vLmZyPiB3cm90ZToNCj4gTHVjZW5lIGRvY3VtZW50IElEcyBhcmUgbm90IHN0
YWJsZS4gWW91IGNvdWxkIGFkZCBhIGZpZWxkIHdpdGggYW4gSUQgDQo+IHRoYXQgeW91IG1haW50
YWluLiBZb3VyIHF1ZXJ5IHdvdWxkIHRoZW4gYmUganVzdCBhIFRlcm1RdWVyeSBvbiB0aGUgSUQu
DQo+DQo+IFJlZ2FyZHMsDQo+IE1vc3NhYWINCj4NCj4NCj4gMjAxMi8xMC8yNiBTY290dCBTbWl0
aCA8c3NtaXRoQG1haW5zdHJlYW1kYXRhLmNvbT4NCj4NCj4+IEknbSBjdXJyZW50bHkgY29udmVy
dGluZyBzb21lIGx1Y2VuZSBjb2RlIHRvIDQuMC4gIEl0IGFwcGVhcnMgdGhhdCANCj4+IHlvdSBh
cmUgbm8gbG9uZ2VyIGFsbG93ZWQgdG8gZGVsZXRlIGEgZG9jdW1lbnQgYnkgaXRzIElELiAgSXMg
dGhhdCANCj4+IGNvcnJlY3Q/ICBJcyBteSBvbmx5IG9wdGlvbiB0byBmaWd1cmUgc29tZSBraW5k
IG9mIHF1ZXJ5ICh3aGljaCANCj4+IG9idmlvdXNseSBpc24ndCBiYXNlZCBvbg0KPj4gSUQpIGFu
ZCBkbyB0aGUgZGVsZXRlIGZyb20gdGhlcmU/DQo+Pg0KDQoNCg0KLS0NCk1ldCB2cmllbmRlbGlq
a2UgZ3JvZXQsDQoNCk1hcnRpam4gdmFuIEdyb25pbmdlbg0KDQotLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NClRvIHVu
c3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9y
Zw0KRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5l
LmFwYWNoZS5vcmcNCg0K
DQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11
bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMs
IGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcNCg0K

From java-user-return-53961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct 29 20:21:25 2012
Return-Path: <java-user-return-53961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D8A11D4EE
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 29 Oct 2012 20:21:24 +0000 (UTC)
Received: (qmail 93817 invoked by uid 500); 29 Oct 2012 20:21:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93769 invoked by uid 500); 29 Oct 2012 20:21:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93759 invoked by uid 99); 29 Oct 2012 20:21:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Oct 2012 20:21:22 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ssmith@mainstreamdata.com designates 209.63.42.202 as permitted sender)
Received: from [209.63.42.202] (HELO nexus2.mainstreamdata.com) (209.63.42.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Oct 2012 20:21:17 +0000
Received: from localhost (localhost [127.0.0.1])
	by nexus2.mainstreamdata.com (Postfix) with ESMTP id 60BBD4007A
	for <java-user@lucene.apache.org>; Mon, 29 Oct 2012 14:20:57 -0600 (MDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=
	mainstreamdata.com; h=mime-version:content-transfer-encoding
	:content-type:content-type:content-language:accept-language
	:in-reply-to:references:message-id:date:date:subject:subject
	:from:from:received:received:received; s=key1; t=1351542056; bh=
	WOP1z+6nv5SyCQ+FQxAHIclztNP7WlcuFdbmfcUkYto=; b=gqHQRwwENmZAunvO
	DtFIcNyLjoZXix34ZRYEBOXrCA9QQs9MCgSjOuriGOd7Tj84QlzglzCHi9ySYO9q
	3Ttp8l3CI/RD0jLWUUMXY1EZiquQW2yp3yQMnufpeFLGXMmnNidPoRnp4fIvsMYA
	EAE2ppmcuETb4fPXza7BNIg2Oua1Imo6BUF9ODBlDG6G+MErdXfjqD4R7fofHbm9
	7grO3cBw7ptAde2L1vhLW7x0nAqXAsXvsWMTbW1qwCVedlCo+Xm2BmyChqQpEcdX
	IuhPmN+c8W1f9VUqvPl/eWOuiC8hH23lAC1zlh5IWjChRWhV/0pgOBi2236Oo7tw
	K7WjUw==
X-Virus-Scanned: Debian amavisd-new at nexus2.mainstreamdata.com
Received: from nexus2.mainstreamdata.com ([127.0.0.1])
	by localhost (nexus2.mainstreamdata.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id AHTGRM5A+7Cf for <java-user@lucene.apache.org>;
	Mon, 29 Oct 2012 14:20:56 -0600 (MDT)
Received: from webmail.mainstreamdata.com (hedwig.slc.mainstreamdata.com [10.2.1.133])
	by nexus2.mainstreamdata.com (Postfix) with ESMTPS id 1B3EA40063
	for <java-user@lucene.apache.org>; Mon, 29 Oct 2012 14:20:56 -0600 (MDT)
Received: from hedwig.slc.mainstreamdata.com ([10.2.1.133]) by
 hedwig.slc.mainstreamdata.com ([10.2.1.133]) with mapi id 14.01.0355.002;
 Mon, 29 Oct 2012 14:20:55 -0600
From: Scott Smith <ssmith@mainstreamdata.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: RE: lucene 4.0 indexReader is changed
Thread-Topic: lucene 4.0 indexReader is changed
Thread-Index: Ac2z1TKk0Q/hIP63S/KjfxiNs0tTxgANAhIAAIJokQA=
Date: Mon, 29 Oct 2012 20:20:55 +0000
Message-ID: <B29111A755EFB5419E6C7BC998C6E867973DEF@hedwig.slc.mainstreamdata.com>
References: <B29111A755EFB5419E6C7BC998C6E86796EF70@hedwig.slc.mainstreamdata.com>
 <25F0783C4E284129AC2C432771BEF6BC@JackKrupansky>
In-Reply-To: <25F0783C4E284129AC2C432771BEF6BC@JackKrupansky>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-originating-ip: [10.7.5.176]
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

OK.  I'll take a look at that.  Thanks for the help.

Scott

-----Original Message-----
From: Jack Krupansky [mailto:jack@basetechnology.com]=20
Sent: Friday, October 26, 2012 6:07 PM
To: java-user@lucene.apache.org
Subject: Re: lucene 4.0 indexReader is changed

How about DirectoryReader.html#openIfChanged?

See:
http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/index/DirectoryR=
eader.html#openIfChanged(org.apache.lucene.index.DirectoryReader)

-- Jack Krupansky

-----Original Message-----
From: Scott Smith
Sent: Friday, October 26, 2012 7:54 PM
To: java-user@lucene.apache.org
Subject: lucene 4.0 indexReader is changed

How do I determine if the index has been modified in 4.0? The ifchanged() a=
nd isChanged() appear to have been removed.=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct 29 20:23:45 2012
Return-Path: <java-user-return-53962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id ED9F6D503
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 29 Oct 2012 20:23:44 +0000 (UTC)
Received: (qmail 852 invoked by uid 500); 29 Oct 2012 20:23:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 810 invoked by uid 500); 29 Oct 2012 20:23:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 796 invoked by uid 99); 29 Oct 2012 20:23:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Oct 2012 20:23:42 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.138.91.155] (HELO nm25-vm3.bullet.mail.ne1.yahoo.com) (98.138.91.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Oct 2012 20:23:33 +0000
Received: from [98.138.90.57] by nm25.bullet.mail.ne1.yahoo.com with NNFMP; 29 Oct 2012 20:23:11 -0000
Received: from [98.138.89.169] by tm10.bullet.mail.ne1.yahoo.com with NNFMP; 29 Oct 2012 20:23:11 -0000
Received: from [127.0.0.1] by omp1025.mail.ne1.yahoo.com with NNFMP; 29 Oct 2012 20:23:11 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 523445.12401.bm@omp1025.mail.ne1.yahoo.com
Received: (qmail 31667 invoked by uid 60001); 29 Oct 2012 20:23:11 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1351542191; bh=YNz9d5xNCMb/pQ4ISBqjKq/3XEuaN7m9S0un+0t7o98=; h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=S5PWSm/1hzWzh62TqyYSeV3IzqsTpMg5zh6ViUp5UQ9PaDlKciB0Ffk9hZUJeSLiezbjxPY3zXyTQ3WKmdpN18xysXV5HBjYdmUAvloYxyxgMpKa2Aa6s6WFILZD9VbKe3O48hv5s3/2I5INs480Mp1AOrnJQ0uWCBwCpJVOWlI=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=vDqQLcr15Pi3DOFc9VCOUIK0SEAojDQF6iqlIwKz3sDBn0kL8PlzGG8yt0DqdSBFS6Sgw8VsfvDSfJIuLI674nmh/eNgMjr7L3eTbIvGuXH+hdeIFrj3TlyJawYJ8ZJMLoxneJq6GkoVJIlKgzePLBYrSwVJFyNnHo8cYvRHfC8=;
X-YMail-OSG: Sx1rAykVM1mGjH1D_pzkpLVjkof6WSc6IUbbuCOsmfVsVf4
 4VPA7mqHXtbPOS4rwX5Pe6phhJpQeAcyBqO.vZUHTALigYxZWMTC9EX_4E0w
 C4a903jlqXwYObRrAdWU_SXwvcAQHrw7WAB00DCYS3SvXUWrZXeC85BB_ZMK
 EjAHm1kQoYOVwiqP4fmitRdTMv.t_JfTRv4wZelw5vO_B_PteGFAUMBYaVI1
 VZEws_PfrhDASVqsnfIFtiUwUnTCyqnrWoqvxp_KEIMl5emIYePbtWP.O77i
 Lp8WPTlqCf1KELE.WJ5n5HnIYuPDOpTHsdJayKsXRikNgHjOoLyZxB54krx5
 HDuqypLh0j2HVWpeQlkMugArR0IIldCz_cJJYoBeafLyCIfLaUcLKo_ZVJj8
 EByvFAGjuWTg3zImFF3pE4TGakLqMJuYz1.pRc4g4ipn2nRe0rhHKFR5FuX7
 L69pRu6ndufzAKb1uf4u5yUdg_cAEDzDr86wZFHPFfMXdQFsStb6y7PaaJtJ
 3kyrGKeJkhYb32A--
Received: from [90.193.174.140] by web120704.mail.ne1.yahoo.com via HTTP; Mon, 29 Oct 2012 13:23:10 PDT
X-Rocket-MIMEInfo: 001.001,SGkgTGFuY2UsCgpGaWxlIGhhbmRsZXMgY2FuIGJlIGEgcHJvYmxlbSBidXQgdGhlIGluc3RhbnRhbmVvdXMgb3BlbmluZyBvZiBhIGdyZWF0IG1hbnkgZmlsZXMgYXQgZXhhY3RseSB0aGUgc2FtZSB0aW1lIGdpdmUgYSBiaWcgSS9PIGhpdCBkdXJpbmcgYSBxdWVyeS4gVGhpcyBpcyBjb21wb3VuZGVkIGJ5IG1hbnkgaW5kZXhlcyBvbiB0aGUgc2VydmVyIHRoYW4gY2FuIGdldCBoaXQgYXQgdGhlIHNhbWUgdGltZS4gTGltaXRpbmcgdGhlIG51bWJlciBvZiBmaWxlcyBwZXIgaW5kZXggZGlyZWN0b3J5IG1ha2UBMAEBAQE-
X-Mailer: YahooMailWebService/0.8.123.460
References: <1351367074.65440.YahooMailNeo@web120703.mail.ne1.yahoo.com> <10373568.37.1351462292652.JavaMail.lancenorskog@Lance-Norskogs-MacBook-Pro.local>
Message-ID: <1351542190.29035.YahooMailNeo@web120704.mail.ne1.yahoo.com>
Date: Mon, 29 Oct 2012 13:23:10 -0700 (PDT)
From: kiwi clive <kiwi_clive@yahoo.com>
Reply-To: kiwi clive <kiwi_clive@yahoo.com>
Subject: Re: A large number of files in an index (3.6)
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <10373568.37.1351462292652.JavaMail.lancenorskog@Lance-Norskogs-MacBook-Pro.local>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="1167350687-1174186320-1351542190=:29035"
X-Virus-Checked: Checked by ClamAV on apache.org

--1167350687-1174186320-1351542190=:29035
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hi Lance,=0A=0AFile handles can be a problem but the instantaneous opening =
of a great many files at exactly the same time give a big I/O hit during a =
query. This is compounded by many indexes on the server than can get hit at=
 the same time. Limiting the number of files per index directory makes a di=
fference.=0A=0AClive=0A=0A=0A=0A=0A=0A________________________________=0A F=
rom: Lance Norskog <goksron@gmail.com>=0ATo: java-user@lucene.apache.org; k=
iwi clive <kiwi_clive@yahoo.com> =0ASent: Sunday, October 28, 2012 11:09 PM=
=0ASubject: Re: A large number of files in an index (3.6)=0A =0AAn option: =
instead of merging continuously as you run, you can optimize with 'maxSegme=
nts=3D10'. This mean 'optimize but only until there are 10 segments'. If th=
ere are fewer than 10 segments, nothing happens. This lets you schedule mer=
ging I/O.=0A=0AIs the number of files a problem due to file space breakage?=
=0A=0A----- Original Message -----=0A| From: "kiwi clive" <kiwi_clive@yahoo=
.com>=0A| To: java-user@lucene.apache.org=0A| Sent: Saturday, October 27, 2=
012 12:44:34 PM=0A| Subject: A large number of files in an index (3.6)=0A| =
=0A| Hi guys,=0A| =0A| I've recently moved from lucene 2.3 to 3.6. The appl=
ication uses CF=0A| format. With lucene 2.3, I understood the interaction o=
f merge=0A| factor etc with repect to how many files were created in the in=
dex=0A| directory. With a merge factor of 10, the number of files in the=0A=
| index directory could sometimes get up to 30, but you can see the=0A| mer=
ging happen and=A0 the numeber of files would roll up after a while=0A| and=
 settle around 10-15.=0A| =0A| =0A| With lucene 3.6, this is not the case. =
Firstly, even with MergePolicy=0A| set to useCFS, the index appears to be a=
 hybrid of cfs and raw index=0A| format. I can understand that may have bee=
n done for performance=0A| reasons, but it does increase the file count con=
siderably. Also the=0A| rollup of the merged segments is not occurring as i=
t did on the=0A| previous version.=A0 Originally I set the CFSRatio to 1.0 =
and found=0A| the behaviour similar to lucene2.3 (file number wise) but thi=
s came=0A| at a i/o cost and the machines ran with a higher load average. T=
he=0A| higher i/o starts to affect query performance.=A0 Reducing cfsRatio =
to=0A| 0.1 (default), helped reduce i/o load but I=A0 am running several=0A=
| thousand concurrent indexes across many disks on the=A0 servers and=0A| t=
he larger number of files per index means a large number of files=0A| are b=
eing opened when a query hits the index, in addition to the=0A| indexing lo=
ad.=0A| =0A| I'm sure this is probably down to Merge policies and schedules=
, but=0A| there are quite a few knobs to tweak here so some guidance as to =
the=0A| the most beneficial parameters to tweak would be very helpful.=0A| =
=0A| I'm using the LogByteSizeMergePolicy with 3 background merge threads.=
=0A| I'm considering using TieredMergePolicy and even reducing the number=
=0A| of merge threads, but there is not much point if it does not roll up=
=0A| the segments as expected. I can tweak with the cfsRatio but this=0A| s=
trikes me a large hammer and there may be more subtle ways to do=0A| this !=
=0A| =0A| So tell me I'm being stupid, just say 'derr- why dont you do=0A| =
this....' and I'll be a happy man!!=0A| =0A| Thanks,=0A| Clive=0A=0A-------=
--------------------------------------------------------------=0ATo unsubsc=
ribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor additional comm=
ands, e-mail: java-user-help@lucene.apache.org
--1167350687-1174186320-1351542190=:29035--

From java-user-return-53963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Oct 29 22:57:18 2012
Return-Path: <java-user-return-53963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 23EE8D946
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 29 Oct 2012 22:57:18 +0000 (UTC)
Received: (qmail 43245 invoked by uid 500); 29 Oct 2012 22:57:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43207 invoked by uid 500); 29 Oct 2012 22:57:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43199 invoked by uid 99); 29 Oct 2012 22:57:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Oct 2012 22:57:15 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ssmith@mainstreamdata.com designates 209.63.42.202 as permitted sender)
Received: from [209.63.42.202] (HELO nexus2.mainstreamdata.com) (209.63.42.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Oct 2012 22:57:10 +0000
Received: from localhost (localhost [127.0.0.1])
	by nexus2.mainstreamdata.com (Postfix) with ESMTP id 0F65940075
	for <java-user@lucene.apache.org>; Mon, 29 Oct 2012 16:56:50 -0600 (MDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=
	mainstreamdata.com; h=mime-version:content-type:content-type
	:content-language:accept-language:message-id:date:date:subject
	:subject:from:from:received:received:received; s=key1; t=
	1351551408; bh=xA7h/LCRcC2pe2DkWtVzXp6IErOHDU95ktIQDfitzHU=; b=D
	ILet6yVhPdKwcwK45w6M+b7j2H5j8Bdb/NkTmvgMggXX3KSr4VWZ5EbIXGzSz5vX
	pGqSIQLHnVtEqYyLFM6OXMTBr6cKrsRtnccvznON/R7/LKyB3gbsZhEj0Pe0jMcS
	b5G1gbDZvybqgLfAQP27IDNHuRFwQUgDPRyyQ/2hstilzqZWyqKM/Z/NpppcFj4j
	N42wrE6WuRazxZqOL9MTeK0B6pF2EMZT+fyMSo65NqizLpoUNiWeeKBiXZ413/5G
	fKZ0PBbMT+l/0IB+PyLa23OiJxH4V6wDWvrU98/GZp1AHe4Z3oC4HgF/OLmYxboW
	H/0zWNTnC37xnl2iUTMwQ==
X-Virus-Scanned: Debian amavisd-new at nexus2.mainstreamdata.com
Received: from nexus2.mainstreamdata.com ([127.0.0.1])
	by localhost (nexus2.mainstreamdata.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id odBLLDtUKwaD for <java-user@lucene.apache.org>;
	Mon, 29 Oct 2012 16:56:48 -0600 (MDT)
Received: from webmail.mainstreamdata.com (hedwig.slc.mainstreamdata.com [10.2.1.133])
	by nexus2.mainstreamdata.com (Postfix) with ESMTPS id 6E10B4006F
	for <java-user@lucene.apache.org>; Mon, 29 Oct 2012 16:56:48 -0600 (MDT)
Received: from hedwig.slc.mainstreamdata.com ([10.2.1.133]) by
 hedwig.slc.mainstreamdata.com ([10.2.1.133]) with mapi id 14.01.0355.002;
 Mon, 29 Oct 2012 16:56:48 -0600
From: Scott Smith <ssmith@mainstreamdata.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Norms and Term Vectors in Lucene 4.0
Thread-Topic: Norms and Term Vectors in Lucene 4.0
Thread-Index: Ac22KKyzocMtqLa0QIqHb2u3bOVoNw==
Date: Mon, 29 Oct 2012 22:56:47 +0000
Message-ID: <B29111A755EFB5419E6C7BC998C6E8679742E6@hedwig.slc.mainstreamdata.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-originating-ip: [10.7.11.146]
Content-Type: multipart/alternative;
	boundary="_000_B29111A755EFB5419E6C7BC998C6E8679742E6hedwigslcmainstre_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_B29111A755EFB5419E6C7BC998C6E8679742E6hedwigslcmainstre_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Converting some code to lucene 4.0, it appears that we can no longer set wh=
ether we want to store norms or termvectors using the "sugared" Field class=
es (e.g., StringField() and TextField).  I gather the defaults are to store=
 norms and to not store termvectors?

If I don't want norms on a field, then do I need to use the new streamlined=
 Field() and set the appropriate FieldType object parameters?  Is that my o=
nly option?

I assume I also have to go through the new Field() if I need to control Ter=
mVectors?

Where's LIA3 when you need it :)

Scott

--_000_B29111A755EFB5419E6C7BC998C6E8679742E6hedwigslcmainstre_--

From java-user-return-53964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct 30 08:10:54 2012
Return-Path: <java-user-return-53964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6B31DD3E7
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 30 Oct 2012 08:10:54 +0000 (UTC)
Received: (qmail 49052 invoked by uid 500); 30 Oct 2012 08:10:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48836 invoked by uid 500); 30 Oct 2012 08:10:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48755 invoked by uid 99); 30 Oct 2012 08:10:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Oct 2012 08:10:48 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-ob0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Oct 2012 08:10:23 +0000
Received: by mail-ob0-f176.google.com with SMTP id x4so6409057obh.35
        for <java-user@lucene.apache.org>; Tue, 30 Oct 2012 01:10:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        bh=cWjiQijrfUY9PGvlpiiIbR82U6gIaUOTQ9lqXn7w9Kw=;
        b=keubtz/6ySefAX6xuOP7wFFJxm/nyokk361tsi+CDfakfIZbKOdWAe1G/UoZh1wSxc
         /PceVgU5QpMvUEueixJSVMf10Rysd8GcXTAq576Qk5ocurWnYrbYBLRCbHrLirnheX+/
         g3WjDXe4srM/stXTK/UQY1eCb6X2owP+yhXL3PRqaKd8sr1jKr5C4/aLUbPZ5uoFNine
         dgzC3EjgG8AmUN0oZ4NkiN66RuEFbI8b9coq8kjItpBu5ceeB0+SVc/SCgU4LgLeJQV7
         +t2JV9JQUOyivnsmPgUu1SGyQJSfxpov0CYaaU4CKW9CbCsxGiTJ3mMLCulQPgh3UMHe
         Rrpg==
MIME-Version: 1.0
Received: by 10.182.131.37 with SMTP id oj5mr26599109obb.54.1351584600281;
 Tue, 30 Oct 2012 01:10:00 -0700 (PDT)
Received: by 10.60.11.72 with HTTP; Tue, 30 Oct 2012 01:10:00 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <B29111A755EFB5419E6C7BC998C6E8679742E6@hedwig.slc.mainstreamdata.com>
References: <B29111A755EFB5419E6C7BC998C6E8679742E6@hedwig.slc.mainstreamdata.com>
Date: Tue, 30 Oct 2012 09:10:00 +0100
Message-ID: <CAAHmpkiix5U=-k+-6pNykb2NJsd9CEa6d7SrU1wTg0YgNLgiqQ@mail.gmail.com>
Subject: Re: Norms and Term Vectors in Lucene 4.0
From: Simon Willnauer <simon.willnauer@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

hey scott,

On Mon, Oct 29, 2012 at 11:56 PM, Scott Smith <ssmith@mainstreamdata.com> w=
rote:
> Converting some code to lucene 4.0, it appears that we can no longer set =
whether we want to store norms or termvectors using the "sugared" Field cla=
sses (e.g., StringField() and TextField).  I gather the defaults are to sto=
re norms and to not store termvectors?

the defaults are omitNorms=3Dfalse & storeTermVectors=3Dfalse so we don't
store TV but do store norms by default. In production I usually
recommend to use your own FieldType and share the instance across
fields. In yourcase you can just do this:

FieldType t =3D new FieldType(TextField.TYPE_NOT_STORED);
t.setOmitNorms(true);
t.freeze();

new Field(...,t)

>
> If I don't want norms on a field, then do I need to use the new streamlin=
ed Field() and set the appropriate FieldType object parameters?  Is that my=
 only option?
>
> I assume I also have to go through the new Field() if I need to control T=
ermVectors?
>
> Where's LIA3 when you need it :)

yeah man that is a good question!

simon
>
> Scott

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct 30 08:26:16 2012
Return-Path: <java-user-return-53965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5B427D28D
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 30 Oct 2012 08:26:16 +0000 (UTC)
Received: (qmail 88332 invoked by uid 500); 30 Oct 2012 08:26:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88123 invoked by uid 500); 30 Oct 2012 08:26:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88074 invoked by uid 99); 30 Oct 2012 08:26:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Oct 2012 08:26:13 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [62.213.161.134] (HELO pmx.sirma.bg) (62.213.161.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Oct 2012 08:26:07 +0000
X-Virus-Scanned: Sirma Antivirus System
Received: from [192.168.128.140] (ivasilev.sirma.int [192.168.128.140])
	by pmx.sirma.bg (Sirma mail system) with ESMTP id 0B24924012
	for <java-user@lucene.apache.org>; Tue, 30 Oct 2012 10:25:44 +0200 (EET)
Message-ID: <508F8F07.5080001@sirma.bg>
Date: Tue, 30 Oct 2012 10:25:43 +0200
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Mozilla/5.0 (Windows NT 5.2; rv:16.0) Gecko/20121010 Thunderbird/16.0.1
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Term Positions added to one document forward
References: <508EC07A.30108@sirma.bg> <CAAHmpkjYebvwgz2_Y65UKy30HV=hrQMAm17+6Yw_AL+Yk7EUgQ@mail.gmail.com>
In-Reply-To: <CAAHmpkjYebvwgz2_Y65UKy30HV=hrQMAm17+6Yw_AL+Yk7EUgQ@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Simon!

On 29.10.2012 . 21:38, Simon Willnauer wrote:
> you should call currDocsAndPositions.nextPosition() before you call
> currDocsAndPositions.getPayload()  payloads are per positions so you
> need to advance the pos first!
>
> simon
>
> On Mon, Oct 29, 2012 at 6:44 PM, Ivan Vasilev <ivasilev@sirma.bg> wrote:
>> Hi Guys,
>>
>> I use the following code to index documents and set Payloads to term
>> positions:
>>
>> public class TestPayloads_ {
>>      private static final String INDEX_DIR =
>>              "E:/Temp/Index";
>>
>>      public static void main(String[] args) throws Exception {
>>          IndexWriterConfig iwc = new IndexWriterConfig(Version.LUCENE_40, new
>> MyAnalyzer_());
>>          iwc.setOpenMode(OpenMode.CREATE);
>>          IndexWriter writer = new IndexWriter(FSDirectory.open(new
>> File(INDEX_DIR)), iwc);
>>
>>          FieldType fieldType = new FieldType();
>>          IndexOptions indexOptions =
>> IndexOptions.DOCS_AND_FREQS_AND_POSITIONS_AND_OFFSETS;
>>          fieldType.setIndexOptions(indexOptions);
>>          fieldType.setIndexed(true);
>>          fieldType.setOmitNorms(true);
>>          fieldType.setStored(true);
>>          fieldType.freeze();
>>
>>          Document doc = new Document();
>>          doc.add(new Field("content", "one two three four.", fieldType));
>>          writer.addDocument(doc);
>>
>>          writer.addDocument(doc);
>>          writer.addDocument(doc);
>>
>>          writer.close();
>>
>>          DirectoryReader dr = DirectoryReader.open(FSDirectory.open(new
>> File(INDEX_DIR)));
>>          AtomicReader sr = dr.leaves().get(0).reader();
>>
>>          Bits liveDocs = sr.getLiveDocs();
>>          Fields fields = sr.fields();
>>          for (String currFieldName : fields) {
>>              Terms currTerms = fields.terms(currFieldName);
>>              TermsEnum currTermEnum = currTerms.iterator(null);
>>              boolean currTermsHasPayloads = currTerms.hasPayloads();
>>              BytesRef currFieldValue;
>>              while ((currFieldValue = currTermEnum.next()) != null) {
>>                  String currVfieldValueStr = currFieldValue.utf8ToString();
>> //                    DocsEnum currDocsEnum = currTermEnum.docs(liveDocs,
>> null);
>>                  DocsAndPositionsEnum currDocsAndPositions =
>>                      currTermEnum.docsAndPositions(liveDocs, null,
>>                          DocsAndPositionsEnum.FLAG_PAYLOADS
>>                          | DocsAndPositionsEnum.FLAG_OFFSETS);
>>                  int docID;
>>                  while ((docID = currDocsAndPositions.nextDoc()) !=
>> DocsEnum.NO_MORE_DOCS) {
>>                      int freq = currDocsAndPositions.freq();
>>                      for (int i = 0; i < freq; i++) {
>>                          byte payload;
>>                          if (currTermsHasPayloads &&
>> currDocsAndPositions.getPayload() != null) {
>>                              payload =
>> currDocsAndPositions.getPayload().bytes[0];
>>                          } else {
>>                              payload = -1;
>>                          }
>>                          System.out.println("Term: (" + currFieldName + ":" +
>> currVfieldValueStr + "); doc: "
>>                              + docID + "; position: " +
>> currDocsAndPositions.nextPosition()
>>                              + "; payload: " + payload);
>>                      }
>>                  }
>>              }
>>          }
>>          dr.close();
>>      }
>>
>> }
>>
>> class MyAnalyzer_ extends Analyzer {
>>      @Override
>>      protected TokenStreamComponents createComponents(String fieldName,
>> Reader reader) {
>>          Tokenizer tokenizer = new StandardTokenizer(Version.LUCENE_40,
>> reader);
>>          return new TokenStreamComponents(tokenizer, new
>> MyFilter_(tokenizer));
>>      }
>>
>> }
>>
>> class MyFilter_ extends TokenFilter {
>>      private PayloadAttribute payloadAttr;
>>      private byte[] payloadVal;
>>
>>      MyFilter_(TokenStream in) {
>>          super(in);
>>          payloadAttr = addAttribute(PayloadAttribute.class);
>>          payloadVal = new byte[1];
>>      }
>>      public final boolean incrementToken() throws IOException {
>>          if (input.incrementToken()) {
>>              payloadVal[0]++;
>>              payloadAttr.setPayload(new BytesRef(payloadVal));
>>              return true;
>>          } else {
>>              return false;
>>          }
>>      }
>> }
>>
>>
>>
>>
>> The output is the following:
>>
>> Term: (content:four); doc: 0; position: 3; payload: -1
>> Term: (content:four); doc: 1; position: 3; payload: 4
>> Term: (content:four); doc: 2; position: 3; payload: 8
>> Term: (content:one); doc: 0; position: 0; payload: -1
>> Term: (content:one); doc: 1; position: 0; payload: 1
>> Term: (content:one); doc: 2; position: 0; payload: 5
>> Term: (content:three); doc: 0; position: 2; payload: -1
>> Term: (content:three); doc: 1; position: 2; payload: 3
>> Term: (content:three); doc: 2; position: 2; payload: 7
>> Term: (content:two); doc: 0; position: 1; payload: -1
>> Term: (content:two); doc: 1; position: 1; payload: 2
>> Term: (content:two); doc: 2; position: 1; payload: 6
>>
>>
>> The payloads of document with Lucene ID #0 were not added. Payloads that
>> were intended to doc #0 were added to doc #1, those intended for doc #1 were
>> added to doc #2.
>> With the debugger I see that during adding doc #0 payloadVal is incremented
>> form 1 to 4, and after each incrementation is invoked
>> payloadAttr.setPayload(..), but strangely when reading
>> DocsAndPositionsEnumwe see those payloads (1 to 4) belong actually to doc
>> #1.
>>
>> Do I make some mistake with invoking setPayload(..) method or it is a bug?
>>
>> Cheers,
>> Ivan Vasilev
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct 30 10:17:44 2012
Return-Path: <java-user-return-53966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C76D6D887
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 30 Oct 2012 10:17:44 +0000 (UTC)
Received: (qmail 85882 invoked by uid 500); 30 Oct 2012 10:17:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85641 invoked by uid 500); 30 Oct 2012 10:17:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85619 invoked by uid 99); 30 Oct 2012 10:17:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Oct 2012 10:17:40 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [193.196.8.10] (HELO linux3.ids-mannheim.de) (193.196.8.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Oct 2012 10:17:34 +0000
Received: from linux2.ids-mannheim.de ([10.0.1.1])
	by linux3.ids-mannheim.de with smtp (Exim 4.72)
	(envelope-from <schnober@ids-mannheim.de>)
	id 1TT8sj-0003Mb-Ar
	for java-user@lucene.apache.org; Tue, 30 Oct 2012 11:17:13 +0100
Received: (qmail 4170 invoked from network); 30 Oct 2012 10:17:12 -0000
Received: from unknown (HELO ?10.99.1.49?) (10.99.1.49)
  by linux2.ids-mannheim.de with SMTP; 30 Oct 2012 10:17:12 -0000
Message-ID: <508FA929.4090100@ids-mannheim.de>
Date: Tue, 30 Oct 2012 11:17:13 +0100
From: Carsten Schnober <schnober@ids-mannheim.de>
Organization: Institut =?ISO-8859-15?Q?f=FCr_Deutsche_Sprache?=
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:16.0) Gecko/20121028 Thunderbird/16.0.2
MIME-Version: 1.0
To: java-user@lucene.apache.org
References: <508E794F.20101@ids-mannheim.de>
In-Reply-To: <508E794F.20101@ids-mannheim.de>
Content-Type: text/plain; charset=ISO-8859-15
Content-Transfer-Encoding: 8bit
X-SA-Do-Not-Run: Yes
X-SA-Exim-Connect-IP: 10.0.1.1
X-SA-Exim-Rcpt-To: java-user@lucene.apache.org
X-SA-Exim-Mail-From: schnober@ids-mannheim.de
X-Spam-Checker-Version: SpamAssassin 3.3.2 (2011-06-06) on
	linux3.ids-mannheim.de
X-Spam-Level: 
Subject: Re: SpanQuery, Filter, BooleanQuery
X-SA-Exim-Version: 4.2.1 (built Mon, 03 Jul 2006 09:34:15 +0200)
X-SA-Exim-Scanned: Yes (on linux3.ids-mannheim.de)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-1.1 required=3.0 tests=BAYES_00,RDNS_NONE,
	TO_NO_BRKTS_NORDNS autolearn=no version=3.3.2

Am 29.10.2012 13:40, schrieb Carsten Schnober:

> Now, I'd like to add the option to filter the resulting Spans object by
> another WildcardQuery on a different field that contains document
> titles. My intuitive approach would have been to use a filter like this:

I'd like to conclude my previous post in a less elaborate way: I need to

a) combine two WildcardQueries so that I can still use
SpanMultiTermQueryWrapper to generate a SpanQuery.

b) apply a filter to a WildcardQuery so that the WildcardQuery's results
are reduced before converting it to a SpanQuery using
SpanMultiTermQueryWrapper.

Answer b) seems intuitively the way to go there, but I don't quite find
the correct path there because the filter does not work as intended (see
my previous post).
Answer a) does not seem feasible here either because
SpanMultiTermQueryWrapper requires a MultiTermQuery, but not a BooleanQuery.

Any hints on that?
Best,
Carsten


-- 
Institut fr Deutsche Sprache | http://www.ids-mannheim.de
Projekt KorAP                 | http://korap.ids-mannheim.de
Tel. +49-(0)621-43740789      | schnober@ids-mannheim.de
Korpusanalyseplattform der nchsten Generation
Next Generation Corpus Analysis Platform

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct 30 12:48:12 2012
Return-Path: <java-user-return-53967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 23B86DC69
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 30 Oct 2012 12:48:12 +0000 (UTC)
Received: (qmail 68468 invoked by uid 500); 30 Oct 2012 12:48:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68097 invoked by uid 500); 30 Oct 2012 12:48:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 96971 invoked by uid 99); 30 Oct 2012 11:42:27 -0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vitino_mr@hotmail.com designates 65.54.190.88 as permitted sender)
Message-ID: <BAY161-W32DB5FD57DE97D0D4DB3E98C620@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_d57c9eb5-b33c-401c-afc6-8fc33911c353_"
X-Originating-IP: [87.217.91.133]
From: ViTi No <vitino_mr@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: Delete file index entries that do not exist physically
Date: Tue, 30 Oct 2012 12:41:57 +0100
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 30 Oct 2012 11:41:58.0020 (UTC) FILETIME=[91719440:01CDB693]
X-Virus-Checked: Checked by ClamAV on apache.org

--_d57c9eb5-b33c-401c-afc6-8fc33911c353_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Hello=2C
I have a Lucene index created=2C and I would like to know how to delete the=
 file index entries that do not already exist on the computer. Is there any=
 way from Lucene or have to go file by file opening a file=2C and by checki=
ng for java?
the example is as follows: I have a directory which contains indexed by luc=
ene 5 files=2C when I delete a file physically=2C I want to update the inde=
x to be removed that record lucene index. What I know is raising the logic =
to get you started=2C or if Lucene brings some option to do it automaticall=
y.
Regards and thanks 		 	   		  =

--_d57c9eb5-b33c-401c-afc6-8fc33911c353_--

From java-user-return-53968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct 30 13:40:11 2012
Return-Path: <java-user-return-53968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2FA4DD0AE
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 30 Oct 2012 13:40:11 +0000 (UTC)
Received: (qmail 4423 invoked by uid 500); 30 Oct 2012 13:40:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3846 invoked by uid 500); 30 Oct 2012 13:40:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3752 invoked by uid 99); 30 Oct 2012 13:40:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Oct 2012 13:40:06 +0000
X-ASF-Spam-Status: No, hits=3.8 required=5.0
	tests=HK_RANDOM_ENVFROM,HK_RANDOM_FROM,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of qibaoyuan@126.com designates 220.181.15.62 as permitted sender)
Received: from [220.181.15.62] (HELO m15-62.126.com) (220.181.15.62)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Oct 2012 13:39:57 +0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=126.com;
	s=s110527; h=Received:Date:From:To:Subject:In-Reply-To:
	References:Content-Type:MIME-Version:Message-ID; bh=0X0Tyl/Ts7rJ
	CzFID2E6sYzCekEkVoSFwGI7MmaOU+Q=; b=kw8GFjflApBGF0moA07kI4IX7xVM
	P9efwpSp6iyihTu0YovML+RqAsg64dpdorKFKfZuR4Ma5+aZoyJqHYboShjhvnkf
	laC/wlfPP/DG+ojJRPP84kg1ebZSu7aqpGRLfrFVX4L1lJGpTIQTKlrau/kHMcj7
	pIu6mum//rZkfsI=
Received: from qibaoyuan$126.com ( [159.226.43.35] ) by ajax-webmail-wmsvr62
 (Coremail) ; Tue, 30 Oct 2012 21:39:34 +0800 (CST)
X-Originating-IP: [159.226.43.35]
Date: Tue, 30 Oct 2012 21:39:34 +0800 (CST)
From: qibaoyuan  <qibaoyuan@126.com>
To: java-user@lucene.apache.org
Subject: Re:Delete file index entries that do not exist physically
X-Priority: 3
X-Mailer: Coremail Webmail Server Version SP_ntes V3.5 build
 20121016(20100.4985.4909) Copyright (c) 2002-2012 www.mailtech.cn 126com
In-Reply-To: <BAY161-W32DB5FD57DE97D0D4DB3E98C620@phx.gbl>
References: <BAY161-W32DB5FD57DE97D0D4DB3E98C620@phx.gbl>
X-CM-CTRLDATA: WM8keWZvb3Rlcl9odG09MTgyNTo4MQ==
Content-Type: multipart/alternative; 
	boundary="----=_Part_964322_1378602533.1351604374415"
MIME-Version: 1.0
Message-ID: <75ae73ac.3e445.13ab1e60b8f.Coremail.qibaoyuan@126.com>
X-CM-TRANSID:PsqowEApU0KW2I9QZBpcAA--.2875W
X-CM-SenderInfo: 5tlet0h1xd0qqrswhudrp/1tbiaQlYNE1r0OE4tgACsX
X-Coremail-Antispam: 1U5529EdanIXcx71UUUUU7vcSsGvfC2KfnxnUU==
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_964322_1378602533.1351604374415
Content-Type: text/plain; charset=GBK
Content-Transfer-Encoding: 7bit



      Maybe Luke(code.google.com/p/luke/) could help you out without coding.




At 2012-10-30 19:41:57,"ViTi No" <vitino_mr@hotmail.com> wrote:
>
>Hello,
>I have a Lucene index created, and I would like to know how to delete the file index entries that do not already exist on the computer. Is there any way from Lucene or have to go file by file opening a file, and by checking for java?
>the example is as follows: I have a directory which contains indexed by lucene 5 files, when I delete a file physically, I want to update the index to be removed that record lucene index. What I know is raising the logic to get you started, or if Lucene brings some option to do it automatically.
>Regards and thanks 		 	   		  

------=_Part_964322_1378602533.1351604374415--


From java-user-return-53969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct 30 13:45:05 2012
Return-Path: <java-user-return-53969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A84BFD0E0
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 30 Oct 2012 13:45:05 +0000 (UTC)
Received: (qmail 16316 invoked by uid 500); 30 Oct 2012 13:45:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15780 invoked by uid 500); 30 Oct 2012 13:45:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15746 invoked by uid 99); 30 Oct 2012 13:45:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Oct 2012 13:45:01 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ochrist@ebscohost.com designates 140.234.253.24 as permitted sender)
Received: from [140.234.253.24] (HELO eumail101.epnet.com) (140.234.253.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Oct 2012 13:44:51 +0000
Received: from pdc-smtp1.epnet.com (pdc-smtp1-ext.epnet.com [140.234.252.47])
	by eumail101.epnet.com (8.13.6/8.13.6/EP8.13) with ESMTP id q9UDiTcQ004868
	(version=TLSv1/SSLv3 cipher=DHE-DSS-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 30 Oct 2012 09:44:29 -0400
Received: from exchange.corp.epnet.com (exchange.corp.epnet.com [10.68.91.21])
	by pdc-smtp1.epnet.com (8.13.6/8.13.6/EP8.13) with ESMTP id q9UDiPDb012065
	for <java-user@lucene.apache.org>; Tue, 30 Oct 2012 09:44:28 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CDB6A4.19042BC9"
Subject: WFST/Analyzing Suggesters: foreign keys, user-supplied filter, highlighting
Date: Tue, 30 Oct 2012 09:40:16 -0400
Message-ID: <BBB9F0110BBE664AA1BD301B11473BD2027DE1AC@exchange.corp.epnet.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: WFST/Analyzing Suggesters: foreign keys, user-supplied filter, highlighting
Thread-Index: Ac22pBhbT4FizxWKSZ2jy7JNSx7yEw==
From: "Oliver Christ" <ochrist@ebscohost.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01CDB6A4.19042BC9
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

=20

I'm currently researching using a WFST suggester on e.g. book titles.
While our basic use cases are well covered, there seem to be at least
three which aren't:=20

=20

*         The possibility to associate a "foreign key" with a string
(rather: final node) in the WFST (in addition to the rank). For example,
I'd like to add "Lucene in Action" with key 1933988177 (the ISBN) and
some rank to the WFST. A completion would return the completed string
and the key associated with each entry (i.e. final nodes get a "key"
field (int), which is returned in the LookupResult). That foreign key
could also be used for fast de-duping (no more string/byte array
comparisons).

=20

*         When looking up completions, I'd like to be able to specify a
filter which further determines whether some completion should be
considered or not. Assume, for example, that I'm only interested in
computer science books, but can't maintain separate WFSTs for each
subject area. Given some completion candidate (represented by its key),
the filter would be called (with the key as a parameter) to determine
whether or not the completion candidate should be added to the result
queue.=20

=20

*         Highlighting of the completed portions (i.e. explicit markup
of user-provided vs. auto-completed portions of a completion).

=20

What's your take on the above? What would be the best way to achieve
this? We want to use AnalyzingSuggester, so the above applies
particularly to them.=20

=20

My current research indicates the following:

=20

*         There may be workarounds for the "foreign key" use case -it
seems that lots of data structures would be affected by storing a
user-provided key with final nodes, which therefore may not be a viable
path. It may be possible to encode the foreign key in the transducer's
output instead.

*         Adding a filter/predicate to the AnalyzingSuggester is simple,
as TopNSearcher<> already uses acceptResult() to test whether some
completion should be added - that can be overridden in a derived
searcher class which simply calls the predicate. Ideally the suggesters
would access some kind of factory to instantiate the searcher to be used
(instead of hardwiring it in).

*         I haven't found a simple solution for the highlighting yet,
particularly when using AnalyzingSuggester (where it's non-trivial).=20

=20

Thanks a lot!

=20

Cheers, Oli

=20


------_=_NextPart_001_01CDB6A4.19042BC9--

From java-user-return-53970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct 30 14:20:58 2012
Return-Path: <java-user-return-53970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 69D2FD232
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 30 Oct 2012 14:20:58 +0000 (UTC)
Received: (qmail 27856 invoked by uid 500); 30 Oct 2012 14:20:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27743 invoked by uid 500); 30 Oct 2012 14:20:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27725 invoked by uid 99); 30 Oct 2012 14:20:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Oct 2012 14:20:55 +0000
X-ASF-Spam-Status: No, hits=1.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of parnab.2007@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-ia0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Oct 2012 14:20:48 +0000
Received: by mail-ia0-f176.google.com with SMTP id h11so233627iae.35
        for <java-user@lucene.apache.org>; Tue, 30 Oct 2012 07:20:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=SemLSHIF5ZURY3fN1sHbqs/tKrk2yBSeS7tOu2y2tTs=;
        b=HiwA64W7tRRt6VkrIJReLKpzVG9cwU/nwWgJgSSNneDyu5tJxFFdiZyEdsgJRr0TOk
         ShicT2dZWl52K2+6pazU+BfaXpIcsAEkGzlG6vjE+sQZEGd/l/R7/X4fruq9VMKFfnk+
         kZdRIzshSM1TwxAvLcg9cKUpGAetpqEdZ7E57lFGxj/BFxDeGJwGsa7+3xzJ1lQyqDSU
         uZWAkCSa9+QpqHXmk3EzT6nxiU9JFTBF9VZuygUPTbIb5sVhInA4PXNaDFoZkfIWBeq1
         jmq8ackQmv1FwsfmEvFNnrnSUI0Fm5pylcMafrrIS2FDdBT4+8K53xefzsc+uZhARXm+
         CRKw==
MIME-Version: 1.0
Received: by 10.50.17.200 with SMTP id q8mr1619766igd.46.1351606828311; Tue,
 30 Oct 2012 07:20:28 -0700 (PDT)
Received: by 10.50.94.165 with HTTP; Tue, 30 Oct 2012 07:20:28 -0700 (PDT)
Date: Tue, 30 Oct 2012 19:50:28 +0530
Message-ID: <CAMOEry=Af2byoBs7+NxFzK1vunRKbkB4ET2Y5geb4GwUd3viNg@mail.gmail.com>
Subject: Using new similarities in Lucene 4.0
From: parnab kumar <parnab.2007@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=14dae9340961e0a5da04cd477c4e
X-Virus-Checked: Checked by ClamAV on apache.org

--14dae9340961e0a5da04cd477c4e
Content-Type: text/plain; charset=ISO-8859-1

Hi all,

      Lucene 4 has introduced several state of the art ranking functions. I
was wondering how could i make use of those similarities .These models
obviously uses some more term and collection statistics as opposed to
the traditional Vector Space Model . I guess these statistics
are  precomputed during indexing .Should there be any changes to the
indexing mechanism ,like specifying the indexing options to make use of
these models .

Thanks,
Parnab

--14dae9340961e0a5da04cd477c4e--

From java-user-return-53971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct 30 15:44:33 2012
Return-Path: <java-user-return-53971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 666ADD496
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 30 Oct 2012 15:44:33 +0000 (UTC)
Received: (qmail 81746 invoked by uid 500); 30 Oct 2012 15:44:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81674 invoked by uid 500); 30 Oct 2012 15:44:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81568 invoked by uid 99); 30 Oct 2012 15:44:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Oct 2012 15:44:26 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.160.48] (HELO mail-pb0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Oct 2012 15:44:20 +0000
Received: by mail-pb0-f48.google.com with SMTP id wy7so278542pbc.35
        for <java-user@lucene.apache.org>; Tue, 30 Oct 2012 08:43:59 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:x-gm-message-state;
        bh=TI/NXdOOFiN98e0Aq2wUFIp+Rv20GWBpk+e9i7ONLto=;
        b=kmoWFyy7/3QVU4lw9zVRAkZ/dlb8hnuv/R5i2rfPgO9iBAnqQAJJ+G2KgIHuCbgVKI
         cbjvMAYHioNipu0P1XygnaxMzj7x3AOxR+/SDZS4btcb6Z0w0gA+rQBhv9UksFR6uFLS
         EWQcOY8VVymkNZCml2T/I4MyMrGBYHMKUP8HbjWs+yfNnGTOpnHI3de575/TU+RwXKWF
         scwI9tXoVH4ZQSZRdyY6+HIQMUX8nahIfzV88SoajAN2ia3C7bnjgOOAYMLnhlCQ5F3D
         v7S+jbSCXP6TwNCe9TqGiqFHOHHPk5F0sKZVNNLgP7cUcA49VmTbtMuYF4F0zPiKhtNg
         Fcdw==
Received: by 10.68.220.2 with SMTP id ps2mr103369046pbc.61.1351611838928; Tue,
 30 Oct 2012 08:43:58 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.68.152.67 with HTTP; Tue, 30 Oct 2012 08:43:38 -0700 (PDT)
In-Reply-To: <BBB9F0110BBE664AA1BD301B11473BD2027DE1AC@exchange.corp.epnet.com>
References: <BBB9F0110BBE664AA1BD301B11473BD2027DE1AC@exchange.corp.epnet.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Tue, 30 Oct 2012 11:43:38 -0400
Message-ID: <CAL8PwkYGKA7dLaVQpQQQxnK_bTejmct=7zzO_fdUnNPPzWbhbA@mail.gmail.com>
Subject: Re: WFST/Analyzing Suggesters: foreign keys, user-supplied filter, highlighting
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQnT3XkD+SyUCCcoqK5HxN6zrE2BA5Mk2X/8rXfG1aa03Sppe3GT4XhfPgkpb+CZkPKDfQGe
X-Virus-Checked: Checked by ClamAV on apache.org

Ideas/comments below:

On Tue, Oct 30, 2012 at 9:40 AM, Oliver Christ <ochrist@ebscohost.com> wrote:

> I'm currently researching using a WFST suggester on e.g. book titles.
> While our basic use cases are well covered, there seem to be at least
> three which aren't:
>
> *         The possibility to associate a "foreign key" with a string
> (rather: final node) in the WFST (in addition to the rank). For example,
> I'd like to add "Lucene in Action" with key 1933988177 (the ISBN) and
> some rank to the WFST. A completion would return the completed string
> and the key associated with each entry (i.e. final nodes get a "key"
> field (int), which is returned in the LookupResult). That foreign key
> could also be used for fast de-duping (no more string/byte array
> comparisons).

This is maybe the same idea as
https://issues.apache.org/jira/browse/LUCENE-4491 ?  Could you simply
stuff your ISBN onto the end of the suggestion (ie enroll Lucene in
Action|1933988177)?

> *         When looking up completions, I'd like to be able to specify a
> filter which further determines whether some completion should be
> considered or not. Assume, for example, that I'm only interested in
> computer science books, but can't maintain separate WFSTs for each
> subject area. Given some completion candidate (represented by its key),
> the filter would be called (with the key as a parameter) to determine
> whether or not the completion candidate should be added to the result
> queue.

The new AnalyzingSuggester (coming in 4.1) actually has something like
this, internally, in its search.  It does this to remove duplicate
surface forms (so it doesn't suggest the same thing more than once).
Maybe we could expose this so that eg you could subclass WFSTSuggester
w/ your own filtering function and it will keep searching until it
finds topN that your filter accepts?  Or alternatively you could pull
a big topN and then filter yourself later, but that's less
efficient...

> *         Highlighting of the completed portions (i.e. explicit markup
> of user-provided vs. auto-completed portions of a completion).

Hmm could you do this in the app level?  Ie, hilite the common prefix yourself?

> What's your take on the above? What would be the best way to achieve
> this? We want to use AnalyzingSuggester, so the above applies
> particularly to them.

I think this is great feedback ... suggesters have been getting a lot
of attention lately.  Maybe open an issue for the custom filtering of
candidates?

> My current research indicates the following:
>
>
>
> *         There may be workarounds for the "foreign key" use case -it
> seems that lots of data structures would be affected by storing a
> user-provided key with final nodes, which therefore may not be a viable
> path. It may be possible to encode the foreign key in the transducer's
> output instead.

Maybe we could add a "payload" (stored in the FST's output) for each
suggestion...

> *         Adding a filter/predicate to the AnalyzingSuggester is simple,
> as TopNSearcher<> already uses acceptResult() to test whether some
> completion should be added - that can be overridden in a derived
> searcher class which simply calls the predicate. Ideally the suggesters
> would access some kind of factory to instantiate the searcher to be used
> (instead of hardwiring it in).

Exactly!  One gotchya is you have to be careful about the
maxQueueDepth, because if your acceptResult accepts too few results
then the queue may have pruned away paths that would have led to a
valid topN path ...

We may also invert all of these FST based suggests, and expose
building blocks for apps to build up custom suggesters.  There are
many use cases we need to accommodate and we have a ways to converge
on a clear API here ...

> *         I haven't found a simple solution for the highlighting yet,
> particularly when using AnalyzingSuggester (where it's non-trivial).

Ahh I see ... it is challenging in that case.  Hmm.  Maybe open an
issue for this as well, so we can discuss/iterate?

Mike McCandless

http://blog.mikemccandless.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct 30 17:30:21 2012
Return-Path: <java-user-return-53972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BF3A4D8EE
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 30 Oct 2012 17:30:21 +0000 (UTC)
Received: (qmail 91020 invoked by uid 500); 30 Oct 2012 17:30:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90662 invoked by uid 500); 30 Oct 2012 17:30:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89633 invoked by uid 99); 30 Oct 2012 17:30:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Oct 2012 17:30:15 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ssmith@mainstreamdata.com designates 209.63.42.202 as permitted sender)
Received: from [209.63.42.202] (HELO nexus2.mainstreamdata.com) (209.63.42.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Oct 2012 17:30:09 +0000
Received: from localhost (localhost [127.0.0.1])
	by nexus2.mainstreamdata.com (Postfix) with ESMTP id 65D3B400F0;
	Tue, 30 Oct 2012 11:29:47 -0600 (MDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=
	mainstreamdata.com; h=mime-version:content-transfer-encoding
	:content-type:content-type:content-language:accept-language
	:in-reply-to:references:message-id:date:date:subject:subject
	:from:from:received:received:received; s=key1; t=1351618183; bh=
	CNfIoZEDd6oUIsXd/4haMwAYtr4g0qLDm3rDBQrb1lM=; b=DZfbkfS9fwBIlHMQ
	xvztqaZxC7SEEXp02baEguj7DhKd7ACGmnqvyn37N45GAvoiMROlTYLoBh/lm/m+
	ze4vR61gre2IdrjIhj7IE09hktB749TRSzCP+udyV9zrzoRajvetjD4xpV6cgevL
	G279ruLY/nLHjOoxmKWIFEXj4UDJxW4kzsB0oM+QiF/yeXOV8ODN+mMZpxGMdHJn
	sOP4hORle+u/zK3eE4WR2ACxFyqDRw1dWpUzMGIM9oNKUDfh9rkKN4XIiquHJTnl
	UGymOMGTOFWWR0uwQBOzKrrD2V9lmemjK1ZHuAmCeJQopM358fXOgluYJ0jFFcxx
	dvSBSQ==
X-Virus-Scanned: Debian amavisd-new at nexus2.mainstreamdata.com
Received: from nexus2.mainstreamdata.com ([127.0.0.1])
	by localhost (nexus2.mainstreamdata.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id PqCRZIf7UIJ1; Tue, 30 Oct 2012 11:29:43 -0600 (MDT)
Received: from webmail.mainstreamdata.com (hedwig.slc.mainstreamdata.com [10.2.1.133])
	by nexus2.mainstreamdata.com (Postfix) with ESMTPS id 069F6400EF;
	Tue, 30 Oct 2012 11:29:43 -0600 (MDT)
Received: from hedwig.slc.mainstreamdata.com ([10.2.1.133]) by
 hedwig.slc.mainstreamdata.com ([10.2.1.133]) with mapi id 14.01.0355.002;
 Tue, 30 Oct 2012 11:29:42 -0600
From: Scott Smith <ssmith@mainstreamdata.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>,
	"simon.willnauer@gmail.com" <simon.willnauer@gmail.com>
Subject: RE: Norms and Term Vectors in Lucene 4.0
Thread-Topic: Norms and Term Vectors in Lucene 4.0
Thread-Index: Ac22KKyzocMtqLa0QIqHb2u3bOVoNwAf5LQAAAblYuA=
Date: Tue, 30 Oct 2012 17:29:42 +0000
Message-ID: <B29111A755EFB5419E6C7BC998C6E86797614D@hedwig.slc.mainstreamdata.com>
References: <B29111A755EFB5419E6C7BC998C6E8679742E6@hedwig.slc.mainstreamdata.com>
 <CAAHmpkiix5U=-k+-6pNykb2NJsd9CEa6d7SrU1wTg0YgNLgiqQ@mail.gmail.com>
In-Reply-To: <CAAHmpkiix5U=-k+-6pNykb2NJsd9CEa6d7SrU1wTg0YgNLgiqQ@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-originating-ip: [10.7.11.146]
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

VGhhbmtzIFNpbW9uLiAgQXBwZWFycyBJIGhhZCBpdCBtb3N0bHkgZmlndXJlZCBvdXQgY29ycmVj
dGx5LS1leGNlcHQgZm9yIHRoZSBsYXN0IHF1ZXN0aW9uIDotKQ0KDQpUaGFua3MgZm9yIHRoZSBz
dWdnZXN0aW9uIG9uIGNhY2hpbmcgdGhlIGZpZWxkdHlwZS4NCg0KQ2hlZXJzDQoNClNjb3R0DQoN
Ci0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQpGcm9tOiBTaW1vbiBXaWxsbmF1ZXIgW21haWx0
bzpzaW1vbi53aWxsbmF1ZXJAZ21haWwuY29tXSANClNlbnQ6IFR1ZXNkYXksIE9jdG9iZXIgMzAs
IDIwMTIgMjoxMCBBTQ0KVG86IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZw0KU3ViamVjdDog
UmU6IE5vcm1zIGFuZCBUZXJtIFZlY3RvcnMgaW4gTHVjZW5lIDQuMA0KDQpoZXkgc2NvdHQsDQoN
Ck9uIE1vbiwgT2N0IDI5LCAyMDEyIGF0IDExOjU2IFBNLCBTY290dCBTbWl0aCA8c3NtaXRoQG1h
aW5zdHJlYW1kYXRhLmNvbT4gd3JvdGU6DQo+IENvbnZlcnRpbmcgc29tZSBjb2RlIHRvIGx1Y2Vu
ZSA0LjAsIGl0IGFwcGVhcnMgdGhhdCB3ZSBjYW4gbm8gbG9uZ2VyIHNldCB3aGV0aGVyIHdlIHdh
bnQgdG8gc3RvcmUgbm9ybXMgb3IgdGVybXZlY3RvcnMgdXNpbmcgdGhlICJzdWdhcmVkIiBGaWVs
ZCBjbGFzc2VzIChlLmcuLCBTdHJpbmdGaWVsZCgpIGFuZCBUZXh0RmllbGQpLiAgSSBnYXRoZXIg
dGhlIGRlZmF1bHRzIGFyZSB0byBzdG9yZSBub3JtcyBhbmQgdG8gbm90IHN0b3JlIHRlcm12ZWN0
b3JzPw0KDQp0aGUgZGVmYXVsdHMgYXJlIG9taXROb3Jtcz1mYWxzZSAmIHN0b3JlVGVybVZlY3Rv
cnM9ZmFsc2Ugc28gd2UgZG9uJ3Qgc3RvcmUgVFYgYnV0IGRvIHN0b3JlIG5vcm1zIGJ5IGRlZmF1
bHQuIEluIHByb2R1Y3Rpb24gSSB1c3VhbGx5IHJlY29tbWVuZCB0byB1c2UgeW91ciBvd24gRmll
bGRUeXBlIGFuZCBzaGFyZSB0aGUgaW5zdGFuY2UgYWNyb3NzIGZpZWxkcy4gSW4geW91cmNhc2Ug
eW91IGNhbiBqdXN0IGRvIHRoaXM6DQoNCkZpZWxkVHlwZSB0ID0gbmV3IEZpZWxkVHlwZShUZXh0
RmllbGQuVFlQRV9OT1RfU1RPUkVEKTsNCnQuc2V0T21pdE5vcm1zKHRydWUpOw0KdC5mcmVlemUo
KTsNCg0KbmV3IEZpZWxkKC4uLix0KQ0KDQo+DQo+IElmIEkgZG9uJ3Qgd2FudCBub3JtcyBvbiBh
IGZpZWxkLCB0aGVuIGRvIEkgbmVlZCB0byB1c2UgdGhlIG5ldyBzdHJlYW1saW5lZCBGaWVsZCgp
IGFuZCBzZXQgdGhlIGFwcHJvcHJpYXRlIEZpZWxkVHlwZSBvYmplY3QgcGFyYW1ldGVycz8gIElz
IHRoYXQgbXkgb25seSBvcHRpb24/DQo+DQo+IEkgYXNzdW1lIEkgYWxzbyBoYXZlIHRvIGdvIHRo
cm91Z2ggdGhlIG5ldyBGaWVsZCgpIGlmIEkgbmVlZCB0byBjb250cm9sIFRlcm1WZWN0b3JzPw0K
Pg0KPiBXaGVyZSdzIExJQTMgd2hlbiB5b3UgbmVlZCBpdCA6KQ0KDQp5ZWFoIG1hbiB0aGF0IGlz
IGEgZ29vZCBxdWVzdGlvbiENCg0Kc2ltb24NCj4NCj4gU2NvdHQNCg0KLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQpU
byB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNo
ZS5vcmcNCkZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1
Y2VuZS5hcGFjaGUub3JnDQoNCg==
DQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11
bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMs
IGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcNCg0K

From java-user-return-53973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct 30 19:53:49 2012
Return-Path: <java-user-return-53973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0F687DE26
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 30 Oct 2012 19:53:49 +0000 (UTC)
Received: (qmail 71877 invoked by uid 500); 30 Oct 2012 19:53:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71706 invoked by uid 500); 30 Oct 2012 19:53:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71698 invoked by uid 99); 30 Oct 2012 19:53:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Oct 2012 19:53:46 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dawid.weiss@gmail.com designates 209.85.220.48 as permitted sender)
Received: from [209.85.220.48] (HELO mail-pa0-f48.google.com) (209.85.220.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Oct 2012 19:53:40 +0000
Received: by mail-pa0-f48.google.com with SMTP id kp12so426695pab.35
        for <java-user@lucene.apache.org>; Tue, 30 Oct 2012 12:53:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=D3A6jFpaTikjsUxGfTXlAljWLyPVnJm1WMIvjwCbG58=;
        b=CVHlhHyI3Pd48VZcxe2JKId12HQ+SHt6LBAo4QWXjVzGhBlj6uMdNokB8WRV2RZU9M
         fsWUDH/o1ebIulBVWs/MK8U/iAmmZS5a6jaCh9RphujfdiGLZXDAZLV2cGsvjAiOO/x2
         uDXeN23MplIxAaBw+OZ6XT0Vs6JtG3X4NuJ9Ju1blsXyTRekuNw0+84BtQ3TrYN18UDa
         RYS5CS1Y/30mAW+JWgXJWhztPqCxv/ugqR9ShY9yXISGe6OZmz9rNk+Y+uDcNPnzAY/u
         ciCWA9JHWG3OnFNvk5QKfeESBAbyRcKwkmPPge7zF1JCrBpG5v7vLIqgvrao6hluUJPM
         gyHg==
Received: by 10.68.135.234 with SMTP id pv10mr104952324pbb.156.1351626799703;
 Tue, 30 Oct 2012 12:53:19 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.66.218.102 with HTTP; Tue, 30 Oct 2012 12:52:59 -0700 (PDT)
In-Reply-To: <CAL8PwkYGKA7dLaVQpQQQxnK_bTejmct=7zzO_fdUnNPPzWbhbA@mail.gmail.com>
References: <BBB9F0110BBE664AA1BD301B11473BD2027DE1AC@exchange.corp.epnet.com> <CAL8PwkYGKA7dLaVQpQQQxnK_bTejmct=7zzO_fdUnNPPzWbhbA@mail.gmail.com>
From: Dawid Weiss <dawid.weiss@gmail.com>
Date: Tue, 30 Oct 2012 20:52:59 +0100
Message-ID: <CAM21Rt8GRC7NmX6T9sz8OTUr1gwRUR+Ay1td5HvuFdAz=6FDhg@mail.gmail.com>
Subject: Re: WFST/Analyzing Suggesters: foreign keys, user-supplied filter, highlighting
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

> https://issues.apache.org/jira/browse/LUCENE-4491 ?  Could you simply
> stuff your ISBN onto the end of the suggestion (ie enroll Lucene in
> Action|1933988177)?

Just remember that if your suffixes are unique then you'll be
expanding the automaton quite a bit (unique suffix paths).

D.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Oct 30 21:22:53 2012
Return-Path: <java-user-return-53974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DD546D1BB
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 30 Oct 2012 21:22:52 +0000 (UTC)
Received: (qmail 41918 invoked by uid 500); 30 Oct 2012 21:22:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41868 invoked by uid 500); 30 Oct 2012 21:22:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41859 invoked by uid 99); 30 Oct 2012 21:22:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Oct 2012 21:22:50 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.220.48] (HELO mail-pa0-f48.google.com) (209.85.220.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Oct 2012 21:22:45 +0000
Received: by mail-pa0-f48.google.com with SMTP id kp12so478627pab.35
        for <java-user@lucene.apache.org>; Tue, 30 Oct 2012 14:22:24 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:x-gm-message-state;
        bh=jHqQkyQZvgMrbXcuNfam9q/7jnUz+YZ1Uvb2zj4RCEo=;
        b=ZSYYVnPvKG4VsO4Liss8Iqe2gkG/F2wWZFqXGTA45S0EzHInAx33JG6RbDobFjLkuv
         CWWXJXZ578/jK8/M6viHNCoBSnaB0fEctn+xL/Va9iCzPHCcxZh1cEzRHzRj8aJlLrLd
         FNxCVL9T1UrRFgcp4WyHrJ0IOxfMKk925jCytAbrk/ujuWdqLXt1IHgENeoGOJF3bZnr
         0xskKUPXhAisKvDgsQFuKsaSJ4NwcH7TJm/cQiNMxLljX/3PMw6BQRJ7ueHpMVWAF41m
         wZhIoLNtGEcNUni2teLJbm1dVpdRc3i1eyZEyL7x2xa9Fnl0xdyy2FwtXIL2Fwdq3e4+
         LXQQ==
Received: by 10.68.237.6 with SMTP id uy6mr4680437pbc.147.1351632144830; Tue,
 30 Oct 2012 14:22:24 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.68.152.67 with HTTP; Tue, 30 Oct 2012 14:22:04 -0700 (PDT)
In-Reply-To: <CAM21Rt8GRC7NmX6T9sz8OTUr1gwRUR+Ay1td5HvuFdAz=6FDhg@mail.gmail.com>
References: <BBB9F0110BBE664AA1BD301B11473BD2027DE1AC@exchange.corp.epnet.com>
 <CAL8PwkYGKA7dLaVQpQQQxnK_bTejmct=7zzO_fdUnNPPzWbhbA@mail.gmail.com> <CAM21Rt8GRC7NmX6T9sz8OTUr1gwRUR+Ay1td5HvuFdAz=6FDhg@mail.gmail.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Tue, 30 Oct 2012 17:22:04 -0400
Message-ID: <CAL8PwkbEJfhrLn6sV34UvKinS8RqSqhKMzCA7aKyy3P7n4LeYw@mail.gmail.com>
Subject: Re: WFST/Analyzing Suggesters: foreign keys, user-supplied filter, highlighting
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQn2T6eL+6m/68mnJwT3kUnvj8MNl7eXqtMWWDjqkLw0/Vi5PI+sQSPnuYKvTnASfW7Wqzp+
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, Oct 30, 2012 at 3:52 PM, Dawid Weiss <dawid.weiss@gmail.com> wrote:

>> https://issues.apache.org/jira/browse/LUCENE-4491 ?  Could you simply
>> stuff your ISBN onto the end of the suggestion (ie enroll Lucene in
>> Action|1933988177)?
>
> Just remember that if your suffixes are unique then you'll be
> expanding the automaton quite a bit (unique suffix paths).

That's a good point... encoding into the FST's output may be better.

Mike McCandless

http://blog.mikemccandless.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 31 00:35:41 2012
Return-Path: <java-user-return-53975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B396AD733
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 31 Oct 2012 00:35:41 +0000 (UTC)
Received: (qmail 28602 invoked by uid 500); 31 Oct 2012 00:35:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28556 invoked by uid 500); 31 Oct 2012 00:35:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28546 invoked by uid 99); 31 Oct 2012 00:35:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Oct 2012 00:35:39 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of vitino_mr@hotmail.com designates 65.54.190.95 as permitted sender)
Received: from [65.54.190.95] (HELO bay0-omc2-s20.bay0.hotmail.com) (65.54.190.95)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Oct 2012 00:35:29 +0000
Received: from BAY161-W41 ([65.54.190.123]) by bay0-omc2-s20.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Tue, 30 Oct 2012 17:35:08 -0700
Message-ID: <BAY161-W4171675763334C3DA5B40B8C610@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_8e4ef780-b7ed-4522-84b1-5928bf1d8ccc_"
X-Originating-IP: [87.217.91.133]
From: ViTi No <vitino_mr@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: Re:Delete file index entries that do not exist physically
Date: Wed, 31 Oct 2012 01:35:07 +0100
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 31 Oct 2012 00:35:08.0569 (UTC) FILETIME=[945D9890:01CDB6FF]
X-Virus-Checked: Checked by ClamAV on apache.org

--_8e4ef780-b7ed-4522-84b1-5928bf1d8ccc_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


I need to do it in code because I'm making a desktop application in java=2C=
 and I will update the index correctly in the background=2C without the use=
r would appear nothing=2C then it is ok to make use Luke to do this.Thanks =
for your answer 		 	   		  =

--_8e4ef780-b7ed-4522-84b1-5928bf1d8ccc_--

From java-user-return-53976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 31 03:28:21 2012
Return-Path: <java-user-return-53976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C52FFD59C
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 31 Oct 2012 03:28:21 +0000 (UTC)
Received: (qmail 91905 invoked by uid 500); 31 Oct 2012 03:28:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91490 invoked by uid 500); 31 Oct 2012 03:28:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91226 invoked by uid 99); 31 Oct 2012 03:28:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Oct 2012 03:28:12 +0000
X-ASF-Spam-Status: No, hits=2.0 required=5.0
	tests=SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.26 is neither permitted nor denied by domain of superruiye@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Oct 2012 03:28:07 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <superruiye@gmail.com>)
	id 1TTOy2-00053H-Rn
	for java-user@lucene.apache.org; Tue, 30 Oct 2012 20:27:46 -0700
Date: Tue, 30 Oct 2012 20:27:46 -0700 (PDT)
From: superruiye <superruiye@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1351654066852-4017179.post@n3.nabble.com>
Subject: "read past EOF" when merge
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

 The exception "read past EOF" Bothering me a long time, trace at below.


Exception in thread "Lucene Merge Thread #7"
org.apache.lucene.index.MergePolicy$MergeException: java.io.IOException:
read past EOF
        at
org.apache.lucene.index.ConcurrentMergeScheduler.handleMergeException(ConcurrentMergeScheduler.java:517)
        at
org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:482)
Caused by: java.io.IOException: read past EOF
        at
org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java:207)
        at
org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.java:39)
        at org.apache.lucene.store.DataInput.readVInt(DataInput.java:105)
        at
org.apache.lucene.store.BufferedIndexInput.readVInt(BufferedIndexInput.java:181)
        at
org.apache.lucene.index.SegmentTermPositions.readDeltaPosition(SegmentTermPositions.java:76)
        at
org.apache.lucene.index.SegmentTermPositions.nextPosition(SegmentTermPositions.java:72)
        at
org.apache.lucene.index.SegmentMerger.appendPostings(SegmentMerger.java:594)
        at
org.apache.lucene.index.SegmentMerger.mergeTermInfos(SegmentMerger.java:538)
        at
org.apache.lucene.index.SegmentMerger.mergeTerms(SegmentMerger.java:470)
        at
org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:109)
        at
org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:4273)
        at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:3917)
        at
org.apache.lucene.index.ConcurrentMergeScheduler.doMerge(ConcurrentMergeScheduler.java:388)
        at
org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:456)


in this time,it come in merge time,but it index successfully and I can
search the new index info.I use lucene 3.4.0,and some config in
IndexWriterConfig is:
indexWriterConfig.setMaxBufferedDocs(2000);
indexWriterConfig.setRAMBufferSizeMB(64);

I used a PostponeCommitDeletionPolicy I rewrite ,and it delete the commit
after commits.get(i).getTimestamp 5 minutes.




--
View this message in context: http://lucene.472066.n3.nabble.com/read-past-EOF-when-merge-tp4017179.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 31 12:17:12 2012
Return-Path: <java-user-return-53977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 28F32D4B9
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 31 Oct 2012 12:17:12 +0000 (UTC)
Received: (qmail 49561 invoked by uid 500); 31 Oct 2012 12:17:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49357 invoked by uid 500); 31 Oct 2012 12:17:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49328 invoked by uid 99); 31 Oct 2012 12:17:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Oct 2012 12:17:08 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ochrist@ebscohost.com designates 140.234.253.24 as permitted sender)
Received: from [140.234.253.24] (HELO eumail101.epnet.com) (140.234.253.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Oct 2012 12:17:00 +0000
Received: from pdc-smtp1.epnet.com (pdc-smtp1-ext.epnet.com [140.234.252.47])
	by eumail101.epnet.com (8.13.6/8.13.6/EP8.13) with ESMTP id q9VCGdPu017037
	(version=TLSv1/SSLv3 cipher=DHE-DSS-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 31 Oct 2012 08:16:39 -0400
Received: from exchange.corp.epnet.com (exchange.corp.epnet.com [10.68.91.21])
	by pdc-smtp1.epnet.com (8.13.6/8.13.6/EP8.13) with ESMTP id q9VCGdQ4018610
	for <java-user@lucene.apache.org>; Wed, 31 Oct 2012 08:16:39 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: WFST/Analyzing Suggesters: foreign keys, user-supplied filter, highlighting
Date: Wed, 31 Oct 2012 08:16:38 -0400
Message-ID: <BBB9F0110BBE664AA1BD301B11473BD2027DE8C1@exchange.corp.epnet.com>
In-Reply-To: <CAL8PwkbEJfhrLn6sV34UvKinS8RqSqhKMzCA7aKyy3P7n4LeYw@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: WFST/Analyzing Suggesters: foreign keys, user-supplied filter, highlighting
Thread-Index: Ac225LrOb0ujIJ+4SSWut6/dXYWE/gAfLKaw
References: <BBB9F0110BBE664AA1BD301B11473BD2027DE1AC@exchange.corp.epnet.com> <CAL8PwkYGKA7dLaVQpQQQxnK_bTejmct=7zzO_fdUnNPPzWbhbA@mail.gmail.com> <CAM21Rt8GRC7NmX6T9sz8OTUr1gwRUR+Ay1td5HvuFdAz=6FDhg@mail.gmail.com> <CAL8PwkbEJfhrLn6sV34UvKinS8RqSqhKMzCA7aKyy3P7n4LeYw@mail.gmail.com>
From: "Oliver Christ" <ochrist@ebscohost.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,=20

I've added

LUCENE-4516 - Suggesters: allow to associate a user-specified key (int)
with a string

LUCENE-4517 - Suggesters: allow to pass a user-defined predicate/filter
to the completion searcher=20

LUCENE-4518 - Suggesters: highlighting (explicit markup of user-typed
portions vs. generated portions in a suggestion)

Cheers, Oli

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Sent: Tuesday, October 30, 2012 5:22 PM
To: java-user@lucene.apache.org
Subject: Re: WFST/Analyzing Suggesters: foreign keys, user-supplied
filter, highlighting

On Tue, Oct 30, 2012 at 3:52 PM, Dawid Weiss <dawid.weiss@gmail.com>
wrote:

>> https://issues.apache.org/jira/browse/LUCENE-4491 ?  Could you simply

>> stuff your ISBN onto the end of the suggestion (ie enroll Lucene in
>> Action|1933988177)?
>
> Just remember that if your suffixes are unique then you'll be=20
> expanding the automaton quite a bit (unique suffix paths).

That's a good point... encoding into the FST's output may be better.

Mike McCandless

http://blog.mikemccandless.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 31 12:31:49 2012
Return-Path: <java-user-return-53978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BD227D4E9
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 31 Oct 2012 12:31:49 +0000 (UTC)
Received: (qmail 92187 invoked by uid 500); 31 Oct 2012 12:31:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91988 invoked by uid 500); 31 Oct 2012 12:31:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91954 invoked by uid 99); 31 Oct 2012 12:31:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Oct 2012 12:31:46 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.160.48] (HELO mail-pb0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Oct 2012 12:31:41 +0000
Received: by mail-pb0-f48.google.com with SMTP id wy7so986673pbc.35
        for <java-user@lucene.apache.org>; Wed, 31 Oct 2012 05:31:21 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:x-gm-message-state;
        bh=WEAAwat1V6chJvltrYVRtXpYG17pktBnViJbZOX//2A=;
        b=FYQP4ET2PAMVYAqjIxQwe+E2lzmYSnfIYF8oBnPJh6BvxipV502HZ9SAi9Hm6CiuK0
         te6sfnhMZX1psSRb4x8iS7aU8hVRSycqYdAI1UVoIzBHR48iL3buyP664JKhfiSvjzJ+
         F0y4nDZ4MCoiJrS4DbUalmjvsw2T26Ia36odyPZsM8PVZvh+sMXIL6hBzrqG1x5NGAAU
         ujgse7ICryv1SvGXa0S5davtWFywpgBqkgAypDxGulmbamosbC6zNlAQjAaEKRL9Jvwr
         Y5X5Ksg5qem5ux3yzlhSikrh0UFXUUnrqj/CwhreZBWe7OSAeVTJzoUNBa9EIM9TfInm
         ohqA==
Received: by 10.68.218.97 with SMTP id pf1mr2682811pbc.96.1351686681033; Wed,
 31 Oct 2012 05:31:21 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.68.152.67 with HTTP; Wed, 31 Oct 2012 05:31:00 -0700 (PDT)
In-Reply-To: <BBB9F0110BBE664AA1BD301B11473BD2027DE8C1@exchange.corp.epnet.com>
References: <BBB9F0110BBE664AA1BD301B11473BD2027DE1AC@exchange.corp.epnet.com>
 <CAL8PwkYGKA7dLaVQpQQQxnK_bTejmct=7zzO_fdUnNPPzWbhbA@mail.gmail.com>
 <CAM21Rt8GRC7NmX6T9sz8OTUr1gwRUR+Ay1td5HvuFdAz=6FDhg@mail.gmail.com>
 <CAL8PwkbEJfhrLn6sV34UvKinS8RqSqhKMzCA7aKyy3P7n4LeYw@mail.gmail.com> <BBB9F0110BBE664AA1BD301B11473BD2027DE8C1@exchange.corp.epnet.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Wed, 31 Oct 2012 08:31:00 -0400
Message-ID: <CAL8Pwka4a1gZqPiXf+EM6iagCTXQxeOqu6vyyqC-rrAkgfWS=g@mail.gmail.com>
Subject: Re: WFST/Analyzing Suggesters: foreign keys, user-supplied filter, highlighting
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQmQQQpOGlBkGDmzIwn5hwB3qEHkzXB1oqRmZFAgqiYELgbkN+O/AX9imLDDK6CHAnlnjvxN
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks!

Mike McCandless

http://blog.mikemccandless.com


On Wed, Oct 31, 2012 at 8:16 AM, Oliver Christ <ochrist@ebscohost.com> wrote:
> Hi,
>
> I've added
>
> LUCENE-4516 - Suggesters: allow to associate a user-specified key (int)
> with a string
>
> LUCENE-4517 - Suggesters: allow to pass a user-defined predicate/filter
> to the completion searcher
>
> LUCENE-4518 - Suggesters: highlighting (explicit markup of user-typed
> portions vs. generated portions in a suggestion)
>
> Cheers, Oli
>
> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]
> Sent: Tuesday, October 30, 2012 5:22 PM
> To: java-user@lucene.apache.org
> Subject: Re: WFST/Analyzing Suggesters: foreign keys, user-supplied
> filter, highlighting
>
> On Tue, Oct 30, 2012 at 3:52 PM, Dawid Weiss <dawid.weiss@gmail.com>
> wrote:
>
>>> https://issues.apache.org/jira/browse/LUCENE-4491 ?  Could you simply
>
>>> stuff your ISBN onto the end of the suggestion (ie enroll Lucene in
>>> Action|1933988177)?
>>
>> Just remember that if your suffixes are unique then you'll be
>> expanding the automaton quite a bit (unique suffix paths).
>
> That's a good point... encoding into the FST's output may be better.
>
> Mike McCandless
>
> http://blog.mikemccandless.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 31 12:35:17 2012
Return-Path: <java-user-return-53979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D2051D4F1
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 31 Oct 2012 12:35:17 +0000 (UTC)
Received: (qmail 99257 invoked by uid 500); 31 Oct 2012 12:35:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99175 invoked by uid 500); 31 Oct 2012 12:35:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99011 invoked by uid 99); 31 Oct 2012 12:35:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Oct 2012 12:35:14 +0000
X-ASF-Spam-Status: No, hits=1.3 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.160.48] (HELO mail-pb0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Oct 2012 12:35:08 +0000
Received: by mail-pb0-f48.google.com with SMTP id wy7so988591pbc.35
        for <java-user@lucene.apache.org>; Wed, 31 Oct 2012 05:34:46 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:x-gm-message-state;
        bh=T9A1mC8LsITbWuAlJIMF8yngpkajn+Zn8lETxJOQkNs=;
        b=Hd8rMavXspxQwWKynQ8JHFQE0P/wKfiDueD5xwzP/PJjnrKZohv6OskWY54w5iNtJs
         7xe8QM3Ht30SVlragBrIm+Zd45apf6hP6fOW5PjZ1KQcQeoCo2O5kLiIoabKttETKGLN
         VYFH2qHkiPnE2V6Qg9Flw5d1LvqzG4CmiPMtk9pO7p+4m09IuhsF1r2DKcf6D2DmFO0p
         ZqdhEO1W+QrZKKBFSIELCBm2Ot96EQMCxBUlsZKk2H8+UKhLwUI/T7rSzyJ/0lYNgW7Z
         OVLT9J43Q8UFFGkeEQevQLTUI2ktPJ+eHeqeyRzTVFzyag4QkNVVsZixLC9T9GYy6UfN
         H9PQ==
Received: by 10.68.197.71 with SMTP id is7mr112029568pbc.79.1351686886641;
 Wed, 31 Oct 2012 05:34:46 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.68.152.67 with HTTP; Wed, 31 Oct 2012 05:34:26 -0700 (PDT)
In-Reply-To: <1351654066852-4017179.post@n3.nabble.com>
References: <1351654066852-4017179.post@n3.nabble.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Wed, 31 Oct 2012 08:34:26 -0400
Message-ID: <CAL8PwkZHnmZGSih9gvtcDCkRpQiN-cY0D-ZwDDfQsCCMtL-17g@mail.gmail.com>
Subject: Re: "read past EOF" when merge
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQkkodakoxwORA7zNuVpnlgMHaDCM7JoMyLc10AnJpSeKYLFLSnGYHA+D9dOJ0826Dodopvs
X-Virus-Checked: Checked by ClamAV on apache.org

Run CheckIndex on the index?

What filesystem is IndexWriter using to write to the index...?

Have you changed the LockFactory on the Directory?

Mike McCandless

http://blog.mikemccandless.com

On Tue, Oct 30, 2012 at 11:27 PM, superruiye <superruiye@gmail.com> wrote:
>  The exception "read past EOF" Bothering me a long time, trace at below.
>
>
> Exception in thread "Lucene Merge Thread #7"
> org.apache.lucene.index.MergePolicy$MergeException: java.io.IOException:
> read past EOF
>         at
> org.apache.lucene.index.ConcurrentMergeScheduler.handleMergeException(ConcurrentMergeScheduler.java:517)
>         at
> org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:482)
> Caused by: java.io.IOException: read past EOF
>         at
> org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java:207)
>         at
> org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.java:39)
>         at org.apache.lucene.store.DataInput.readVInt(DataInput.java:105)
>         at
> org.apache.lucene.store.BufferedIndexInput.readVInt(BufferedIndexInput.java:181)
>         at
> org.apache.lucene.index.SegmentTermPositions.readDeltaPosition(SegmentTermPositions.java:76)
>         at
> org.apache.lucene.index.SegmentTermPositions.nextPosition(SegmentTermPositions.java:72)
>         at
> org.apache.lucene.index.SegmentMerger.appendPostings(SegmentMerger.java:594)
>         at
> org.apache.lucene.index.SegmentMerger.mergeTermInfos(SegmentMerger.java:538)
>         at
> org.apache.lucene.index.SegmentMerger.mergeTerms(SegmentMerger.java:470)
>         at
> org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:109)
>         at
> org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:4273)
>         at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:3917)
>         at
> org.apache.lucene.index.ConcurrentMergeScheduler.doMerge(ConcurrentMergeScheduler.java:388)
>         at
> org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:456)
>
>
> in this time,it come in merge time,but it index successfully and I can
> search the new index info.I use lucene 3.4.0,and some config in
> IndexWriterConfig is:
> indexWriterConfig.setMaxBufferedDocs(2000);
> indexWriterConfig.setRAMBufferSizeMB(64);
>
> I used a PostponeCommitDeletionPolicy I rewrite ,and it delete the commit
> after commits.get(i).getTimestamp 5 minutes.
>
>
>
>
> --
> View this message in context: http://lucene.472066.n3.nabble.com/read-past-EOF-when-merge-tp4017179.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 31 13:43:17 2012
Return-Path: <java-user-return-53980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9992AD6AB
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 31 Oct 2012 13:43:17 +0000 (UTC)
Received: (qmail 71436 invoked by uid 500); 31 Oct 2012 13:43:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70175 invoked by uid 500); 31 Oct 2012 13:43:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69968 invoked by uid 99); 31 Oct 2012 13:43:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Oct 2012 13:43:09 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [62.213.161.134] (HELO pmx.sirma.bg) (62.213.161.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Oct 2012 13:43:03 +0000
X-Virus-Scanned: Sirma Antivirus System
Received: from [192.168.128.140] (ivasilev.sirma.int [192.168.128.140])
	by pmx.sirma.bg (Sirma mail system) with ESMTP id B36C324018
	for <java-user@lucene.apache.org>; Wed, 31 Oct 2012 15:42:40 +0200 (EET)
Message-ID: <50912AD0.9040300@sirma.bg>
Date: Wed, 31 Oct 2012 15:42:40 +0200
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Mozilla/5.0 (Windows NT 5.2; rv:16.0) Gecko/20121010 Thunderbird/16.0.1
MIME-Version: 1.0
To: LUCENE MAIL LIST <java-user@lucene.apache.org>
Subject: IntField vs (IntDocValuesField + StoredField)
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hy Guys,

Is there some advantage in speed or index size to use this:

IntDocValuesField fld = new IntDocValuesField("fldName", 1);
StoredField fld = new StoredField("fldName", 1);

instead of this:

IntField fld = new IntField("fld", 1, Field.Store.YES);

Searching, sorting and retrieving data from just one object (IntField) 
is easier than dealing with two objects (IntDocValuesField and 
StoredFiel) for the same field.
So as Lucene includes the also latter alternative, there might be some 
advantages using it?

Cheers,
Ivan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 31 13:53:07 2012
Return-Path: <java-user-return-53981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 13A86D6C7
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 31 Oct 2012 13:53:07 +0000 (UTC)
Received: (qmail 90158 invoked by uid 500); 31 Oct 2012 13:53:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90033 invoked by uid 500); 31 Oct 2012 13:53:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90010 invoked by uid 99); 31 Oct 2012 13:53:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Oct 2012 13:53:04 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.210.48] (HELO mail-da0-f48.google.com) (209.85.210.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Oct 2012 13:52:59 +0000
Received: by mail-da0-f48.google.com with SMTP id z8so677180dad.35
        for <java-user@lucene.apache.org>; Wed, 31 Oct 2012 06:52:38 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:x-gm-message-state;
        bh=2n7wW2c3j5WKH2pEGN4c9/VJcXQdOiNiHzyZVbz62uU=;
        b=CzRA364yFh/Udf4jRB1Sw/+EXo38kOlKpvbtHQuFD/PFfESbdqA0NN8fGbh4cj72QC
         PiCEDEqwRBL3jco7o7Ai2x+zcrE+MHoAX/W1mUNBAZkB12SeNDuaSv8mS+28uuzVA+Vl
         sOJOgvFPLWg8WyHjO+ZCEVBwfILWILi9Iz1YZc+53XCqqob9vJQexjVqnd4nlO1q8s1n
         AE7uDj9qOx2GFPJgkm2dPxry+ZA5Ux1BKfVptLnrURPzLxRT1mcSbCFqPd0Nn+aqsWqG
         r8DW1pktCORvcFCg9omywd8GA+CXUzkzam95gMCXLcpoMTgWmRoDjr3j3Pffr7bg/ai4
         Vr8Q==
Received: by 10.68.230.234 with SMTP id tb10mr112492926pbc.71.1351691558578;
 Wed, 31 Oct 2012 06:52:38 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.68.152.67 with HTTP; Wed, 31 Oct 2012 06:52:18 -0700 (PDT)
In-Reply-To: <50912AD0.9040300@sirma.bg>
References: <50912AD0.9040300@sirma.bg>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Wed, 31 Oct 2012 09:52:18 -0400
Message-ID: <CAL8Pwkay1MQf-uuim0hjOEyY8Ao4CeXVVHRtXdc-kLj4ZzL4bw@mail.gmail.com>
Subject: Re: IntField vs (IntDocValuesField + StoredField)
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQm82uKXY8I8OxaSt15fD+jEECrQxzL/SXgegucUg72ezRZfoSf2gmlQtnHsv52MIRu5gSwT
X-Virus-Checked: Checked by ClamAV on apache.org

The big advantage of IntField is you can do NumericRangeQuery/Filter
on the field.

Mike McCandless

http://blog.mikemccandless.com

On Wed, Oct 31, 2012 at 9:42 AM, Ivan Vasilev <ivasilev@sirma.bg> wrote:
> Hy Guys,
>
> Is there some advantage in speed or index size to use this:
>
> IntDocValuesField fld = new IntDocValuesField("fldName", 1);
> StoredField fld = new StoredField("fldName", 1);
>
> instead of this:
>
> IntField fld = new IntField("fld", 1, Field.Store.YES);
>
> Searching, sorting and retrieving data from just one object (IntField) is
> easier than dealing with two objects (IntDocValuesField and StoredFiel) for
> the same field.
> So as Lucene includes the also latter alternative, there might be some
> advantages using it?
>
> Cheers,
> Ivan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 31 14:14:40 2012
Return-Path: <java-user-return-53982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2EA87D7AC
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 31 Oct 2012 14:14:40 +0000 (UTC)
Received: (qmail 57430 invoked by uid 500); 31 Oct 2012 14:14:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57378 invoked by uid 500); 31 Oct 2012 14:14:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57356 invoked by uid 99); 31 Oct 2012 14:14:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Oct 2012 14:14:37 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [62.213.161.134] (HELO pmx.sirma.bg) (62.213.161.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Oct 2012 14:14:31 +0000
X-Virus-Scanned: Sirma Antivirus System
Received: from [192.168.128.140] (ivasilev.sirma.int [192.168.128.140])
	by pmx.sirma.bg (Sirma mail system) with ESMTP id 6CE6224018
	for <java-user@lucene.apache.org>; Wed, 31 Oct 2012 16:14:10 +0200 (EET)
Message-ID: <50913231.3080706@sirma.bg>
Date: Wed, 31 Oct 2012 16:14:09 +0200
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Mozilla/5.0 (Windows NT 5.2; rv:16.0) Gecko/20121010 Thunderbird/16.0.1
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: IntField vs (IntDocValuesField + StoredField)
References: <50912AD0.9040300@sirma.bg> <CAL8Pwkay1MQf-uuim0hjOEyY8Ao4CeXVVHRtXdc-kLj4ZzL4bw@mail.gmail.com>
In-Reply-To: <CAL8Pwkay1MQf-uuim0hjOEyY8Ao4CeXVVHRtXdc-kLj4ZzL4bw@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Mike.

On 31.10.2012 . 15:52, Michael McCandless wrote:
> The big advantage of IntField is you can do NumericRangeQuery/Filter
> on the field.
>
> Mike McCandless
>
> http://blog.mikemccandless.com
>
> On Wed, Oct 31, 2012 at 9:42 AM, Ivan Vasilev <ivasilev@sirma.bg> wrote:
>> Hy Guys,
>>
>> Is there some advantage in speed or index size to use this:
>>
>> IntDocValuesField fld = new IntDocValuesField("fldName", 1);
>> StoredField fld = new StoredField("fldName", 1);
>>
>> instead of this:
>>
>> IntField fld = new IntField("fld", 1, Field.Store.YES);
>>
>> Searching, sorting and retrieving data from just one object (IntField) is
>> easier than dealing with two objects (IntDocValuesField and StoredFiel) for
>> the same field.
>> So as Lucene includes the also latter alternative, there might be some
>> advantages using it?
>>
>> Cheers,
>> Ivan
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 31 14:17:21 2012
Return-Path: <java-user-return-53983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D046CD7C8
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 31 Oct 2012 14:17:21 +0000 (UTC)
Received: (qmail 67816 invoked by uid 500); 31 Oct 2012 14:17:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67719 invoked by uid 500); 31 Oct 2012 14:17:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67315 invoked by uid 99); 31 Oct 2012 14:17:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Oct 2012 14:17:17 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of uwe@thetaphi.de designates 188.138.97.18 as permitted sender)
Received: from [188.138.97.18] (HELO mail.sd-datasolutions.de) (188.138.97.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Oct 2012 14:17:11 +0000
Received: from VEGA (port-92-196-126-162.dynamic.qsc.de [92.196.126.162])
	by mail.sd-datasolutions.de (Postfix) with ESMTPSA id 17E5214AA03D
	for <java-user@lucene.apache.org>; Wed, 31 Oct 2012 14:16:50 +0000 (UTC)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <50912AD0.9040300@sirma.bg> <CAL8Pwkay1MQf-uuim0hjOEyY8Ao4CeXVVHRtXdc-kLj4ZzL4bw@mail.gmail.com>
In-Reply-To: <CAL8Pwkay1MQf-uuim0hjOEyY8Ao4CeXVVHRtXdc-kLj4ZzL4bw@mail.gmail.com>
Subject: RE: IntField vs (IntDocValuesField + StoredField)
Date: Wed, 31 Oct 2012 15:16:49 +0100
Message-ID: <025101cdb772$5e6981e0$1b3c85a0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQFsDv6mjLlwAJn8FvJiS5QRSKnOtgJmbMz0mIOTJ1A=
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

And in general, using 1 as precisionStep is not always a good idea - =
size-wise and performance wise. I would use the default of 4.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]
> Sent: Wednesday, October 31, 2012 2:52 PM
> To: java-user@lucene.apache.org
> Subject: Re: IntField vs (IntDocValuesField + StoredField)
>=20
> The big advantage of IntField is you can do NumericRangeQuery/Filter =
on the
> field.
>=20
> Mike McCandless
>=20
> http://blog.mikemccandless.com
>=20
> On Wed, Oct 31, 2012 at 9:42 AM, Ivan Vasilev <ivasilev@sirma.bg> =
wrote:
> > Hy Guys,
> >
> > Is there some advantage in speed or index size to use this:
> >
> > IntDocValuesField fld =3D new IntDocValuesField("fldName", 1);
> > StoredField fld =3D new StoredField("fldName", 1);
> >
> > instead of this:
> >
> > IntField fld =3D new IntField("fld", 1, Field.Store.YES);
> >
> > Searching, sorting and retrieving data from just one object =
(IntField)
> > is easier than dealing with two objects (IntDocValuesField and
> > StoredFiel) for the same field.
> > So as Lucene includes the also latter alternative, there might be =
some
> > advantages using it?
> >
> > Cheers,
> > Ivan
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 31 14:20:04 2012
Return-Path: <java-user-return-53984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 52104D7DA
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 31 Oct 2012 14:20:04 +0000 (UTC)
Received: (qmail 75653 invoked by uid 500); 31 Oct 2012 14:20:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75598 invoked by uid 500); 31 Oct 2012 14:20:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75569 invoked by uid 99); 31 Oct 2012 14:20:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Oct 2012 14:20:01 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of uwe@thetaphi.de designates 188.138.97.18 as permitted sender)
Received: from [188.138.97.18] (HELO mail.sd-datasolutions.de) (188.138.97.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Oct 2012 14:19:54 +0000
Received: from VEGA (port-92-196-126-162.dynamic.qsc.de [92.196.126.162])
	by mail.sd-datasolutions.de (Postfix) with ESMTPSA id D12C314AA03D
	for <java-user@lucene.apache.org>; Wed, 31 Oct 2012 14:19:33 +0000 (UTC)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <50912AD0.9040300@sirma.bg>
In-Reply-To: <50912AD0.9040300@sirma.bg>
Subject: RE: IntField vs (IntDocValuesField + StoredField)
Date: Wed, 31 Oct 2012 15:19:33 +0100
Message-ID: <025201cdb772$c0021890$400649b0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQFsDv6mjLlwAJn8FvJiS5QRSKnOtpiWxt7g
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

The DocValues field is better for sorting, as the values do not need to =
be uninverted. The Field is already written to disk as a big int[] =
array, so sorting using SortField is faster and less memory expensive =
because this structure can be used for sorting.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Ivan Vasilev [mailto:ivasilev@sirma.bg]
> Sent: Wednesday, October 31, 2012 2:43 PM
> To: LUCENE MAIL LIST
> Subject: IntField vs (IntDocValuesField + StoredField)
>=20
> Hy Guys,
>=20
> Is there some advantage in speed or index size to use this:
>=20
> IntDocValuesField fld =3D new IntDocValuesField("fldName", 1); =
StoredField fld
> =3D new StoredField("fldName", 1);
>=20
> instead of this:
>=20
> IntField fld =3D new IntField("fld", 1, Field.Store.YES);
>=20
> Searching, sorting and retrieving data from just one object (IntField) =
is easier
> than dealing with two objects (IntDocValuesField and
> StoredFiel) for the same field.
> So as Lucene includes the also latter alternative, there might be some
> advantages using it?
>=20
> Cheers,
> Ivan
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 31 14:24:00 2012
Return-Path: <java-user-return-53985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8182BD7F2
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 31 Oct 2012 14:24:00 +0000 (UTC)
Received: (qmail 89082 invoked by uid 500); 31 Oct 2012 14:23:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89037 invoked by uid 500); 31 Oct 2012 14:23:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89013 invoked by uid 99); 31 Oct 2012 14:23:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Oct 2012 14:23:57 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.160.48] (HELO mail-pb0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Oct 2012 14:23:51 +0000
Received: by mail-pb0-f48.google.com with SMTP id wy7so1057383pbc.35
        for <java-user@lucene.apache.org>; Wed, 31 Oct 2012 07:23:30 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:x-gm-message-state;
        bh=IQSKKxtQ2Rp5jGY51P3ENEtoNtoRKCeZ1AdEk0jHbN4=;
        b=nx7rEZs/IdH61XtmrzhkkOdp5xRAcH4ch88mNbiiWK+O7DZozVOXqDR+a0D/Uh0W8K
         eK6ZdFZ+z93T+r/aoC7Ldeh+k566gYQCBYyc8NgMQtZmphJodgm/AXOj3G7LkjwLAJZh
         g/8IGPXA5KPYT/ruzqo7asQcF/lH9QL4YHIFmfcSU00qwuD8KrIgloPRbm3y/Hm1iLxQ
         zfyAI2dRk146Y8JXCvnDNr0D5uTQt8APYrX1hjlt2xse5kwBsdjIpt/JXHhCH4sgcOl6
         bf3PMtf5uRROLmkAMUo/jFCXmcssAfafjgJiEchUnGsj/fRCjPUgylVYxz8hRJJogtuN
         o3WQ==
Received: by 10.68.230.234 with SMTP id tb10mr112739877pbc.71.1351693409944;
 Wed, 31 Oct 2012 07:23:29 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.68.152.67 with HTTP; Wed, 31 Oct 2012 07:23:09 -0700 (PDT)
In-Reply-To: <025101cdb772$5e6981e0$1b3c85a0$@thetaphi.de>
References: <50912AD0.9040300@sirma.bg> <CAL8Pwkay1MQf-uuim0hjOEyY8Ao4CeXVVHRtXdc-kLj4ZzL4bw@mail.gmail.com>
 <025101cdb772$5e6981e0$1b3c85a0$@thetaphi.de>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Wed, 31 Oct 2012 10:23:09 -0400
Message-ID: <CAL8PwkZ-TO5fjs4micMFQ3afKVdUjOmzcBT4CMev6qmcXcYQVg@mail.gmail.com>
Subject: Re: IntField vs (IntDocValuesField + StoredField)
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQnkkGzd/yK9GJ5PrvOWxbmecmb+vSzBWSByXHpqAqj3QjL9N7MJosgFcS92eT99/wHeD9Yp
X-Virus-Checked: Checked by ClamAV on apache.org

Uwe, that '1' was the value of the field not the precision step...

And that's a good point about IntDocValues being more efficient for sorting.

Mike McCandless

http://blog.mikemccandless.com

On Wed, Oct 31, 2012 at 10:16 AM, Uwe Schindler <uwe@thetaphi.de> wrote:
> And in general, using 1 as precisionStep is not always a good idea - size-wise and performance wise. I would use the default of 4.
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>> -----Original Message-----
>> From: Michael McCandless [mailto:lucene@mikemccandless.com]
>> Sent: Wednesday, October 31, 2012 2:52 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: IntField vs (IntDocValuesField + StoredField)
>>
>> The big advantage of IntField is you can do NumericRangeQuery/Filter on the
>> field.
>>
>> Mike McCandless
>>
>> http://blog.mikemccandless.com
>>
>> On Wed, Oct 31, 2012 at 9:42 AM, Ivan Vasilev <ivasilev@sirma.bg> wrote:
>> > Hy Guys,
>> >
>> > Is there some advantage in speed or index size to use this:
>> >
>> > IntDocValuesField fld = new IntDocValuesField("fldName", 1);
>> > StoredField fld = new StoredField("fldName", 1);
>> >
>> > instead of this:
>> >
>> > IntField fld = new IntField("fld", 1, Field.Store.YES);
>> >
>> > Searching, sorting and retrieving data from just one object (IntField)
>> > is easier than dealing with two objects (IntDocValuesField and
>> > StoredFiel) for the same field.
>> > So as Lucene includes the also latter alternative, there might be some
>> > advantages using it?
>> >
>> > Cheers,
>> > Ivan
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 31 15:19:23 2012
Return-Path: <java-user-return-53986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5A9FDD998
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 31 Oct 2012 15:19:23 +0000 (UTC)
Received: (qmail 30212 invoked by uid 500); 31 Oct 2012 15:19:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29939 invoked by uid 500); 31 Oct 2012 15:19:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29888 invoked by uid 99); 31 Oct 2012 15:19:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Oct 2012 15:19:17 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [62.213.161.134] (HELO pmx.sirma.bg) (62.213.161.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Oct 2012 15:19:13 +0000
X-Virus-Scanned: Sirma Antivirus System
Received: from [192.168.128.140] (ivasilev.sirma.int [192.168.128.140])
	by pmx.sirma.bg (Sirma mail system) with ESMTP id 1F41F24018
	for <java-user@lucene.apache.org>; Wed, 31 Oct 2012 17:18:51 +0200 (EET)
Message-ID: <5091415A.7070403@sirma.bg>
Date: Wed, 31 Oct 2012 17:18:50 +0200
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Mozilla/5.0 (Windows NT 5.2; rv:16.0) Gecko/20121010 Thunderbird/16.0.1
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: IntField vs (IntDocValuesField + StoredField)
References: <50912AD0.9040300@sirma.bg> <CAL8Pwkay1MQf-uuim0hjOEyY8Ao4CeXVVHRtXdc-kLj4ZzL4bw@mail.gmail.com> <025101cdb772$5e6981e0$1b3c85a0$@thetaphi.de> <CAL8PwkZ-TO5fjs4micMFQ3afKVdUjOmzcBT4CMev6qmcXcYQVg@mail.gmail.com>
In-Reply-To: <CAL8PwkZ-TO5fjs4micMFQ3afKVdUjOmzcBT4CMev6qmcXcYQVg@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Yes the "1" is the value of the field.
Thanks Mike and Uwe.

On 31.10.2012 . 16:23, Michael McCandless wrote:
> Uwe, that '1' was the value of the field not the precision step...
>
> And that's a good point about IntDocValues being more efficient for sorting.
>
> Mike McCandless
>
> http://blog.mikemccandless.com
>
> On Wed, Oct 31, 2012 at 10:16 AM, Uwe Schindler <uwe@thetaphi.de> wrote:
>> And in general, using 1 as precisionStep is not always a good idea - size-wise and performance wise. I would use the default of 4.
>>
>> -----
>> Uwe Schindler
>> H.-H.-Meier-Allee 63, D-28213 Bremen
>> http://www.thetaphi.de
>> eMail: uwe@thetaphi.de
>>
>>> -----Original Message-----
>>> From: Michael McCandless [mailto:lucene@mikemccandless.com]
>>> Sent: Wednesday, October 31, 2012 2:52 PM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: IntField vs (IntDocValuesField + StoredField)
>>>
>>> The big advantage of IntField is you can do NumericRangeQuery/Filter on the
>>> field.
>>>
>>> Mike McCandless
>>>
>>> http://blog.mikemccandless.com
>>>
>>> On Wed, Oct 31, 2012 at 9:42 AM, Ivan Vasilev <ivasilev@sirma.bg> wrote:
>>>> Hy Guys,
>>>>
>>>> Is there some advantage in speed or index size to use this:
>>>>
>>>> IntDocValuesField fld = new IntDocValuesField("fldName", 1);
>>>> StoredField fld = new StoredField("fldName", 1);
>>>>
>>>> instead of this:
>>>>
>>>> IntField fld = new IntField("fld", 1, Field.Store.YES);
>>>>
>>>> Searching, sorting and retrieving data from just one object (IntField)
>>>> is easier than dealing with two objects (IntDocValuesField and
>>>> StoredFiel) for the same field.
>>>> So as Lucene includes the also latter alternative, there might be some
>>>> advantages using it?
>>>>
>>>> Cheers,
>>>> Ivan
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 31 15:41:41 2012
Return-Path: <java-user-return-53987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7E442DA67
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 31 Oct 2012 15:41:41 +0000 (UTC)
Received: (qmail 13433 invoked by uid 500); 31 Oct 2012 15:41:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13368 invoked by uid 500); 31 Oct 2012 15:41:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13343 invoked by uid 99); 31 Oct 2012 15:41:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Oct 2012 15:41:38 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [62.213.161.134] (HELO pmx.sirma.bg) (62.213.161.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Oct 2012 15:41:30 +0000
X-Virus-Scanned: Sirma Antivirus System
Received: from [192.168.128.140] (ivasilev.sirma.int [192.168.128.140])
	by pmx.sirma.bg (Sirma mail system) with ESMTP id C413524018
	for <java-user@lucene.apache.org>; Wed, 31 Oct 2012 17:41:09 +0200 (EET)
Message-ID: <50914695.6020602@sirma.bg>
Date: Wed, 31 Oct 2012 17:41:09 +0200
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Mozilla/5.0 (Windows NT 5.2; rv:16.0) Gecko/20121010 Thunderbird/16.0.1
MIME-Version: 1.0
To: LUCENE MAIL LIST <java-user@lucene.apache.org>
Subject: writer.tryDeleteDocument(..) does not delete document
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hy Guys,

I use as suggested in question "Lucene 4.0 delete by ID" from 29.Oct - 
instead of reader.delete(docID) use - writer.tryDeleteDocument(..) 
method but for some reason it does not work.

My code is:

........
         <Here create an index with 3 docs in it>

         IndexWriterConfig iwc = new 
IndexWriterConfig(Version.LUCENE_40, new 
StandardAnalyzer(Version.LUCENE_40));
         iwc.setOpenMode(OpenMode.APPEND);
         IndexWriter writer = new IndexWriter(indexDir, iwc);
         IndexReader nrtReader = DirectoryReader.open(writer, false); // 
using "true" gives the same result
         writer.tryDeleteDocument(nrtReader, 1); // using 
nrtReader.leaves().get(0).reader() gives the same result (I have only 
one segment)
         nrtReader.close();
         writer.close();

         IndexReader ir = DirectoryReader.open(indexDir);
         System.out.println("ir.numDeletedDocs(): " + ir.numDeletedDocs());
         Bits liveDocs = MultiFields.getLiveDocs(ir);
         System.out.println("liveDocs: " + liveDocs);

         ir.close();
         indexDir.close();
.........................

The output is:

ir.numDeletedDocs(): 0
liveDocs: null

--------------------------

This is just simple test - no merges or adding new docs after creation 
of the index.

I need deleting by Lucene ID because we have Parallel Indexes and when 
deleting document I should delete the related documents from both 
indexes. So when having to delete some document I will have Term(s) that 
are only in one of the indexes of the parallel index and can use 
writer.deleteDocuments(term), but this will not help for the other index 
in same Parallel Index. So I will have to find docs matching the Term(s) 
and delete them in all sub-indexes of the Parallel Index.

Cheers,
Ivan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 31 16:11:44 2012
Return-Path: <java-user-return-53988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2D682DB9D
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 31 Oct 2012 16:11:44 +0000 (UTC)
Received: (qmail 32951 invoked by uid 500); 31 Oct 2012 16:11:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32905 invoked by uid 500); 31 Oct 2012 16:11:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32879 invoked by uid 99); 31 Oct 2012 16:11:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Oct 2012 16:11:41 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.160.48] (HELO mail-pb0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Oct 2012 16:11:36 +0000
Received: by mail-pb0-f48.google.com with SMTP id wy7so1130815pbc.35
        for <java-user@lucene.apache.org>; Wed, 31 Oct 2012 09:11:15 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:x-gm-message-state;
        bh=utzyb1IT10Skv85UoFeI5aetcl/CVtDDxG53WSyK3Qo=;
        b=dKgtyWcm5LcFu44N81b1gCydOo0xsGceC7eaqkLdAKbUZJGfEzNFOskn6oOmqyIS7I
         llnONmDcJNW6yf0sD0oOSBGAQcAsNe50+SaLCvAOc6etza4zJUbEfzK2K3Mrg3NGFYpH
         OwPIJMPIIUW6XeX9uYO4uKTEuHynPEdrjuJH16knwCcjPu2bwyYAxd8FFwPbc5dR31B9
         bQctQAnACKGUb1LDBMCK52giWJ15hHW+oCC+ki8RtmW9qigvu0UqZVhJcINHFB7vIvOx
         XS+x+Bz5rtp91hToX5YVt4d1NMm+H3pO/I/F0HQnlzeMM6hpLMW08tFjQIXUv4whuumU
         JKXQ==
Received: by 10.68.218.132 with SMTP id pg4mr114883756pbc.100.1351699875702;
 Wed, 31 Oct 2012 09:11:15 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.68.152.67 with HTTP; Wed, 31 Oct 2012 09:10:55 -0700 (PDT)
In-Reply-To: <50914695.6020602@sirma.bg>
References: <50914695.6020602@sirma.bg>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Wed, 31 Oct 2012 12:10:55 -0400
Message-ID: <CAL8Pwkb9dhk2+EON0wjH0VcXhaMgAWyvQVrN1JpBy53=Y+swmg@mail.gmail.com>
Subject: Re: writer.tryDeleteDocument(..) does not delete document
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQk8FDVd4tYTQScd/5NfWUKbUkHTklPJ0+2Tt3r5sgQaOpNhTVHEWR/+txs0gXX/PDSfKGfc
X-Virus-Checked: Checked by ClamAV on apache.org

This looks like a real bug!  Thanks for reporting it Ivan ... I'll
open an issue.

Mike McCandless

http://blog.mikemccandless.com

On Wed, Oct 31, 2012 at 11:41 AM, Ivan Vasilev <ivasilev@sirma.bg> wrote:
> Hy Guys,
>
> I use as suggested in question "Lucene 4.0 delete by ID" from 29.Oct -
> instead of reader.delete(docID) use - writer.tryDeleteDocument(..) method
> but for some reason it does not work.
>
> My code is:
>
> ........
>         <Here create an index with 3 docs in it>
>
>         IndexWriterConfig iwc = new IndexWriterConfig(Version.LUCENE_40, new
> StandardAnalyzer(Version.LUCENE_40));
>         iwc.setOpenMode(OpenMode.APPEND);
>         IndexWriter writer = new IndexWriter(indexDir, iwc);
>         IndexReader nrtReader = DirectoryReader.open(writer, false); //
> using "true" gives the same result
>         writer.tryDeleteDocument(nrtReader, 1); // using
> nrtReader.leaves().get(0).reader() gives the same result (I have only one
> segment)
>         nrtReader.close();
>         writer.close();
>
>         IndexReader ir = DirectoryReader.open(indexDir);
>         System.out.println("ir.numDeletedDocs(): " + ir.numDeletedDocs());
>         Bits liveDocs = MultiFields.getLiveDocs(ir);
>         System.out.println("liveDocs: " + liveDocs);
>
>         ir.close();
>         indexDir.close();
> .........................
>
> The output is:
>
> ir.numDeletedDocs(): 0
> liveDocs: null
>
> --------------------------
>
> This is just simple test - no merges or adding new docs after creation of
> the index.
>
> I need deleting by Lucene ID because we have Parallel Indexes and when
> deleting document I should delete the related documents from both indexes.
> So when having to delete some document I will have Term(s) that are only in
> one of the indexes of the parallel index and can use
> writer.deleteDocuments(term), but this will not help for the other index in
> same Parallel Index. So I will have to find docs matching the Term(s) and
> delete them in all sub-indexes of the Parallel Index.
>
> Cheers,
> Ivan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-53989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Oct 31 16:21:13 2012
Return-Path: <java-user-return-53989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4FB3ADBE1
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 31 Oct 2012 16:21:13 +0000 (UTC)
Received: (qmail 70889 invoked by uid 500); 31 Oct 2012 16:21:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70808 invoked by uid 500); 31 Oct 2012 16:21:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70783 invoked by uid 99); 31 Oct 2012 16:21:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Oct 2012 16:21:10 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.220.48] (HELO mail-pa0-f48.google.com) (209.85.220.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Oct 2012 16:21:05 +0000
Received: by mail-pa0-f48.google.com with SMTP id kp12so1124498pab.35
        for <java-user@lucene.apache.org>; Wed, 31 Oct 2012 09:20:45 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:x-gm-message-state;
        bh=1PomXpz/jfbrKlhbZV0wwgTggu0T8hdG6pBj0E5r9BM=;
        b=HbjavR4LX0U7nUZOaeAT3k2MT+sIEtvLg98LZKYdAPdNatrhsk7IWkm5KRUphvT5gj
         /BavG+51tQB/kCB9FsbMm5d2ejU3o0chEKcImNugL3ixsRhrggK93u00wMyT2oymaR7g
         SY3PX+5ql2R34LIl7liZ5A46WIz1TsttdOdegZX/UFU3dRY0YyColDlnUrOIVBZ+LP85
         aWdLgMqtl8ELtGlmrq8jcFfbXFAblaqENt0CF8yjVXOXWnq94I20q03NHKTzRg9j9sW2
         POCnXkp45+ZySvieyU/CzIkXfOyaHgN1s6jw+ct+6o2qrHxGHy3dQaCXWKP3JQF192S6
         PGPg==
Received: by 10.68.218.97 with SMTP id pf1mr4529117pbc.96.1351700445139; Wed,
 31 Oct 2012 09:20:45 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.68.152.67 with HTTP; Wed, 31 Oct 2012 09:20:24 -0700 (PDT)
In-Reply-To: <CAL8Pwkb9dhk2+EON0wjH0VcXhaMgAWyvQVrN1JpBy53=Y+swmg@mail.gmail.com>
References: <50914695.6020602@sirma.bg> <CAL8Pwkb9dhk2+EON0wjH0VcXhaMgAWyvQVrN1JpBy53=Y+swmg@mail.gmail.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Wed, 31 Oct 2012 12:20:24 -0400
Message-ID: <CAL8Pwkb=+=74O6t4onQgfNESuS4LbUz9DCxVSO4aPeA5=178zg@mail.gmail.com>
Subject: Re: writer.tryDeleteDocument(..) does not delete document
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQmQe5aexO2nfsx8wEZ70x2VEAB/KucHmvYsYSHkMtfSLlU/6yQD/t/5QAF++Wo6wDw0zAGL
X-Virus-Checked: Checked by ClamAV on apache.org

I opened https://issues.apache.org/jira/browse/LUCENE-4521 ...

Mike McCandless

http://blog.mikemccandless.com

On Wed, Oct 31, 2012 at 12:10 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
> This looks like a real bug!  Thanks for reporting it Ivan ... I'll
> open an issue.
>
> Mike McCandless
>
> http://blog.mikemccandless.com
>
> On Wed, Oct 31, 2012 at 11:41 AM, Ivan Vasilev <ivasilev@sirma.bg> wrote:
>> Hy Guys,
>>
>> I use as suggested in question "Lucene 4.0 delete by ID" from 29.Oct -
>> instead of reader.delete(docID) use - writer.tryDeleteDocument(..) method
>> but for some reason it does not work.
>>
>> My code is:
>>
>> ........
>>         <Here create an index with 3 docs in it>
>>
>>         IndexWriterConfig iwc = new IndexWriterConfig(Version.LUCENE_40, new
>> StandardAnalyzer(Version.LUCENE_40));
>>         iwc.setOpenMode(OpenMode.APPEND);
>>         IndexWriter writer = new IndexWriter(indexDir, iwc);
>>         IndexReader nrtReader = DirectoryReader.open(writer, false); //
>> using "true" gives the same result
>>         writer.tryDeleteDocument(nrtReader, 1); // using
>> nrtReader.leaves().get(0).reader() gives the same result (I have only one
>> segment)
>>         nrtReader.close();
>>         writer.close();
>>
>>         IndexReader ir = DirectoryReader.open(indexDir);
>>         System.out.println("ir.numDeletedDocs(): " + ir.numDeletedDocs());
>>         Bits liveDocs = MultiFields.getLiveDocs(ir);
>>         System.out.println("liveDocs: " + liveDocs);
>>
>>         ir.close();
>>         indexDir.close();
>> .........................
>>
>> The output is:
>>
>> ir.numDeletedDocs(): 0
>> liveDocs: null
>>
>> --------------------------
>>
>> This is just simple test - no merges or adding new docs after creation of
>> the index.
>>
>> I need deleting by Lucene ID because we have Parallel Indexes and when
>> deleting document I should delete the related documents from both indexes.
>> So when having to delete some document I will have Term(s) that are only in
>> one of the indexes of the parallel index and can use
>> writer.deleteDocuments(term), but this will not help for the other index in
>> same Parallel Index. So I will have to find docs matching the Term(s) and
>> delete them in all sub-indexes of the Parallel Index.
>>
>> Cheers,
>> Ivan
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


